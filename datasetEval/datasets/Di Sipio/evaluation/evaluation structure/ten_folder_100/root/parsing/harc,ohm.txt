b'Ohm\n===\n\n[![Build Status](https://img.shields.io/travis/harc/ohm.svg?style=flat-square)](https://travis-ci.org/harc/ohm)\n[![NPM](https://img.shields.io/npm/v/ohm-js.svg?style=flat-square)](https://www.npmjs.com/package/ohm-js)\n[![Live demo](https://img.shields.io/badge/Live%20demo-%E2%86%92-9D6EB3.svg?style=flat-square)](https://alexwarth.github.io/demos/ohm/index.html)\n\n[Ohm](https://github.com/harc/ohm) is a parser generator consisting of a library and a domain-specific language.\nYou can use it to parse custom file formats or quickly build parsers, interpreters, and compilers for programming languages. The _Ohm language_ is based on [parsing expression grammars](http://en.wikipedia.org/wiki/Parsing_expression_grammar)\n(PEGs), which are a formal way of describing syntax, similar to regular expressions and context-free\ngrammars. The _Ohm library_ provides a JavaScript interface (known as Ohm/JS) for creating parsers,\ninterpreters, and more from the grammars you write.\n\nLike its older sibling [OMeta](http://tinlizzie.org/ometa/), Ohm supports object-oriented grammar\nextension. One thing that distinguishes Ohm from other parsing tools is that it completely\nseparates grammars from semantic actions. In Ohm, a grammar defines a language, and semantic\nactions specify what to do with valid inputs in that language. Semantic actions are written in the\n_host language_ \xe2\x80\x94 e.g., for Ohm/JS, the host language is JavaScript. Ohm grammars, on the other\nhand, work without modification in any host language. This separation improves modularity, and\nmakes both grammars and semantic actions easier to read and understand. Currently, JavaScript is\nthe only host language, but as the API stabilizes, we hope to have implementations for other\nlanguages.\n\nLearn more about the Ohm philosophy [here](doc/philosophy.md).\n\nGetting Started\n---------------\n\nThe easiest way to get started with Ohm is to use the [ohm interactive editor](https://ohmlang.github.io/editor/).  Alternatively, play with one of the following examples on JSFiddle:\n\n- [Basic parsing example](https://jsfiddle.net/pdubroy/p3b1v2xb/)\n- [Arithmetic example with semantics](https://jsfiddle.net/pdubroy/15k63qae/)\n\n### Resources\n\n- There\'s no tutorial yet, but the [math example](examples/math/index.html) is extensively commented and is probably the best place to start.\n- [Examples](examples/)\n- [Documentation](doc/index.md)\n- Ask questions and give us feedback in the [Ohm Google Group](https://groups.google.com/a/ycr.org/forum/#!forum/ohm).\n\n### Installation\n\nFor use in the browser:\n\n-  Download [ohm.js](https://unpkg.com/ohm-js@latest/dist/ohm.js) (development version, with full source and comments) or [ohm.min.js](https://unpkg.com/ohm-js@latest/dist/ohm.min.js) (a minified version for faster page loads).\n-  Add a new script tag to your page, and set the `src` attribute to the path of the file you just downloaded. E.g.:\n    ```html\n    <script src="ohm.js"></script>\n    ```\n\n    This creates a global variable named `ohm`.\n\nIf you are using Node.js, you can just install the `ohm-js` package using [npm](http://npmjs.org):\n\n    npm install ohm-js\n\nThis will install Ohm in the local node_modules folder. Use `require` to access it from a Node script:\n\n```js\nvar ohm = require(\'ohm-js\');\n```\n\n### Basics\n\n#### Defining Grammars\n\n![Instantiating a grammar](http://harc.github.io//ohm/doc/images/instantiating-grammars.png)\n\nTo use Ohm, you need a grammar that is written in the Ohm language. The grammar provides a formal\ndefinition of the language or data format that you want to parse. There are a few different ways\nyou can define an Ohm grammar:\n\n- Define the grammar directly in a JavaScript string and instantiate it using `ohm.grammar()`:\n\n    ```js\n    var myGrammar = ohm.grammar(\'MyGrammar { greeting = "Hello" | "Hola" }\');\n    ```\n\n    This is the simplest option, but it can be awkward to define larger grammars this way.\n\n- **Recommended when running in the browser:** Embed the grammar source inside its own `<script>` tag with the attribute `type="text/ohm-js"`, and instantiate it using `ohm.grammarFromScriptElement()`:\n\n    ```html\n    <script type="text/ohm-js">\n      MyGrammar {\n        greeting = "Hello" | "Hola"\n      }\n    </script>\n    <script>\n      var myGrammar = ohm.grammarFromScriptElement();\n    </script>\n    ```\n\n- **Recommended with Node.js:** Define the grammar in a separate file, read the file\'s contents and instantiate it using `ohm.grammar(contents)`:\n\n    In `myGrammar.ohm`:\n\n        MyGrammar {\n          greeting = "Hello" | "Hola"\n        }\n\n    In JavaScript:\n\n    ```js\n    var fs = require(\'fs\');\n    var ohm = require(\'ohm-js\');\n    var contents = fs.readFileSync(\'myGrammar.ohm\');\n    var myGrammar = ohm.grammar(contents);\n    ```\n\nFor more information, see [Instantiating Grammars](doc/api-reference.md#instantiating-grammars) in the API reference.\n\n#### Using Grammars\n\n![Matching input](http://harc.github.io/ohm/doc/images/matching.png)\n\n<!-- @markscript\n  // The duplication here is required because Markscript only executes top-level code blocks.\n  // TODO: Consider fixing this in Markscript.\n  var ohm = require(\'ohm-js\');\n  var myGrammar = ohm.grammar(\'MyGrammar { greeting = "Hello" | "Hola" }\');\n-->\n\nOnce you\'ve instantiated a grammar object, use the grammar\'s `match()` method to recognize input:\n\n```js\nvar userInput = \'Hello\';\nvar m = myGrammar.match(userInput);\nif (m.succeeded()) {\n  console.log(\'Greetings, human.\');\n} else {\n  console.log("That\'s not a greeting!");\n}\n```\n\nThe result is a MatchResult object. You can use the `succeeded()` and `failed()` methods to see whether the input was recognized or not.\n\nFor more information, see the [main documentation](doc/index.md).\n\n### Debugging\n\nOhm has two tools to help you debug grammars: a text trace, and a graphical visualizer. The\nvisualizer is still under development (i.e., it might be buggy!) but it can still be useful.\n\n[![Ohm Visualizer](http://harc.github.io/ohm/doc/images/visualizer-small.png)](http://harc.github.io/ohm/visualizer/)\n\nYou can [try the visualizer online](https://ohmlang.github.io/editor), or if you have an Ohm checkout, open `visualizer/index.html` in your web browser.\n\nTo see the text trace for a grammar `g`, just use the [`g.trace()`](./doc/api-reference.md#trace)\nmethod instead of `g.match`. It takes the same arguments, but instead of returning a MatchResult\nobject, it returns a Trace object \xe2\x80\x94 calling its `toString` method returns a string describing\nall of the decisions the parser made when trying to match the input. For example, here is the\nresult of `g.trace(\'ab\').toString()` for the grammar `G { start = letter+ }`:\n\n<!-- @markscript\n  markscript.transformNextBlock(function(code) {\n    var trace = ohm.grammar(\'G { start = letter+ }\').trace(\'ab\');\n    assert.equal(trace.toString().trim(), code.trim());\n  });\n-->\n\n```\nab         \xe2\x9c\x93 start \xe2\x87\x92  "ab"\nab           \xe2\x9c\x93 letter+ \xe2\x87\x92  "ab"\nab             \xe2\x9c\x93 letter \xe2\x87\x92  "a"\nab                 \xe2\x9c\x93 lower \xe2\x87\x92  "a"\nab                   \xe2\x9c\x93 Unicode [Ll] character \xe2\x87\x92  "a"\nb              \xe2\x9c\x93 letter \xe2\x87\x92  "b"\nb                  \xe2\x9c\x93 lower \xe2\x87\x92  "b"\nb                    \xe2\x9c\x93 Unicode [Ll] character \xe2\x87\x92  "b"\n               \xe2\x9c\x97 letter\n                   \xe2\x9c\x97 lower\n                     \xe2\x9c\x97 Unicode [Ll] character\n                   \xe2\x9c\x97 upper\n                     \xe2\x9c\x97 Unicode [Lu] character\n                   \xe2\x9c\x97 unicodeLtmo\n                     \xe2\x9c\x97 Unicode [Ltmo] character\n           \xe2\x9c\x93 end \xe2\x87\x92  ""\n```\n\nPublishing Grammars\n-------------------\n\nIf you\'ve written an Ohm grammar that you\'d like to share with others, see\nour [suggestions for publishing grammars](./doc/publishing-grammars.md).\n\nContributing to Ohm\n-------------------\n\nAll you need to get started:\n\n    git clone https://github.com/harc/ohm.git\n    cd ohm\n    npm install\n\n**NOTE:** We recommend using the latest Node.js stable release (>=0.12.1) for\ndevelopment. Some of the JSDOM-based tests are flaky on io.js, and other tests\nwill reliably fail on older versions of Node.\n\n### Some useful scripts\n\n* `npm test` runs the unit tests.\n* `npm run test-watch` re-runs the unit tests every time a file changes.\n* `npm run build` builds [dist/ohm.js](./dist/ohm.js) and [dist/ohm.min.js](./dist/ohm.min.js),\n  which are stand-alone bundles that can be included in a webpage.\n* When editing Ohm\'s own grammar (in `src/ohm-grammar.ohm`), run `npm run bootstrap` to re-build Ohm\n  and test your changes.\n\nBefore submitting a pull request, be sure to add tests, and ensure that `npm run prepublish` runs\nwithout errors.\n'