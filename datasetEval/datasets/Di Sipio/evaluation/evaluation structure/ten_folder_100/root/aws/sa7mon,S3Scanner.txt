b'# S3Scanner\n[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT) [![Build Status](https://travis-ci.org/sa7mon/S3Scanner.svg?branch=master)](https://travis-ci.org/sa7mon/S3Scanner)\n\nA tool to find open S3 buckets and dump their contents :droplet:\n\n![1 - s3finder.py](https://user-images.githubusercontent.com/3712226/40662408-e1d19468-631b-11e8-8d69-0075a6c8ab0d.png)\n\n### If you\'ve earned a bug bounty using this tool, please consider donating to support it\'s development\n\n[![paypal](https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif)](https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=XG5BGLQZPJ9H8)\n\n\n## Usage\n\n<pre>\nusage: s3scanner [-h] [-o OUTFILE] [-d] [-l] [--version] buckets\n\n#  s3scanner - Find S3 buckets and dump!\n#\n#  Author: Dan Salmon - @bltjetpack, github.com/sa7mon\n\npositional arguments:\n  buckets               Name of text file containing buckets to check\n\noptional arguments:\n  -h, --help            show this help message and exit\n  -o OUTFILE, --out-file OUTFILE\n                        Name of file to save the successfully checked buckets in (Default: buckets.txt)\n  -d, --dump            Dump all found open buckets locally\n  -l, --list            Save bucket file listing to local file: ./list-buckets/${bucket}.txt\n  --version             Display the current version of this tool\n</pre>\n\nThe tool takes in a list of bucket names to check. Found S3 buckets are output to file. The tool will also dump or list the contents of \'open\' buckets locally.\n\n### Interpreting Results\n\nThis tool will attempt to get all available information about a bucket, but it\'s up to you to interpret the results.\n\n[Settings available](https://docs.aws.amazon.com/AmazonS3/latest/user-guide/set-bucket-permissions.html) for buckets:\n* Object Access (object in this case refers to files stored in the bucket)\n  * List Objects\n  * Write Objects\n* ACL Access\n  * Read Permissions\n  * Write Permissions\n  \nAny or all of these permissions can be set for the 2 main user groups:\n* Authenticated Users\n* Public Users (those without AWS credentials set)\n* (They can also be applied to specific users, but that\'s out of scope)\n  \n**What this means:** Just because a bucket returns "AccessDenied" for it\'s ACLs doesn\'t mean you can\'t read/write to it.\nConversely, you may be able to list ACLs but not read/write to the bucket\n\n\n## Installation\n  1. (Optional) `virtualenv venv && source ./venv/bin/activate`\n  2. `pip install -r requirements.txt`\n  3. `python ./s3scanner.py`\n\n(Compatibility has been tested with Python 2.7 and 3.6)\n\n### Using Docker\n\n 1. Build the [Docker](https://docs.docker.com/) image:\n\n ```bash\nsudo docker build -t s3scanner https://github.com/sa7mon/S3Scanner.git\n```\n\n 2. Run the Docker image:\n\n ```bash\nsudo docker run -v /input-data-dir/:/data s3scanner --out-file /data/results.txt /data/names.txt\n```\nThis command assumes that `names.txt` with domains to enumerate is in `/input-data-dir/` on host machine.\n\n## Examples\nThis tool accepts the following type of bucket formats to check:\n\n- bucket name - `google-dev`\n- domain name - `uber.com`, `sub.domain.com`\n- full s3 url - `yahoo-staging.s3-us-west-2.amazonaws.com` (To easily combine with other tools like [bucket-stream](https://github.com/eth0izzle/bucket-stream))\n- bucket:region - `flaws.cloud:us-west-2`\n\n```bash\n> cat names.txt\nflaws.cloud\ngoogle-dev\ntesting.microsoft.com\nyelp-production.s3-us-west-1.amazonaws.com\ngithub-dev:us-east-1\n```\n\t\n1. Dump all open buckets, log both open and closed buckets to found.txt\n\t\n\t```bash\n\t> python ./s3scanner.py --include-closed --out-file found.txt --dump names.txt\n\t```\n2. Just log open buckets to the default output file (buckets.txt)\n\n\t```bash\n\t> python ./s3scanner.py names.txt\n\t```\n3. Save file listings of all open buckets to file\n    ```bash\n    > python ./s3scanner.py --list names.txt\n\n    ```\n\n## Contributing\nIssues are welcome and Pull Requests are appreciated. All contributions should be compatible with both Python 2.7 and 3.6.\n\n|    master    |    [![Build Status](https://travis-ci.org/sa7mon/S3Scanner.svg?branch=master)](https://travis-ci.org/sa7mon/S3Scanner)    |\n|:------------:|:-------------------------------------------------------------------------------------------------------------------------:|\n| enhancements | [![Build Status](https://travis-ci.org/sa7mon/S3Scanner.svg?branch=enhancements)](https://travis-ci.org/sa7mon/S3Scanner) |\n|     bugs     |     [![Build Status](https://travis-ci.org/sa7mon/S3Scanner.svg?branch=bugs)](https://travis-ci.org/sa7mon/S3Scanner)     |\n\n### Testing\n* All test are currently in `test_scanner.py`\n* Run tests with in 2.7 and 3.6 virtual environments.\n* This project uses **pytest-xdist** to run tests. Use `pytest -n NUM` where num is number of parallel processes.\n* Run individual tests like this: `pytest -q -s test_scanner.py::test_namehere`\n\n### Contributors\n* [Ohelig](https://github.com/Ohelig)\n* [vysecurity](https://github.com/vysecurity)\n* [janmasarik](https://github.com/janmasarik)\n* [alanyee](https://github.com/alanyee)\n\n## License\nLicense: [MIT](LICENSE.txt) https://opensource.org/licenses/MIT\n'