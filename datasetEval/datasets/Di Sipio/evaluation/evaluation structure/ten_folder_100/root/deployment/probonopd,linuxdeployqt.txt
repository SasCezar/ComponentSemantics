b'# linuxdeployqt [![Build Status](https://travis-ci.org/probonopd/linuxdeployqt.svg?branch=master)](https://travis-ci.org/probonopd/linuxdeployqt) ![Downloads](https://img.shields.io/github/downloads/probonopd/linuxdeployqt/total.svg) [![Codacy Badge](https://api.codacy.com/project/badge/Grade/93b4a359057e412b8a7673b4b61d7cb7)](https://www.codacy.com/app/probonopd/linuxdeployqt?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=probonopd/linuxdeployqt&amp;utm_campaign=Badge_Grade) [![discourse](https://img.shields.io/badge/forum-discourse-orange.svg)](http://discourse.appimage.org/t/linuxdeployqt-new-linux-deployment-tool-for-qt/57) [![Gitter](https://badges.gitter.im/Join%20Chat.svg)](https://gitter.im/probonopd/AppImageKit?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge) [![irc](https://img.shields.io/badge/IRC-%23AppImage%20on%20freenode-blue.svg)](https://webchat.freenode.net/?channels=AppImage)\n\nThis Linux Deployment Tool, `linuxdeployqt`, takes an application as input and makes it self-contained by copying in the resources that the application uses (like libraries, graphics, and plugins) into a bundle. The resulting bundle can be distributed as an AppDir or as an [AppImage](https://appimage.org/) to users, or can be put into cross-distribution packages. It can be used as part of the build process to deploy applications written in C, C++, and other compiled languages with systems like `CMake`, `qmake`, and `make`. When used on Qt-based applications, it can bundle a specific minimal subset of Qt required to run the application.\n\n![](https://user-images.githubusercontent.com/2480569/34471167-d44bd55e-ef41-11e7-941e-e091a83cae38.png)\n\n## Differences to macdeployqt\nThis tool is conceptually based on the [Mac Deployment Tool](http://doc.qt.io/qt-5/osx-deployment.html), `macdeployqt` in the tools applications of the Qt Toolkit, but has been changed to a slightly different logic and other tools needed for Linux.\n\n* Instead of an `.app` bundle for macOS, this produces an [AppDir](http://rox.sourceforge.net/desktop/AppDirs.html) for Linux\n* Instead of a `.dmg` disk image for macOS, this produces an [AppImage](http://appimage.org/) for Linux which is quite similar to a dmg but executes the contained application rather than just opening a window on the desktop from where the application can be launched\n\n## A note on binary compatibility\n\n__To produce binaries that are compatible with many target systems, build on the oldest still-supported build system.__ The oldest still-supported release of Ubuntu is currently targeted, tested and supported by the team. \n\nWe recommend to target the oldest still-supported Ubuntu LTS release and build your applications on that. If you do this, the resulting binaries should be able to run on newer (but not older) systems (Ubuntu and other distributions).\n\nWe do not support linuxdeployqt on systems newer than the oldest Ubuntu LTS release, because we want to encourage developers to build applications in a way that makes them possible to run on all still-supported distribution releases. For an overview about the support cycles of Ubuntu LTS releases, please see https://wiki.ubuntu.com/Releases.\n\n## Installation\n\nPlease download __linuxdeployqt-x86_64.AppImage__ from the [Releases](https://github.com/probonopd/linuxdeployqt/releases) page and `chmod a+x` it. If you would like to build `linuxdeployqt` from source instead, see [BUILDING.md](https://github.com/probonopd/linuxdeployqt/blob/master/BUILDING.md).\n\n## Usage\n\n```\nUsage: linuxdeployqt <app-binary|desktop file> [options]\n\nOptions:\n   -always-overwrite        : Copy files even if the target file exists.\n   -appimage                : Create an AppImage (implies -bundle-non-qt-libs).\n   -bundle-non-qt-libs      : Also bundle non-core, non-Qt libraries.\n   -exclude-libs=<list>     : List of libraries which should be excluded,\n                              separated by comma.\n   -ignore-glob=<glob>      : Glob pattern relative to appdir to ignore when\n                              searching for libraries.\n   -executable=<path>       : Let the given executable use the deployed libraries\n                              too\n   -extra-plugins=<list>    : List of extra plugins which should be deployed,\n                              separated by comma.\n   -no-copy-copyright-files : Skip deployment of copyright files.\n   -no-plugins              : Skip plugin deployment.\n   -no-strip                : Don\'t run \'strip\' on the binaries.\n   -no-translations         : Skip deployment of translations.\n   -qmake=<path>            : The qmake executable to use.\n   -qmldir=<path>           : Scan for QML imports in the given path.\n   -show-exclude-libs       : Print exclude libraries list.\n   -verbose=<0-3>           : 0 = no output, 1 = error/warning (default),\n                              2 = normal, 3 = debug.\n   -updateinformation=<update string>        : Embed update information STRING; if zsyncmake is installed, generate zsync file\n   -version                 : Print version statement and exit.\n\nlinuxdeployqt takes an application as input and makes it\nself-contained by copying in the Qt libraries and plugins that\nthe application uses.\n\nBy default it deploys the Qt instance that qmake on the $PATH points to.\nThe \'-qmake\' option can be used to point to the qmake executable\nto be used instead.\n\nPlugins related to a Qt library are copied in with the library.\n\nSee the "Deploying Applications on Linux" topic in the\ndocumentation for more information about deployment on Linux.\n```\n\n#### Simplest example\n\nYou\'ll need to provide the basic structure of an `AppDir` which should look something like this:\n```\n\xe2\x94\x94\xe2\x94\x80\xe2\x94\x80 usr\n    \xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 bin\n    \xe2\x94\x82\xc2\xa0\xc2\xa0 \xe2\x94\x94\xe2\x94\x80\xe2\x94\x80 your_app\n    \xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 lib\n    \xe2\x94\x94\xe2\x94\x80\xe2\x94\x80 share\n        \xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 applications\n        \xe2\x94\x82\xc2\xa0\xc2\xa0 \xe2\x94\x94\xe2\x94\x80\xe2\x94\x80 your_app.desktop\n        \xe2\x94\x94\xe2\x94\x80\xe2\x94\x80 icons\n            \xe2\x94\x94\xe2\x94\x80\xe2\x94\x80 <theme>\n                \xe2\x94\x94\xe2\x94\x80\xe2\x94\x80 <resolution> \n                    \xe2\x94\x94\xe2\x94\x80\xe2\x94\x80 apps \n                        \xe2\x94\x94\xe2\x94\x80\xe2\x94\x80 your_app.png\n```\nReplace `<theme>` and `<resolution>` with (for example) `hicolor` and `256x256` respectively; see [icon theme spec](https://specifications.freedesktop.org/icon-theme-spec/icon-theme-spec-latest.html) for more details.\n\n\nUsing the desktop file `linuxdeployqt` can determine the parameters of the build.\n\nWhere your desktop file would look something like:\n```\n[Desktop Entry]\nType=Application\nName=Amazing Qt App\nComment=The best Qt Application Ever\nExec=your_app\nIcon=your_app\nCategories=Office;\n```\n\n* Notice that both `Exec` and `Icon` only have file names.\n* Also Notice that the `Icon` entry does not include an extension.\n\nRead more about desktop files in the [Desktop Entry Specification 1.0](https://standards.freedesktop.org/desktop-entry-spec/1.0/).\n\nNow you can say: `linuxdeployqt-continuous-x86_64.AppImage path/to/AppDir/usr/share/applications/your_app.desktop`\n\nFor a more detailed example, see "Using linuxdeployqt with Travis CI" below.\n\n#### Checking library inclusion\n\nOpen in Qt Creator and build your application. Run it from the command line and inspect it with `ldd` to make sure the correct libraries from the correct locations are getting loaded, as `linuxdeployqt` will use `ldd` internally to determine from where to copy libraries into the bundle.\n\n#### QMake configuration\n\n__Important:__ By default, `linuxdeployqt` deploys the Qt instance that qmake on the $PATH points to, so make sure that it is the correct one. Verify that qmake finds the correct Qt instance like this before running the `linuxdeployqt` tool:\n\n```\nqmake -v\n\nQMake version 3.0\nUsing Qt version 5.7.0 in /tmp/.mount_QtCreator-5.7.0-x86_64/5.7/gcc_64/lib\n```\n\nIf this does not show the correct path to your Qt instance that you want to be bundled, then adjust your `$PATH` to find the correct `qmake`.\n\nAlternatively, use the `-qmake` command line option to point the tool directly to the qmake executable to be used.\n\n#### Remove unnecessary files\n\nBefore running linuxdeployqt it may be wise to delete unneeded files that you do not wish to distribute from the build directory. These may be autogenerated during the build. You can delete them like so:\n\n```\nfind $HOME/build-*-*_Qt_* \\( -name "moc_*" -or -name "*.o" -or -name "qrc_*" -or -name "Makefile*" -or -name "*.a" \\) -exec rm {} \\;\n```\n\nAlternatively, you could use `$DESTDIR`.\n\n#### Adding icon and icon theme support\n\nTo enable icon and icon theme support you must add `iconengines` as an extra Qt plugin while running `linuxdeployqt`. In order for your application to locate the system theme icons, the `libqgtk3.so` platform theme must also be added:\n\n`-extra-plugins=iconengines,platformthemes/libqgtk3.so`\n\n#### Adding extra Qt plugins \n\nIf you want aditional plugins which the tool doesn\'t deploy, for a variety of reasons, you can use the -extra-plugins argument and include a list of plugins separated by a comma.  \nThe plugins deployed are from the Qt installation pointed out by `qmake -v`.  \nYou can deploy entire plugin directories, a specific directory or a mix of both.\n\nUsage examples: \n\n1. `-extra-plugins=sqldrivers/libqmsql.so,iconengines/libqsvgicon.so`  \n2. `-extra-plugins=sqldrivers,iconengines/libqsvgicon.so`  \n3. `-extra-plugins=sqldrivers,iconengines,mediaservice,gamepads`\n\n## Using linuxdeployqt with Travis CI\n\nA common use case for `linuxdeployqt` is to use it on Travis CI after the `make` command. The following example illustrates how to use `linuxdeployqt` with Travis CI. Create a `.travis.yml` file similar to this one (be sure to customize it, e.g., change `APPNAME` to the name of your application as it is spelled in the `Name=` entry of the `.desktop` file):\n\n```\nlanguage: cpp\ncompiler: gcc\nsudo: require\ndist: trusty\n\nbefore_install:\n  - sudo add-apt-repository ppa:beineri/opt-qt-5.10.1-trusty -y\n  - sudo apt-get update -qq\n\ninstall:\n  - sudo apt-get -y install qt510base libgl1-mesa-dev\n  - source /opt/qt*/bin/qt*-env.sh\n\nscript:\n  - qmake CONFIG+=release PREFIX=/usr\n  - make -j$(nproc)\n  - make INSTALL_ROOT=appdir -j$(nproc) install ; find appdir/\n  - wget -c -nv "https://github.com/probonopd/linuxdeployqt/releases/download/continuous/linuxdeployqt-continuous-x86_64.AppImage"\n  - chmod a+x linuxdeployqt-continuous-x86_64.AppImage\n  # export VERSION=... # linuxdeployqt uses this for naming the file\n  - ./linuxdeployqt-continuous-x86_64.AppImage appdir/usr/share/applications/*.desktop -appimage\n\nafter_success:\n  # find appdir -executable -type f -exec ldd {} \\; | grep " => /usr" | cut -d " " -f 2-3 | sort | uniq # for debugging\n  # curl --upload-file APPNAME*.AppImage https://transfer.sh/APPNAME-git.$(git rev-parse --short HEAD)-x86_64.AppImage\n  - wget -c https://github.com/probonopd/uploadtool/raw/master/upload.sh\n  - bash upload.sh APPNAME*.AppImage*\n  \nbranches:\n  except:\n    - # Do not build tags that we create when we upload to GitHub Releases\n    - /^(?i:continuous)/\n```\n\nWhen you save your change, then Travis CI should build and upload an AppImage for you. More likely than not, some fine-tuning will still be required.\n\nFor this to work, you need to set up `GITHUB_TOKEN` in Travis CI; please see https://github.com/probonopd/uploadtool.\n\nBy default, qmake `.pro` files generated by Qt Creator unfortunately don\'t support `make install` out of the box. In this case you will get\n\n```\nmake: Nothing to be done for `install\'.\nfind: `appdir/\': No such file or directory\n```\n### Fix for "make: Nothing to be done for \'install\'"\n\nIf `qmake` does not allow for `make install` or does not install the desktop file and icon, then you need to change your `.pro` file it similar to https://github.com/probonopd/FeedTheMonkey/blob/master/FeedTheMonkey.pro.\n\n[Here](https://github.com/ilia3101/MLV-App/issues/17#issuecomment-393507203) is another simple example.\n\nIt is common on Unix to also use the build tool to install applications and libraries; for example, by invoking `make install`. For this reason, `qmake` has the concept of an install set, an object which contains instructions about the way a part of a project is to be installed.\n\nPlease see the section "Installing Files" on http://doc.qt.io/qt-5/qmake-advanced-usage.html.\n\n### For projects that use CMake, autotools, or meson with ninja instead of qmake\n\n```\n  - make INSTALL_ROOT=appdir install ; find appdir/\n```\n\n__CMake__ wants `DESTDIR` instead:\n\n```\n  - cmake . -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr\n  - make -j$(nproc)\n  - make DESTDIR=appdir -j$(nproc) install ; find appdir/\n```\n\nSome applications have the bad habit of relying on CMake versions newer than what comes with the oldest still-supported distributions. In this case, install a newer CMake with\n\n```\n  - sudo rm -rf /usr/bin/cmake /usr/local/cmake-* /usr/local/bin/cmake || true # Needed on Travis CI; don\'t do this on other systems!\n  - wget "https://github.com/Kitware/CMake/releases/download/v3.13.2/cmake-3.13.2-Linux-x86_64.tar.gz" ; sudo tar xf  cmake*.tar.gz --strip-components=1 -C /usr\n```\n\nUnder some circumstances it may also be required to add `-DCMAKE_INSTALL_LIBDIR=/usr/lib` to the `cmake` call.\n\n__autotools__ (the dinosaur that spends precious minutes "checking...") wants `DESTDIR` too but insists on an absolute link which we can feed it using readlink:\n\n```\n  - ./configure --prefix=/usr\n  - make -j$(nproc)\n  - make install DESTDIR=$(readlink -f appdir) ; find appdir/\n```\n\nCaution if you encounter\n\n```\nqmake PREFIX=/usr CONFIG+=use_qt_paths\n```\n\nHere, `CONFIG+=use_qt_paths` needs to be removed, otherwise it will install everything under the Qt installation paths in `/opt/qt58` when using the beineri ppa.\n\nThe exception is that you are building Qt libraries that _should_ be installed to the same location where Qt resides on your system, from where it will be picked up by `linuxdeployqt`.\n\n__meson with ninja__ [apparently](https://github.com/openAVproductions/openAV-Luppp/pull/270/commits/fa160a46d908e57b2c5b7bdb47cb5a089e08c212) wants\n\n```\n  - meson --prefix /usr build\n  - ninja -C build\n  - DESTDIR=./appdir ninja -C build install ; find build/appdir\n```\n\n### When using Qt from distribution packages\n\nOn Ubuntu 14.04, you will need to pass in `-qmake=/usr/lib/x86_64-linux-gnu/qt5/bin/qmake` when using distribution packages.\n\n### A note on DESTDIR\n\nAccording to https://dwheeler.com/essays/automating-destdir.html, \n\n> Automating DESTDIR can be a pain, so it\xe2\x80\x99s best if the program supports it to start with; my package Auto-DESTDIR can automatically support DESTDIR in some cases if the program installation does not support it to begin with.\n\nAlso see https://www.gnu.org/prep/standards/html_node/DESTDIR.html for more information.\n\n### Sending Pull Requests on GitHub\n\n`linuxdeployqt` is great for upstream application projects that want to release their software in binary form to Linux users quickly and without much overhead. If you would like to see a particular application use `linuxdeployqt`, then sending a Pull Request may be an option to get the upstream application project to consider it. You can use the following template text for Pull Requests but make sure to customize it to the project in question.\n\n```\nThis PR, when merged, will compile this application on [Travis CI](https://travis-ci.org/) upon each `git push`, and upload an [AppImage](http://appimage.org/) to your GitHub Releases page.\n\nProviding an [AppImage](http://appimage.org/) would have, among others, these advantages:\n- Applications packaged as an AppImage can run on many distributions (including Ubuntu, Fedora, openSUSE, CentOS, elementaryOS, Linux Mint, and others)\n- One app = one file = super simple for users: just download one AppImage file, [make it executable](http://discourse.appimage.org/t/how-to-make-an-appimage-executable/80), and run\n- No unpacking or installation necessary\n- No root needed\n- No system libraries changed\n- Works out of the box, no installation of runtimes needed\n- Optional desktop integration with `appimaged`\n- Optional binary delta updates, e.g., for continuous builds (only download the binary diff) using AppImageUpdate\n- Can optionally GPG2-sign your AppImages (inside the file)\n- Works on Live ISOs\n- Can use the same AppImages when dual-booting multiple distributions\n- Can be listed in the [AppImageHub](https://appimage.github.io/) central directory of available AppImages\n- Can double as a self-extracting compressed archive with the `--appimage-extract` parameter\n- No repositories needed. Suitable/optimized for air-gapped (offline) machines\n- Decentralized\n\n[Here is an overview](https://appimage.github.io/apps) of projects that are already distributing upstream-provided, official AppImages.\n\n__PLEASE NOTE:__ For this to work, you need to set up `GITHUB_TOKEN` in Travis CI for this to work; please see https://github.com/probonopd/uploadtool.\nIf you would like to see only one entry for the Pull Request in your project\'s history, then please enable [this GitHub functionality](https://help.github.com/articles/configuring-commit-squashing-for-pull-requests/) on your repo. It allows you to squash (combine) the commits when merging.\n\nIf you have questions, AppImage developers are on #AppImage on irc.freenode.net.\n```\n\n## Projects using linuxdeployqt\n\nThese projects are already using [Travis CI](http://travis-ci.org/) and linuxdeployqt to provide AppImages of their builds:\n- https://github.com/probonopd/ImageMagick\n- https://github.com/Subsurface-divelog/subsurface/\n- https://github.com/jimevins/glabels-qt\n- https://travis-ci.org/NeoTheFox/RepRaptor\n- https://github.com/electronpass/electronpass-desktop\n- https://github.com/lirios/browser\n- https://github.com/jeena/FeedTheMonkey\n- https://github.com/labsquare/fastQt/\n- https://github.com/sqlitebrowser/sqlitebrowser/\n- https://github.com/neuro-sys/tumblr-downloader-client\n- https://github.com/LongSoft/UEFITool\n- https://github.com/dannagle/PacketSender\n- https://github.com/nuttyartist/notes\n- https://github.com/leozide/leocad/\n- https://github.com/Blinkinlabs/PatternPaint\n- https://github.com/fathomssen/redtimer\n- https://github.com/coryo/amphetype2\n- https://github.com/chkmue/MyQtTravisTemplateProject\n- https://github.com/chkmue/qttravisCI_1\n- https://github.com/eteran/edb-debugger\n- https://github.com/crapp/labpowerqt/\n- https://github.com/probonopd/linuxdeployqt/ obviously ;-)\n- https://github.com/xdgurl/xdgurl\n- https://github.com/QNapi/qnapi\n- https://github.com/m-o-s-t-a-f-a/dana\n- https://github.com/patrickelectric/mini-qml\n\nThis project is already using linuxdeployqt in a custom Jenkins workflow:\n- https://github.com/appimage-packages/\n\nThese projects are already using linuxdeployqt:\n- Autodesk EAGLE for Linux http://www.autodesk.com/products/eagle/free-download\n- https://github.com/bjorn/tiled/\n- https://github.com/evpo/EncryptPad\n- https://github.com/grahamrow/Muview2\n- https://github.com/freemountain/quark/\n- https://github.com/Mr0815/geraetepruefung/\n\nThis project on GitLab uses linuxdeployqt:\n\n- https://gitlab.com/rpdev/opentodolist\n\nThese can be bundled successfully using linuxdeployqt:\n\n- https://github.com/probonopd/tiled/blob/patch-1/.travis.yml\n- https://gitlab.com/rpdev/opentodolist/issues/96\n\n\n## Contributing\n\nOne great way to contribute is to send Pull Requests to the application projects you\'d like to see use linuxdeployqt, as described above. You are also welcome to contribute to linuxdeployqt development itself. Please discuss in the [forum](http://discourse.appimage.org/t/linuxdeployqt-new-linux-deployment-tool-for-qt/57) or using GitHub issues and Pull Requests.\n\n## Contact\n\nThe developers are in the channel #AppImage on irc.freenode.net\n'