b'# flowerss bot\n\n[![Build Status](https://travis-ci.org/indes/flowerss-bot.svg?branch=master)](https://travis-ci.org/indes/flowerss-bot)\n[![Go Report Card](https://goreportcard.com/badge/github.com/indes/rssflow)](https://goreportcard.com/report/github.com/indes/flowerss-bot)\n![GitHub](https://img.shields.io/github/license/indes/flowerss-bot.svg)\n[![FOSSA Status](https://app.fossa.com/api/projects/git%2Bgithub.com%2Findes%2Fflowerss-bot.svg?type=shield)](https://app.fossa.com/projects/git%2Bgithub.com%2Findes%2Fflowerss-bot?ref=badge_shield)\n\nDEMO: [https://t.me/rssflowbot](https://t.me/rssflowbot)  \n[\xe9\x97\xae\xe9\xa2\x98\xe5\x8f\x8d\xe9\xa6\x88\xe7\xbe\xa4\xe7\xbb\x84](https://t.me/joinchat/FJ-cikd-yN1Bf1SxWbAKjw)\n[Change Log](CHANGELOG.md)\n\n<img src="https://github.com/rssflow/img/raw/master/images/rssflow_demo.gif" width = "300"/>\n\n## Features\n\n- \xe5\xb8\xb8\xe8\xa7\x81\xe7\x9a\x84 RSS Bot \xe8\xaf\xa5\xe6\x9c\x89\xe7\x9a\x84\xe5\x8a\x9f\xe8\x83\xbd\n- \xe6\x94\xaf\xe6\x8c\x81 Telegram \xe5\xba\x94\xe7\x94\xa8\xe5\x86\x85 instant view\n- \xe6\x94\xaf\xe6\x8c\x81\xe4\xb8\xba Group \xe5\x92\x8c Channel \xe8\xae\xa2\xe9\x98\x85 RSS \xe6\xb6\x88\xe6\x81\xaf\n- \xe4\xb8\xb0\xe5\xaf\x8c\xe7\x9a\x84\xe8\xae\xa2\xe9\x98\x85\xe8\xae\xbe\xe7\xbd\xae\n\n## \xe5\xae\x89\xe8\xa3\x85\n\n### Docker \xe9\x83\xa8\xe7\xbd\xb2\n\n```shell\ndocker run -d -v ~/data/flowerss:/var/flowerss indes/flowerss-bot -b <bot token> -t <telegraph token \xe5\x8f\xaf\xe7\x9c\x81\xe7\x95\xa5>\n```\n\n### \xe4\xb8\x8b\xe8\xbd\xbd\xe4\xba\x8c\xe8\xbf\x9b\xe5\x88\xb6\n\n**\xe7\x94\xb1\xe4\xba\x8e GoReleaser \xe4\xb8\x8d\xe6\x94\xaf\xe6\x8c\x81 Cgo\xef\xbc\x8c\xe5\xa6\x82\xe6\x9e\x9c\xe8\xa6\x81\xe4\xbd\xbf\xe7\x94\xa8 SQLite \xe5\x81\x9a\xe4\xb8\xba\xe6\x95\xb0\xe6\x8d\xae\xe5\xba\x93\xef\xbc\x8c\xe8\xaf\xb7\xe4\xb8\x8b\xe8\xbd\xbd\xe6\xba\x90\xe7\xa0\x81\xe8\x87\xaa\xe8\xa1\x8c\xe7\xbc\x96\xe8\xaf\x91\xe3\x80\x82**\n\n\xe4\xbb\x8e [Releases](https://github.com/indes/flowerss-bot/releases) \xe9\xa1\xb5\xe9\x9d\xa2\xe4\xb8\x8b\xe8\xbd\xbd\xe5\xaf\xb9\xe5\xba\x94\xe7\x9a\x84\xe7\x89\x88\xe6\x9c\xac\xe3\x80\x82\n\n### \xe6\xba\x90\xe7\xa0\x81\xe5\xae\x89\xe8\xa3\x85\n\n```shell\ngit clone https://github.com/indes/flowerss-bot && cd flowerss-bot\nmake build\n./flowerss-bot\n```\n\n## \xe9\x85\x8d\xe7\xbd\xae\n\n\xe6\xa0\xb9\xe6\x8d\xae\xe4\xbb\xa5\xe4\xb8\x8b\xe6\xa8\xa1\xe6\x9d\xbf\xef\xbc\x8c\xe6\x96\xb0\xe5\xbb\xba `config.yml` \xe6\x96\x87\xe4\xbb\xb6\xe3\x80\x82\n\n```yml\nbot_token: XXX\n#\xe5\xa4\x9a\xe4\xb8\xaatelegraph_token\xe5\x8f\xaf\xe9\x87\x87\xe7\x94\xa8\xe6\x95\xb0\xe7\xbb\x84\xe6\xa0\xbc\xe5\xbc\x8f\xef\xbc\x9a\n# telegraph_token:\n#  - token_1\n#  - token_2\ntelegraph_token: xxxx\npreview_text: 0\nsocks5: 127.0.0.1:1080\nupdate_interval: 10\nerror_threshold: 100\nmysql:\n  host: 127.0.0.1\n  port: 3306\n  user: user\n  password: pwd\n  database: flowerss\nsqlite:\n  path: ./data.db\n```\n\n\xe9\x85\x8d\xe7\xbd\xae\xe8\xaf\xb4\xe6\x98\x8e\xef\xbc\x9a\n\n| \xe9\x85\x8d\xe7\xbd\xae\xe9\xa1\xb9          | \xe5\x90\xab\xe4\xb9\x89                                      | \xe5\xbf\x85\xe5\xa1\xab                                       |\n| --------------- | ----------------------------------------- | ------------------------------------------ |\n| bot_token       | Telegram Bot Token                        | \xe5\xbf\x85\xe5\xa1\xab                                       |\n| telegraph_token | Telegraph Token, \xe7\x94\xa8\xe4\xba\x8e\xe8\xbd\xac\xe5\xad\x98\xe5\x8e\x9f\xe6\x96\x87\xe5\x88\xb0 Telegraph   | \xe5\x8f\xaf\xe5\xbf\xbd\xe7\x95\xa5\xef\xbc\x88\xe4\xb8\x8d\xe8\xbd\xac\xe5\xad\x98\xe5\x8e\x9f\xe6\x96\x87\xe5\x88\xb0 Telegraph \xef\xbc\x89          |\n| preview_text    | \xe7\xba\xaf\xe6\x96\x87\xe5\xad\x97\xe9\xa2\x84\xe8\xa7\x88\xe5\xad\x97\xe6\x95\xb0\xef\xbc\x88\xe4\xb8\x8d\xe5\x80\x9f\xe5\x8a\xa9Telegraph\xef\xbc\x89            |\xe5\x8f\xaf\xe5\xbf\xbd\xe7\x95\xa5\xef\xbc\x88\xe9\xbb\x98\xe8\xae\xa40, 0\xe4\xb8\xba\xe7\xa6\x81\xe7\x94\xa8\xef\xbc\x89\n| update_interval | RSS \xe6\xba\x90\xe6\x89\xab\xe6\x8f\x8f\xe9\x97\xb4\xe9\x9a\x94\xef\xbc\x88\xe5\x88\x86\xe9\x92\x9f\xef\xbc\x89                      | \xe5\x8f\xaf\xe5\xbf\xbd\xe7\x95\xa5\xef\xbc\x88\xe9\xbb\x98\xe8\xae\xa4 10\xef\xbc\x89                          |\n| error_threshold | \xe6\xba\x90\xe6\x9c\x80\xe5\xa4\xa7\xe5\x87\xba\xe9\x94\x99\xe6\xac\xa1\xe6\x95\xb0                              | \xe5\x8f\xaf\xe5\xbf\xbd\xe7\x95\xa5\xef\xbc\x88\xe9\xbb\x98\xe8\xae\xa4 100\xef\xbc\x89                          |\n| socks5          | \xe7\x94\xa8\xe4\xba\x8e\xe6\x97\xa0\xe6\xb3\x95\xe6\xad\xa3\xe5\xb8\xb8 Telegram API \xe7\x9a\x84\xe7\x8e\xaf\xe5\xa2\x83            | \xe5\x8f\xaf\xe5\xbf\xbd\xe7\x95\xa5\xef\xbc\x88\xe8\x83\xbd\xe6\xad\xa3\xe5\xb8\xb8\xe8\xbf\x9e\xe6\x8e\xa5\xe4\xb8\x8a Telegram API \xe6\x9c\x8d\xe5\x8a\xa1\xe5\x99\xa8\xef\xbc\x89 |\n| mysql           | MySQL \xe6\x95\xb0\xe6\x8d\xae\xe5\xba\x93\xe9\x85\x8d\xe7\xbd\xae                           | \xe5\x8f\xaf\xe5\xbf\xbd\xe7\x95\xa5\xef\xbc\x88\xe4\xbd\xbf\xe7\x94\xa8 SQLite \xef\xbc\x89                     |\n| sqlite          | SQLite \xe9\x85\x8d\xe7\xbd\xae                               | \xe5\x8f\xaf\xe5\xbf\xbd\xe7\x95\xa5\xef\xbc\x88\xe5\xb7\xb2\xe9\x85\x8d\xe7\xbd\xaemysql\xe6\x97\xb6\xef\xbc\x8c\xe8\xaf\xa5\xe9\xa1\xb9\xe5\xa4\xb1\xe6\x95\x88\xef\xbc\x89          |\n\n### Telegraph Token \xe7\x94\xb3\xe8\xaf\xb7\n\n```shell\ncurl https://api.telegra.ph/createAccount?short_name=flowerss&author_name=flowerss&author_url=https://github.com/indes/flowerss-bot\n```\n\n\xe8\xbf\x94\xe5\x9b\x9e\xe7\x9a\x84 JSON \xe4\xb8\xad access_token \xe5\xad\x97\xe6\xae\xb5\xe5\x80\xbc\xe5\x8d\xb3\xe4\xb8\xba Telegraph Token\n\n## \xe4\xbd\xbf\xe7\x94\xa8\n\n\xe5\x91\xbd\xe4\xbb\xa4\xef\xbc\x9a\n\n```shell\n/sub [url] \xe8\xae\xa2\xe9\x98\x85\xef\xbc\x88url \xe4\xb8\xba\xe5\x8f\xaf\xe9\x80\x89\xef\xbc\x89\n/unsub [url] \xe5\x8f\x96\xe6\xb6\x88\xe8\xae\xa2\xe9\x98\x85\xef\xbc\x88url \xe4\xb8\xba\xe5\x8f\xaf\xe9\x80\x89\xef\xbc\x89\n/list \xe6\x9f\xa5\xe7\x9c\x8b\xe5\xbd\x93\xe5\x89\x8d\xe8\xae\xa2\xe9\x98\x85\n/set \xe8\xae\xbe\xe7\xbd\xae\xe8\xae\xa2\xe9\x98\x85\n/import \xe5\xaf\xbc\xe5\x85\xa5 OPML \xe6\x96\x87\xe4\xbb\xb6\n/export \xe5\xaf\xbc\xe5\x87\xba OPML \xe6\x96\x87\xe4\xbb\xb6\n/unsuball \xe5\x8f\x96\xe6\xb6\x88\xe6\x89\x80\xe6\x9c\x89\xe8\xae\xa2\xe9\x98\x85\n/help \xe5\xb8\xae\xe5\x8a\xa9\n```\n\n### Channel \xe8\xae\xa2\xe9\x98\x85\xe4\xbd\xbf\xe7\x94\xa8\xe6\x96\xb9\xe6\xb3\x95\n\n1. \xe5\xb0\x86 Bot \xe6\xb7\xbb\xe5\x8a\xa0\xe4\xb8\xba Channel \xe7\xae\xa1\xe7\x90\x86\xe5\x91\x98\n2. \xe5\x8f\x91\xe9\x80\x81\xe7\x9b\xb8\xe5\x85\xb3\xe5\x91\xbd\xe4\xbb\xa4\xe7\xbb\x99 Bot\n\nChannel \xe8\xae\xa2\xe9\x98\x85\xe6\x94\xaf\xe6\x8c\x81\xe7\x9a\x84\xe5\x91\xbd\xe4\xbb\xa4\xef\xbc\x9a\n\n```\n/sub @ChannelID [url] \xe8\xae\xa2\xe9\x98\x85\n/unsub @ChannelID [url] \xe5\x8f\x96\xe6\xb6\x88\xe8\xae\xa2\xe9\x98\x85\n/list @ChannelID \xe6\x9f\xa5\xe7\x9c\x8b\xe5\xbd\x93\xe5\x89\x8d\xe8\xae\xa2\xe9\x98\x85\n/unsuball @ChannelID \xe5\x8f\x96\xe6\xb6\x88\xe6\x89\x80\xe6\x9c\x89\xe8\xae\xa2\xe9\x98\x85\n```\n\n**ChannelID \xe5\x8f\xaa\xe6\x9c\x89\xe8\xae\xbe\xe7\xbd\xae\xe4\xb8\xba Public Channel \xe6\x89\x8d\xe6\x9c\x89\xe3\x80\x82\xe5\xa6\x82\xe6\x9e\x9c\xe6\x98\xaf Private Channel\xef\xbc\x8c\xe5\x8f\xaf\xe4\xbb\xa5\xe6\x9a\x82\xe6\x97\xb6\xe8\xae\xbe\xe7\xbd\xae\xe4\xb8\xba Public\xef\xbc\x8c\xe8\xae\xa2\xe9\x98\x85\xe5\xae\x8c\xe6\x88\x90\xe5\x90\x8e\xe6\x94\xb9\xe4\xb8\xba Private\xef\xbc\x8c\xe4\xb8\x8d\xe5\xbd\xb1\xe5\x93\x8d Bot \xe6\x8e\xa8\xe9\x80\x81\xe6\xb6\x88\xe6\x81\xaf\xe3\x80\x82**\n\n\xe4\xbe\x8b\xe5\xa6\x82\xe8\xa6\x81\xe7\xbb\x99 t.me/debug \xe9\xa2\x91\xe9\x81\x93\xe8\xae\xa2\xe9\x98\x85 [\xe9\x98\xae\xe4\xb8\x80\xe5\xb3\xb0\xe7\x9a\x84\xe7\xbd\x91\xe7\xbb\x9c\xe6\x97\xa5\xe5\xbf\x97](http://www.ruanyifeng.com/blog/atom.xml) RSS \xe6\x9b\xb4\xe6\x96\xb0\xef\xbc\x9a\n\n1. \xe5\xb0\x86 Bot \xe6\xb7\xbb\xe5\x8a\xa0\xe5\x88\xb0 debug \xe9\xa2\x91\xe9\x81\x93\xe7\xae\xa1\xe7\x90\x86\xe5\x91\x98\xe5\x88\x97\xe8\xa1\xa8\xe4\xb8\xad\n2. \xe7\xbb\x99 Bot \xe5\x8f\x91\xe9\x80\x81 `/sub @debug http://www.ruanyifeng.com/blog/atom.xml` \xe5\x91\xbd\xe4\xbb\xa4\n\n## \xe5\xb8\xb8\xe8\xa7\x81\xe9\x97\xae\xe9\xa2\x98\n* Q\xef\xbc\x9a\xe6\x97\xa5\xe5\xbf\x97\xe4\xb8\xad\xe5\xa4\xa7\xe9\x87\x8f\xe7\xb1\xbb\xe4\xbc\xbc\xe4\xba\x8e`Create telegraph page error: FLOOD_WAIT_7`\xe7\x9a\x84\xe6\x8f\x90\xe7\xa4\xba  \n  A\xef\xbc\x9a\xe5\x8e\x9f\xe5\x9b\xa0\xe6\x98\xaf\xe5\x88\x9b\xe5\xbb\xbatelegraph\xe9\xa1\xb5\xe9\x9d\xa2\xe8\xaf\xb7\xe6\xb1\x82\xe8\xbf\x87\xe5\xbf\xab\xe8\xa7\xa6\xe5\x8f\x91\xe4\xba\x86\xe6\x8e\xa5\xe5\x8f\xa3\xe9\x99\x90\xe5\x88\xb6\xef\xbc\x8c\xe5\x8f\xaf\xe5\xb0\x9d\xe8\xaf\x95\xe5\x9c\xa8\xe9\x85\x8d\xe7\xbd\xae\xe6\x96\x87\xe4\xbb\xb6\xe4\xb8\xad\xe6\xb7\xbb\xe5\x8a\xa0\xe5\xa4\x9a\xe4\xb8\xaatelegraph token\n\n\n### \xe9\x97\xae\xe9\xa2\x98\xe5\x8f\x8d\xe9\xa6\x88\n\n\xe5\xa6\x82\xe6\x9e\x9c\xe4\xbd\xa0\xe5\x9c\xa8\xe4\xbd\xbf\xe7\x94\xa8\xe8\xbf\x87\xe7\xa8\x8b\xe4\xb8\xad\xe9\x81\x87\xe5\x88\xb0\xe9\x97\xae\xe9\xa2\x98\xef\xbc\x8c\xe8\xaf\xb7\xe6\x8f\x90\xe4\xba\xa4 Issue\xef\xbc\x8c\xe6\x88\x96\xe8\x80\x85\xe5\x88\xb0[\xe9\x97\xae\xe9\xa2\x98\xe5\x8f\x8d\xe9\xa6\x88\xe7\xbe\xa4\xe7\xbb\x84](https://t.me/joinchat/FJ-cikd-yN1Bf1SxWbAKjw) \xe5\x8f\x8d\xe9\xa6\x88\xe3\x80\x82\n\n## License\n\n[![FOSSA Status](https://app.fossa.io/api/projects/git%2Bgithub.com%2Findes%2Fflowerss-bot.svg?type=large)](https://app.fossa.io/projects/git%2Bgithub.com%2Findes%2Fflowerss-bot?ref=badge_large)\n'