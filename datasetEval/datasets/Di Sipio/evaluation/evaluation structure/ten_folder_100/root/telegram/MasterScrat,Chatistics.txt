b'# Chatistics\n\n**Python 3 scripts to convert chat logs from various messaging platforms into Panda DataFrames.**\nCan also generate ggplot histograms and word clouds from fetched chat logs.\n\n<p align="center">\n<img src="https://github.com/MasterScrat/Chatistics/raw/master/screenshots/cloud.png" width="400" height="400">\n<img src="https://github.com/MasterScrat/Chatistics/raw/master/screenshots/cloud3.png" width="400" height="400">\n</p>\n\n## Changelog\n\n**21 Oct 2018:** Updated Facebook Messenger and Google Hangouts parsers to make them work with the new exported file formats.\n\n**9 Feb 2018:** Telegram support added thanks to @bmwant.\n\n**24 Oct 2016:** Initial release supporting Facebook Messenger and Google Hangouts.\n\n## Support Matrix\n\n|      Platform         | Direct Chat   | Group Chat    |\n|:------------------:   |:-----------:  |:----------:   |\n| Facebook Messenger    |     \xe2\x9c\x94         |     \xe2\x9c\x94         |\n| Google Hangouts       |     \xe2\x9c\x94         |     \xe2\x9c\x98         |\n| Telegram              |     \xe2\x9c\x94         |     \xe2\x9c\x98         |\n| Whatsapp              |     \xe2\x9c\x98         |     \xe2\x9c\x98         |\n\n## Exported data\n\nData exported for each message regardless of the platform:\n\n|          Column          |                                        Content                                       |\n|:--------------------:|:------------------------------------------------------------------------------------:|\n| timestamp            | UNIX timestamp                                                                       |\n| conversationId       | A conversation ID, unique by platform                                               |\n| conversationWithName | Name of the other people in a direct conversation, **or** name of the group conversation |\n| senderName           | Name of the sender                                                                   |\n| text                 | Text of the message                                                        |\n| language             | Language of the conversation as inferred by [langdetect](https://pypi.python.org/pypi/langdetect)                               |\n| datetime             | The proleptic Gregorian ordinal (= number of days since 01/01/0001)                  |\n\n## How to use it?\n\n### 1. Download your chat logs\n\n#### Google Hangouts\n\nUse Google Takeout: https://takeout.google.com/settings/takeout\n\nRequest an archive containing your Hangouts chat logs. Extract the file called `Hangouts.json` and put it in the `raw` folder of Chatistics.\n\n*Google switched from "Google Talk" to "Google Hangouts" mid-2013. Sadly you will only get your Hangouts logs using Takeout.*\n\n#### Facebook Messenger\n\n1. Go to the "Settings" page: https://www.facebook.com/settings\n2. Click on "Download a copy of your Facebook data" at the bottom of the General section.\n3. Click on "Start My Archive". It will take Facebook a while to generate it.\n4. Once it is done download and extract the archive, then move the `messages` folder in the `raw` folder of Chatistics.\n\n### 2. Parse the logs into DataFrames\n\nInstall the required Python packages:\n\n```\nvirtualenv Chatistics\nsource Chatistics/bin/activate\npip install -r requirements.txt\n```\n\nYou will need to give your own name to the parsers so it can make sense of the conversations. \nUse the exact same format as you have on Messenger or Hangouts.\n\n#### Google Hangouts\n`python parsers/hangouts.py --own-name "John Doe"`\n\n#### Facebook Messenger\n`python parsers/messenger.py --own-name "John Doe"`\n\n#### Telegram\n1. Create your Telegram application to access chat logs ([instructions](https://core.telegram.org/api/obtaining_api_id)).\nYou will need `api_id` and `api_hash`.\n2. Paste these values to `parsers/config.py` into corresponding variables.\n3. Grab your message history data\n`python parsers/telegram.py`\n\nThe pickle files will now be ready for analysis in the `data` folder! \n\nFor more options use the `-h` argument on the parsers.\n\n### 3. Visualise\n\nChatistics can plot the chat logs as histograms, showing how many messages each interlocutor sent. \nIt can also generate word clouds based on word density and a base image.\n\n#### Histograms\n\nPlot all messages with:\n\n`python analyse.py --data data/*`\n\nYou can filter messages as needed:\n\n```\n  --filter-conversation FILTERCONVERSATION\n                        only keep messages sent in a conversation with this sender\n  --filter-sender FILTERSENDER\n                        only keep messages sent by this sender\n  --remove-sender REMOVESENDER\n                        remove messages sent by this sender\n```\n\nEg to see all the messages sent between you and Jane Doe: \n\n`python analyse.py --data data/* --filter-conversation "Jane Doe"`\n\nTo see the messages sent to you by the top 10 people with whom you talk the most:\n\n`python analyse.py --data data/* --remove-sender "Your Name" -n 10`\n\n<img src="https://github.com/MasterScrat/Chatistics/raw/master/screenshots/histo.png" width="701" height="406">\n\nYou can also plot the conversation densities using the `--plot-density` flag.\n\n<img src="https://github.com/MasterScrat/Chatistics/raw/master/screenshots/densities.png" width="705" height="418">\n\n\n#### Word Cloud\n\nYou will need a mask file to render the word cloud. The white bits of the image will be left empty, the rest will be filled with words using the color of the image. [See the WordCloud library documentation](https://github.com/amueller/word_cloud) for more information.\n\n`python cloud.py --data data/* -m img/mask_image.jpg`\n\nYou can filter which messages to use using the same flags as with histograms.\n\n\n## Improvement ideas\n\n* Parsers for more chat platforms: WhatsApp? Pidgin? ...\n* Handle group chats on more platforms.\n* Figure out `OWN_NAME` automatically.\n\nPull requests are welcome!\n\n\n## Troubleshooting\n\n### ValueError: unknown locale: UTF-8\n\nFix with:\n\n```\nexport LC_ALL=en_US.UTF-8\nexport LANG=en_US.UTF-8\n```\n\n### LXML incompatible library\n\n```\nImportError: dlopen(/Users/flaurent/Sites/Chatistics/Chatistics/lib/python2.7/site-packages/lxml/etree.so, 2): Library not loaded: @rpath/libxml2.2.dylib\n  Referenced from: /Users/flaurent/Sites/Chatistics/Chatistics/lib/python2.7/site-packages/lxml/etree.so\n  Reason: Incompatible library version: etree.so requires version 12.0.0 or later, but libxml2.2.dylib provides version 10.0.0\n```\n\nThis will fix it: https://stackoverflow.com/a/31607751/318557\n\n\n### ModuleNotFoundError: No module named \'parsers\'\n\nFix with: \n\n```\nexport PYTHONPATH=$(pwd)\n```\n\n## Misc\n\n* Word cloud generated using https://github.com/amueller/word_cloud\n* Stopwords from https://github.com/6/stopwords-json\n* Code under MIT license\n'