b'# GBot Trader\n\n[![Dependency Status](https://david-dm.org/steeply/gbot-trader.svg)](https://david-dm.org/steeply/gbot-trader)\n\nThis app is working with server maintenance.\n\n## Exchange\n\n* Poloniex\n* Bittrex\n* Exmo\n* Bitfinex\n* Liqui\n* Dsx\n* Binance (Unofficial)  \n* Cex (Unofficial) \n* Cryptopia (Unofficial) \n* Kraken (Unofficial) \n* Yobit (Unofficial) \n* Huobi (Unofficial)\n* Kucoin (Unofficial) \n* Hitbtc (Unofficial) \n* Stex (Unofficial) \n* Bleutrade (Unofficial)\n\n### Unofficial\n* The module on the exchange [Unofficial](https://github.com/unsv/gbotmod) is purchased separately from third-party developers! Telegram - [@solvento](https://t.me/solvento).\n* The modules are running in the DEMO mode does not require a license.\n\n\n## Full version in Russian documentation\n\n[README RU](readme_ru.md)\n\n## FAQ\nBefore asking questions, please read the [FAQ RU](faq_ru.md). Most of the answers you will find in it.\n\n## Install\n\n1. Install [node.js](https://nodejs.org/en/) or use hosting ([heroku](https://signup.heroku.com/login), [pivotal](https://account.run.pivotal.io/z/uaa/sign-up), [UltraVDS](https://ultravds.com), [Zomro](http://zomro.com) and etc.)\n\n2. Copy the repository and install the dependency packages:\n```\n$ git clone https://github.com/steeply/gbot-trader.git\n$ cd gbot-trader\n$ npm i\n```\n\n## Setting\n\n### Telegram. Creating a new bot\n\nIf you use the option **TELEGRAM_OFF**, then this paragraph is not necessary.\n\n[@BotFather](https://core.telegram.org/bots#6-botfather)\n\nUse the **/newbot** command to create a new bot. The BotFather will ask you for a name and username, then generate an authorization token for your new bot.<br />\nThe name of your bot is displayed in contact details and elsewhere.<br>\nThe **Username** is a short name, to be used in mentions and telegram.me links. Usernames are 5-32 characters long and are case insensitive, but may only include Latin characters, numbers, and underscores. Your bot\'s username must end in \xe2\x80\x98bot\xe2\x80\x99, e.g. \xe2\x80\x98trade_bot\xe2\x80\x99 or \xe2\x80\x98TradeBot\xe2\x80\x99.<br />\nThe **token** is a string along the lines of `110201543:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw` that is required to authorize the bot and send requests to the Bot API.\n\n#### The receipt of Telegram ID\n\n1. Set the parameters API Exchange: `EXCHANGE`, `KEY`, `SECRET` and `TELEGRAM_TOKEN`.\n2. Run GBot Trader.\n3. Write your Telegram bot (which you created earlier using [@BotFather](https://core.telegram.org/bots#6-botfather)) any message, you will receive your id number.\n4. Turn Off GBot Trader.\n5. Set the parameters `TELEGRAM_ID`.\n\n\n### Parameters variable environment:\n\n#### Required parameters\n\n Option | Description| Type | Default\n--------|------------|-----|----------\n**KEY**             | API key   | string | -\n**SECRET**          | API secret    | string | -\n**NAME_COIN**       | Trading currency | string | ltc\n**NAME_COIN_TWO**   | Trading currency | string | usd\n**EXCHANGE**        | The choice of the exchange <br> **poloniex** (inverted pairs) <br> **bittrex** (inverted pairs) <br> **exmo** <br> **bitfinex** <br> **liqui** <br> **dsx** | string | -\nEXCHANGE_HOST       | Host exchange API. If the primary host is not available. | string | -\n\n\n\n#### Parameters for Telegram\n\n Option | Description| Type | Default\n--------|------------|-----|----------\nTELEGRAM_TOKEN      | Telegram token    | string | -\nTELEGRAM_ID         | Your User ID Telegram | number | -\nSOCKS5_HOST         | HOST SOCKS5 | string | -\nSOCKS5_PORT         | PORT SOCKS5  | number | 1080\nSOCKS5_USERNAME     | Username SOCKS5 | string | -\nSOCKS5_PASSWORD     | Password SOCKS5 | string | -\nTELEGRAM_OFF        | Disable Telegram | boolean | false\n\n> Option **TELEGRAM_OFF** disables the ability to use Telegram in the bot. All management and all notifications sent via Telegram are the same are disabled!\n\n\nBy default, the bot will work at default settings. You can change them using the following options.\n\n#### Used trade options\n\n Option | Description| Type | Default\n--------|------------|-----|----------\nTIME_UPDATE_AUTO_SETTINGS           | Interval update of auto settings (min) | number | 2\nDEPOSIT_LIMIT                       | Deposit consuming percent or the absolute number<br><br>If an absolute number is specified: the size of the used part of the Deposit in the currency **NAME_COIN_TWO**. <br>For exchanges with inverted currency in the currency of the parameter **NAME_COIN**  | number or string | 100%\nCOUNT_ORDERS                        | Quantity all orders.<br> How many will be installed. | number | Calculated based on deposit amount\nQUANTITY_ORDERS_IN_BLOCKS           | Quantity orders in blocks<br>How many orders will be simultaneously on the market. | number | 0\nHOLD_QUANTITY_ORDERS                | To hold a given number of orders in QUANTITY_ORDERS_IN_BLOCKS <br>(FAQ \xd0\xbf.22) | boolean | true\nGREEDY_FIRST_ORDER_SIZE             | Size of the "zero" order in the traded currency or percentage<br>Format: 0.1 or 5% | number or string | 0\nGREEDY_FIRST_ORDER_SIZE_INSECOND_CURRENCY | Size of the "zero" order in the base currency | number | 0\nSIZE_FIRST_ORDERS                   | The size of the first order in the currency being traded or in percent<br>Example: 0.1 or 5% | string | 0\nSIZE_FIRST_ORDERS_INSECOND_CURRENCY | The size of the first order in the base currency | number | 0\nSIZE_ORDERS_MARTINGALE              | The size of the orders for Martingale  (for Exponential - %, Linear - absolute number)<br>Example: 0.1 or 5% | string or number | 0\nCONTINUE_MARTINGALE_GRID            | To continue the grid Martingale when you restart the bot (**saves the order size**) | boolean | false\nTRADING_PRICE_RANGE                 | Price range allowed for bidding, absolute numbers or percentages. <br>Example: <br>`3000/5000`<br>`10%/20%`<br>`10%`<br>`1000/10%`<br>If not specified, no restrictions<br> | string | -\nTRADING_PRICE_RANGE_OTHER           | Range of prices, another currency pair allowed for trading, absolute numbers or percentages. <br>Example: <br>`3000/5000`<br>`10%/20%`<br>`10%`<br>`1000/10%`<br>If not specified, no restrictions<br> | string | -\nOTHER_PAIR                          | Currency pair to monitor the price range. Specified as well as on the exchange. <br>Example: `btc/usd` | string | -\nIGNORE_ORDERS_AT_START              | Ignore the previously set orders at the start / restart of the bot | boolean | false\nDELAY_TIME_CYCLES                   | Delay in seconds before starting a new cycle <br > * for **One orders**: after execution of a profit order <br > * for **Scalper**: after TIME_CLOSE_ORDERS | number | 0\nSTOP_LOSS_ABS                       | Absolute price value for Stop Loss <br>(FAQ \xd0\xbf.53) | number | 0\nBUY_STOP_ABS                        | Absolute price value for Buy Stop <br>(FAQ \xd0\xbf.53) | number | 0\nSTOP_LOSS_FLOATING                  | Percentage of price drop from High price to trigger a floating Stop Loss | number | 0\n\n**Important!**\n\n> The size of the order for `SIZE_FIRST_ORDERS_INSECOND_CURRENCY` will be calculated by the formula **SIZE_FIRST_ORDERS_INSECOND_CURRENCY / price**\n\n> `SIZE_FIRST_ORDERS` or `SIZE_FIRST_ORDERS_INSECOND_CURRENCY` select **only 1 of the parameters**!\n\n> `GREEDY_FIRST_ORDER_SIZE` or `GREEDY_FIRST_ORDER_SIZE_INSECOND_CURRENCY` select **only 1 of the parameters**!\n\n> With the manual size of the first order **RANGE_OFFSET** does not work, and **COUNT_ORDERS** will be calculated automatically.\n\n\n#### Offset orders\n\nThe possible indentation of the orders. Select one of the offered.\n\n Option | Description| Type | Default\n--------|------------|-----|----------\nOFFSET_FIRST_ORDERS_PERCENT         | Position difference of the first order in % | number | 0\nOFFSET_FIRST_ORDERS_POINTS          | Position difference of the first order in points | number | 0\nOFFSET_ORDERS_POINTS                | Position difference between orders in points | number | 10\nOFFSET_ORDERS_PERCENT               | Position difference between orders in % | number | 0\nOFFSET_ORDERS_EXPONENTIAL           | Position difference between orders is exponentially in % | number | 0\nOFFSET_ORDERS_BLOCK                 | Position difference between orders is blocks in % <br>For example, in the first block orders will be indented 0.2, in the second block 0.4, etc. | number | 0\nRANGE_OFFSET                        | Range offset | number | 0\n\n> Parameter **OFFSET_FIRST_ORDERS_PERCENT** or **OFFSET_FIRST_ORDERS_POINTS** can be used in conjunction with any of the selected options.\n\n> To set the first order in the market, use `OFFSET_FIRST_ORDERS_PERCENT=-1`.\n\n> To limit the maximum indentation for **OFFSET_ORDERS_EXPONENTIAL** use setting **OFFSET_ORDERS_EXPONENTIAL_MAX**. Important! OFFSET_ORDERS_EXPONENTIAL_MAX should be more than OFFSET_ORDERS_EXPONENTIAL.\n\n\n#### Disable orders grid\n\n Option | Description| Type | Default\n--------|------------|-----|----------\nDISABLE_GRID_SELL                   | Disable order placement on the grid for Sell orders | boolean | false\nDISABLE_GRID_BUY                    | Disable order placement on the grid for Buy orders | boolean | false\n\n#### Modules AutoConfig\n\n Option | Description| Type | Default\n--------|------------|-----|----------\nDANGER_PRICE_STOP                   | Bot stopping according to the price spike | boolean | false\nDANGER_PRICE_STOP_PERCENT           | The percentage of the price spike for the bot stopping | number | 9\nDYNAMIC_SETTINGS_TIME               | Dynamic time updating for auto options | boolean | false\nDYNAMIC_OFFSET_ORDERS               | Dynamic order allocation | boolean | false\nDYNAMIC_OFFSET_INTERVAL             | The price check interval for the dynamic grid (in minutes) | number | 60\nDYNAMIC_OFFSET_PROFIT_DIVISOR       | The divisor of the change of the profitable order | number | 10\nDYNAMIC_OFFSET_INDENTION_DIVISOR    | Dividing the grid size | number | COUNT_ORDERS\nTREND_DEFINITION                    | Trend determination (Experimentally) | boolean | false\nABRUPT_CHANGE_TREND                 | Rapid trend reversal (Experimentally) | boolean | false\nOFF_MODULES_AUTO_SETTINGS           | Disabling all Autotune Modules | boolean | false\n\n> Options **TREND_DEFINITION** **ABRUPT_CHANGE_TREND** only for strategy Scalper.\n\n> The option **OFF_MODULES_AUTO_SETTINGS** controls DANGER_PRICE_STOP, DYNAMIC_SETTINGS_TIME, DYNAMIC_OFFSET_ORDERS, TREND_DEFINITION, ABRUPT_CHANGE_TREND\n\n\n## Individual parameters strategies\n**All the strategies are mutually exclusive. If no strategy is selected, use the strategy of "Scalper"**.\n\n#### Strategy "Scalper" and "Bollinger Bands"\n\n Option | Description| Type | Default\n--------|------------|-----|----------\nTIME_CLOSE_ORDERS                   | Closing time of unused orders (min) | number | 5\nTIME_CLOSE_ORDERS_INACTIVITY        | Closing time of undemanded orders (min) | number | 15\n\n\n###  Strategy "Scalper"\n\n Option | Description|Type | Default\n--------|------------|-----|----------\nTYPE_SCALPER                        | Scalper type of work. Value: 1 or 2 | number | 1\nSTEP_BREAKEVEN_PERCENT              | Only for `TYPE_SCALPER=1`<br>Percentage of breakeven | number | 50\nTRADING_AMOUNT_RANGE                | Range of random order size<br> Values are specified in the format **start/end** of the range. | string | -\n\n> When using `TRADING_AMOUNT_RANGE`, the parameters `COUNT_ORDERS`, `SIZE_ORDERS_MARTINGALE`, `SIZE_FIRST_ORDERS_*`, etc. do not make sense and will be ignored.\n\n\n#### Strategy "Bollinger Bands"\n\n Option | Description| Type | Default\n--------|------------|-----|----------\nBBANDS                              | Bollinger Bands (Trend strategy!) | boolean | false\nBBANDS_DEVIATION                    | Deviation | number | 2\nBBANDS_PERIOD                       | Period BBANDS | number | 20\nRSI_TYPE                            | rsi or stochrsi | string | rsi\nRSI_PERIOD                          | Period RSI | number | 14\nRSI_RANGE_SELL                      | RSI range for sell <br> Values are specified in the format **start/end** of the range. | string | 70/100\nRSI_RANGE_BUY                       | RSI range for buy | string | 1/30\nTIMEFRAME                           | Time-frame. Interval of interrogation of the prices (minutes) | number | 1\nCLOSE_GRID_OPPOSITE                 | Closes the opposite orders grid | boolean | false\nSAVE_PRICE_FILE                     | Save price cache to a file  | boolean | false\nPRICE_FILE_PATH                     | A custom path to the directory with the file | string | Folder with bot\n\n> If `RSI_PERIOD = 0`, then the indicator is disabled and trading occurs only on the BBANDS indicator!\n\n> If you use the `SAVE_PRICE_FILE` option, you need write access to the directory. Note that if you run the bot and the real **market prices are different from those in the** file, the original orders may get wrong and **sell at a loss!**\n\n> The parameter `SAVE_PRICE_FILE` **will not work** on PaaS platforms (Heroku, Pivotal and any other platforms where container virtualization tools are used)!\n\n#### Strategy "One Orders"\n**When you start the strategy of "Sell One, Buy a lot" the initial state of the balance of the base currency in the pair is ignored!**\n\n\n Option | Description| Type | Default\n--------|------------|-----|----------\nONE_ORDERS_SELL                     | Strategy: "One Sell a lot Buy" | boolean | false\nONE_ORDERS_BUY                      | Strategy: "One Buy a lot Sell" | boolean | false\nONE_ORDERS_OFFSET                   | The difference between LastPrice and first order in the stack of orders in %. <br> Will pull the order, if this value is exceeded. | number | 2\nONE_ORDERS_PROFIT_PERCENT           | Specifies the percentage desired profit <br>May take a fixed value, and range min/max | string or number | 1\nONE_ORDERS_SPO_PERCENT              | Sets the percentage of the desired profit when the price jumps. | number | 0\nINTEGRITY_CONTROL_ORDERS            | Integrity control orders (**soft** or **hard**) | string | soft\nTYPE_DATA_USED                      | Where to get information about the used orders: <br>  **active** - active orders <br> **history** - active orders + trading history | string | active\nFIRST_LOADING_HISTORY               | Download the history when you start the bot | boolean | false\nNUMBER_ROWS_LOAD_HISTORY            | Number of rows to load history | number | 100\nLOAD_HISTORY_DAYS                   | The number of days of history<br>While only used for Poloniex | number | 30\nSAVE_HISTORY                        | Save a copy of history to your computer | boolean | false\nCYCLES_AUTO_EXIT                    | How many cycles to make the exit | number | 0\nAUTO_EXIT_PERCENT                   | How much percentage should the price move away from the last profit of the order to complete the current cycle. <br>(FAQ \xd0\xbf.62) | number | 0\nSTOP_LOSS_PERCENT                   | Stop Loss percentage | number | 0\nBUY_STOP_PERCENT                    | Buy Stop percentage | number | 0\nTRAILING_STOP_PERCENT               | Trailing stop percentage | number | 0\nTRAILING_GRID_PERCENT               | Trailing grid percentage | number | 0\nDISABLE_CAPITALIZATION              | Disable capitalization in profit order | boolean | false\nCAPITALIZATION_BUY_ORDER            | Includes partial capitalization of Buy orders in DISABLE_CAPITALIZATION | boolean | false\nSTRATEGY_AUTO_REVERS                | Auto switching strategy to reverse | boolean | false\nOFFSET_LAST_ORDER_PERCENT           | The percentage of the price distance from the last order to enable auto-switching of strategy | number | 5\nPERMANENT_DEPOSIT                   | Use the total deposit calculation together with the trades history | boolean | false\nPRICE_TRADING_TYPE_CHANGE           | Price at which the trade type will change (Absolute value and percentage)<br>Format: `number` or `low/high`<br>Example: <br>`3000`<br>`3000/5000`<br>`10%/20%`<br>`10%`<br>`1000/10%`<br>(FAQ \xd0\xbf.58)  | number or string | -\n\n> If the parameter **INTEGRITY_CONTROL_ORDERS** in `hard` mode, then a sell order will be installed only if the volume installed and executed buy orders will be the same.\n\n> If the parameter **FIRST_LOADING_HISTORY** included, will be loaded into the cache the first `NUMBER_ROWS_LOAD_HISTORY` BUY orders before the first SELL order for the selected pair and put a SELL order on the basis of these data.\n\n> Option **DISABLE_CAPITALIZATION=true** activates `INTEGRITY_CONTROL_ORDERS` on **hard**.\n\n\n#### Additional options\n\n### Notifications\n\n Option | Description| Type | Default\n--------|------------|-----|----------\nNOTIFICATION_PAIR                   | Notification pair of rate changing (For example: `btc/usd, ltc/usd` or **all/all** for all pair) | string | -\nNOTIFICATION_DEVIATION_PERCENT      | In what percentage should the price spike for the notification to work | number | 5\nMONITORING_PAIR                     | Pairs for monitoring. <br> (For example: `btc/usd, ltc/usd`, or just a pair currency, for example: `btc`). <br> If none of that is set, ALL available pairs will be monitored on the exchange. | string | All pairs\nNOTIFICATION_ERROR_COUNT            | The number of errors in 5 minutes for notification | number | 0\nNOTIFICATION_ORDER_IS_EXECUTED      | Notice of execution of one orders | boolean | false\nNOTIFICATION_END_GRID               | Notification of the end of the order grid. Notification will be sent if there are less than 3 orders left | boolean | false\n\n\n### Email Error Notification\n\n Option | Description| Type | Default\n--------|------------|-----|----------\nEMAIL_REPORT_ADDRESS        | Email for notifications of network incidences and errors  | string | -\nHOST_SMTP                   | Mail server address   | string | smtp.yandex.ru\nEMAIL_AUTH_USER             | Authorization login of the mail server | string | -\nEMAIL_AUTH_PASS             | Mail server password | string | -\n\n\n### Log\n\n Option | Description|Type | Default\n--------|------------|-----|----------\nLOG                         | Calculating log output of auto settings | boolean | false\nLOG_DEBUG                   | The output of the debug log | boolean | false\nLOG_TRANSPORTS              | Where to write the log: <br>  0 - console <br>  1 - file <br>  2 - console and file | number | 0 \nLOG_PATH                    | A custom path to the directory with the log | string | Folder with bot\nLOG_TREE                    | Save logs by directory year/month/day | boolean | false\n\n\n### Error processing\n\n Option | Description|Type | Default\n--------|------------|-----|----------\nNUMBER_CHECK_DATA           | How many times to check the data. <br> Use the value 2 or more. <br> 0 - off | number | 0\nAUTO_RESTART_HANGING        | Auto-restart of the worker in case of his hangup (error message: "Worker does not meet" ) | boolean | true\nRESTART_TRADER_TIME         | How many seconds to wait before re-querying the data after network errors | number | 5\n\n\n### Other parameters\n\n Option | Description| Type | Default\n--------|------------|-----|----------\nTIME_ZONE                   | Time zone [Database Time Zones](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones) | string | Asia/Yekaterinburg\nEXCHANGE_FEE                | The Commission for transactions of the exchange | number | 0.25\nDELAY_REQUEST_API           | The delay of requests to the API in milliseconds | number | 200\nDELAY_BETWEEN_MODULES       | Then delay in seconds between execution of consecutive modules. | number | 3\nTITLE                       | The title of the console window. | string | GBot\nLANGUAGE                    | The language of the interface (`ru` or `en`) | string | ru\nNODE_ENV                    | Value **production** activate:<br> 1. error notifications by E-mail.<br> 2. prohibits the use of conf-dev.js.<br> 3. disabling colors in logs.<br>4. disables TITLE | string | dev\nBOT_TRADE                   | Allow trading | boolean | true\nURL_STATISTICS              | URL of the server where the statistics will be sent in post json format | string | -\nREPEAT_COMMAND_ACTION       | Will duplicate command to install/re-opening to fully execute the commands /sell_all, /buy_all, stop_loss, etc  | boolean | false\n\n**Important:**\n\n* If you\'ve changed LANGUAGE send a command `/start` in Telegram bot for a new language initialization in Telegram\n\n\n### The settings for the DEMO module.\n\nTo enable the Demo module and emulate the trades select the option `EXCHANGE=demo`.\n\n Option | Description|Type | Default\n--------|------------|-----|----------\nDEMO_EXCHANGE       | The choice of the exchange to emulate | string | -\nBALANCE_COIN        | Virtual balance of the first coin | number | -\nBALANCE_COIN_TWO    | The virtual balance of the second coin | number | -\n\n\n## Run\n\n```\n$ npm start\n```\n\nFor **Windows**\n\nCreate a **start.bat** file, specify the necessary parameters in it and run this file.\n```\nSET TELEGRAM_TOKEN=110201543:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw \nSET TELEGRAM_ID=12345678\n\nSET DEPOSIT_LIMIT=80%%\n\n....\n\nnpm start\npause\n```\n\n**Attention!**\n\nThe percentages settings for Windows are specified by a double percent sign (%%)\n\n\n\nFor **Linux and Mac**\n\nCreate a **start.sh** file, specify the necessary parameters in it and run this file.\n```\nexport TELEGRAM_TOKEN=110201543:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw \nexport TELEGRAM_ID=12345678\n\nexport DEPOSIT_LIMIT=80%\n\n...\n\nnode ./build/server\n```\n\nFor **Heroku**\n\n```\nheroku ps:scale web=0\nheroku ps:scale worker=1\n```\n\nTo **launch the control panel** in a Telegram, send a message to:\n```\n/start\n```\n\n#### Additional commands in Telegram:\n```\n/info               - list of all commands\n\n/version            - The version of the bot\n/params             - Parameters which can be changed via Telegram\n/params_no_comment\n/martin [cache]     - A theoretical calculation of the orders of the martingale (parameters are taken from config)\n/ticker coin_name   - Shows a quote of a pair coin_name\n/trade              - Switches to the specified trading pair\n/stop [codeExit]    - The application shutsdown. codeExit - an optional exit code.\n/sell_all           - Sell on the market immediately. (Attention: The sale will be made without confirmation!)\n/buy_all            - Buy on the market immediately. (Attention: The buy will be made without confirmation!)\n/restart            - Restart GBot Trader\n/stats              - Trading statistics\n/note [ignore text] - The text in this line will be ignored. It can be used as a comment.\n/stoplossfloating   - Displays Stop Loss Floating information\n/stoploss           - Displays StopLoss information\n/buystop            - Displays BuyStop information\n/trail              - Displays Trailing Stop information\n/getbalance         - Displays the start balance\n/setbalance number  - Sets the starting balance\n/addbalance number  - Add coins to the starting balance\n\n```\n\n'