b'BitShares Core\n==============\n\n[Build Status](https://travis-ci.org/bitshares/bitshares-core/branches):\n\n`master` | `develop` | `hardfork` | `testnet` | `bitshares-fc` \n --- | --- | --- | --- | ---\n [![](https://travis-ci.org/bitshares/bitshares-core.svg?branch=master)](https://travis-ci.org/bitshares/bitshares-core) | [![](https://travis-ci.org/bitshares/bitshares-core.svg?branch=develop)](https://travis-ci.org/bitshares/bitshares-core) | [![](https://travis-ci.org/bitshares/bitshares-core.svg?branch=hardfork)](https://travis-ci.org/bitshares/bitshares-core) | [![](https://travis-ci.org/bitshares/bitshares-core.svg?branch=testnet)](https://travis-ci.org/bitshares/bitshares-core) | [![](https://travis-ci.org/bitshares/bitshares-fc.svg?branch=master)](https://travis-ci.org/bitshares/bitshares-fc) \n\n\n* [Getting Started](#getting-started)\n* [Support](#support)\n* [Using the API](#using-the-api)\n* [Accessing restricted API\'s](#accessing-restricted-apis)\n* [FAQ](#faq)\n* [License](#license)\n\nBitShares Core is the BitShares blockchain implementation and command-line interface.\nThe web browser based wallet is [BitShares UI](https://github.com/bitshares/bitshares-ui).\n\nVisit [BitShares.org](https://bitshares.org/) to learn about BitShares and join the community at [BitSharesTalk.org](https://bitsharestalk.org/).\n\nInformation for developers can be found in the [Bitshares Developer Portal](https://dev.bitshares.works/). Users interested in how bitshares works can go to the [BitShares Documentation](https://how.bitshares.works/) site.\n\nFor security issues and bug bounty program please visit [Hack the DEX](https://hackthedex.io).\n\nGetting Started\n---------------\nBuild instructions and additional documentation are available in the\n[wiki](https://github.com/bitshares/bitshares-core/wiki).\n\nWe recommend building on Ubuntu 16.04 LTS (64-bit) \n\n**Build Dependencies:**\n\n    sudo apt-get update\n    sudo apt-get install autoconf cmake make automake libtool git libboost-all-dev libssl-dev g++ libcurl4-openssl-dev\n\n**Build Script:**\n\n    git clone https://github.com/bitshares/bitshares-core.git\n    cd bitshares-core\n    git checkout master # may substitute "master" with current release tag\n    git submodule update --init --recursive\n    cmake -DCMAKE_BUILD_TYPE=RelWithDebInfo .\n    make\n\n**Upgrade Script:** (prepend to the Build Script above if you built a prior release):\n\n    git remote set-url origin https://github.com/bitshares/bitshares-core.git\n    git checkout master\n    git remote set-head origin --auto\n    git pull\n    git submodule update --init --recursive # this command may fail\n    git submodule sync --recursive\n    git submodule update --init --recursive\n\n**NOTE:** Versions of [Boost](http://www.boost.org/) 1.58 through 1.69 are supported. Newer versions may work, but\nhave not been tested. If your system came pre-installed with a version of Boost that you do not wish to use, you may\nmanually build your preferred version and use it with BitShares by specifying it on the CMake command line.\n\nExample: ``cmake -DBOOST_ROOT=/path/to/boost .``\n\n**NOTE:** BitShares requires a 64-bit operating system to build, and will not build on a 32-bit OS.\n\n**NOTE:** BitShares now supports Ubuntu 18.04 LTS\n\n**NOTE:** BitShares now supports OpenSSL 1.1.0\n\n**After Building**, the `witness_node` can be launched with:\n\n    ./programs/witness_node/witness_node\n\nThe node will automatically create a data directory including a config file. It may take several hours to fully synchronize\nthe blockchain. After syncing, you can exit the node using Ctrl+C and setup the command-line wallet by editing\n`witness_node_data_dir/config.ini` as follows:\n\n    rpc-endpoint = 127.0.0.1:8090\n\n**IMPORTANT:** By default the witness node will start in reduced memory mode by using some of the commands detailed in [Memory reduction for nodes](https://github.com/bitshares/bitshares-core/wiki/Memory-reduction-for-nodes).\nIn order to run a full node with all the account history you need to remove `partial-operations` and `max-ops-per-account` from your config file. Please note that currently(2018-10-17) a full node will need more than 160GB of RAM to operate and required memory is growing fast. Consider the following table as minimal requirements before running a node:\n\n| Default | Full | Minimal  | ElasticSearch \n| --- | --- | --- | ---\n| 100G HDD, 16G RAM | 640G SSD, 64G RAM * | 80G HDD, 4G RAM | 500G SSD, 32G RAM\n\n\\* For this setup, allocate at least 500GB of SSD as swap.\n\nAfter starting the witness node again, in a separate terminal you can run:\n\n    ./programs/cli_wallet/cli_wallet\n\nSet your inital password:\n\n    >>> set_password <PASSWORD>\n    >>> unlock <PASSWORD>\n\n**IMPORTANT:** The cli_wallet or API interfaces to the witness node wouldn\'t be fully functional unless the witness node is fully synchronized with the blockchain. The cli_wallet command `info` will show result `head_block_age` which will tell you how far you are from the live current block of the blockchain.\n\n\nTo check your current block:\n\n    >>> info\n\nTo import your initial balance:\n\n    >>> import_balance <ACCOUNT NAME> [<WIF_KEY>] true\n\nIf you send private keys over this connection, `rpc-endpoint` should be bound to localhost for security.\n\nUse `help` to see all available wallet commands. Source definition and listing of all commands is available\n[here](https://github.com/bitshares/bitshares-core/blob/master/libraries/wallet/include/graphene/wallet/wallet.hpp).\n\nSupport\n-------\nTechnical support is available in the [BitSharesTalk technical support subforum](https://bitsharestalk.org/index.php?board=45.0).\n\nBitShares Core bugs can be reported directly to the [issue tracker](https://github.com/bitshares/bitshares-core/issues).\n\nBitShares UI bugs should be reported to the [UI issue tracker](https://github.com/bitshares/bitshares-ui/issues)\n\nUp to date online Doxygen documentation can be found at [Doxygen](https://bitshares.org/doxygen/hierarchy.html)\n\nUsing the API\n-------------\n\nWe provide several different API\'s.  Each API has its own ID.\nWhen running `witness_node`, initially two API\'s are available:\nAPI 0 provides read-only access to the database, while API 1 is\nused to login and gain access to additional, restricted API\'s.\n\nHere is an example using `wscat` package from `npm` for websockets:\n\n    $ npm install -g wscat\n    $ wscat -c ws://127.0.0.1:8090\n    > {"id":1, "method":"call", "params":[0,"get_accounts",[["1.2.0"]]]}\n    < {"id":1,"result":[{"id":"1.2.0","annotations":[],"membership_expiration_date":"1969-12-31T23:59:59","registrar":"1.2.0","referrer":"1.2.0","lifetime_referrer":"1.2.0","network_fee_percentage":2000,"lifetime_referrer_fee_percentage":8000,"referrer_rewards_percentage":0,"name":"committee-account","owner":{"weight_threshold":1,"account_auths":[],"key_auths":[],"address_auths":[]},"active":{"weight_threshold":6,"account_auths":[["1.2.5",1],["1.2.6",1],["1.2.7",1],["1.2.8",1],["1.2.9",1],["1.2.10",1],["1.2.11",1],["1.2.12",1],["1.2.13",1],["1.2.14",1]],"key_auths":[],"address_auths":[]},"options":{"memo_key":"GPH1111111111111111111111111111111114T1Anm","voting_account":"1.2.0","num_witness":0,"num_committee":0,"votes":[],"extensions":[]},"statistics":"2.7.0","whitelisting_accounts":[],"blacklisting_accounts":[]}]}\n\nWe can do the same thing using an HTTP client such as `curl` for API\'s which do not require login or other session state:\n\n    $ curl --data \'{"jsonrpc": "2.0", "method": "call", "params": [0, "get_accounts", [["1.2.0"]]], "id": 1}\' http://127.0.0.1:8090/rpc\n    {"id":1,"result":[{"id":"1.2.0","annotations":[],"membership_expiration_date":"1969-12-31T23:59:59","registrar":"1.2.0","referrer":"1.2.0","lifetime_referrer":"1.2.0","network_fee_percentage":2000,"lifetime_referrer_fee_percentage":8000,"referrer_rewards_percentage":0,"name":"committee-account","owner":{"weight_threshold":1,"account_auths":[],"key_auths":[],"address_auths":[]},"active":{"weight_threshold":6,"account_auths":[["1.2.5",1],["1.2.6",1],["1.2.7",1],["1.2.8",1],["1.2.9",1],["1.2.10",1],["1.2.11",1],["1.2.12",1],["1.2.13",1],["1.2.14",1]],"key_auths":[],"address_auths":[]},"options":{"memo_key":"GPH1111111111111111111111111111111114T1Anm","voting_account":"1.2.0","num_witness":0,"num_committee":0,"votes":[],"extensions":[]},"statistics":"2.7.0","whitelisting_accounts":[],"blacklisting_accounts":[]}]}\n\nAPI 0 is accessible using regular JSON-RPC:\n\n    $ curl --data \'{"jsonrpc": "2.0", "method": "get_accounts", "params": [["1.2.0"]], "id": 1}\' http://127.0.0.1:8090/rpc\n\nAccessing restricted API\'s\n--------------------------\n\nYou can restrict API\'s to particular users by specifying an `api-access` file in `config.ini` or by using the `--api-access /full/path/to/api-access.json` startup node command.  Here is an example `api-access` file which allows\nuser `bytemaster` with password `supersecret` to access four different API\'s, while allowing any other user to access the three public API\'s\nnecessary to use the wallet:\n\n    {\n       "permission_map" :\n       [\n          [\n             "bytemaster",\n             {\n                "password_hash_b64" : "9e9GF7ooXVb9k4BoSfNIPTelXeGOZ5DrgOYMj94elaY=",\n                "password_salt_b64" : "INDdM6iCi/8=",\n                "allowed_apis" : ["database_api", "network_broadcast_api", "history_api", "network_node_api"]\n             }\n          ],\n          [\n             "*",\n             {\n                "password_hash_b64" : "*",\n                "password_salt_b64" : "*",\n                "allowed_apis" : ["database_api", "network_broadcast_api", "history_api"]\n             }\n          ]\n       ]\n    }\n\nPasswords are stored in `base64` as salted `sha256` hashes.  A simple Python script, `saltpass.py` is avaliable to obtain hash and salt values from a password.\nA single asterisk `"*"` may be specified as username or password hash to accept any value.\n\nWith the above configuration, here is an example of how to call `add_node` from the `network_node` API:\n\n    {"id":1, "method":"call", "params":[1,"login",["bytemaster", "supersecret"]]}\n    {"id":2, "method":"call", "params":[1,"network_node",[]]}\n    {"id":3, "method":"call", "params":[2,"add_node",["127.0.0.1:9090"]]}\n\nNote, the call to `network_node` is necessary to obtain the correct API identifier for the network API.  It is not guaranteed that the network API identifier will always be `2`.\n\nSince the `network_node` API requires login, it is only accessible over the websocket RPC.  Our `doxygen` documentation contains the most up-to-date information\nabout API\'s for the [witness node](https://bitshares.github.io/doxygen/namespacegraphene_1_1app.html) and the\n[wallet](https://bitshares.github.io/doxygen/classgraphene_1_1wallet_1_1wallet__api.html).\nIf you want information which is not available from an API, it might be available\nfrom the [database](https://bitshares.github.io/doxygen/classgraphene_1_1chain_1_1database.html);\nit is fairly simple to write API methods to expose database methods.\n\nFAQ\n---\n\n- Is there a way to generate help with parameter names and method descriptions?\n\n    Yes. Documentation of the code base, including APIs, can be generated using Doxygen. Simply run `doxygen` in this directory.\n\n    If both Doxygen and perl are available in your build environment, the CLI wallet\'s `help` and `gethelp`\n    commands will display help generated from the doxygen documentation.\n\n    If your CLI wallet\'s `help` command displays descriptions without parameter names like\n        `signed_transaction transfer(string, string, string, string, string, bool)`\n    it means CMake was unable to find Doxygen or perl during configuration.  If found, the\n    output should look like this:\n        `signed_transaction transfer(string from, string to, string amount, string asset_symbol, string memo, bool broadcast)`\n\n- Is there a way to allow external program to drive `cli_wallet` via websocket, JSONRPC, or HTTP?\n\n    Yes. External programs may connect to the CLI wallet and make its calls over a websockets API. To do this, run the wallet in\n    server mode, i.e. `cli_wallet -s "127.0.0.1:9999"` and then have the external program connect to it over the specified port\n    (in this example, port 9999).\n\n- Is there a way to access methods which require login over HTTP?\n\n    No.  Login is inherently a stateful process (logging in changes what the server will do for certain requests, that\'s kind\n    of the point of having it).  If you need to track state across HTTP RPC calls, you must maintain a session across multiple\n    connections.  This is a famous source of security vulnerabilities for HTTP applications.  Additionally, HTTP is not really\n    designed for "server push" notifications, and we would have to figure out a way to queue notifications for a polling client.\n\n    Websockets solves all these problems.  If you need to access Graphene\'s stateful methods, you need to use Websockets.\n\n- What is the meaning of `a.b.c` numbers?\n\n    The first number specifies the *space*.  Space 1 is for protocol objects, 2 is for implementation objects.\n    Protocol space objects can appear on the wire, for example in the binary form of transactions.\n    Implementation space objects cannot appear on the wire and solely exist for implementation\n    purposes, such as optimization or internal bookkeeping.\n\n    The second number specifies the *type*.  The type of the object determines what fields it has.  For a\n    complete list of type ID\'s, see `enum object_type` and `enum impl_object_type` in\n    [types.hpp](https://github.com/bitshares/bitshares-2/blob/bitshares/libraries/chain/include/graphene/chain/protocol/types.hpp).\n\n    The third number specifies the *instance*.  The instance of the object is different for each individual\n    object.\n\n- The answer to the previous question was really confusing.  Can you make it clearer?\n\n    All account ID\'s are of the form `1.2.x`.  If you were the 9735th account to be registered,\n    your account\'s ID will be `1.2.9735`.  Account `0` is special (it\'s the "committee account,"\n    which is controlled by the committee members and has a few abilities and restrictions other accounts\n    do not).\n\n    All asset ID\'s are of the form `1.3.x`.  If you were the 29th asset to be registered,\n    your asset\'s ID will be `1.3.29`.  Asset `0` is special (it\'s BTS, which is considered the "core asset").\n\n    The first and second number together identify the kind of thing you\'re talking about (`1.2` for accounts,\n    `1.3` for assets).  The third number identifies the particular thing.\n\n- How do I get the `network_add_nodes` command to work?  Why is it so complicated?\n\n    You need to follow the instructions in the "Accessing restricted API\'s" section to\n    allow a username/password access to the `network_node` API.  Then you need\n    to pass the username/password to the `cli_wallet` on the command line or in a config file.\n\n    It\'s set up this way so that the default configuration is secure even if the RPC port is\n    publicly accessible.  It\'s fine if your `witness_node` allows the general public to query\n    the database or broadcast transactions (in fact, this is how the hosted web UI works).  It\'s\n    less fine if your `witness_node` allows the general public to control which p2p nodes it\'s\n    connecting to.  Therefore the API to add p2p connections needs to be set up with proper access\n    controls.\n \nLicense\n-------\nBitShares Core is under the MIT license. See [LICENSE](https://github.com/bitshares/bitshares-core/blob/master/LICENSE.txt)\nfor more information.\n'