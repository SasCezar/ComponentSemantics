b'[![Build Status](https://travis-ci.org/foolcage/fooltrader.svg?branch=master)](https://travis-ci.org/foolcage/fooltrader)\n\n## \xe8\xaf\xa5\xe9\xa1\xb9\xe7\x9b\xae\xe7\x8a\xb6\xe6\x80\x81\xe4\xb8\xbadeprecated,\xe8\xaf\xb7\xe7\xa7\xbb\xe6\xad\xa5\xe6\x96\xb0\xe9\xa1\xb9\xe7\x9b\xae[zvt](https://github.com/zvtvz/zvt)  \n\n**Read this in other languages: [English](README-en.md).**  \n# fooltrader:trade as a fool\n>"\xe8\xa6\x81\xe5\x9c\xa8\xe5\xb8\x82\xe5\x9c\xba\xe4\xb8\x8a\xe7\x94\x9f\xe5\xad\x98\xef\xbc\x8c\xe5\xb0\xb1\xe5\xbf\x85\xe9\xa1\xbb\xe8\xbf\x9c\xe7\xa6\xbb\xe8\x81\xaa\xe6\x98\x8e\xef\xbc\x8c\xe5\x9b\xa0\xe4\xb8\xba\xef\xbc\x8c\xe4\xbd\xa0\xe7\x9a\x84\xe8\x81\xaa\xe6\x98\x8e\xe5\x9c\xa8\xe5\xb8\x82\xe5\x9c\xba\xe9\x9d\xa2\xe5\x89\x8d\xe4\xb8\x80\xe9\x92\xb1\xe4\xb8\x8d\xe5\x80\xbc"------\xe7\xbc\xa0\xe4\xb8\xad\xe8\xaf\xb4\xe7\xa6\x85  \n\nfooltrader\xe6\x98\xaf\xe4\xb8\x80\xe4\xb8\xaa\xe5\x88\xa9\xe7\x94\xa8*\xe5\xa4\xa7\xe6\x95\xb0\xe6\x8d\xae*\xe6\x8a\x80\xe6\x9c\xaf\xe8\xae\xbe\xe8\xae\xa1\xe7\x9a\x84*\xe9\x87\x8f\xe5\x8c\x96\xe5\x88\x86\xe6\x9e\x90\xe4\xba\xa4\xe6\x98\x93\xe7\xb3\xbb\xe7\xbb\x9f*,\xe5\x8c\x85\xe6\x8b\xac\xe6\x95\xb0\xe6\x8d\xae\xe7\x9a\x84\xe6\x8a\x93\xe5\x8f\x96,\xe6\xb8\x85\xe6\xb4\x97,\xe7\xbb\x93\xe6\x9e\x84\xe5\x8c\x96,\xe8\xae\xa1\xe7\xae\x97,\xe5\xb1\x95\xe7\xa4\xba,\xe5\x9b\x9e\xe6\xb5\x8b\xe5\x92\x8c\xe4\xba\xa4\xe6\x98\x93.  \n\xe5\xae\x83\xe7\x9a\x84\xe7\x9b\xae\xe6\xa0\x87\xe6\x98\xaf\xe6\x8f\x90\xe4\xbe\x9b\xe4\xb8\x80\xe4\xb8\xaa\xe7\xbb\x9f\xe4\xb8\x80\xe7\x9a\x84\xe6\xa1\x86\xe6\x9e\xb6\xe6\x9d\xa5\xe5\xaf\xb9*\xe5\x85\xa8\xe5\xb8\x82\xe5\x9c\xba*(\xe8\x82\xa1\xe7\xa5\xa8,\xe6\x9c\x9f\xe8\xb4\xa7,\xe5\x80\xba\xe5\x88\xb8,\xe5\xa4\x96\xe6\xb1\x87,\xe6\x95\xb0\xe5\xad\x97\xe8\xb4\xa7\xe5\xb8\x81,\xe5\xae\x8f\xe8\xa7\x82\xe7\xbb\x8f\xe6\xb5\x8e\xe7\xad\x89)\xe8\xbf\x9b\xe8\xa1\x8c\xe7\xa0\x94\xe7\xa9\xb6,\xe5\x9b\x9e\xe6\xb5\x8b,\xe9\xa2\x84\xe6\xb5\x8b,\xe4\xba\xa4\xe6\x98\x93.  \n\xe5\xae\x83\xe7\x9a\x84\xe9\x80\x82\xe7\x94\xa8\xe5\xaf\xb9\xe8\xb1\xa1\xe5\x8c\x85\xe6\x8b\xac:***\xe9\x87\x8f\xe5\x8c\x96\xe4\xba\xa4\xe6\x98\x93\xe5\x91\x98,\xe8\xb4\xa2\xe7\xbb\x8f\xe7\xb1\xbb\xe4\xb8\x93\xe4\xb8\x9a\xe5\xb8\x88\xe7\x94\x9f,\xe5\xaf\xb9\xe7\xbb\x8f\xe6\xb5\x8e\xe6\x95\xb0\xe6\x8d\xae\xe6\x84\x9f\xe5\x85\xb4\xe8\xb6\xa3\xe7\x9a\x84\xe4\xba\xba,\xe7\xa8\x8b\xe5\xba\x8f\xe5\x91\x98,\xe5\x96\x9c\xe6\xac\xa2\xe8\x87\xaa\xe7\x94\xb1\xe8\x80\x8c\xe6\x9c\x89\xe6\x8e\xa2\xe7\xb4\xa2\xe7\xb2\xbe\xe7\xa5\x9e\xe7\x9a\x84\xe4\xba\xba***  \n\n# 1. \xe8\x83\xbd\xe5\x81\x9a\xe4\xbb\x80\xe4\xb9\x88\n## 1.1 **\xe8\x87\xaa\xe5\xae\x9a\xe4\xb9\x89\xe5\x88\x86\xe6\x9e\x90\xe9\x80\xbb\xe8\xbe\x91\xe5\x92\x8c\xe8\xa7\x86\xe5\x9b\xbe**  \n![](./screenshots/profit_price.gif)\n>\xe8\xbe\x93\xe5\x85\xa5\xe4\xbd\xa0\xe6\x84\x9f\xe5\x85\xb4\xe8\xb6\xa3\xe7\x9a\x84\xe4\xb8\xaa\xe8\x82\xa1,\xe6\x9f\xa5\xe7\x9c\x8b\xe5\x85\xb6\xe5\x87\x80\xe5\x88\xa9\xe6\xb6\xa6\xe8\xb7\x9f\xe8\x82\xa1\xe4\xbb\xb7\xe7\x9a\x84\xe5\x85\xb3\xe7\xb3\xbb.  \n\n![](./screenshots/analyze1.png)  \n>\xe8\x81\x9a\xe5\x90\x88\xe5\xb1\x95\xe7\xa4\xba\xe4\xbd\xa0\xe5\x85\xb3\xe5\xbf\x83\xe7\x9a\x84\xe8\xa7\x86\xe5\x9b\xbe  \n\n[*\xe6\x9b\xb4\xe5\xa4\x9a\xe4\xbe\x8b\xe5\xad\x90*](./docs/kibana-analyze.md)\n\n## 1.2 **\xe5\x85\x8d\xe8\xb4\xb9\xe6\x95\xb0\xe6\x8d\xae\xe6\xba\x90\xe5\x92\x8c\xe7\xb2\xbe\xe5\xbf\x83\xe5\x88\x86\xe7\xb1\xbb\xe7\x9a\x84\xe7\xbb\x9f\xe4\xb8\x80api**  \n\napi\xe8\xbe\x93\xe5\x87\xba\xe7\xbb\x93\xe6\x9e\x9c\xe5\x85\xb7\xe4\xbd\x93\xe5\xad\x97\xe6\xae\xb5\xe5\x90\xab\xe4\xb9\x89\xe8\xaf\xb7\xe5\x8f\x82\xe8\x80\x83[*\xe6\x95\xb0\xe6\x8d\xae\xe5\x8d\x8f\xe8\xae\xae*](./docs/contract.md).  \n### A\xe8\x82\xa1\xe6\x95\xb0\xe6\x8d\xae ###\n```bash\nIn [1]:import fooltrader as ft\nIn [2]:ft.get_kdata(\'000778\')\n#\xe8\xaf\x95\xe4\xb8\x80\xe8\xaf\x95\n#ft.get_kdata(\'300027\',start_date=\'20170630\',end_date=\'20170715\')\n#ft.get_kdata(\'300027\',start_date=\'20170630\',end_date=\'20170715\')\n\ntimestamp    code  name    low   open  close   high    volume      turnover       securityId    ...             mCap  factor  hfqClose   hfqOpen   hfqHigh    hfqLow  qfqClose   qfqOpen   qfqHigh    qfqLow\ntimestamp                                                                                                    ...                                                                                                         \n1997-06-06  1997-06-06  000778  \xe6\x96\xb0\xe5\x85\xb4\xe9\x93\xb8\xe7\xae\xa1  18.00  18.10  19.68  20.70  45335789  8.904533e+08  stock_sz_000778    ...     1.416960e+09   1.000  19.68000  18.10000  20.70000  18.00000  1.497375  1.377159  1.574983  1.369550\n1997-06-09  1997-06-09  000778  \xe6\x96\xb0\xe5\x85\xb4\xe9\x93\xb8\xe7\xae\xa1  18.00  20.00  18.51  20.44  11333248  2.148290e+08  stock_sz_000778    ...     1.332720e+09   1.000  18.51000  20.00000  20.44000  18.00000  1.408354  1.521723  1.555200  1.369550\n1997-06-10  1997-06-10  000778  \xe6\x96\xb0\xe5\x85\xb4\xe9\x93\xb8\xe7\xae\xa1  16.66  18.50  16.75  18.60   6641283  1.155679e+08  stock_sz_000778    ...     1.206000e+09   1.000  16.75000  18.50000  18.60000  16.66000  1.274443  1.407593  1.415202  1.267595\n1997-06-11  1997-06-11  000778  \xe6\x96\xb0\xe5\x85\xb4\xe9\x93\xb8\xe7\xae\xa1  15.90  16.60  17.35  17.40   5560642  9.365633e+07  stock_sz_000778    ...     1.249200e+09   1.000  17.35000  16.60000  17.40000  15.90000  1.320094  1.263030  1.323899  1.209769\n1997-06-12  1997-06-12  000778  \xe6\x96\xb0\xe5\x85\xb4\xe9\x93\xb8\xe7\xae\xa1  16.80  17.68  16.80  17.70   3022235  5.142033e+07  stock_sz_000778    ...     1.209600e+09   1.000  16.80000  17.68000  17.70000  16.80000  1.278247  1.345203  1.346724  1.278247\n```\n### \xe6\x9c\x9f\xe8\xb4\xa7\xe6\x95\xb0\xe6\x8d\xae ###\n```bash\nIn [3]:ft.get_kdata(\'rb1601\')\n           timestamp    code   name     low    open   close    high    volume     turnover          securityId  preClose  change  changePct  openInterest  settlement  preSettlement  change1  changePct1\ntimestamp                                                                                                                                                                                                \n2015-01-16  20150116  rb1601  \xe8\x9e\xba\xe7\xba\xb9\xe9\x92\xa2rb  2533.0  2545.0  2550.0  2568.0      96.0      244.468  future_shfe_rb1601    2518.0    32.0   0.012708          66.0      2546.0         2518.0     28.0    0.011120\n2015-01-19  20150119  rb1601  \xe8\x9e\xba\xe7\xba\xb9\xe9\x92\xa2rb  2515.0  2534.0  2541.0  2558.0     486.0     1231.174  future_shfe_rb1601    2550.0    -5.0  -0.001961         212.0      2533.0         2546.0    -13.0   -0.005106\n2015-01-20  20150120  rb1601  \xe8\x9e\xba\xe7\xba\xb9\xe9\x92\xa2rb  2521.0  2554.0  2529.0  2554.0     134.0      339.290  future_shfe_rb1601    2541.0    -4.0  -0.001574         286.0      2532.0         2533.0     -1.0   -0.000395\n2015-01-21  20150121  rb1601  \xe8\x9e\xba\xe7\xba\xb9\xe9\x92\xa2rb  2516.0  2520.0  2516.0  2540.0     294.0      743.266  future_shfe_rb1601    2529.0   -16.0  -0.006327         410.0      2528.0         2532.0     -4.0   -0.001580\n2015-01-22  20150122  rb1601  \xe8\x9e\xba\xe7\xba\xb9\xe9\x92\xa2rb  2515.0  2519.0  2521.0  2530.0     310.0      782.114  future_shfe_rb1601    2516.0    -7.0  -0.002782         576.0      2522.0         2528.0     -6.0   -0.002373\n\n```\n### \xe6\x95\xb0\xe5\xad\x97\xe8\xb4\xa7\xe5\xb8\x81 ###\n```bash\nIn [4]: ft.get_kdata(\'BTC-USD\',exchange=\'kraken\')\n\n             timestamp     code     name     low    open   close    high       volume                     securityId  preClose  change  changePct\ntimestamp                                                                                                                                        \n2016-07-08  2016-07-08  BTC-USD  BTC/USD   634.0   640.4   671.4   671.4  1651.592635  cryptocurrency_kraken_BTC-USD       NaN     NaN        NaN\n2016-07-09  2016-07-09  BTC-USD  BTC/USD   622.0   671.9   652.0   671.9  1908.295953  cryptocurrency_kraken_BTC-USD     671.4   -19.4  -0.029755\n2016-07-10  2016-07-10  BTC-USD  BTC/USD   642.4   652.0   650.0   655.6   429.290787  cryptocurrency_kraken_BTC-USD     652.0    -2.0  -0.003077\n2016-07-11  2016-07-11  BTC-USD  BTC/USD   645.3   652.5   650.7   663.3   814.157258  cryptocurrency_kraken_BTC-USD     650.0     0.7   0.001076\n2016-07-12  2016-07-12  BTC-USD  BTC/USD   647.1   650.7   666.0   675.9   923.800268  cryptocurrency_kraken_BTC-USD     650.7    15.3   0.022973\n\n```\n### tick ###\n```\nIn [5]: for item in ft.get_ticks(\'000338\'):\n    ...:     print(item)\n```\n![](./screenshots/tick.gif)\n\n### \xe5\x9f\xba\xe6\x9c\xac\xe9\x9d\xa2\xe6\x95\xb0\xe6\x8d\xae ###\n```bash\nIn [5]: ft.get_income_statement_items(\'300027\',report_period=\'2017-06-30\')\n#\xe8\xaf\x95\xe4\xb8\x80\xe8\xaf\x95\n#ft.get_balance_sheet_items(\'300027\',,report_event_date=\'2017-01-01\')\n#ft.get_cash_flow_statement_items(\'300027\')\nOut[2]:\n{\'EPS\': 0.15,\n \'ManagingCosts\': 257005115.85,\n \'accumulatedOtherComprehensiveIncome\': 471486112.3,\n \'assetsDevaluation\': -21647912.31,\n \'attributableToMinorityShareholders\': 90255906.93,\n \'attributableToOwnersOfParentCompany\': 381230205.37,\n \'businessTaxesAndSurcharges\': 80033207.21,\n \'code\': \'300027\',\n \'dilutedEPS\': 0.15,\n \'disposalLossOnNonCurrentLiability\': 281050.25,\n \'exchangeGains\': 0.0,\n \'financingExpenses\': 132202866.43,\n \'id\': \'stock_sz_300027_20170630\',\n \'incomeFromChangesInFairValue\': 0.0,\n \'incomeTaxExpense\': 111864455.56,\n \'investmentIncome\': 541478955.17,\n \'investmentIncomeFromRelatedEnterpriseAndJointlyOperating\': \'45035770.67\',\n \'minorityInterestIncome\': 91203287.92,\n \'netProfit\': 521516997.38,\n \'netProfitAttributedToParentCompanyOwner\': 430313709.46,\n \'nonOperatingExpenditure\': 13775609.35,\n \'nonOperatingIncome\': 27864700.17,\n \'operatingCosts\': 679308123.4,\n \'operatingProfit\': 619292362.12,\n \'operatingRevenue\': 1465863805.45,\n \'operatingTotalCosts\': 1388050398.5,\n \'otherComprehensiveIncome\': -50030885.08,\n \'reportDate\': \'2017-06-30\',\n \'reportEventDate\': \'2017-08-29\',\n \'securityId\': \'stock_sz_300027\',\n \'sellingExpenses\': 261148997.92,\n \'totalProfits\': 633381452.94}\n\n```\n\n### \xe8\xb4\xa2\xe5\x8a\xa1\xe6\x8a\xa5\xe8\xa1\xa8\xe7\x9a\x84\xe5\x8b\xbe\xe7\xa8\xbd\xe5\x85\xb3\xe7\xb3\xbb\xe9\xaa\x8c\xe8\xaf\x81 ###  \n```python\n# \xe8\x90\xa5\xe4\xb8\x9a\xe5\x88\xa9\xe6\xb6\xa6=\xe8\x90\xa5\xe4\xb8\x9a\xe6\x94\xb6\xe5\x85\xa5-\xe8\x90\xa5\xe4\xb8\x9a\xe6\x88\x90\xe6\x9c\xac-\xe8\x90\xa5\xe4\xb8\x9a\xe7\xa8\x8e\xe9\x87\x91\xe5\x8f\x8a\xe9\x99\x84\xe5\x8a\xa0-\xe9\x94\x80\xe5\x94\xae\xe8\xb4\xb9\xe7\x94\xa8-\xe7\xae\xa1\xe7\x90\x86\xe8\xb4\xb9\xe7\x94\xa8-\xe8\xb4\xa2\xe5\x8a\xa1\xe8\xb4\xb9\xe7\x94\xa8-\xe8\xb5\x84\xe4\xba\xa7\xe5\x87\x8f\xe5\x80\xbc\xe6\x8d\x9f\xe5\xa4\xb1+\xe5\x85\xac\xe5\x85\x81\xe4\xbb\xb7\xe5\x80\xbc\xe5\x8f\x98\xe5\x8a\xa8\xe6\x94\xb6\xe7\x9b\x8a\xef\xbc\x88\xe6\x8d\x9f\xe5\xa4\xb1\xe7\x9a\x84\xe8\xaf\x9d\xe7\x94\xa8\xe5\x87\x8f\xef\xbc\x89+\xe6\x8a\x95\xe8\xb5\x84\xe6\x94\xb6\xe7\x9b\x8a\ndef check_operating_profit(security_item):\n    income_statement_list = get_income_statement_items(security_item=security_item)\n    for income_statement in income_statement_list:\n        operatingProfit = income_statement["operatingRevenue"] \\\n                          - income_statement["operatingCosts"] \\\n                          - income_statement["businessTaxesAndSurcharges"] \\\n                          - income_statement["sellingExpenses"] \\\n                          - income_statement["ManagingCosts"] \\\n                          - income_statement["financingExpenses"] \\\n                          - income_statement["assetsDevaluation"] \\\n                          + income_statement["incomeFromChangesInFairValue"] \\\n                          + income_statement["investmentIncome"]\n        diff = operatingProfit - income_statement["operatingProfit"]\n        if abs(diff) >= 1:\n            print("{} operating profit calculating not pass,calculating result:{},report result:{}".format(\n                income_statement[\'id\'], operatingProfit, income_statement["operatingProfit"]))\n        else:\n            print("{} operating profit calculating pass".format(income_statement[\'id\']))\n```\n\xe5\x8f\xaf\xe4\xbb\xa5\xe7\x94\xa8\xe8\xaf\xa5\xe5\xb7\xa5\xe5\x85\xb7\xe8\xbf\x85\xe9\x80\x9f\xe6\xa3\x80\xe6\x9f\xa5\xe8\xb4\xa2\xe5\x8a\xa1\xe6\x8a\xa5\xe8\xa1\xa8\xe7\x9a\x84\xe8\xb4\xa8\xe9\x87\x8f,\xe5\x90\x8c\xe6\x97\xb6\xe4\xb9\x9f\xe5\x8f\xaf\xe4\xbb\xa5\xe8\xae\xa9\xe4\xbd\xa0\xe5\xaf\xb9\xe8\xb4\xa2\xe5\x8a\xa1\xe6\x8a\xa5\xe8\xa1\xa8\xe6\x9c\x89\xe6\x9b\xb4\xe6\xb7\xb1\xe5\x85\xa5\xe7\x9a\x84\xe8\xae\xa4\xe8\xaf\x86.[*\xe6\x9b\xb4\xe5\xa4\x9a\xe4\xbe\x8b\xe5\xad\x90*](./fooltrader/datamanager/finance_check.py)\n```bash\nIn [3]: from fooltrader.datamanager import finance_check\n\nIn [4]: finance_check.check_operating_profit(\'300027\')\nstock_sz_300027_20061231 operating profit calculating pass\n...\nstock_sz_300027_20170630 operating profit calculating pass\nstock_sz_300027_20170930 operating profit calculating pass\n```\n\xe6\x88\x91\xe7\x9a\x84\xe5\x8d\x9a\xe5\xae\xa2\xe4\xbb\x8b\xe7\xbb\x8d[*fooltrader\xe6\x8a\x95\xe8\xb5\x84\xe4\xb9\x8b\xe8\xb4\xa2\xe5\x8a\xa1\xe6\x8c\x87\xe6\xa0\x87*](https://foolcage.github.io/investing/fooltrader/2018/03/02/basic-finance-indicator.html)\n\n\n### \xe4\xba\x8b\xe4\xbb\xb6(\xe6\xb6\x88\xe6\x81\xaf)\xe6\x95\xb0\xe6\x8d\xae ###\n```bash\nIn [12]: ft.get_finance_forecast_event(\'000002\')\n             timestamp reportPeriod       securityId type                                        description  preEPS  changeStart  change                          id\ntimestamp                                                                                                                                                            \n2004-04-02  2004-04-02   2004-03-31  stock_sz_000002   \xe9\xa2\x84\xe5\xa2\x9e                   \xe9\xa2\x84\xe8\xae\xa1\xe5\x85\xac\xe5\x8f\xb82004\xe5\xb9\xb4\xe7\xac\xac1\xe5\xad\xa3\xe5\xba\xa6\xe5\x87\x80\xe5\x88\xa9\xe6\xb6\xa6\xe8\xbe\x83\xe5\x8e\xbb\xe5\xb9\xb4\xe5\x90\x8c\xe6\x9c\x9f\xe5\xa2\x9e\xe9\x95\xbf\xe5\xb9\x85\xe5\xba\xa6\xe8\xb6\x85\xe8\xbf\x87150%\xe3\x80\x82     NaN          NaN    1.50  stock_sz_000002_2004-04-02\n2004-07-05  2004-07-05   2004-06-30  stock_sz_000002   \xe9\xa2\x84\xe5\xa2\x9e                   \xe9\xa2\x84\xe8\xae\xa1\xe5\x85\xac\xe5\x8f\xb82004\xe5\xb9\xb4\xe4\xb8\x8a\xe5\x8d\x8a\xe5\xb9\xb4\xe5\xba\xa6\xe5\x87\x80\xe5\x88\xa9\xe6\xb6\xa6\xe8\xbe\x83\xe5\x8e\xbb\xe5\xb9\xb4\xe5\x90\x8c\xe6\x9c\x9f\xe5\xa2\x9e\xe9\x95\xbf\xe5\xb9\x85\xe5\xba\xa6\xe5\xb0\x86\xe8\xb6\x85\xe8\xbf\x8750%\xe3\x80\x82     NaN          NaN    0.50  stock_sz_000002_2004-07-05\n2005-01-12  2005-01-12   2004-12-31  stock_sz_000002   \xe9\xa2\x84\xe5\xa2\x9e                     \xe9\xa2\x84\xe8\xae\xa1\xe6\x9c\xac\xe5\x85\xac\xe5\x8f\xb82004\xe5\xb9\xb4\xe5\x85\xa8\xe5\xb9\xb4\xe5\x87\x80\xe5\x88\xa9\xe6\xb6\xa6\xe8\xbe\x83\xe5\x8e\xbb\xe5\xb9\xb4\xe5\xa2\x9e\xe9\x95\xbf50%\xef\xbc\x8d65%\xe4\xb9\x8b\xe9\x97\xb4\xe3\x80\x82     NaN          NaN    0.65  stock_sz_000002_2005-01-12\n2005-04-06  2005-04-06   2005-03-31  stock_sz_000002   \xe9\xa2\x84\xe5\xa2\x9e                  \xe9\xa2\x84\xe8\xae\xa1\xe6\x9c\xac\xe5\x85\xac\xe5\x8f\xb82005\xe5\xb9\xb41\xe5\xad\xa3\xe5\xba\xa6\xe5\x87\x80\xe5\x88\xa9\xe6\xb6\xa6\xe8\xbe\x83\xe4\xb8\x8a\xe5\xb9\xb4\xe5\x90\x8c\xe6\x9c\x9f\xe5\xa2\x9e\xe9\x95\xbf100%\xef\xbc\x8d150\xef\xbc\x85\xe3\x80\x82     NaN          NaN    1.50  stock_sz_000002_2005-04-06\n2005-04-25  2005-04-25   2005-06-30  stock_sz_000002   \xe9\xa2\x84\xe5\xa2\x9e                   \xe9\xa2\x84\xe8\xae\xa1\xe6\x9c\xac\xe5\x85\xac\xe5\x8f\xb82005\xe5\xb9\xb4\xe4\xb8\x8a\xe5\x8d\x8a\xe5\xb9\xb4\xe5\x87\x80\xe5\x88\xa9\xe6\xb6\xa6\xe8\xbe\x83\xe5\x8e\xbb\xe5\xb9\xb4\xe5\x90\x8c\xe6\x9c\x9f\xe5\xa2\x9e\xe9\x95\xbf150\xe2\x80\x94200%\xe3\x80\x82     NaN          NaN    2.00  stock_sz_000002_2005-04-25\n2005-08-01  2005-08-01   2005-09-30  stock_sz_000002   \xe9\xa2\x84\xe5\xa2\x9e                \xe9\xa2\x84\xe8\xae\xa12005\xe5\xb9\xb41\xef\xbd\x9e9\xe6\x9c\x88\xe4\xbb\xbd\xe5\x8f\xaf\xe5\xae\x9e\xe7\x8e\xb0\xe5\x87\x80\xe5\x88\xa9\xe6\xb6\xa6\xe5\xb0\x86\xe8\xbe\x83\xe5\x8e\xbb\xe5\xb9\xb4\xe5\x90\x8c\xe6\x9c\x9f\xe5\xa2\x9e\xe9\x95\xbf110\xef\xbd\x9e130%\xe3\x80\x82     NaN          NaN    1.30  stock_sz_000002_2005-08-01\n2006-01-06  2006-01-06   2005-12-31  stock_sz_000002   \xe9\xa2\x84\xe5\xa2\x9e                        \xe9\xa2\x84\xe8\xae\xa1\xe6\x9c\xac\xe5\x85\xac\xe5\x8f\xb82005\xe5\xb9\xb4\xe5\x85\xa8\xe5\xb9\xb4\xe5\x87\x80\xe5\x88\xa9\xe6\xb6\xa6\xe8\xbe\x83\xe5\x8e\xbb\xe5\xb9\xb4\xe5\xa2\x9e\xe5\xb9\x85\xe5\xb0\x86\xe8\xb6\x85\xe8\xbf\x8750%\xe3\x80\x82     NaN          NaN    0.50  stock_sz_000002_2006-01-06\n2006-03-21  2006-03-21   2006-03-31  stock_sz_000002   \xe9\xa2\x84\xe5\xa2\x9e               \xe7\xbb\x8f\xe5\x88\x9d\xe6\xad\xa5\xe6\xb5\x8b\xe7\xae\x97\xef\xbc\x8c\xe9\xa2\x84\xe8\xae\xa1\xe6\x9c\xac\xe5\x85\xac\xe5\x8f\xb82006\xe5\xb9\xb4\xe7\xac\xac1\xe5\xad\xa3\xe5\xba\xa6\xe5\x87\x80\xe5\x88\xa9\xe6\xb6\xa6\xe8\xbe\x83\xe4\xb8\x8a\xe5\xb9\xb4\xe5\x90\x8c\xe6\x9c\x9f\xe5\xa2\x9e\xe9\x95\xbf\xe8\xb6\x85\xe8\xbf\x8750%\xe3\x80\x82     NaN          NaN    0.50  stock_sz_000002_2006-03-21\n2006-06-23  2006-06-23   2006-06-30  stock_sz_000002   \xe9\xa2\x84\xe5\xa2\x9e                     \xe9\xa2\x84\xe8\xae\xa1\xe6\x9c\xac\xe5\x85\xac\xe5\x8f\xb82006\xe5\xb9\xb4\xe5\x8d\x8a\xe5\xb9\xb4\xe5\xba\xa6\xe5\x87\x80\xe5\x88\xa9\xe6\xb6\xa6\xe8\xbe\x83\xe4\xb8\x8a\xe5\xb9\xb4\xe5\x90\x8c\xe6\x9c\x9f\xe5\xa2\x9e\xe9\x95\xbf50%~60%     NaN          NaN    0.60  stock_sz_000002_2006-06-23\n2006-09-28  2006-09-28   2006-09-30  stock_sz_000002   \xe9\xa2\x84\xe5\xa2\x9e                     \xe9\xa2\x84\xe8\xae\xa12006\xe5\xb9\xb4\xe4\xb8\x80\xe8\x87\xb3\xe4\xb8\x89\xe5\xad\xa3\xe5\xba\xa6\xe5\x87\x80\xe5\x88\xa9\xe6\xb6\xa6\xe8\xbe\x83\xe4\xb8\x8a\xe5\xb9\xb4\xe5\x90\x8c\xe6\x9c\x9f\xe5\xa2\x9e\xe9\x95\xbf50%-60%\xe3\x80\x82     NaN          NaN    0.60  stock_sz_000002_2006-09-28\n2007-01-12  2007-01-12   2006-12-31  stock_sz_000002   \xe9\xa2\x84\xe5\xa2\x9e                          \xe9\xa2\x84\xe8\xae\xa12006\xe5\xb9\xb4\xe5\x85\xa8\xe5\xb9\xb4\xe5\x87\x80\xe5\x88\xa9\xe6\xb6\xa6\xe8\xbe\x83\xe5\x8e\xbb\xe5\xb9\xb4\xe5\xa2\x9e\xe9\x95\xbf50%-65%\xe3\x80\x82    0.26          NaN    0.65  stock_sz_000002_2007-01-12\n2007-04-04  2007-04-04   2007-03-31  stock_sz_000002   \xe9\xa2\x84\xe5\xa2\x9e                    \xe9\xa2\x84\xe8\xae\xa12007\xe5\xb9\xb4\xe7\xac\xac\xe4\xb8\x80\xe5\xad\xa3\xe5\xba\xa6\xe5\x87\x80\xe5\x88\xa9\xe6\xb6\xa6\xe8\xbe\x83\xe4\xb8\x8a\xe5\xb9\xb4\xe5\x90\x8c\xe6\x9c\x9f\xe5\xa2\x9e\xe9\x95\xbf\xe5\xb9\x85\xe5\xba\xa6\xe4\xb8\xba50-60%\xe3\x80\x82     NaN          NaN    0.60  stock_sz_000002_2007-04-04\n2007-10-30  2007-10-30   2007-12-31  stock_sz_000002   \xe9\xa2\x84\xe5\xa2\x9e                      \xe5\x85\xac\xe5\x8f\xb8\xe9\xa2\x84\xe8\xae\xa12007\xe5\xb9\xb4\xe5\x85\xa8\xe5\xb9\xb4\xe5\x87\x80\xe5\x88\xa9\xe6\xb6\xa6\xe8\xbe\x83\xe5\x8e\xbb\xe5\xb9\xb4\xe5\xa2\x9e\xe9\x95\xbf100%-150%\xe3\x80\x82     NaN          NaN    1.50  stock_sz_000002_2007-10-30\n2015-04-03  2015-04-03   2015-03-31  stock_sz_000002   \xe9\xa2\x84\xe5\x87\x8f  \xe9\xa2\x84\xe8\xae\xa12015\xe5\xb9\xb41\xe6\x9c\x881\xe6\x97\xa5-2015\xe5\xb9\xb43\xe6\x9c\x8831\xe6\x97\xa5\xe5\xbd\x92\xe5\xb1\x9e\xe4\xba\x8e\xe4\xb8\x8a\xe5\xb8\x82\xe5\x85\xac\xe5\x8f\xb8\xe8\x82\xa1\xe4\xb8\x9c\xe7\x9a\x84\xe5\x87\x80\xe5\x88\xa9\xe6\xb6\xa6\xe4\xb8\xba\xe7\x9b\x88\xe5\x88\xa9\xef\xbc\x9a60,000\xe4\xb8\x87...    0.14        -0.61   -0.54  stock_sz_000002_2015-04-03\n\nIn [13]: ft.get_finance_report_event(\'600338\')\n           reportPeriod       securityId   timestamp                  title                                                url                          id\ntimestamp                                                                                                                                                 \n2010-02-12   2009-12-31  stock_sh_600338  2010-02-12  \xe8\xa5\xbf\xe8\x97\x8f\xe7\x8f\xa0\xe5\xb3\xb0\xe5\xb7\xa5\xe4\xb8\x9a\xe8\x82\xa1\xe4\xbb\xbd\xe6\x9c\x89\xe9\x99\x90\xe5\x85\xac\xe5\x8f\xb82009\xe5\xb9\xb4\xe5\xb9\xb4\xe5\xba\xa6\xe6\x8a\xa5\xe5\x91\x8a  http://vip.stock.finance.sina.com.cn/corp/view...  stock_sh_600338_2010-02-12\n2011-04-27   2010-12-31  stock_sh_600338  2011-04-27                ST\xe7\x8f\xa0\xe5\xb3\xb0\xef\xbc\x9a\xe5\xb9\xb4\xe6\x8a\xa5  http://vip.stock.finance.sina.com.cn/corp/view...  stock_sh_600338_2011-04-27\n2012-04-26   2011-12-31  stock_sh_600338  2012-04-26  \xe8\xa5\xbf\xe8\x97\x8f\xe7\x8f\xa0\xe5\xb3\xb0\xe5\xb7\xa5\xe4\xb8\x9a\xe8\x82\xa1\xe4\xbb\xbd\xe6\x9c\x89\xe9\x99\x90\xe5\x85\xac\xe5\x8f\xb82011\xe5\xb9\xb4\xe5\xb9\xb4\xe5\xba\xa6\xe6\x8a\xa5\xe5\x91\x8a  http://vip.stock.finance.sina.com.cn/corp/view...  stock_sh_600338_2012-04-26\n2013-03-06   2012-12-31  stock_sh_600338  2013-03-06         \xe8\xa5\xbf\xe8\x97\x8f\xe7\x8f\xa0\xe5\xb3\xb0\xe5\xb7\xa5\xe4\xb8\x9a\xe8\x82\xa1\xe4\xbb\xbd\xe6\x9c\x89\xe9\x99\x90\xe5\x85\xac\xe5\x8f\xb8\xe5\xb9\xb4\xe6\x8a\xa5  http://vip.stock.finance.sina.com.cn/corp/view...  stock_sh_600338_2013-03-06\n2014-04-30   2013-12-31  stock_sh_600338  2014-04-30  \xe8\xa5\xbf\xe8\x97\x8f\xe7\x8f\xa0\xe5\xb3\xb0\xe5\xb7\xa5\xe4\xb8\x9a\xe8\x82\xa1\xe4\xbb\xbd\xe6\x9c\x89\xe9\x99\x90\xe5\x85\xac\xe5\x8f\xb82013\xe5\xb9\xb4\xe5\xb9\xb4\xe5\xba\xa6\xe6\x8a\xa5\xe5\x91\x8a  http://vip.stock.finance.sina.com.cn/corp/view...  stock_sh_600338_2014-04-30\n2015-04-30   2014-12-31  stock_sh_600338  2015-04-30         \xe8\xa5\xbf\xe8\x97\x8f\xe7\x8f\xa0\xe5\xb3\xb0\xe5\xb7\xa5\xe4\xb8\x9a\xe8\x82\xa1\xe4\xbb\xbd\xe6\x9c\x89\xe9\x99\x90\xe5\x85\xac\xe5\x8f\xb8\xe5\xb9\xb4\xe6\x8a\xa5  http://vip.stock.finance.sina.com.cn/corp/view...  stock_sh_600338_2015-04-30\n2016-04-15   2015-12-31  stock_sh_600338  2016-04-15                 \xe8\xa5\xbf\xe8\x97\x8f\xe7\x8f\xa0\xe5\xb3\xb0\xe5\xb9\xb4\xe6\x8a\xa5  http://vip.stock.finance.sina.com.cn/corp/view...  stock_sh_600338_2016-04-15\n2017-01-05   2015-12-31  stock_sh_600338  2017-01-05     \xe8\xa5\xbf\xe8\x97\x8f\xe7\x8f\xa0\xe5\xb3\xb02015\xe5\xb9\xb4\xe5\xb9\xb4\xe5\xba\xa6\xe6\x8a\xa5\xe5\x91\x8a\xef\xbc\x88\xe6\x9b\xb4\xe6\xad\xa3\xe7\xa8\xbf\xef\xbc\x89  http://vip.stock.finance.sina.com.cn/corp/view...  stock_sh_600338_2017-01-05\n2017-02-28   2016-12-31  stock_sh_600338  2017-02-28          \xe8\xa5\xbf\xe8\x97\x8f\xe7\x8f\xa0\xe5\xb3\xb02016\xe5\xb9\xb4\xe5\xb9\xb4\xe5\xba\xa6\xe6\x8a\xa5\xe5\x91\x8a  http://vip.stock.finance.sina.com.cn/corp/view...  stock_sh_600338_2017-02-28\n2018-03-10   2017-12-31  stock_sh_600338  2018-03-10          \xe8\xa5\xbf\xe8\x97\x8f\xe7\x8f\xa0\xe5\xb3\xb02017\xe5\xb9\xb4\xe5\xb9\xb4\xe5\xba\xa6\xe6\x8a\xa5\xe5\x91\x8a  http://vip.stock.finance.sina.com.cn/corp/view...  stock_sh_600338_2018-03-10\n\n```\n### \xe5\x90\x84\xe6\x8c\x87\xe6\x95\xb0\xe6\x95\xb0\xe6\x8d\xae ###\n```\nIn [14]: ft.get_kdata(\'index_sh_000001\')\n             timestamp    code  name        low       open      close       high     volume      turnover       securityId   preClose    change  changePct  turnoverRate          tCap          mCap     pe\ntimestamp                                                                                                                                                                                                  \n2018-06-11  2018-06-11  000001  \xe4\xb8\x8a\xe8\xaf\x81\xe6\x8c\x87\xe6\x95\xb0  3037.9138  3057.3393  3052.7831  3063.6102  108563786  1.430373e+11  index_sh_000001  3067.1478  -14.3647    -0.4683        0.3412  3.199517e+13  2.689125e+13  15.06\n2018-06-12  2018-06-12  000001  \xe4\xb8\x8a\xe8\xaf\x81\xe6\x8c\x87\xe6\x95\xb0  3034.1012  3053.0279  3079.8018  3081.4473  113275096  1.544691e+11  index_sh_000001  3052.7831   27.0187     0.8851        0.3545  3.229036e+13  2.719762e+13  15.22\n2018-06-13  2018-06-13  000001  \xe4\xb8\x8a\xe8\xaf\x81\xe6\x8c\x87\xe6\x95\xb0  3044.1198  3071.4636  3049.7965  3071.4636  119607886  1.559353e+11  index_sh_000001  3079.8018  -30.0053    -0.9743        0.3733  3.205392e+13  2.699151e+13  15.09\n2018-06-14  2018-06-14  000001  \xe4\xb8\x8a\xe8\xaf\x81\xe6\x8c\x87\xe6\x95\xb0  3032.4062  3038.0704  3044.1597  3066.0469  115469487  1.475888e+11  index_sh_000001  3049.7965   -5.6368    -0.1848        0.3618  3.193968e+13  2.694981e+13  15.04\n2018-06-15  2018-06-15  000001  \xe4\xb8\x8a\xe8\xaf\x81\xe6\x8c\x87\xe6\x95\xb0  3008.7324  3037.4522  3021.9008  3048.7967  144532571  1.621960e+11  index_sh_000001  3044.1597  -22.2589    -0.7312        0.4490  3.171228e+13  2.680721e+13  14.93\n\n```\n### \xe6\x8a\x80\xe6\x9c\xaf\xe6\x8c\x87\xe6\xa0\x87 ###  \n```bash\nIn [15]: ft.macd(\'000778\',start_date=\'20170101\',end_date=\'20170301\')\n\n            close  close_ema12  close_ema26      diff       dea      macd\ntimestamp                                                                \n2017-01-03   5.21          NaN          NaN       NaN       NaN       NaN\n2017-01-04   5.24          NaN          NaN       NaN       NaN       NaN\n2017-01-05   5.31          NaN          NaN       NaN       NaN       NaN\n2017-01-06   5.28          NaN          NaN       NaN       NaN       NaN\n2017-01-09   5.33          NaN          NaN       NaN       NaN       NaN\n2017-01-10   5.30          NaN          NaN       NaN       NaN       NaN\n2017-01-11   5.34          NaN          NaN       NaN       NaN       NaN\n2017-01-12   5.21          NaN          NaN       NaN       NaN       NaN\n2017-01-13   5.11          NaN          NaN       NaN       NaN       NaN\n2017-01-16   4.95          NaN          NaN       NaN       NaN       NaN\n2017-01-17   5.00          NaN          NaN       NaN       NaN       NaN\n2017-01-18   5.05     5.146697          NaN       NaN       NaN       NaN\n2017-01-19   4.96     5.117975          NaN       NaN       NaN       NaN\n2017-01-20   5.00     5.099825          NaN       NaN       NaN       NaN\n2017-01-23   5.05     5.092159          NaN       NaN       NaN       NaN\n2017-01-24   5.06     5.087212          NaN       NaN       NaN       NaN\n2017-01-25   5.06     5.083025          NaN       NaN       NaN       NaN\n2017-01-26   5.07     5.081022          NaN       NaN       NaN       NaN\n2017-02-03   5.03     5.073172          NaN       NaN       NaN       NaN\n2017-02-06   5.03     5.066530          NaN       NaN       NaN       NaN\n2017-02-07   5.01     5.057833          NaN       NaN       NaN       NaN\n2017-02-08   5.05     5.056628          NaN       NaN       NaN       NaN\n2017-02-09   5.12     5.066378          NaN       NaN       NaN       NaN\n2017-02-10   5.27     5.097704          NaN       NaN       NaN       NaN\n2017-02-13   5.31     5.130365          NaN       NaN       NaN       NaN\n2017-02-14   5.84     5.239540     5.184121  0.055419  0.055419  0.000000\n2017-02-15   6.09     5.370380     5.251223  0.119157  0.068166  0.101981\n2017-02-16   5.98     5.464167     5.305206  0.158961  0.086325  0.145271\n2017-02-17   5.70     5.500449     5.334450  0.165999  0.102260  0.127478\n2017-02-20   5.78     5.543457     5.367454  0.176003  0.117009  0.117989\n2017-02-21   5.81     5.584464     5.400235  0.184229  0.130453  0.107552\n2017-02-22   5.95     5.640700     5.440959  0.199742  0.144310  0.110862\n2017-02-23   5.81     5.666746     5.468295  0.198451  0.155139  0.086625\n2017-02-24   5.69     5.670324     5.484718  0.185606  0.161232  0.048748\n2017-02-27   5.59     5.657966     5.492516  0.165450  0.162076  0.006749\n2017-02-28   5.66     5.658279     5.504922  0.153357  0.160332 -0.013950\n2017-03-01   5.63     5.653928     5.514187  0.139741  0.156214 -0.032945\n\n```\n>\xe6\x88\x91\xe4\xbb\xac\xe4\xb8\x8d\xe9\x9c\x80\xe8\xa6\x81\xe9\x82\xa3\xe4\xb9\x88\xe5\xa4\x9a\xe6\x8a\x80\xe6\x9c\xaf\xe6\x8c\x87\xe6\xa0\x87,\xe4\xbd\x86\xe4\xb8\x80\xe5\xae\x9a\xe8\xa6\x81\xe7\x9f\xa5\xe9\x81\x93\xe6\x89\x80\xe4\xbd\xbf\xe7\x94\xa8\xe6\x8c\x87\xe6\xa0\x87\xe7\x9a\x84\xe5\x86\x85\xe6\xb6\xb5,\xe6\x89\x80\xe4\xbb\xa5,\xe6\x88\x91\xe4\xbb\xac\xe9\x80\x89\xe6\x8b\xa9\xe8\x87\xaa\xe5\xb7\xb1\xe8\xae\xa1\xe7\xae\x97;\xe6\xb2\xa1\xe9\x94\x99,\xe7\x94\xb1\xe4\xba\x8e\xe6\x95\xb0\xe6\x8d\xae\xe7\x9a\x84\xe7\xbb\x9f\xe4\xb8\x80\xe6\x80\xa7,\xe7\x90\x86\xe6\x89\x80\xe5\xbd\x93\xe7\x84\xb6\xe5\x9c\xb0,\xe8\xae\xa1\xe7\xae\x97\xe7\x9a\x84\xe7\xbb\x9f\xe4\xb8\x80\xe6\x80\xa7\xe4\xb9\x9f\xe6\x9c\x89\xe4\xba\x86.\n\xe4\xb8\x8d\xe7\xae\xa1\xe6\x98\xafA\xe8\x82\xa1,\xe6\xb8\xaf\xe8\x82\xa1,\xe8\xbf\x98\xe6\x98\xaf\xe6\x95\xb0\xe5\xad\x97\xe8\xb4\xa7\xe5\xb8\x81,\xe4\xb8\x8d\xe7\xae\xa1\xe6\x98\xaf1\xe5\x88\x86\xe9\x92\x9f\xe7\xba\xa7\xe5\x88\xab,\xe8\xbf\x98\xe6\x98\xaf\xe6\x97\xa5\xe7\xba\xbf,\xe4\xbd\xbf\xe7\x94\xa8\xe7\x9a\x84\xe9\x83\xbd\xe6\x98\xaf\xe7\xbb\x9f\xe4\xb8\x80\xe7\x9a\x84api.\n\n\n\xe6\x9b\xb4\xe5\xa4\x9a\xe7\x94\xa8\xe6\xb3\x95\xe8\xaf\xb7\xe6\x9f\xa5\xe7\x9c\x8b[*api\xe6\x96\x87\xe6\xa1\xa3*](http://fooltrader.readthedocs.io/en/latest/api.html).  \n\n## 1.3 **\xe5\x9b\x9e\xe6\xb5\x8b**  \n\n\xe7\xad\x96\xe7\x95\xa5\xe7\x9a\x84\xe7\xbc\x96\xe5\x86\x99,\xe5\x8f\xaf\xe4\xbb\xa5\xe9\x87\x87\xe7\x94\xa8\xe4\xba\x8b\xe4\xbb\xb6\xe9\xa9\xb1\xe5\x8a\xa8\xe6\x88\x96\xe8\x80\x85\xe6\x97\xb6\xe9\x97\xb4\xe6\xbc\xab\xe6\xad\xa5\xe7\x9a\x84\xe6\x96\xb9\xe5\xbc\x8f,\xe6\x9f\xa5\xe7\x9c\x8b[*\xe8\xae\xbe\xe8\xae\xa1\xe6\x96\x87\xe6\xa1\xa3*](./docs/trader.md)  \n\xe6\xb3\xa8\xe6\x84\x8f:\xe5\x9b\x9e\xe6\xb5\x8b\xe6\xa1\x86\xe6\x9e\xb6\xe7\x9b\xae\xe5\x89\x8d\xe8\xbf\x98\xe5\xa4\x84\xe4\xba\x8e\xe9\x9d\x9e\xe5\xb8\xb8\xe5\x88\x9d\xe6\x9c\x9f\xe7\x9a\x84\xe9\x98\xb6\xe6\xae\xb5  \n```python\nclass EventTrader(Trader):\n    def on_init(self):\n        self.trader_id = \'aa\'\n        self.only_event_mode = True\n        self.universe = [\'stock_sz_000338\']\n        self.df_map = {}\n\n    def on_day_bar(self, bar_item):\n        current_security = bar_item[\'securityId\']\n        current_df = self.df_map.get(current_security, pd.DataFrame())\n        if current_df.empty:\n            self.df_map[current_security] = current_df\n\n        current_df = current_df.append(bar_item, ignore_index=True)\n        self.df_map[current_security] = current_df\n\n        if len(current_df.index) == 10:\n            ma5 = np.mean(current_df.loc[5:, \'close\'])\n            ma10 = np.mean(current_df.loc[:, \'close\'])\n            # 5\xe6\x97\xa5\xe7\xba\xbf\xe5\x9c\xa810\xe6\x97\xa5\xe7\xba\xbf\xe4\xb8\x8a,\xe5\xb9\xb6\xe4\xb8\x94\xe6\xb2\xa1\xe6\x9c\x89\xe6\x8c\x81\xe4\xbb\x93,\xe5\xb0\xb1\xe4\xb9\xb0\xe5\x85\xa5\n            if ma5 > ma10 and not self.account_service.get_position(current_security):\n                self.buy(security_id=current_security, current_price=bar_item[\'close\'])\n            # 5\xe6\x97\xa5\xe7\xba\xbf\xe5\x9c\xa810\xe6\x97\xa5\xe7\xba\xbf\xe4\xb8\x8b,\xe5\xb9\xb6\xe4\xb8\x94\xe6\x9c\x89\xe6\x8c\x81\xe4\xbb\x93,\xe5\xb0\xb1\xe5\x8d\x96\xe5\x87\xba\n            elif ma5 < ma10 and self.account_service.get_position(current_security):\n                self.sell(security_id=current_security, current_price=bar_item[\'close\'])\n            current_df = current_df.loc[1:, ]\n            self.df_map[current_security] = current_df\n```\n\n\xe8\xbf\x90\xe8\xa1\x8c\xe7\xad\x96\xe7\x95\xa5\xe5\x8f\xaf\xe4\xbb\xa5\xe5\xae\x9e\xe6\x97\xb6\xe6\x9f\xa5\xe7\x9c\x8b\xe6\x95\x88\xe6\x9e\x9c,\xe5\xb9\xb6\xe5\x81\x9a\xe8\xbf\x9b\xe4\xb8\x80\xe6\xad\xa5\xe7\x9a\x84\xe8\xaf\x84\xe4\xbc\xb0\n![](./screenshots/trader.gif)\n\n# 2. \xe6\x9e\xb6\xe6\x9e\x84\xe5\x9b\xbe\nfooltrader\xe6\x98\xaf\xe4\xb8\x80\xe4\xb8\xaa\xe5\xb1\x82\xe6\xac\xa1\xe6\xb8\x85\xe6\x99\xb0\xe7\x9a\x84\xe7\xb3\xbb\xe7\xbb\x9f,\xe4\xbd\xa0\xe5\x8f\xaf\xe4\xbb\xa5\xe5\x9c\xa8\xe4\xb8\x8d\xe5\x90\x8c\xe7\x9a\x84\xe5\xb1\x82\xe6\xac\xa1\xe5\xaf\xb9\xe5\x85\xb6\xe8\xbf\x9b\xe8\xa1\x8c\xe4\xbd\xbf\xe7\x94\xa8,\xe4\xb9\x9f\xe5\x8f\xaf\xe4\xbb\xa5\xe6\x89\xa9\xe5\xb1\x95,\xe6\x94\xb9\xe9\x80\xa0\xe6\x88\x96\xe6\x9b\xbf\xe6\x8d\xa2\xe9\x87\x8c\xe9\x9d\xa2\xe7\x9a\x84\xe6\xa8\xa1\xe5\x9d\x97.  \n\n![](./screenshots/architecture.png)\n\n# 3. \xe4\xbd\xbf\xe7\x94\xa8step by step\n\xe4\xbd\xbf\xe7\x94\xa8\xe7\x9a\x84\xe5\xb1\x82\xe6\xac\xa1\xe8\xb7\x9f\xe6\x9e\xb6\xe6\x9e\x84\xe5\x9b\xbe\xe9\x87\x8c\xe9\x9d\xa2\xe7\x9a\x84\xe6\xa8\xa1\xe5\x9d\x97\xe6\x98\xaf\xe4\xb8\x80\xe4\xb8\x80\xe5\xaf\xb9\xe5\xba\x94\xe7\x9a\x84, \xe4\xbd\xa0\xe5\x8f\xaf\xe4\xbb\xa5\xe5\x9c\xa8\xe4\xbb\xbb\xe4\xbd\x95step\xe5\x81\x9c\xe4\xb8\x8b\xe6\x9d\xa5,\xe8\xbf\x9b\xe8\xa1\x8c\xe6\x89\xa9\xe5\xb1\x95\xe6\x88\x96\xe8\x80\x85\xe5\xaf\xb9\xe6\x8e\xa5\xe4\xbd\xa0\xe8\x87\xaa\xe5\xb7\xb1\xe7\x86\x9f\xe6\x82\x89\xe7\x9a\x84\xe7\xb3\xbb\xe7\xbb\x9f.  \n\xe5\xbd\x93\xe7\x84\xb6,\xe8\xbf\x98\xe6\x98\xaf\xe5\xb8\x8c\xe6\x9c\x9b\xe4\xbd\xa0\xe5\x85\xa8\xe9\x83\xa8\xe8\xb7\x91\xe9\x80\x9a,\xe5\x9b\xa0\xe4\xb8\xba\xe8\xbf\x99\xe9\x87\x8c\xe7\x9a\x84\xe6\xaf\x8f\xe4\xb8\xaa\xe6\xa8\xa1\xe5\x9d\x97\xe7\x9a\x84\xe6\x8a\x80\xe6\x9c\xaf\xe9\x80\x89\xe5\x9e\x8b\xe9\x83\xbd\xe6\x98\xaf\xe7\xbb\x8f\xe8\xbf\x87\xe7\xb2\xbe\xe5\xbf\x83\xe8\x80\x83\xe8\x99\x91\xe7\x9a\x84,\xe5\xb9\xb6\xe4\xb8\x94\xe5\x90\x8e\xe7\xbb\xad\xe4\xbc\x9a\xe4\xb8\x8d\xe5\x81\x9c\xe5\xae\x8c\xe5\x96\x84.  \n\n### 3.1 \xe7\x8e\xaf\xe5\xa2\x83\xe5\x87\x86\xe5\xa4\x87  \n\xe6\x93\x8d\xe4\xbd\x9c\xe7\xb3\xbb\xe7\xbb\x9f:Ubuntu 16.04.3 LTS  \n\xe5\x8e\x9f\xe5\x88\x99\xe4\xb8\x8a,\xe5\x85\xb6\xe4\xbb\x96\xe4\xb9\x9f\xe5\x8f\xaf\xe4\xbb\xa5,\xe7\xb3\xbb\xe7\xbb\x9f\xe4\xbd\xbf\xe7\x94\xa8\xe7\x9a\x84\xe7\xbb\x84\xe4\xbb\xb6\xe9\x83\xbd\xe6\x98\xaf\xe8\xb7\xa8\xe5\xb9\xb3\xe5\x8f\xb0\xe7\x9a\x84,\xe4\xbd\x86\xe6\x88\x91\xe5\x8f\xaa\xe5\x9c\xa8ubuntu\xe5\x92\x8cmac\xe8\xbf\x90\xe8\xa1\x8c\xe8\xbf\x87    \n\xe5\x86\x85\xe5\xad\x98:>=8G  \n\xe7\xa1\xac\xe7\x9b\x98:\xe8\xb6\x8a\xe5\xa4\xa7\xe8\xb6\x8a\xe5\xa5\xbd  \n\nclone\xe6\x88\x96\xe8\x80\x85fork\xe4\xbb\xa3\xe7\xa0\x81  \n```bash\n$ git clone https://github.com/foolcage/fooltrader.git\n```\n```bash\n$ cd fooltrader\n$ ./init_env.sh\n```\n\xe5\xa6\x82\xe6\x9e\x9c\xe4\xbd\xa0\xe6\x9c\x80\xe5\x90\x8e\xe7\x9c\x8b\xe5\x88\xb0:  \n```bash\nRequirements installed.  \nenv ok\n```\n\xe9\x82\xa3\xe4\xb9\x88\xe6\x81\xad\xe5\x96\x9c\xe4\xbd\xa0,\xe4\xbd\xa0\xe5\x8f\xaf\xe4\xbb\xa5\xe4\xbb\xa5\xe5\x90\x84\xe7\xa7\x8d\xe5\xa7\xbf\xe5\x8a\xbf\xe5\x8e\xbb\xe7\x8e\xa9\xe8\x80\x8d\xe4\xba\x86.\n\n\xe4\xb8\xa4\xe7\xa7\x8d\xe6\x96\xb9\xe5\xbc\x8f\xe5\x8e\xbb\xe4\xb8\x8b\xe8\xbd\xbd\xe5\x8e\x86\xe5\x8f\xb2\xe6\x95\xb0\xe6\x8d\xae(\xe7\x9b\xae\xe5\x89\x8d\xe5\x8c\x85\xe5\x90\xab\xe5\x88\xb02018-07-19\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae)\n* \xe7\x99\xbe\xe5\xba\xa6\xe7\xbd\x91\xe7\x9b\x98[*data.zip*](https://pan.baidu.com/s/1-s9ZdzXTCyTJUxhRMAd5Kw).\n>\xe7\x9b\xb4\xe6\x8e\xa5\xe8\xa7\xa3\xe5\x8e\x8b\xe5\x8f\xaf\xe7\x94\xa8\n* wget https://gitee.com/null_071_4607/fooltrader-data/raw/master/2018-07-19/dataa{a-j}\n> \xe8\xae\xb2a-j\xe4\xb8\xaa\xe6\x96\x87\xe4\xbb\xb6\xe4\xb8\x8b\xe8\xbd\xbd(\xe7\x9b\xae\xe5\x89\x8d\xe9\x80\x9f\xe5\xba\xa6\xe6\x9c\x80\xe5\xbf\xab\xe7\x9a\x84\xe6\x96\xb9\xe5\xbc\x8f),\xe7\x84\xb6\xe5\x90\x8e\xe5\x90\x88\xe5\xb9\xb6:cat data* > data.zip \xe5\x90\x8e\xe5\x86\x8d\xe8\xa7\xa3\xe5\x8e\x8b\n* ~~git clone https://gitee.com/null_071_4607/fooltrader-data~~\n>~~\xe8\xb7\x9f\xe7\x99\xbe\xe5\xba\xa6\xe7\xbd\x91\xe7\x9b\x98\xe6\x98\xaf\xe4\xb8\x80\xe6\xa0\xb7\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae\xef\xbc\x8csplit\xe8\xbf\x87\xe7\x9a\x84\xef\xbc\x8c\xe8\xbf\x9b\xe5\x85\xa52018-07-19\xe7\x9b\xae\xe5\xbd\x95\xef\xbc\x8ccat data* > data.zip \xe5\x90\x8e\xe5\x86\x8d\xe8\xa7\xa3\xe5\x8e\x8b~~\n\n* \xe8\x82\xa1\xe7\xa5\xa8tick\xe6\x95\xb0\xe6\x8d\xae\xef\xbc\x9ahttps://pan.baidu.com/s/10LR1Cy6ZGZMQiaZ8Lh4_QA#list/path=%2F\n> \xe8\xbf\x99\xe4\xb8\xaa\xe6\x95\xb0\xe6\x8d\xae\xe5\xa4\xaa\xe5\xa4\xa7\xef\xbc\x8c\xe5\xa4\xa7\xe6\xa6\x82\xe5\x8c\x85\xe5\x90\xab\xe5\x88\xb02018\xe5\xb9\xb43\xe6\x9c\x88\xe4\xbb\xbd\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae\xef\xbc\x8csplit\xe8\xbf\x87\xe7\x9a\x84\xef\xbc\x8c\n> cat 000* > 000.zip \xe5\x90\x8e\xe5\x86\x8d\xe8\xa7\xa3\xe5\x8e\x8b\n\n\xe7\x9c\x8b\xe4\xb8\x80\xe4\xb8\x8b[*\xe6\x95\xb0\xe6\x8d\xae\xe5\x8d\x8f\xe8\xae\xae*](./docs/contract.md),\xe8\xae\xbe\xe7\xbd\xae\xe5\xa5\xbdFOOLTRADER_STORE_PATH,\xe8\xa7\xa3\xe5\x8e\x8b\xe4\xb8\x8b\xe8\xbd\xbd\xe7\x9a\x84\xe6\x96\x87\xe4\xbb\xb6\xe5\x88\xb0\xe8\xaf\xa5\xe7\x9b\xae\xe5\xbd\x95.  \n\xe7\x84\xb6\xe5\x90\x8e\xe4\xbd\xbf\xe7\x94\xa8\xe4\xbd\xbf\xe7\x94\xa8[*\xe5\xae\x9a\xe6\x97\xb6\xe8\x84\x9a\xe6\x9c\xac*](./fooltrader/sched)\xe6\xaf\x8f\xe5\xa4\xa9\xe6\x8a\x93\xe5\x8f\x96\xe5\xa2\x9e\xe9\x87\x8f\xe6\x95\xb0\xe6\x8d\xae.  \n```bash\n$ source ve/bin/activate\n\xe6\x8a\x93\xe8\x82\xa1\xe7\xa5\xa8\xe5\x88\x97\xe8\xa1\xa8\n$ python fooltrader/sched/sched_stock_meta.py\n\xe6\x8a\x93\xe8\xa1\x8c\xe6\x83\x85\n$ python fooltrader/sched/sched_china_stock_quote.py\n\xe6\x8a\x93\xe8\xb4\xa2\xe6\x8a\xa5\n$ python fooltrader/sched/sched_finance.py\n```\n\xe8\xaf\xa5\xe9\xa1\xb9\xe7\x9b\xae\xe7\x9a\x84\xe7\x9b\xae\xe7\x9a\x84\xe4\xb9\x8b\xe4\xb8\x80\xe6\x98\xaf\xe6\x96\xb9\xe4\xbe\xbf\xe5\xa4\xa7\xe5\xae\xb6\xe5\x85\xb1\xe4\xba\xab\xe6\x95\xb0\xe6\x8d\xae,\xe4\xb8\x8d\xe9\x9c\x80\xe8\xa6\x81\xe6\xaf\x8f\xe4\xb8\xaa\xe4\xba\xba\xe9\x83\xbd\xe5\x8e\xbb\xe6\x8a\x93\xe5\x8e\x86\xe5\x8f\xb2\xe6\x95\xb0\xe6\x8d\xae\xe8\x80\x8c\xe5\xaf\xbc\xe8\x87\xb4\xe8\xa2\xab\xe5\xb1\x8f\xe8\x94\xbd.  \n\xe4\xb9\x9f\xe5\x8f\xaf\xe4\xbb\xa5\xe7\x94\xa8\xe8\xaf\xa5[*\xe8\x84\x9a\xe6\x9c\xac*](./fooltrader/datamanager/zipdata.py)\xe5\xaf\xb9\xe6\x95\xb0\xe6\x8d\xae\xe8\xbf\x9b\xe8\xa1\x8c\xe6\x89\x93\xe5\x8c\x85\xe5\x85\xb1\xe4\xba\xab  \n\n\xe8\xbf\x99\xe4\xba\x9b\xe8\x84\x9a\xe6\x9c\xac\xe4\xbc\x9a\xe5\xae\x9a\xe6\x97\xb6\xe5\x8e\xbb\xe6\x8a\x93\xe5\x8f\x96"\xe7\xbc\xba\xe5\xb0\x91"\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae,\xe5\x9c\xa8\xe5\x8e\x86\xe5\x8f\xb2\xe6\x95\xb0\xe6\x8d\xae\xe5\xae\x8c\xe6\x95\xb4\xe6\x80\xa7\xe6\xa3\x80\xe6\x9f\xa5\xe9\x80\x9a\xe8\xbf\x87\xe5\x90\x8e,\xe5\x85\xb6\xe5\xae\x9e\xe5\xb0\xb1\xe6\x98\xaf\xe5\x8f\xaa\xe6\x98\xaf\xe6\x8a\x93\xe5\x8f\x96\xe5\xbd\x93\xe5\xa4\xa9\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae,\xe8\xbf\x99\xe6\xa0\xb7\xe6\x88\x91\xe4\xbb\xac\xe5\xb0\xb1\xe6\x9c\x89\xe4\xba\x86\xe4\xb8\x80\xe4\xb8\xaa\xe8\x87\xaa\xe5\x8a\xa8\xe5\x8c\x96\xe8\x87\xaa\xe6\x88\x91\xe7\xbb\xb4\xe6\x8a\xa4\xe7\x9a\x84\xe5\xae\x8c\xe6\x95\xb4\xe6\x95\xb0\xe6\x8d\xae\xe6\xba\x90.  \n\n\xe8\xbf\x99\xe9\x87\x8c\xe6\x8a\x8a\xe6\x8a\x93\xe5\x8f\x96\xe6\x95\xb0\xe6\x8d\xae\xe4\xbd\x9c\xe4\xb8\xba\xe4\xb8\x80\xe4\xb8\xaa\xe5\x8d\x95\xe7\x8b\xac\xe7\x9a\x84\xe6\xa8\xa1\xe5\x9d\x97,\xe8\x80\x8c\xe4\xb8\x8d\xe6\x98\xaf\xe5\x83\x8f\xe6\x9f\x90\xe4\xba\x9b\xe5\xbc\x80\xe6\xba\x90\xe9\xa1\xb9\xe7\x9b\xae\xe9\x82\xa3\xe6\xa0\xb7api\xe5\x92\x8c\xe7\x88\xac\xe8\x99\xab\xe8\x80\xa6\xe5\x90\x88\xe5\x9c\xa8\xe4\xb8\x80\xe8\xb5\xb7,\xe4\xb8\xbb\xe8\xa6\x81\xe6\x98\xaf\xe4\xb8\xba\xe4\xba\x86:\n> \xe7\x88\xac\xe8\x99\xab\xe5\x8f\xaa\xe5\xb9\xb2\xe7\x88\xac\xe8\x99\xab\xe7\x9a\x84\xe4\xba\x8b:\xe4\xb8\x93\xe6\xb3\xa8\xe6\x8a\x93\xe5\x8f\x96\xe7\x9a\x84\xe9\x80\x9f\xe5\xba\xa6,\xe6\x9b\xb4\xe5\xa5\xbd\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae\xe5\x88\x86\xe7\xb1\xbb,\xe6\x95\xb0\xe6\x8d\xae\xe8\xa1\xa5\xe5\x85\xa8,\xe9\x98\xb2\xe5\xb1\x8f\xe8\x94\xbd\xe7\xad\x89  \n> api\xe8\xae\xbe\xe8\xae\xa1\xe5\x8f\xaa\xe4\xbe\x9d\xe8\xb5\x96[*\xe6\x95\xb0\xe6\x8d\xae\xe5\x8d\x8f\xe8\xae\xae*](./docs/contract.md),\xe4\xbb\x8e\xe8\x80\x8c\xe5\x85\xb7\xe6\x9c\x89\xe6\x9b\xb4\xe5\xa5\xbd\xe7\x9a\x84\xe9\x80\x9f\xe5\xba\xa6\xe5\x92\x8c\xe7\x81\xb5\xe6\xb4\xbb\xe6\x80\xa7\n\n\xe6\x9c\x80\xe5\x90\x8e\xe5\xbc\xba\xe8\xb0\x83\xe4\xb8\x80\xe4\xb8\x8b,\xe6\x95\xb0\xe6\x8d\xae\xe6\x8a\x93\xe4\xb8\x8b\xe6\x9d\xa5\xe4\xba\x86,\xe6\x80\x8e\xe4\xb9\x88\xe4\xbd\xbf\xe7\x94\xa8?\xe8\xaf\xb7\xe5\x8f\x82\xe8\x80\x83[*\xe6\x95\xb0\xe6\x8d\xae\xe5\x8d\x8f\xe8\xae\xae*](./docs/contract.md)  \n\xe5\x88\xb0\xe8\xbf\x99\xe9\x87\x8c,\xe5\xa6\x82\xe6\x9e\x9c\xe4\xbd\xa0\xe4\xb8\x8d\xe6\x83\xb3\xe4\xbd\xbf\xe7\x94\xa8elastic-search,\xe4\xb9\x9f\xe4\xb8\x8d\xe6\x83\xb3\xe4\xbd\xbf\xe7\x94\xa8python,\xe4\xbd\xa0\xe5\xb0\xb1\xe6\x98\xaf\xe6\x83\xb3\xe7\x94\xa8java,mysql,\xe6\x88\x96\xe8\x80\x85\xe4\xbd\xa0superset,redash,hadoop\xe5\x95\xa5\xe7\x9a\x84\xe7\x8e\xa9\xe5\xbe\x97\xe5\xbe\x88\xe7\x86\x9f,\xe6\xb2\xa1\xe9\x97\xae\xe9\xa2\x98,\xe6\xa0\xb9\xe6\x8d\xae\xe6\x95\xb0\xe6\x8d\xae\xe5\x8d\x8f\xe8\xae\xae\xe4\xbd\xa0\xe5\xba\x94\xe8\xaf\xa5\xe5\xbe\x88\xe5\xae\xb9\xe6\x98\x93\xe7\x9a\x84\xe6\x8a\x8a\xe6\x95\xb0\xe6\x8d\xae\xe6\x94\xbe\xe5\x88\xb0\xe4\xbd\xa0\xe9\x9c\x80\xe8\xa6\x81\xe7\x9a\x84\xe5\x9c\xb0\xe6\x96\xb9\xe8\xbf\x9b\xe8\xa1\x8c\xe7\xa0\x94\xe7\xa9\xb6.\n\xe5\xbd\x93\xe7\x84\xb6,\xe6\x88\x91\xe6\x9b\xb4\xe5\xb8\x8c\xe6\x9c\x9b\xe4\xbd\xa0\xe6\x8a\x8a\xe4\xbb\xa3\xe7\xa0\x81\xe8\xb4\xa1\xe7\x8c\xae\xe5\x88\xb0connector\xe9\x87\x8c\xe9\x9d\xa2,pr\xe7\xbb\x99\xe6\x88\x91,\xe6\x97\xa2\xe6\x8f\x90\xe9\xab\x98\xe8\x87\xaa\xe5\xb7\xb1\xe7\x9a\x84\xe4\xbb\xa3\xe7\xa0\x81\xe6\xb0\xb4\xe5\xb9\xb3,\xe5\x8f\x88\xe6\x96\xb9\xe4\xbe\xbf\xe4\xba\x86\xe9\x9c\x80\xe8\xa6\x81\xe4\xbd\xbf\xe7\x94\xa8\xe7\x9a\x84\xe4\xba\xba,\xe5\xb2\x82\xe4\xb8\x8d\xe5\xbf\xab\xe5\x93\x89?  \n### 3.4 elastic-search\xe5\x92\x8ckibana\xe5\xae\x89\xe8\xa3\x85(6.1.1)  \n>\xe4\xbb\x85\xe4\xbb\x85\xe5\x8f\xaa\xe6\x98\xaf\xe6\x8a\x8a\xe6\x95\xb0\xe6\x8d\xae\xe6\x8d\xa2\xe4\xb8\x80\xe4\xb8\xaa\xe5\xad\x98\xe5\x82\xa8,\xe7\xb3\xbb\xe7\xbb\x9f\xe5\xb0\xb1\xe5\x8f\x91\xe7\x94\x9f\xe4\xba\x86\xe4\xb8\x8d\xe5\x8f\xaf\xe6\x80\x9d\xe8\xae\xae\xe7\x9a\x84\xe5\x8f\x98\xe5\x8c\x96.\n\n\xe5\x8f\xaf\xe4\xbb\xa5\xe5\x8f\x82\xe8\x80\x83\xe5\xae\x98\xe6\x96\xb9\xe6\x96\x87\xe6\xa1\xa3\xe8\xbf\x9b\xe8\xa1\x8c\xe5\xae\x89\xe8\xa3\x85:https://www.elastic.co/guide/en/elastic-stack/current/installing-elastic-stack.html  \n\xe4\xb9\x9f\xe5\x8f\xaf\xe4\xbb\xa5\xe7\x94\xa8\xe4\xbb\xa5\xe4\xb8\x8b\xe5\x91\xbd\xe4\xbb\xa4\xe6\x9d\xa5\xe5\xae\x8c\xe6\x88\x90:  \n```bash\n$ #\xe4\xb8\x8b\xe8\xbd\xbdxpack\n$ wget https://artifacts.elastic.co/downloads/packs/x-pack/x-pack-6.1.1.zip\n$ #\xe4\xb8\x8b\xe8\xbd\xbdes\n$ wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.1.1.zip\n$ unzip elasticsearch-6.1.1.zip\n$ cd elasticsearch-6.1.1/\n$ #\xe4\xb8\xbaes\xe5\xae\x89\xe8\xa3\x85xpcck\xe6\x8f\x92\xe4\xbb\xb6,\xe5\xb0\xb1\xe6\x98\xaf\xe5\x88\x9a\xe5\x88\x9a\xe4\xb8\x8b\xe8\xbd\xbd\xe7\x9a\x84\xe9\x82\xa3\xe4\xb8\xaax-pack-6.1.1.zip,\xe6\xa0\xbc\xe5\xbc\x8f\xe4\xb8\xbafile://+\xe5\x85\xb6\xe8\xb7\xaf\xe5\xbe\x84\n$ bin/elasticsearch-plugin install file:///path/to/file/x-pack-6.1.1.zip\n$ #\xe7\x94\xa8fooltrader\xe4\xb8\xad\xe7\x9a\x84elasticsearch.yml\xe8\xa6\x86\xe7\x9b\x96es\xe9\xbb\x98\xe8\xae\xa4\xe9\x85\x8d\xe7\xbd\xae\n$ cp ../fooltrader/config/elasticsearch.yml config/\n$ #\xe5\x90\xaf\xe5\x8a\xa8es,\xe5\x8f\xaf\xe6\xa0\xb9\xe6\x8d\xae\xe8\x87\xaa\xe5\xb7\xb1\xe7\x9a\x84\xe6\x83\x85\xe5\x86\xb5\xe6\x9b\xb4\xe6\x94\xb9heap\xe5\xa4\xa7\xe5\xb0\x8f,<=32g\n$ ES_JAVA_OPTS="-Xms8g -Xmx8g"  ./bin/elasticsearch\n$\n$ #\xe4\xb8\x8b\xe8\xbd\xbdkibana\n$ wget https://artifacts.elastic.co/downloads/kibana/kibana-6.1.1-linux-x86_64.tar.gz\n$ tar -xzf kibana-6.1.1-linux-x86_64.tar.gz\n$ cd kibana-6.1.1-linux-x86_64/\n$ #\xe4\xb8\xbakibana\xe5\xae\x89\xe8\xa3\x85xpcck\xe6\x8f\x92\xe4\xbb\xb6,\xe5\xb0\xb1\xe6\x98\xaf\xe5\x88\x9a\xe5\x88\x9a\xe4\xb8\x8b\xe8\xbd\xbd\xe7\x9a\x84\xe9\x82\xa3\xe4\xb8\xaax-pack-6.1.1.zip,\xe6\xa0\xbc\xe5\xbc\x8f\xe4\xb8\xbafile://+\xe5\x85\xb6\xe8\xb7\xaf\xe5\xbe\x84\n$ bin/kibana-plugin install file:///path/to/file/x-pack-6.1.1.zip\n$ #\xe7\x94\xa8fooltrader\xe4\xb8\xad\xe7\x9a\x84kibana.yml\xe8\xa6\x86\xe7\x9b\x96kibana\xe9\xbb\x98\xe8\xae\xa4\xe9\x85\x8d\xe7\xbd\xae\n$ cp ../fooltrader/config/kibana.yml config/\n$ ./bin/kibana\n```\n\n### 3.5 \xe6\x95\xb0\xe6\x8d\xae\xe5\xad\x98\xe5\x82\xa8\xe5\x88\xb0elastic-search  \n\xe5\x88\xb0\xe8\xbf\x99\xe9\x87\x8c,\xe6\x88\x91\xe8\xbf\x98\xe6\x98\xaf\xe9\xbb\x98\xe8\xae\xa4\xe4\xbd\xa0\xe5\x9c\xa8fooltrader\xe7\x9a\x84ipython\xe7\x8e\xaf\xe5\xa2\x83\xe4\xb8\x8b.\n```bash\nIn [1]: from fooltrader.connector import es_connector\n#\xe8\x82\xa1\xe7\xa5\xa8\xe5\x85\x83\xe4\xbf\xa1\xe6\x81\xaf->es\nIn [2]: es_connector.security_meta_to_es()\n#\xe6\x8c\x87\xe6\x95\xb0\xe6\x95\xb0\xe6\x8d\xae->es\nIn [3]: es_connector.kdata_to_es(security_type=\'index\')\n#\xe4\xb8\xaa\xe8\x82\xa1k\xe7\xba\xbf->es\nIn [4]: es_connector.kdata_to_es(security_type=\'stock\')\n#\xe4\xbd\xa0\xe4\xb9\x9f\xe5\x8f\xaf\xe4\xbb\xa5\xe5\xa4\x9a\xe5\xbc\x80\xe5\x87\xa0\xe4\xb8\xaa\xe7\xaa\x97\xe5\x8f\xa3,\xe6\x8c\x87\xe5\xae\x9a\xe8\x8c\x83\xe5\x9b\xb4,\xe6\x8f\x90\xe9\xab\x98\xe7\xb4\xa2\xe5\xbc\x95\xe9\x80\x9f\xe5\xba\xa6\nIn [4]: es_connector.kdata_to_es(start=\'002000\',end=\'002999\')\n#\xe8\xb4\xa2\xe5\x8a\xa1\xe6\x95\xb0\xe6\x8d\xae->es\nIn [5]: es_connector.finance_sheet_to_es(\'balance_sheet\')\nIn [5]: es_connector.finance_sheet_to_es(\'cash_flow_statement\')\nIn [5]: es_connector.finance_sheet_to_es(\'income_statement\')\n```\n\xe6\x9b\xb4\xe5\xa4\x9a\xe5\x8a\x9f\xe8\x83\xbd\xe5\x8f\xaf\xe4\xbb\xa5\xe7\x9b\xb4\xe6\x8e\xa5\xe6\x9f\xa5\xe7\x9c\x8bes_connector\xe7\x9a\x84\xe6\xba\x90\xe7\xa0\x81,\xe4\xb9\x9f\xe5\x8f\xaf\xe4\xbb\xa5\xe5\x8a\xa0\xe5\x88\xb0\xe5\xae\x9a\xe6\x97\xb6\xe4\xbb\xbb\xe5\x8a\xa1\xe9\x87\x8c\xe9\x9d\xa2,\xe6\x89\x80\xe6\x9c\x89\xe7\xb4\xa2\xe5\xbc\x95\xe5\x87\xbd\xe6\x95\xb0\xe9\x83\xbd\xe5\x81\x9a\xe4\xba\x86\xe6\x97\xb6\xe9\x97\xb4\xe5\x88\xa4\xe6\x96\xad,\xe5\x8f\xaa\xe4\xbc\x9a\xe6\xb7\xbb\xe5\x8a\xa0\xe6\xb2\xa1\xe6\x9c\x89\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae.\n\n\xe7\x84\xb6\xe5\x90\x8e,\xe6\x88\x91\xe4\xbb\xac\xe7\xae\x80\xe5\x8d\x95\xe7\x9a\x84\xe6\x9d\xa5\xe9\xa2\x86\xe7\x95\xa5\xe4\xb8\x80\xe4\xb8\x8b\xe5\xae\x83\xe7\x9a\x84\xe5\xa8\x81\xe5\x8a\x9b  \n\xe6\x9f\xa5\xe8\xaf\xa22017\xe5\xb9\xb4\xe4\xb8\xad\xe6\x8a\xa5\xe5\x87\x80\xe5\x88\xa9\xe6\xb6\xa6top 5\n```bash\ncurl -XPOST \'localhost:9200/income_statement/doc/_search?pretty&filter_path=hits.hits._source\' -H \'Content-Type: application/json\' -d\'\n{\n  "query": {\n    "range": {\n      "reportDate": {\n        "gte": "20170630",\n        "lte": "20170630"\n      }\n    }\n  },\n  "size": 5,\n  "sort": [\n    {\n      "netProfit": {\n        "order": "desc"\n      }\n    }\n  ]\n}\n\'\n{\n  "hits": {\n    "hits": [\n      {\n        "_source": {\n          "exchangeGains": 1.3242E10,\n          "netProfit": 1.827E9,\n          "securityId": "stock_sh_601318",\n          "investmentIncome": 2.0523E10,\n          "operatingProfit": 7.8107E10,\n          "accumulatedOtherComprehensiveIncome": 2.0E8,\n          "attributableToMinorityShareholders": 6.5548E10,\n          "sellingExpenses": 1.0777E10,\n          "investmentIncomeFromRelatedEnterpriseAndJointlyOperating": "398259000000.00",\n          "id": "stock_sh_601318_20170630",\n          "minorityInterestIncome": 6.238E10,\n          "code": "601318",\n          "otherComprehensiveIncome": 6.5506E10,\n          "nonOperatingIncome": 4.006E9,\n          "financingExpenses": 0.0,\n          "reportEventDate": "2017-08-18",\n          "netProfitAttributedToParentCompanyOwner": 5.778E10,\n          "disposalLossOnNonCurrentLiability": 9.01E8,\n          "incomeFromChangesInFairValue": -2.56E8,\n          "incomeTaxExpense": 2.2E7,\n          "operatingTotalCosts": 3.4139E11,\n          "assetsDevaluation": 8.75E8,\n          "EPS": 1.9449E10,\n          "operatingCosts": 9.4E7,\n          "attributableToOwnersOfParentCompany": 1.58E8,\n          "ManagingCosts": 6.402E10,\n          "totalProfits": 8.403E9,\n          "dilutedEPS": 2.4575E10,\n          "reportDate": "20170630",\n          "businessTaxesAndSurcharges": 9.442E9,\n          "operatingRevenue": 4.63765E11,\n          "nonOperatingExpenditure": 1.35892E11\n        }\n      ]\n    }\n  }\n}\n```\n\xe5\xae\x9e\xe9\x99\x85\xe4\xb8\x8aREST\xe6\x8e\xa5\xe5\x8f\xa3\xe5\xa4\xa9\xe7\x84\xb6\xe5\xb0\xb1\xe6\x9c\x89\xe4\xba\x86,\xe5\x81\x9a\xe8\xb7\xa8\xe5\xb9\xb3\xe5\x8f\xb0\xe6\x8e\xa5\xe5\x8f\xa3\xe9\x9d\x9e\xe5\xb8\xb8\xe6\x96\xb9\xe4\xbe\xbf,\xe6\xa0\xb9\xe6\x8d\xae[*\xe6\x95\xb0\xe6\x8d\xae\xe5\x8d\x8f\xe8\xae\xae*](./docs/contract.md) \xe5\x92\x8cES DSL\xe5\x8f\xaf\xe4\xbb\xa5\xe9\x9d\x9e\xe5\xb8\xb8\xe6\x96\xb9\xe4\xbe\xbf\xe7\x9a\x84\xe8\xbf\x9b\xe8\xa1\x8c\xe6\x9f\xa5\xe8\xaf\xa2\xe5\x92\x8c\xe8\x81\x9a\xe5\x90\x88\xe8\xae\xa1\xe7\xae\x97.\n\n### 3.6 \xe4\xbd\xbf\xe7\x94\xa8kibana\xe8\xbf\x9b\xe8\xa1\x8c\xe5\x88\x86\xe6\x9e\x90\n(\xe6\x96\x87\xe6\xa1\xa3\xe5\xbe\x85\xe5\xae\x8c\xe5\x96\x84)\n\n### 3.7 \xe5\x9b\x9e\xe6\xb5\x8b\n(\xe6\x96\x87\xe6\xa1\xa3\xe5\xbe\x85\xe5\xae\x8c\xe5\x96\x84)\n\n### 3.8 \xe4\xba\xa4\xe6\x98\x93\n(\xe6\x96\x87\xe6\xa1\xa3\xe5\xbe\x85\xe5\xae\x8c\xe5\x96\x84)\n\n# \xe6\x94\xaf\xe6\x8c\x81\xe7\x9a\x84\xe5\x8a\x9f\xe8\x83\xbd\n* \xe7\x88\xac\xe8\x99\xab\xe4\xbb\xa3\xe7\x90\x86\xe6\xa1\x86\xe6\x9e\xb6  \n\n>\xe5\x8f\xaf\xe9\x85\x8d\xe7\xbd\xae\xe4\xbb\xa3\xe7\x90\x86\xe6\x9c\x8d\xe5\x8a\xa1\xe5\x99\xa8\xe6\xb1\xa0\xe5\x92\x8c\xe5\xb9\xb6\xe5\x8f\x91\xe6\x95\xb0,\xe4\xbb\x8e\xe8\x80\x8c\xe6\x8f\x90\xe9\xab\x98\xe7\x88\xac\xe8\x99\xab\xe7\x9a\x84\xe5\x81\xa5\xe5\xa3\xae\xe6\x80\xa7\n\n* \xe6\x95\xb0\xe6\x8d\xae\xe6\x8a\x93\xe5\x8f\x96  \n  * A\xe8\x82\xa1\xe6\xa0\x87\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf\xe6\x8a\x93\xe5\x8f\x96  \n  * A\xe8\x82\xa1tick\xe6\x95\xb0\xe6\x8d\xae\xe6\x8a\x93\xe5\x8f\x96  \n  * A\xe8\x82\xa1\xe6\x97\xa5\xe7\xba\xbf\xe6\x95\xb0\xe6\x8d\xae\xe6\x8a\x93\xe5\x8f\x96  \n  * A\xe8\x82\xa1\xe8\xb4\xa2\xe5\x8a\xa1\xe6\x95\xb0\xe6\x8d\xae\xe6\x8a\x93\xe5\x8f\x96  \n  * A\xe8\x82\xa1\xe4\xba\x8b\xe4\xbb\xb6\xe6\x8a\x93\xe5\x8f\x96\n  * \xe6\x95\xb0\xe5\xad\x97\xe8\xb4\xa7\xe5\xb8\x81\xe8\xa1\x8c\xe6\x83\x85\n  * \xe6\x9c\x9f\xe8\xb4\xa7\xe6\x95\xb0\xe6\x8d\xae  \n\n>\xe6\x95\xb0\xe6\x8d\xae\xe7\x9a\x84\xe5\xa4\x84\xe7\x90\x86\xe6\x96\xb9\xe5\xbc\x8f\xe6\x98\xaf,\xe5\x85\x88\xe5\xae\x9a\xe4\xb9\x89[*\xe6\x95\xb0\xe6\x8d\xae\xe5\x8d\x8f\xe8\xae\xae*](./docs/contract.md),\xe5\x86\x8d\xe5\xaf\xbb\xe6\x89\xbe\xe6\x95\xb0\xe6\x8d\xae\xe6\xba\x90,\xe8\xbf\x99\xe6\xa0\xb7\xe5\x81\x9a\xe7\x9a\x84\xe5\xa5\xbd\xe5\xa4\x84\xe6\x98\xaf:\xe6\x95\xb0\xe6\x8d\xae\xe5\x8d\x8f\xe8\xae\xae\xe7\x9a\x84\xe7\xa8\xb3\xe5\xae\x9a\xe4\xb8\xba\xe6\x95\xb4\xe4\xb8\xaa\xe7\xb3\xbb\xe7\xbb\x9f\xe7\x9a\x84\xe7\xa8\xb3\xe5\xae\x9a\xe6\x89\x93\xe4\xb8\x8b\xe5\x9d\x9a\xe5\xae\x9e\xe7\x9a\x84\xe5\x9f\xba\xe7\xa1\x80,\xe5\xa4\x9a\xe6\x95\xb0\xe6\x8d\xae\xe6\xba\x90\xe6\xaf\x94\xe8\xbe\x83\xe6\x8f\x90\xe9\xab\x98\xe6\x95\xb0\xe6\x8d\xae\xe5\x87\x86\xe7\xa1\xae\xe6\x80\xa7,\xe5\xa4\x9a\xe6\x95\xb0\xe6\x8d\xae\xe6\xba\x90\xe8\x81\x9a\xe5\x90\x88\xe6\x8f\x90\xe9\xab\x98\xe6\x95\xb0\xe6\x8d\xae\xe5\xae\x8c\xe6\x95\xb4\xe6\x80\xa7.\n\n* \xe5\xb8\xb8\xe7\x94\xa8\xe6\x8a\x80\xe6\x9c\xaf\xe6\x8c\x87\xe6\xa0\x87\xe8\xae\xa1\xe7\xae\x97(ma,ema,macd\xe7\xad\x89)\n\n* \xe5\x9b\x9e\xe6\xb5\x8b\xe6\xa1\x86\xe6\x9e\xb6\n\n>\xe5\xb0\x8f\xe9\x87\x91\xe5\xb1\x9e\xe6\xb6\xa8\xe7\x96\xaf\xe4\xba\x86,\xe4\xbd\x86\xe7\x9b\xb8\xe5\x85\xb3\xe7\x9a\x84\xe4\xb8\x8a\xe5\xb8\x82\xe5\x85\xac\xe5\x8f\xb8\xe8\x82\xa1\xe4\xbb\xb7\xe8\xbf\x98\xe5\x9c\xa8\xe5\x8e\x86\xe5\x8f\xb2\xe6\x96\xb0\xe4\xbd\x8e,\xe6\x88\x91\xe6\x98\xaf\xe4\xb8\x8d\xe6\x98\xaf\xe5\x8f\xaf\xe4\xbb\xa5\xe4\xb9\xb0\xe4\xb8\x80\xe7\x82\xb9?  \n\xe9\x87\x91\xe5\x8f\x89\xe4\xb9\xb0,\xe6\xad\xbb\xe5\x8f\x89\xe5\x8d\x96,\xe5\x9c\xa8\xe4\xb8\x8d\xe5\x90\x8c\xe7\xba\xa7\xe5\x88\xab\xe4\xb8\x8a\xe8\xa1\xa8\xe7\x8e\xb0\xe5\xa6\x82\xe4\xbd\x95?\xe5\x9c\xa8\xe4\xb8\x8d\xe5\x90\x8c\xe6\xa0\x87\xe7\x9a\x84\xe4\xb8\x8a\xe8\xa1\xa8\xe7\x8e\xb0\xe5\xa6\x82\xe4\xbd\x95?  \n\xe7\x9b\xb8\xe5\x90\x8c\xe7\x9a\x84\xe7\xad\x96\xe7\x95\xa5,\xe5\xa6\x82\xe4\xbd\x95\xe5\xbf\xab\xe9\x80\x9f\xe7\x9a\x84\xe5\x9c\xa8\xe6\x89\x80\xe6\x9c\x89\xe6\xa0\x87\xe7\x9a\x84\xe4\xb8\x8a\xe5\x9b\x9e\xe6\xb5\x8b,\xe5\xb9\xb6\xe8\xbf\x9b\xe8\xa1\x8c\xe5\xaf\xb9\xe6\xaf\x94?  \n\xe5\x88\xa9\xe6\xb6\xa6\xe5\xa2\x9e\xe9\x95\xbf,\xe8\x82\xa1\xe4\xbb\xb7\xe4\xb9\x9f\xe5\xa2\x9e\xe9\x95\xbf?\xe6\x88\x96\xe8\x80\x85\xe6\x8f\x90\xe5\x89\x8d\xe5\x8f\x8d\xe6\x98\xa0?\xe6\xbb\x9e\xe5\x90\x8e\xe5\x8f\x8d\xe6\x98\xa0?\xe5\x90\x84\xe7\xa7\x8d\xe8\xa1\xa8\xe7\x8e\xb0\xe7\x9a\x84\xe6\xaf\x94\xe4\xbe\x8b\xe5\xa6\x82\xe4\xbd\x95?  \n\xe5\x90\x84\xe4\xb8\xaa\xe7\xad\x96\xe7\x95\xa5\xe4\xb9\x8b\xe9\x97\xb4\xe5\xa6\x82\xe4\xbd\x95\xe9\x80\x9a\xe4\xbf\xa1,\xe4\xbb\x8e\xe8\x80\x8c\xe5\xbd\xa2\xe6\x88\x90\xe5\x90\x88\xe5\x8a\x9b?  \n#### \xe6\xb2\xa1\xe9\x94\x99:\xe5\x9b\x9e\xe6\xb5\x8b\xe6\xa1\x86\xe6\x9e\xb6\xe5\xbf\x85\xe9\xa1\xbb\xe8\xa6\x81\xe8\x80\x83\xe8\x99\x91\xe8\xbf\x99\xe4\xba\x9b\xe9\x97\xae\xe9\xa2\x98  \n\n# TODO\n* \xe4\xba\xa4\xe6\x98\x93DSL\xe8\xae\xbe\xe8\xae\xa1\n* WEB\xe7\xae\xa1\xe7\x90\x86\xe7\x95\x8c\xe9\x9d\xa2,\xe5\x90\x91\xe5\xaf\xbc\xe5\xbc\x8f\xe7\x94\x9f\xe6\x88\x90\xe7\xad\x96\xe7\x95\xa5\n* \xe5\xae\x9e\xe6\x97\xb6\xe8\xa1\x8c\xe6\x83\x85\xe5\x8f\x8akafka\xe5\xae\x9e\xe6\x97\xb6\xe8\xae\xa1\xe7\xae\x97\n* \xe9\x9b\x86\xe6\x88\x90vnpy\xe7\x9a\x84\xe4\xba\xa4\xe6\x98\x93\xe6\x8e\xa5\xe5\x8f\xa3\n* \xe6\xb8\xaf\xe8\x82\xa1\xe6\x95\xb0\xe6\x8d\xae\xe6\x8a\x93\xe5\x8f\x96\n\n# \xe8\x81\x94\xe7\xb3\xbb\xe6\x96\xb9\xe5\xbc\x8f  \nQQ\xe7\xbe\xa4:300911873  \n\xe5\xa6\x82\xe6\x9e\x9c\xe4\xbd\xa0\xe5\x96\x9c\xe6\xac\xa2\xe8\xaf\xa5\xe9\xa1\xb9\xe7\x9b\xae,\xe8\xaf\xb7\xe5\x8a\xa0\xe6\x98\x9f\xe6\x94\xaf\xe6\x8c\x81\xe4\xb8\x80\xe4\xb8\x8b,\xe5\xb9\xb6\xe5\x9c\xa8\xe7\x94\xb3\xe8\xaf\xb7\xe5\x85\xa5\xe7\xbe\xa4\xe6\x97\xb6\xe5\x91\x8a\xe7\x9f\xa5github user name.  \n'