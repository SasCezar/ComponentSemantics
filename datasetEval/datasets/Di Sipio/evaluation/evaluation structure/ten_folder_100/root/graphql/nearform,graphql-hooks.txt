b'# graphql-hooks\n\n[![Join the community on Spectrum](https://withspectrum.github.io/badge/badge.svg)](https://spectrum.chat/graphql-hooks)\n[![CircleCI](https://circleci.com/gh/nearform/graphql-hooks/tree/master.svg?style=svg)](https://circleci.com/gh/nearform/graphql-hooks/tree/master)\n[![Coverage Status](https://coveralls.io/repos/github/nearform/graphql-hooks/badge.svg?branch=master)](https://coveralls.io/github/nearform/graphql-hooks?branch=master)\n[![bundlephobia](https://img.shields.io/bundlephobia/minzip/graphql-hooks.svg?style=flat&label=size)](https://bundlephobia.com/result?p=graphql-hooks)\n[![npm](https://img.shields.io/npm/v/graphql-hooks.svg?color=brightgreen)](https://www.npmjs.com/package/graphql-hooks)\n[![All Contributors](https://img.shields.io/badge/all_contributors-20-orange.svg?style=flat-square)](#contributors)\n[![lerna](https://img.shields.io/badge/maintained%20with-lerna-cc00ff.svg)](https://lernajs.io/)\n\n\xf0\x9f\x8e\xa3 Minimal hooks-first GraphQL client.\n\n## Features\n\n- \xf0\x9f\xa5\x87 First-class hooks API\n- \xe2\x9a\x96\xef\xb8\x8f _Tiny_ bundle: only 7.6kB (2.8 gzipped)\n- \xf0\x9f\x93\x84 Full SSR support: see [graphql-hooks-ssr](packages/graphql-hooks-ssr)\n- \xf0\x9f\x94\x8c Plugin Caching: see [graphql-hooks-memcache](packages/graphql-hooks-memcache)\n- \xf0\x9f\x94\xa5 No more render props hell\n- \xe2\x8f\xb3 Handle loading and error states with ease\n\n## Install\n\n`npm install graphql-hooks`\n\nor\n\n`yarn add graphql-hooks`\n\n## Support\n\n- Latest 8 & 10 Node releases\n- Browsers [`> 1%, not dead`](https://browserl.ist/?q=%3E+1%25%2C+not+dead)\n\nConsider polyfilling:\n\n- [`FormData`](https://developer.mozilla.org/docs/Web/API/FormData)\n- [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\n- [`fetch`](https://developer.mozilla.org/docs/Web/API/Fetch_API). NOTE: A custom implementation can also be provided instead of polyfilling, [see `GraphQLClient`](#GraphQLClient)\n\n## Quick Start\n\nFirst you\'ll need to create a client and wrap your app with the provider:\n\n```js\nimport { GraphQLClient, ClientContext } from \'graphql-hooks\'\n\nconst client = new GraphQLClient({\n  url: \'/graphql\'\n})\n\nfunction App() {\n  return (\n    <ClientContext.Provider value={client}>\n      {/* children */}\n    </ClientContext.Provider>\n  )\n}\n```\n\nNow in your child components you can make use of `useQuery`\n\n```js\nimport { useQuery } from \'graphql-hooks\'\n\nconst HOMEPAGE_QUERY = `query HomePage($limit: Int) {\n  users(limit: $limit) {\n    id\n    name\n  }\n}`\n\nfunction MyComponent() {\n  const { loading, error, data } = useQuery(HOMEPAGE_QUERY, {\n    variables: {\n      limit: 10\n    }\n  })\n\n  if (loading) return \'Loading...\'\n  if (error) return \'Something Bad Happened\'\n\n  return (\n    <ul>\n      {data.users.map(({ id, name }) => (\n        <li key={id}>{name}</li>\n      ))}\n    </ul>\n  )\n}\n```\n\n# Table of Contents\n\n- API\n  - [GraphQLClient](#GraphQLClient)\n  - [ClientContext](#ClientContext)\n  - [useQuery](#useQuery)\n  - [useManualQuery](#useManualQuery)\n  - [useMutation](#useMutation)\n- Guides\n  - [SSR](#SSR)\n  - [Pagination](#Pagination)\n  - [File uploads](#File-uploads)\n  - [Authentication](#Authentication)\n  - [Fragments](#Fragments)\n  - [Migrating from Apollo](#Migrating-from-Apollo)\n    - [ApolloClient \xe2\x9e\xa1\xef\xb8\x8f GraphQLClient](#apolloclient-\xef\xb8\x8f-graphqlclient)\n    - [ApolloProvider \xe2\x9e\xa1\xef\xb8\x8f ClientContext.Provider](#apolloprovider-\xef\xb8\x8f-clientcontextprovider)\n    - [Query Component \xe2\x9e\xa1\xef\xb8\x8f useQuery](#query-component-\xef\xb8\x8f-usequery)\n    - [Mutation Component \xe2\x9e\xa1\xef\xb8\x8f useMutation](#mutation-component-\xef\xb8\x8f-usemutation)\n  - [Other]\n    - [Request interceptors](#request-interceptors)\n\n## API\n\n## `GraphQLClient`\n\n**Usage**:\n\n```js\nimport { GraphQLClient } from \'graphql-hooks\'\nconst client = new GraphQLClient(config)\n```\n\n**`config`**: Object containing configuration properties\n\n- `url` (**Required**): The url to your GraphQL server\n- `ssrMode`: Boolean - set to `true` when using on the server for server-side rendering; defaults to `false`\n- `cache` (**Required** if `ssrMode` is `true`, otherwise optional): Object with the following methods:\n  - `cache.get(key)`\n  - `cache.set(key, data)`\n  - `cache.delete(key)`\n  - `cache.clear()`\n  - `cache.keys()`\n  - `getInitialState()`\n  - See [graphql-hooks-memcache](packages/graphql-hooks-memcache) as a reference implementation\n- `fetch(url, options)`: Fetch implementation - defaults to the global `fetch` API. Check [Request interceptors](#request-interceptors) for more details how to manage `fetch`.\n- `fetchOptions`: See [MDN](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch) for info on what options can be passed\n- `headers`: Object, e.g. `{ \'My-Header\': \'hello\' }`\n- `logErrors`: Boolean - defaults to `true`\n- `onError({ operation, result })`: Custom error handler\n  - `operation`: Object with `query`, `variables` and `operationName`\n  - `result`: Object containing `data` and `error` object that contains `fetchError`, `httpError` and `graphqlErrors`\n\n### `client` methods\n\n- `client.setHeader(key, value)`: Updates `client.headers` adding the new header to the existing headers\n- `client.setHeaders(headers)`: Replaces `client.headers`\n- `client.removeHeader(key)`: Updates `client.headers` removing the header if it exists\n- `client.logErrorResult({ operation, result })`: Default error logger; useful if you\'d like to use it inside your custom `onError` handler\n- `request(operation, options)`: Make a request to your GraphQL server; returning a Promise\n  - `operation`: Object with `query`, `variables` and `operationName`\n- `options.fetchOptionsOverrides`: Object containing additional fetch options to be added to the default ones passed to `new GraphQLClient(config)`\n\n## `ClientContext`\n\n`ClientContext` is the result of `React.createContext()` - meaning it can be used directly with React\'s new context API:\n\n**Example**:\n\n```js\nimport { ClientContext } from \'graphql-hooks\'\n\nfunction App() {\n  return (\n    <ClientContext.Provider value={client}>\n      {/* children can now consume the client context */}\n    </ClientContext.Provider>\n  )\n}\n```\n\nTo access the `GraphQLClient` instance, call `React.useContext(ClientContext)`:\n\n```js\nimport React, { useContext } from \'react\'\nimport { ClientContext } from \'graphql-hooks\'\n\nfunction MyComponent() {\n  const client = useContext(ClientContext)\n}\n```\n\n## `useQuery`\n\n**Usage**:\n\n```js\nconst state = useQuery(query, [options])\n```\n\n**Example:**\n\n```js\nimport { useQuery } from \'graphql-hooks\'\n\nfunction MyComponent() {\n  const { loading, error, data } = useQuery(query)\n\n  if (loading) return \'Loading...\'\n  if (error) return \'Something bad happened\'\n\n  return <div>{data.thing}</div>\n}\n```\n\nThis is a custom hook that takes care of fetching your query and storing the result in the cache. It won\'t refetch the query unless `query` or `options.variables` changes.\n\n- `query`: Your GraphQL query as a plain string\n- `options`: Object with the following optional properties\n  - `variables`: Object e.g. `{ limit: 10 }`\n  - `operationName`: If your query has multiple operations, pass the name of the operation you wish to execute.\n  - `useCache`: Boolean - defaults to `true`; cache the query result\n  - `skipCache`: Boolean - defaults to `false`; If `true` it will by-pass the cache and fetch, but the result will then be cached for subsequent calls. Note the `refetch` function will do this automatically\n  - `ssr`: Boolean - defaults to `true`. Set to `false` if you wish to skip this query during SSR\n  - `fetchOptionsOverrides`: Object - Specific overrides for this query. See [MDN](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch) for info on what options can be passed\n  - `updateData(previousData, data)`: Function - Custom handler for merging previous & new query results; return value will replace `data` in `useQuery` return value\n    - `previousData`: Previous GraphQL query or `updateData` result\n    - `data`: New GraphQL query result\n\n### `useQuery` return value\n\n```js\nconst { loading, error, data, refetch, cacheHit } = useQuery(QUERY)\n```\n\n- `loading`: Boolean - `true` if the query is in flight\n- `data`: Object - the result of your GraphQL query\n- `refetch(options)`: Function - useful when refetching the same query after a mutation; NOTE this presets `skipCache=true` & will bypass the `options.updateData` function that was passed into `useQuery`. You can pass a new `updateData` into `refetch` if necessary.\n  - `options`: Object - options that will be merged into the `options` that were passed into `useQuery` (see above).\n- `cacheHit`: Boolean - `true` if the query result came from the cache, useful for debugging\n- `error`: Object - Set if at least one of the following errors has occured and contains:\n  * `fetchError`: Object - Set if an error occurred during the `fetch` call\n  * `httpError`: Object - Set if an error response was returned from the server\n  * `graphQLErrors`: Array - Populated if any errors occurred whilst resolving the query\n\n## `useManualQuery`\n\nUse this when you don\'t want a query to automatically be fetched, or wish to call a query programmatically.\n\n**Usage**:\n\n```js\nconst [queryFn, state] = useManualQuery(query, [options])\n```\n\n**Example**:\n\n```js\nimport { useManualQuery } from \'graphql-hooks\'\n\nfunction MyComponent(props) {\n  const [fetchUser, { loading, error, data }] = useManualQuery(GET_USER_QUERY, {\n    variables: { id: props.userId }\n  })\n\n  return (\n    <div>\n      <button onClick={fetchUser}>Get User!</button>\n      {error && <div>Failed to fetch user<div>}\n      {loading && <div>Loading...</div>}\n      {data && <div>Hello ${data.user.name}</div>}\n    </div>\n  )\n}\n```\n\nIf you don\'t know certain options when declaring the `useManualQuery` you can also pass the same options to the query function itself when calling it:\n\n```js\nimport { useManualQuery } from \'graphql-hooks\'\n\nfunction MyComponent(props) {\n  const [fetchUser] = useManualQuery(GET_USER_QUERY)\n\n  const fetchUserThenSomething = async () => {\n    const user = await fetchUser({\n      variables: { id: props.userId }\n    })\n    return somethingElse()\n  }\n\n  return (\n    <div>\n      <button onClick={fetchUserThenSomething}>Get User!</button>\n    </div>\n  )\n}\n```\n\n## `useMutation`\n\nMutations unlike Queries are not cached.\n\n**Usage**:\n\n```js\nconst [mutationFn, state] = useMutation(mutation, [options])\n```\n\n**Example**:\n\n```js\nimport { useMutation } from \'graphql-hooks\'\n\nconst UPDATE_USER_MUTATION = `mutation UpdateUser(id: String!, name: String!) {\n  updateUser(id: $id, name: $name) {\n    name\n  }\n}`\n\nfunction MyComponent({ id, name }) {\n  const [updateUser] = useMutation(UPDATE_USER_MUTATION)\n  const [newName, setNewName] = useState(name)\n\n  return (\n    <div>\n      <input\n        type="text"\n        value={newName}\n        onChange={e => setNewName(e.target.value)}\n      />\n      <button\n        onClick={() => updateUser({ variables: { id, name: newName } })}\n      />\n    </div>\n  )\n}\n```\n\nThe `options` object that can be passed either to `useMutation(mutation, options)` or `mutationFn(options)` can be set with the following properties:\n\n- `variables`: Object e.g. `{ limit: 10 }`\n- `operationName`: If your query has multiple operations, pass the name of the operation you wish to execute.\n- `fetchOptionsOverrides`: Object - Specific overrides for this query. See [MDN](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch) for info on what options can be passed\n\n# Guides\n\n## SSR\n\nSee [graphql-hooks-ssr](packages/graphql-hooks-ssr) for an in depth guide.\n\n## Pagination\n\n[GraphQL Pagination](https://graphql.org/learn/pagination/) can be implemented in various ways and it\'s down to the consumer to decide how to deal with the resulting data from paginated queries. Take the following query as an example of offset pagination:\n\n```javascript\nexport const allPostsQuery = `\n  query allPosts($first: Int!, $skip: Int!) {\n    allPosts(first: $first, skip: $skip) {\n      id\n      title\n      url\n    }\n    _allPostsMeta {\n      count\n    }\n  }\n`\n```\n\nIn this query, the `$first` variable is used to limit the number of posts that are returned and the `$skip` variable is used to determine the offset at which to start. We can use these variables to break up large payloads into smaller chunks, or "pages". We could then choose to display these chunks as distinct pages to the user, or use an infinite loading approach and append each new chunk to the existing list of posts.\n\n### Separate pages\n\nHere is an example where we display the paginated queries on separate pages:\n\n```jsx\nimport { React, useState } from \'react\'\nimport { useQuery } from \'graphql-hooks\'\n\nexport default function PostList() {\n  // set a default offset of 0 to load the first page\n  const [skipCount, setSkipCount] = useState(0)\n\n  const { loading, error, data } = useQuery(allPostsQuery, {\n    variables: { skip: skipCount, first: 10 }\n  })\n\n  if (error) return <div>There was an error!</div>\n  if (loading && !data) return <div>Loading</div>\n\n  const { allPosts, _allPostsMeta } = data\n  const areMorePosts = allPosts.length < _allPostsMeta.count\n\n  return (\n    <section>\n      <ul>\n        {allPosts.map(post => (\n          <li key={post.id}>\n            <a href={post.url}>{post.title}</a>\n          </li>\n        ))}\n      </ul>\n      <button\n        // reduce the offset by 10 to fetch the previous page\n        onClick={() => setSkipCount(skipCount - 10)}\n        disabled={skipCount === 0}\n      >\n        Previous page\n      </button>\n      <button\n        // increase the offset by 10 to fetch the next page\n        onClick={() => setSkipCount(skipCount + 10)}\n        disabled={!areMorePosts}\n      >\n        Next page\n      </button>\n    </section>\n  )\n}\n```\n\n### Infinite loading\n\nHere is an example where we append each paginated query to the bottom of the current list:\n\n```jsx\nimport { React, useState } from \'react\'\nimport { useQuery } from \'graphql-hooks\'\n\n// use options.updateData to append the new page of posts to our current list of posts\nconst updateData = (prevData, data) => ({\n  ...data,\n  allPosts: [...prevData.allPosts, ...data.allPosts]\n})\n\nexport default function PostList() {\n  const [skipCount, setSkipCount] = useState(0)\n\n  const { loading, error, data } = useQuery(\n    allPostsQuery,\n    { variables: { skip: skipCount, first: 10 } },\n    updateData\n  )\n\n  if (error) return <div>There was an error!</div>\n  if (loading && !data) return <div>Loading</div>\n\n  const { allPosts, _allPostsMeta } = data\n  const areMorePosts = allPosts.length < _allPostsMeta.count\n\n  return (\n    <section>\n      <ul>\n        {allPosts.map(post => (\n          <li key={post.id}>\n            <a href={post.url}>{post.title}</a>\n          </li>\n        ))}\n      </ul>\n      {areMorePosts && (\n        <button\n          // set the offset to the current number of posts to fetch the next page\n          onClick={() => setSkipCount(allPosts.length)}\n        >\n          Show more\n        </button>\n      )}\n    </section>\n  )\n}\n```\n\n## File uploads\n\n`graphql-hooks` complies with the [GraphQL multipart request spec](https://github.com/jaydenseric/graphql-multipart-request-spec), allowing files to be used as query or mutation arguments. The same spec is also supported by popular GraphQL servers, including [Apollo Server](https://www.apollographql.com/docs/apollo-server) (see list of supported servers [here](https://github.com/jaydenseric/graphql-multipart-request-spec#server)).\n\nIf there are files to upload, the request\'s body will be a [`FormData`](https://developer.mozilla.org/docs/Web/API/FormData) instance conforming to the GraphQL multipart request spec.\n\n```jsx\nimport React, { useRef } from \'react\'\nimport { useMutation } from \'graphql-hooks\'\n\nconst uploadPostPictureMutation = /* GraphQL */ `\n  mutation UploadPostPicture($picture: Upload!) {\n    uploadPostPicture(picture: $picture) {\n      id\n      pictureUrl\n    }\n  }\n`\n\nexport default function PostForm() {\n  // File input is always uncontrolled in React.\n  // See: https://reactjs.org/docs/uncontrolled-components.html#the-file-input-tag.\n  const fileInputRef = useRef(null)\n\n  const [uploadPostPicture] = useMutation(uploadPostPictureMutation)\n\n  const handleSubmit = event => {\n    event.preventDefault()\n\n    uploadPostPicture({\n      variables: {\n        picture: fileInputRef.current.files[0]\n      }\n    })\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input accept="image/*" ref={fileInputRef} type="file" />\n      <button>Upload</button>\n    </form>\n  )\n}\n```\n\n## Authentication\n\nComing soon!\n\n## Fragments\n\nComing soon!\n\n## Migrating from Apollo\n\nFor a real life example, compare the next.js [with-apollo](https://github.com/zeit/next.js/tree/canary/examples/with-apollo) vs [with-graphql-hooks](https://github.com/zeit/next.js/tree/canary/examples/with-graphql-hooks). We have feature parity and the `main-*.js` bundle is a whopping **93% smaller** (7.9KB vs 116KB).\n\n### ApolloClient \xe2\x9e\xa1\xef\xb8\x8f GraphQLClient\n\n```diff\n- import { ApolloClient } from \'apollo-client\'\n- import { InMemoryCache } from \'apollo-cache-inmemory\'\n+ import { GraphQLClient } from \'graphql-hooks\'\n+ import memCache from \'graphql-hooks-memcache\'\n\n- const client = new ApolloClient({\n-  uri: \'/graphql\',\n-  cache: new InMemoryCache()\n- })\n+ const client = new GraphQLClient({\n+   url: \'/graphql\',\n+   cache: memCache()\n+ })\n```\n\nA lot of the options you\'d pass to `ApolloClient` are the same as `GraphQLClient`:\n\n- `uri` \xe2\x9e\xa1\xef\xb8\x8f `url`\n- `fetchOptions`\n- `onError` - the function signature is slightly different\n- `headers`\n- `fetch`\n- `cache`\n\n### ApolloProvider \xe2\x9e\xa1\xef\xb8\x8f ClientContext.Provider\n\n```diff\n- import { ApolloProvider } from \'react-apollo\'\n+ import { ClientContext } from \'graphql-hooks\'\n\nfunction App({ client }) {\n  return (\n-    <ApolloProvider client={client}>\n+    <ClientContext.Provider value={client}>\n       {/* children */}\n+    </ClientContext.Provider>\n-    </ApolloProvider>\n  )\n}\n```\n\n### Query Component \xe2\x9e\xa1\xef\xb8\x8f useQuery\n\n```diff\n- import { Query } from \'react-apollo\'\n- import gql from \'graphql-tag\'\n+ import { useQuery } from \'graphql-hooks\'\n\nfunction MyComponent() {\n+ const { loading, error, data } = useQuery(\'...\')\n\n-  return (\n-    <Query query={gql`...`}>\n-     {({ loading, error, data}) => {\n        if (loading) return \'Loading...\'\n        if (error) return \'Error :(\'\n\n        return <div>{data}</div>\n-      }}\n-    </Query>\n-  )\n}\n```\n\n### Query Component Props\n\nA lot of options can be carried over as-is, or have direct replacements:\n\n- `query` \xe2\x9e\xa1\xef\xb8\x8f `useQuery(query)`: Remove any usage of `gql` and pass your queries as strings.\n- `variables` \xe2\x9e\xa1\xef\xb8\x8f `useQuery(query, { variables })`\n- `ssr` \xe2\x9e\xa1\xef\xb8\x8f `useQuery(query, { ssr })`\n- **Fetch Policies**: See [#75](https://github.com/nearform/graphql-hooks/issues/75) for more info\n  - `cache-first`: This the default behaviour of `graphql-hooks`\n  - `cache-and-network`: The refetch function provides this behaviour it will set loading: true, but the old data will be still set until the fetch resolves.\n  - `network-only` \xe2\x9e\xa1\xef\xb8\x8f `useQuery(QUERY, { skipCache: true })`\n  - `cache-only`: Not supported\n  - `no-cache` \xe2\x9e\xa1\xef\xb8\x8f `useQuery(QUERY, { useCache: false })`\n\n**Not yet supported**\n\n- `errorPolicy`: Any error will set the `error` to be truthy. See [useQuery](#useQuery) for more details.\n- `pollInterval`\n- `notifyOnNetworkStatusChange`\n- `skip`\n- `onCompleted`: Similar ability if using `useManualQuery`\n- `onError`: Similar ability if using `useManualQuery`\n- `partialRefetch`\n\n### Query Component Render Props\n\n```diff\n- <Query query={gql`...`}>\n-  {(props) => {}}\n- </Query>\n+ const state = useQuery(`...`)\n```\n\n- `props.loading` \xe2\x9e\xa1\xef\xb8\x8f `const { loading } = useQuery(\'...\')`\n- `props.error` \xe2\x9e\xa1\xef\xb8\x8f `const { error } = useQuery(\'...\')`: The error value from `useQuery` is Boolean the details of the error can be found in either:\n  - `state.fetchError`\n  - `state.httpError`\n  - `state.graphQLErrors`\n- `props.refetch` \xef\xb8\x8f\xe2\x9e\xa1\xef\xb8\x8f `const { refetch } = useQuery(\'...\')`\n- `props.updateData(prevResult, options)` \xef\xb8\x8f\xe2\x9e\xa1\xef\xb8\x8f `state.updateData(prevResult, newResult)`\n\n**Not yet supported**\n\n- `props.networkStatus`\n- `props.startPolling`\n- `props.stopPolling`\n- `props.subscribeToMore`\n\n### Mutation Component \xe2\x9e\xa1\xef\xb8\x8f useMutation\n\n```diff\n- import { Mutation } from \'react-apollo\'\n- import gql from \'graphql-tag\'\n+ import { useMutation } from \'graphql-hooks\'\n\nfunction MyComponent() {\n+ const [mutateFn, { loading, error, data }] = useMutation(\'...\')\n\n-  return (\n-    <Mutation mutation={gql`...`}>\n-     {(mutateFn, { loading, error }) => {\n        if (error) return \'Error :(\'\n\n        return <button disabled={loading} onClick={() => mutateFn()}>Submit</button>\n-      }}\n-    </Mutation>\n-  )\n}\n```\n\n### Mutation Props\n\n- `mutation` \xe2\x9e\xa1\xef\xb8\x8f `useMutation(mutation)` - no need to wrap it in `gql`\n- `variables` \xe2\x9e\xa1\xef\xb8\x8f\xef\xb8\x8f `useMutation(mutation, { variables })` or `mutateFn({ variables })`\n- `ignoreResults` \xe2\x9e\xa1\xef\xb8\x8f\xef\xb8\x8f\xef\xb8\x8f\xef\xb8\x8f `const [mutateFn] = useMutation(mutation)`\n- `onCompleted` \xe2\x9e\xa1\xef\xb8\x8f \xef\xb8\x8f`mutateFn().then(onCompleted)`\n- `onError` \xe2\x9e\xa1\xef\xb8\x8f `mutateFn().then(({ error }) => {...})`\n\n**Not yet supported**\n\n- `update`: Coming soon [#52](https://github.com/nearform/graphql-hooks/issues/52)\n- `optimisticResponse`\n- `refetchQueries`\n- `awaitRefetchQueries`\n- `context`\n\n## Mutation Component Render Props\n\n```diff\n- <Mutation mutation={gql`...`}>\n-  {(mutateFn, props) => {}}\n- </Mutation>\n+ const [mutateFn, state] = useMutation(`...`)\n```\n\n- `props.data` \xe2\x9e\xa1\xef\xb8\x8f `const [mutateFn, { data }] = useMutation()`\n- `props.loading` \xe2\x9e\xa1\xef\xb8\x8f `const [mutateFn, { loading }] = useMutation()`\n- `props.error` \xe2\x9e\xa1\xef\xb8\x8f `const [mutateFn, { error }] = useMutation()`: The the details of the error can be found in either:\n  - `state.fetchError`\n  - `state.httpError`\n  - `state.graphQLErrors`\n- `client` \xef\xb8\x8f\xe2\x9e\xa1\xef\xb8\x8f\xef\xb8\x8f `const client = useContext(ClientContext)` see [ClientContext](#ClientContext)\n\n**Not yet supported**\n\n- `called`\n\n## Other\n\n### Request interceptors\n\nIt is possible to provide a custom library to handle network requests. Having that there is more control on how to handle the requests. The following example shows how to supply axios HTTP client with interceptors. It can be handy in the situations where JWT token has expired, needs to be refreshed and request retried.\n\n```js\nimport axios from \'axios\'\nimport { buildAxiosFetch } from \'@lifeomic/axios-fetch\'\nimport { GraphQLClient } from \'graphql-hooks\'\n\nconst gqlAxios = axios.create()\ngqlAxios.interceptors.response.use(function (response) {\n  return response\n}, function (error) {\n  // Handle expired JWT and refresh token\n})\n\nconst client = new GraphQLClient({\n  url: \'/graphql\',\n  fetch: buildAxiosFetch(gqlAxios)\n})\n```\n\n## Contributors\n\nThanks goes to these wonderful people ([emoji key](https://allcontributors.org/docs/en/emoji-key)):\n\n<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->\n<!-- prettier-ignore -->\n<table>\n  <tr>\n    <td align="center"><a href="https://twitter.com/bmullan91"><img src="https://avatars1.githubusercontent.com/u/1939483?v=4" width="100px;" alt="Brian Mullan"/><br /><sub><b>Brian Mullan</b></sub></a><br /><a href="#question-bmullan91" title="Answering Questions">\xf0\x9f\x92\xac</a> <a href="https://github.com/nearform/graphql-hooks/issues?q=author%3Abmullan91" title="Bug reports">\xf0\x9f\x90\x9b</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=bmullan91" title="Code">\xf0\x9f\x92\xbb</a> <a href="#content-bmullan91" title="Content">\xf0\x9f\x96\x8b</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=bmullan91" title="Documentation">\xf0\x9f\x93\x96</a> <a href="#example-bmullan91" title="Examples">\xf0\x9f\x92\xa1</a> <a href="#ideas-bmullan91" title="Ideas, Planning, & Feedback">\xf0\x9f\xa4\x94</a> <a href="#maintenance-bmullan91" title="Maintenance">\xf0\x9f\x9a\xa7</a> <a href="#review-bmullan91" title="Reviewed Pull Requests">\xf0\x9f\x91\x80</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=bmullan91" title="Tests">\xe2\x9a\xa0\xef\xb8\x8f</a></td>\n    <td align="center"><a href="https://jackdc.com"><img src="https://avatars0.githubusercontent.com/u/1485654?v=4" width="100px;" alt="Jack Clark"/><br /><sub><b>Jack Clark</b></sub></a><br /><a href="#question-jackdclark" title="Answering Questions">\xf0\x9f\x92\xac</a> <a href="https://github.com/nearform/graphql-hooks/issues?q=author%3Ajackdclark" title="Bug reports">\xf0\x9f\x90\x9b</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=jackdclark" title="Code">\xf0\x9f\x92\xbb</a> <a href="#content-jackdclark" title="Content">\xf0\x9f\x96\x8b</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=jackdclark" title="Documentation">\xf0\x9f\x93\x96</a> <a href="#example-jackdclark" title="Examples">\xf0\x9f\x92\xa1</a> <a href="#ideas-jackdclark" title="Ideas, Planning, & Feedback">\xf0\x9f\xa4\x94</a> <a href="#maintenance-jackdclark" title="Maintenance">\xf0\x9f\x9a\xa7</a> <a href="#review-jackdclark" title="Reviewed Pull Requests">\xf0\x9f\x91\x80</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=jackdclark" title="Tests">\xe2\x9a\xa0\xef\xb8\x8f</a></td>\n    <td align="center"><a href="http://twitter.com/joezo"><img src="https://avatars1.githubusercontent.com/u/2870255?v=4" width="100px;" alt="Joe Warren"/><br /><sub><b>Joe Warren</b></sub></a><br /><a href="#question-Joezo" title="Answering Questions">\xf0\x9f\x92\xac</a> <a href="https://github.com/nearform/graphql-hooks/issues?q=author%3AJoezo" title="Bug reports">\xf0\x9f\x90\x9b</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=Joezo" title="Code">\xf0\x9f\x92\xbb</a> <a href="#content-Joezo" title="Content">\xf0\x9f\x96\x8b</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=Joezo" title="Documentation">\xf0\x9f\x93\x96</a> <a href="#example-Joezo" title="Examples">\xf0\x9f\x92\xa1</a> <a href="#ideas-Joezo" title="Ideas, Planning, & Feedback">\xf0\x9f\xa4\x94</a> <a href="#maintenance-Joezo" title="Maintenance">\xf0\x9f\x9a\xa7</a> <a href="#review-Joezo" title="Reviewed Pull Requests">\xf0\x9f\x91\x80</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=Joezo" title="Tests">\xe2\x9a\xa0\xef\xb8\x8f</a></td>\n    <td align="center"><a href="http://simoneb.github.io"><img src="https://avatars1.githubusercontent.com/u/20181?v=4" width="100px;" alt="Simone Busoli"/><br /><sub><b>Simone Busoli</b></sub></a><br /><a href="#question-simoneb" title="Answering Questions">\xf0\x9f\x92\xac</a> <a href="https://github.com/nearform/graphql-hooks/issues?q=author%3Asimoneb" title="Bug reports">\xf0\x9f\x90\x9b</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=simoneb" title="Documentation">\xf0\x9f\x93\x96</a></td>\n    <td align="center"><a href="https://jheytompkins.com"><img src="https://avatars1.githubusercontent.com/u/842246?v=4" width="100px;" alt="jhey tompkins"/><br /><sub><b>jhey tompkins</b></sub></a><br /><a href="https://github.com/nearform/graphql-hooks/commits?author=jh3y" title="Tests">\xe2\x9a\xa0\xef\xb8\x8f</a> <a href="#question-jh3y" title="Answering Questions">\xf0\x9f\x92\xac</a> <a href="https://github.com/nearform/graphql-hooks/issues?q=author%3Ajh3y" title="Bug reports">\xf0\x9f\x90\x9b</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=jh3y" title="Code">\xf0\x9f\x92\xbb</a> <a href="#content-jh3y" title="Content">\xf0\x9f\x96\x8b</a> <a href="#review-jh3y" title="Reviewed Pull Requests">\xf0\x9f\x91\x80</a></td>\n    <td align="center"><a href="https://haroen.me"><img src="https://avatars3.githubusercontent.com/u/6270048?v=4" width="100px;" alt="Haroen Viaene"/><br /><sub><b>Haroen Viaene</b></sub></a><br /><a href="https://github.com/nearform/graphql-hooks/issues?q=author%3AHaroenv" title="Bug reports">\xf0\x9f\x90\x9b</a></td>\n    <td align="center"><a href="https://github.com/aribouius"><img src="https://avatars2.githubusercontent.com/u/10748727?v=4" width="100px;" alt="Ari Bouius"/><br /><sub><b>Ari Bouius</b></sub></a><br /><a href="https://github.com/nearform/graphql-hooks/commits?author=aribouius" title="Documentation">\xf0\x9f\x93\x96</a> <a href="https://github.com/nearform/graphql-hooks/issues?q=author%3Aaribouius" title="Bug reports">\xf0\x9f\x90\x9b</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=aribouius" title="Code">\xf0\x9f\x92\xbb</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=aribouius" title="Tests">\xe2\x9a\xa0\xef\xb8\x8f</a></td>\n  </tr>\n  <tr>\n    <td align="center"><a href="https://github.com/kkogovsek"><img src="https://avatars1.githubusercontent.com/u/8089644?v=4" width="100px;" alt="Klemen Kogov\xc5\xa1ek"/><br /><sub><b>Klemen Kogov\xc5\xa1ek</b></sub></a><br /><a href="https://github.com/nearform/graphql-hooks/issues?q=author%3Akkogovsek" title="Bug reports">\xf0\x9f\x90\x9b</a> <a href="#ideas-kkogovsek" title="Ideas, Planning, & Feedback">\xf0\x9f\xa4\x94</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=kkogovsek" title="Code">\xf0\x9f\x92\xbb</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=kkogovsek" title="Tests">\xe2\x9a\xa0\xef\xb8\x8f</a></td>\n    <td align="center"><a href="https://github.com/wescoder"><img src="https://avatars0.githubusercontent.com/u/22945955?v=4" width="100px;" alt="W\xc3\xa9sley Queiroz"/><br /><sub><b>W\xc3\xa9sley Queiroz</b></sub></a><br /><a href="https://github.com/nearform/graphql-hooks/issues?q=author%3Awescoder" title="Bug reports">\xf0\x9f\x90\x9b</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=wescoder" title="Code">\xf0\x9f\x92\xbb</a></td>\n    <td align="center"><a href="https://www.good-idea.studio"><img src="https://avatars3.githubusercontent.com/u/11514928?v=4" width="100px;" alt="Joseph Thomas"/><br /><sub><b>Joseph Thomas</b></sub></a><br /><a href="https://github.com/nearform/graphql-hooks/issues?q=author%3Agood-idea" title="Bug reports">\xf0\x9f\x90\x9b</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=good-idea" title="Code">\xf0\x9f\x92\xbb</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=good-idea" title="Tests">\xe2\x9a\xa0\xef\xb8\x8f</a></td>\n    <td align="center"><a href="http://edvinasbartkus.lt"><img src="https://avatars0.githubusercontent.com/u/202988?v=4" width="100px;" alt="Edvinas Bartkus"/><br /><sub><b>Edvinas Bartkus</b></sub></a><br /><a href="https://github.com/nearform/graphql-hooks/commits?author=edvinasbartkus" title="Code">\xf0\x9f\x92\xbb</a> <a href="#question-edvinasbartkus" title="Answering Questions">\xf0\x9f\x92\xac</a> <a href="https://github.com/nearform/graphql-hooks/issues?q=author%3Aedvinasbartkus" title="Bug reports">\xf0\x9f\x90\x9b</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=edvinasbartkus" title="Documentation">\xf0\x9f\x93\x96</a> <a href="#example-edvinasbartkus" title="Examples">\xf0\x9f\x92\xa1</a> <a href="#ideas-edvinasbartkus" title="Ideas, Planning, & Feedback">\xf0\x9f\xa4\x94</a> <a href="#maintenance-edvinasbartkus" title="Maintenance">\xf0\x9f\x9a\xa7</a> <a href="#review-edvinasbartkus" title="Reviewed Pull Requests">\xf0\x9f\x91\x80</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=edvinasbartkus" title="Tests">\xe2\x9a\xa0\xef\xb8\x8f</a></td>\n    <td align="center"><a href="https://github.com/olistic"><img src="https://avatars1.githubusercontent.com/u/5600126?v=4" width="100px;" alt="Mat\xc3\xadas Olivera"/><br /><sub><b>Mat\xc3\xadas Olivera</b></sub></a><br /><a href="https://github.com/nearform/graphql-hooks/issues?q=author%3Aolistic" title="Bug reports">\xf0\x9f\x90\x9b</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=olistic" title="Code">\xf0\x9f\x92\xbb</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=olistic" title="Tests">\xe2\x9a\xa0\xef\xb8\x8f</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=olistic" title="Documentation">\xf0\x9f\x93\x96</a></td>\n    <td align="center"><a href="https://github.com/tcudok-jg"><img src="https://avatars3.githubusercontent.com/u/50208575?v=4" width="100px;" alt="tcudok-jg"/><br /><sub><b>tcudok-jg</b></sub></a><br /><a href="https://github.com/nearform/graphql-hooks/commits?author=tcudok-jg" title="Code">\xf0\x9f\x92\xbb</a></td>\n    <td align="center"><a href="https://github.com/heymartinadams"><img src="https://avatars2.githubusercontent.com/u/11673745?v=4" width="100px;" alt="Martin Adams"/><br /><sub><b>Martin Adams</b></sub></a><br /><a href="https://github.com/nearform/graphql-hooks/commits?author=heymartinadams" title="Documentation">\xf0\x9f\x93\x96</a></td>\n  </tr>\n  <tr>\n    <td align="center"><a href="http://gal.js.org"><img src="https://avatars3.githubusercontent.com/u/191608?v=4" width="100px;" alt="Gal Dubitski"/><br /><sub><b>Gal Dubitski</b></sub></a><br /><a href="https://github.com/nearform/graphql-hooks/commits?author=galmail" title="Code">\xf0\x9f\x92\xbb</a> <a href="https://github.com/nearform/graphql-hooks/issues?q=author%3Agalmail" title="Bug reports">\xf0\x9f\x90\x9b</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=galmail" title="Documentation">\xf0\x9f\x93\x96</a> <a href="https://github.com/nearform/graphql-hooks/commits?author=galmail" title="Tests">\xe2\x9a\xa0\xef\xb8\x8f</a></td>\n    <td align="center"><a href="https://twitter.com/osdevisnot"><img src="https://avatars1.githubusercontent.com/u/802242?v=4" width="100px;" alt="Abhishek Shende"/><br /><sub><b>Abhishek Shende</b></sub></a><br /><a href="https://github.com/nearform/graphql-hooks/commits?author=osdevisnot" title="Code">\xf0\x9f\x92\xbb</a> <a href="https://github.com/nearform/graphql-hooks/issues?q=author%3Aosdevisnot" title="Bug reports">\xf0\x9f\x90\x9b</a></td>\n    <td align="center"><a href="http://fabien.cool"><img src="https://avatars1.githubusercontent.com/u/1702255?v=4" width="100px;" alt="fabienheureux"/><br /><sub><b>fabienheureux</b></sub></a><br /><a href="#review-fabienheureux" title="Reviewed Pull Requests">\xf0\x9f\x91\x80</a></td>\n    <td align="center"><a href="https://hughboylan.com"><img src="https://avatars2.githubusercontent.com/u/2158740?v=4" width="100px;" alt="Hugh Boylan"/><br /><sub><b>Hugh Boylan</b></sub></a><br /><a href="#review-hboylan" title="Reviewed Pull Requests">\xf0\x9f\x91\x80</a></td>\n    <td align="center"><a href="https://github.com/bmamouri"><img src="https://avatars2.githubusercontent.com/u/6419173?v=4" width="100px;" alt="Baqer Mamouri"/><br /><sub><b>Baqer Mamouri</b></sub></a><br /><a href="https://github.com/nearform/graphql-hooks/commits?author=bmamouri" title="Code">\xf0\x9f\x92\xbb</a></td>\n    <td align="center"><a href="http://www.netnotion.com"><img src="https://avatars0.githubusercontent.com/u/17315?v=4" width="100px;" alt="Guillermo Gonzalez "/><br /><sub><b>Guillermo Gonzalez </b></sub></a><br /><a href="https://github.com/nearform/graphql-hooks/commits?author=helloguille" title="Code">\xf0\x9f\x92\xbb</a></td>\n  </tr>\n</table>\n\n<!-- ALL-CONTRIBUTORS-LIST:END -->\n\nThis project follows the [all-contributors](https://github.com/all-contributors/all-contributors) specification. Contributions of any kind welcome!\n'