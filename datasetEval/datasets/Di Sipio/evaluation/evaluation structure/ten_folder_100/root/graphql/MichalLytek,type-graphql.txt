b'![logo](https://raw.githubusercontent.com/MichalLytek/type-graphql/master/img/logo.png)\n\n# TypeGraphQL\n\n[![npm version](https://badge.fury.io/js/type-graphql.svg)](https://badge.fury.io/js/type-graphql)\n[![Build Status](https://travis-ci.org/MichalLytek/type-graphql.svg?branch=master)](https://travis-ci.org/MichalLytek/type-graphql)\n[![codecov](https://codecov.io/gh/MichalLytek/type-graphql/branch/master/graph/badge.svg)](https://codecov.io/gh/MichalLytek/type-graphql)\n[![dependencies](https://david-dm.org/MichalLytek/type-graphql/status.svg)](https://david-dm.org/MichalLytek/type-graphql)\n[![install size](https://packagephobia.now.sh/badge?p=type-graphql)](https://packagephobia.now.sh/result?p=type-graphql)\n[![gitter](https://badges.gitter.im/type-graphql.svg)](https://gitter.im/type-graphql?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)\n\nCreate GraphQL schema and resolvers with TypeScript, using classes and decorators!\n\n[**https://typegraphql.ml/**](https://typegraphql.ml/)\n<br>\n<br>\n[![](https://opencollective.com/typegraphql/donate/button.png?color=white)](https://opencollective.com/typegraphql)\n\n## Motivation\n\nWe all know that GraphQL is great and solves many problems we have with REST APIs, like overfetching and underfetching. But developing a GraphQL API in Node.js with TypeScript is sometimes a bit of a pain. Why? Let\'s take a look at the steps we usually have to take.\n\nFirst, we create all the GraphQL types in `schema.gql` using SDL. Then we create our data models using [ORM classes](https://github.com/typeorm/typeorm), which represent our db entities. Then we start to write resolvers for our queries, mutations and fields, but this forces us to first create TS interfaces for all arguments, inputs, and even object types.\n\nOnly then can we actually implement the resolvers using weird generic signatures and manually performing common tasks, like validation, authorization and loading dependencies:\n\n```ts\nexport const getRecipesResolver: GraphQLFieldResolver<void, Context, GetRecipesArgs> =\n  async (_, args, ctx) => {\n    // common tasks repeatable for almost every resolver\n    const repository = TypeORM.getRepository(Recipe);\n    const auth = Container.get(AuthService);\n    await joi.validate(getRecipesSchema, args);\n    if (!auth.check(ctx.user)) {\n      throw new NotAuthorizedError();\n    }\n\n    // our business logic, e.g.:\n    return repository.find({ skip: args.offset, take: args.limit });\n  };\n```\n\nThe biggest problem is redundancy in our codebase, which makes it difficult to keep things in sync. To add a new field to our entity, we have to jump through all the files - modify an entity class, the schema, as well as the interface. The same goes for inputs or arguments. It\'s easy to forget to update one piece or make a mistake with a single type. Also, what if we\'ve made a typo in field name? The rename feature (F2) won\'t work correctly.\n\nTools like [GraphQL Code Generator](https://github.com/dotansimha/graphql-code-generator) or [graphqlgen](https://github.com/prisma/graphqlgen) only solve the first part - they generate the corresponding interfaces (and resolvers skeletons) for our GraphQL schema but they don\'t fix the schema <--> models redundancy and developer experience (F2 rename won\'t work, you have to remember about the codegen watch task in background, etc.), as well as common tasks like validation, authorization, etc.\n\n**TypeGraphQL** comes to address these issues, based on experience from a few years of developing GraphQL APIs in TypeScript. The main idea is to have only one source of truth by defining the schema using classes and some help from decorators. Additional features like dependency injection, validation and auth guards help with common tasks that normally we would have to handle ourselves.\n\n## Introduction\n\nAs mentioned, **TypeGraphQL** makes developing GraphQL APIs an enjoyable process, i.e. by defining the schema using only classes and a bit of decorator magic.\n\nSo, to create types like object type or input type, we use a kind of DTO classes.\nFor example, to declare `Recipe` type we simply create a class and annotate it with decorators:\n\n```ts\n@ObjectType()\nclass Recipe {\n  @Field(type => ID)\n  id: string;\n\n  @Field()\n  title: string;\n\n  @Field(type => [Rate])\n  ratings: Rate[];\n\n  @Field({ nullable: true })\n  averageRating?: number;\n}\n```\n\nAnd we get the corresponding part of the schema in SDL:\n\n```graphql\ntype Recipe {\n  id: ID!\n  title: String!\n  ratings: [Rate!]!\n  averageRating: Float\n}\n```\n\nThen we can create queries, mutations and field resolvers. For this purpose we use controller-like classes that are called "resolvers" by convention. We can also use awesome features like dependency injection and auth guards:\n\n```ts\n@Resolver(Recipe)\nclass RecipeResolver {\n  // dependency injection\n  constructor(private recipeService: RecipeService) {}\n\n  @Query(returns => [Recipe])\n  recipes() {\n    return this.recipeService.findAll();\n  }\n\n  @Mutation()\n  @Authorized(Roles.Admin) // auth guard\n  removeRecipe(@Arg("id") id: string): boolean {\n    return this.recipeService.removeById(id);\n  }\n\n  @FieldResolver()\n  averageRating(@Root() recipe: Recipe) {\n    return recipe.ratings.reduce((a, b) => a + b, 0) / recipe.ratings.length;\n  }\n}\n```\n\nAnd in this simple way we get this part of the schema in SDL:\n\n```graphql\ntype Query {\n  recipes: [Recipe!]!\n}\n\ntype Mutation {\n  removeRecipe(id: String!): Boolean!\n}\n```\n\n## Getting started\n\nA full getting started guide with a simple walkthrough (tutorial) can be found at [getting started docs](https://typegraphql.ml/docs/getting-started.html).\n\n## Video tutorial\n\nIf you prefer video tutorials, you can watch [Ben Awad](https://github.com/benawad)\'s [TypeGraphQL video series](https://www.youtube.com/playlist?list=PLN3n1USn4xlma1bBu3Tloe4NyYn9Ko8Gs) on YouTube.\n\n## Documentation\n\nThe documentation, installation guide, detailed description of the API and all of its features is [available on the website](https://typegraphql.ml/).\n\n## Examples\n\nYou can also check the [examples folder](https://github.com/MichalLytek/type-graphql/tree/master/examples) in this repository for more examples of usage: simple fields resolvers, DI Container support, TypeORM integration, automatic validation, etc.\n\nThe [Tests folder](https://github.com/MichalLytek/type-graphql/tree/master/tests) might also give you some tips how to get various things done.\n\n## Towards v1.0\n\nThe currently released version is a MVP (Minimum Viable Product). It is well tested (96% coverage, 8000 lines of test code) and has 95% of the planned features already implemented.\n\nHowever there\'s still work to be done before the [1.0.0 release](https://github.com/MichalLytek/type-graphql/milestone/3) and it\'s mostly about documentation (website, api reference and jsdoc) and compatibility with the GraphQL spec and other tools.\n\nThere are also plans for more features like better TypeORM, Prisma and dataloader integration, custom decorators and metadata annotations support - [the full list of ideas](https://github.com/MichalLytek/type-graphql/issues?q=is%3Aissue+is%3Aopen+label%3A"Enhancement+%3Anew%3A") is available on the GitHub repo. You can also keep track of [development\'s progress on project board](https://github.com/MichalLytek/type-graphql/projects/1).\n\nI encourage you to give TypeGraphQL a try and experiment with. If you have any questions, you can [ask on gitter](https://gitter.im/type-graphql/Lobby). If you find a bug, please report it as an issue on GitHub. If you have any interesting feature requests, I would be happy to hear about them.\n\n## Support\n\nTypeGraphQL is an MIT-licensed open source project. This framework is a result of the tremendous amount of work - sleepless nights, busy evenings and weekends.\n\nIt doesn\'t have a large company that sits behind - its ongoing development is possible only thanks to the support by the community.\n\n[![](https://opencollective.com/typegraphql/donate/button.png?color=blue)](https://opencollective.com/typegraphql)\n\n### Gold Sponsors \xf0\x9f\x8f\x86\n\nPlease ask your company to also support this open source project by [becoming a gold sponsor](https://opencollective.com/typegraphql/contribute/tier/8340-gold-sponsors) and getting your company logo on our README on Github as well as on the landing page of the official documentation site with a link to your company site.\n\n### Sponsors \xf0\x9f\x9a\x80\n\n[![Become a Sponsor](https://opencollective.com/static/images/become_sponsor.svg)](https://opencollective.com/typegraphql)\n\n| [<img src="https://raw.githubusercontent.com/MichalLytek/type-graphql/master/img/gorrion.png" width="250">](https://gorrion.io/) |  [<img src="https://opencollective-production.s3-us-west-1.amazonaws.com/73f90010-67e9-11e9-b984-89e2dc4d10f9.jpg" height="100">](https://opencollective.com/demid-nikitin) | [<img src="https://raw.githubusercontent.com/MichalLytek/type-graphql/master/img/redo.png" width="150">](https://redo.qa/) | \n| :---: | :---: | :---: |\n| [**Gorrion Software House**](https://gorrion.io/) | [**Demid Nikitin**](https://opencollective.com/demid-nikitin) | [**Redo**](https://redo.qa/) |\n\n### Backers \xe2\x98\x95 and Members \xf0\x9f\x92\xaa\n\n[![](https://opencollective.com/typegraphql/sponsors.svg?width=890&button=false)](https://opencollective.com/typegraphql#contributors)\n[![](https://opencollective.com/typegraphql/backers.svg?width=890&button=false)](https://opencollective.com/typegraphql#contributors)\n\n### Contribution\n\nPRs are welcome, but first check, test and build your code before committing it.\n\n- Use commit rules: For more information checkout this [commit rule guide](https://gist.github.com/stephenparish/9941e89d80e2bc58a153).\n- [Allowing changes to a pull request branch created from a fork](https://help.github.com/articles/allowing-changes-to-a-pull-request-branch-created-from-a-fork/)\n\nIf you want to add a new big feature, please create a proposal first, where we can discuss the idea and implementation details. This will prevent wasted time if the PR be rejected.\n'