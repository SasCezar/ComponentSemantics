b'<p align="center">\n  <img src="https://github.com/infinitered/nsfwjs/raw/master/_art/nsfwjs_logo.jpg" alt="NSFWJS Logo" width="400" />\n  <h2 align="center">Client-side indecent content checking</h2>\n</p>\n\n[![All Contributors](https://img.shields.io/badge/all_contributors-9-orange.svg?style=flat-square)](#contributors)\n[![Travis CI](https://travis-ci.com/infinitered/nsfwjs.svg?branch=master)]()\n\nA simple JavaScript library to help you quickly identify unseemly images; all in the client\'s browser. NSFWJS isn\'t perfect, but it\'s pretty accurate (~90% from our test set of 15,000 test images)... and it\'s getting more accurate all the time.\n\nWhy would this be useful? [Check out the announcement blog post](https://shift.infinite.red/avoid-nightmares-nsfw-js-ab7b176978b1).\n\n<p align="center">\n<img src="https://github.com/infinitered/nsfwjs/raw/master/_art/nsfw_demo.gif" alt="demo example" width="800" align="center" />\n</p>\n\nThe library categorizes image probabilities in the following 5 classes:\n\n- `Drawing` - safe for work drawings (including anime)\n- `Hentai` - hentai and pornographic drawings\n- `Neutral` - safe for work neutral images\n- `Porn` - pornographic images, sexual acts\n- `Sexy` - sexually explicit images, not pornography\n\nThe demo is a continuous deployment source - Give it a go: http://nsfwjs.com/\n\n## How to use the module\n\nWith `async/await` support:\n\n```js\nimport * as nsfwjs from \'nsfwjs\'\n\nconst img = document.getElementById(\'img\')\n\n// Load model from my S3.\n// See the section hosting the model files on your site.\nconst model = await nsfwjs.load()\n\n// Classify the image\nconst predictions = await model.classify(img)\nconsole.log(\'Predictions: \', predictions)\n```\n\nWithout `async/await` support:\n\n```js\nimport * as nsfwjs from \'nsfwjs\'\n\nconst img = document.getElementById(\'img\')\n\n// Load model from my S3.\n// See the section hosting the model files on your site.\nnsfwjs.load().then(function(model) {\n  model.classify(img).then(function(predictions) {\n    // Classify the image\n    console.log(\'Predictions: \', predictions)\n  })\n})\n```\n\n## API\n\n#### `load` the model\n\nBefore you can classify any image, you\'ll need to load the model. You should use the optional first parameter and load the model from your website, as explained in the install directions.\n\n```js\nconst model = nsfwjs.load(\'/path/to/model/directory/\')\n```\n\nIf you\'re using a model that needs an image of dimension other than 224x224, you can pass the size in the options parameter.\n```js\nconst model = nsfwjs.load(\'/path/to/different/model/\', {size: 299})\n```\n\n**Parameters**\n\n- optional URL to the `model.json` folder.\n- optional object with size property that your model expects.\n\n**Returns**\n\n- Ready to use NSFWJS model object\n\n#### `classify` an image\n\nThis function can take any browser-based image elements (`<img>`, `<video>`, `<canvas>`) and returns an array of most likely predictions and their confidence levels.\n\n```js\n// Return top 3 guesses (instead of all 5)\nconst predictions = await model.classify(img, 3)\n```\n\n**Parameters**\n\n- Tensor, Image data, Image element, video element, or canvas element to check\n- Number of results to return (default all 5)\n\n**Returns**\n\n- Array of objects that contain `className` and `probability`. Array size is determined by the second parameter in the `classify` function.\n\n#### `classifyGif`\n\nThis function can take a browser-based image element (`<img>`) that is a GIF, and returns an array of prediction arrays. It breaks a GIF into its frames and runs `classify` on each with a given configuration. This can take a while, as GIFs are frequently hundreds of frames.\n\n```js\n// Returns all predictions of each GIF frame\nconst framePredictions = await model.classifyGif(img)\n```\n\nIf you\'re looking to update the user on status (_e.g. progress bar_) or change the number of top results per frame, then you can utilize the configuration parameter.\n\nExample of passing a configuration:\n\n```js\n// returns top 1 prediction of each GIF frame, and logs the status to console\nconst myConfig = {\n  topk: 1,\n  setGifControl: (gifControl) => console.log(gifControl),\n  onFrame: ({ index, totalFrames, predictions }) =>\n    console.log(index, totalFrames, predictions)\n}\nconst framePredictions = await classifyGif(img, myConfig)\n```\n\n**Parameters**\n\n- Image element to check\n- Configuration object with the following possible key/values:\n  - `topk` - Number of results to return per frame (default all 5)\n  - `setGifControl` - Function callback receives SuperGif object as an argument, allows a user to save it for later use\n  - `onFrame` - Function callback on each frame - Param is an object with the following key/values:\n    - `index` - the current GIF frame that was classified (starting at 1)\n    - `totalFrames` - the complete number of frames for this GIF (for progress calculations)\n    - `predictions` - an array of length `topk`, returning top results from classify\n\n**Returns**\n\n- Array of the same order as number of frames in GIF. Each index corresponding to that frame, an returns array of objects that contain `className` and `probability`; sorted by probability and limited by topk config parameter.\n\n## Install\n\nNSFWJS is powered by TensorFlow.js as a peer dependency. If your project does not already have TFJS you\'ll need to add it.\n\n```bash\n# peer dependency\n$ yarn add @tensorflow/tfjs\n# install NSFWJS\n$ yarn add nsfwjs\n```\n\nFor script tags add <script type="text/javascript" src="https://unpkg.com/nsfwjs"></script>. Then simply access the nsfwjs global variable. This requires that you\'ve already imported TensorFlow.js as well.\n\n#### Host your own model\n\nThe magic that powers NSFWJS is the [NSFW detection model](https://github.com/gantman/nsfw_model). By default, this node module is pulling from my S3, but I make no guarantees that I\'ll keep that download link available forever. It\'s best for the longevity of your project that you download and host your own version of [the model files](https://github.com/infinitered/nsfwjs/tree/master/example/nsfw_demo/public/model). You can then pass the relative URL to your hosted files in the `load` function. If you can come up with a way to bundle the model into the NPM package, I\'d love to see a PR to this repo!\n\n## Run the Examples\n\n### Example 1:\nThe demo that powers https://nsfwjs.com/ is available in the `nsfw_demo` example folder.\n\nTo run the demo, run `yarn prep` which will copy the latest code into the demo. After that\'s done, you can `cd` into the demo folder and run with `yarn start`.\n\n### Example 2:\nA browserified version using nothing but promises and script tags is available in the `minimal_demo` folder.\n\nPlease do not use the script tags hosted in this demo as a CDN.  This can and should be hosted in your project along side the model files.\n\n### Example 3:\nThe [NSFWJS React Native app](https://github.com/infinitered/nsfwjs-mobile)\n\nLoads a local copy of the model to reduce network load and utilizes TFJS-React-Native. [Blog Post](https://shift.infinite.red/nsfw-js-for-react-native-a37c9ba45fe9)\n\n## More!\n\nAn [FAQ](https://github.com/infinitered/nsfwjs/wiki/FAQ:-NSFW-JS) page is available.\n\nMore about NSFWJS and TensorFlow.js - https://youtu.be/uzQwmZwy3yw\n\nThe [model was trained in Keras over several days](https://medium.freecodecamp.org/how-to-set-up-nsfw-content-detection-with-machine-learning-229a9725829c) and 60+ Gigs of data. Be sure to [check out the model code](https://github.com/GantMan/nsfw_model) which was trained on data provided by [Alexander Kim\'s](https://github.com/alexkimxyz) [nsfw_data_scraper](https://github.com/alexkimxyz/nsfw_data_scraper).\n\n#### Open Source\n\nNSFWJS, as open source, is free to use and always will be :heart:. It\'s MIT licensed, and we\'ll always do our best to help and quickly answer issues. If you\'d like to get a hold of us, join our [community slack](http://community.infinite.red).\n\n#### Premium\n\n[Infinite Red](https://infinite.red/) offers premium training and support. Email us at [hello@infinite.red](mailto:hello@infinite.red) to get in touch.\n\n## Contributors\n\nThanks goes to these wonderful people ([emoji key](https://allcontributors.org/docs/en/emoji-key)):\n\n<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->\n<!-- prettier-ignore -->\n<table><tr><td align="center"><a href="http://gantlaborde.com/"><img src="https://avatars0.githubusercontent.com/u/997157?v=4" width="100px;" alt="Gant Laborde"/><br /><sub><b>Gant Laborde</b></sub></a><br /><a href="#question-GantMan" title="Answering Questions">\xf0\x9f\x92\xac</a> <a href="#blog-GantMan" title="Blogposts">\xf0\x9f\x93\x9d</a> <a href="https://github.com/infinitered/nsfwjs/commits?author=GantMan" title="Code">\xf0\x9f\x92\xbb</a> <a href="#example-GantMan" title="Examples">\xf0\x9f\x92\xa1</a> <a href="#ideas-GantMan" title="Ideas, Planning, & Feedback">\xf0\x9f\xa4\x94</a> <a href="#infra-GantMan" title="Infrastructure (Hosting, Build-Tools, etc)">\xf0\x9f\x9a\x87</a> <a href="#review-GantMan" title="Reviewed Pull Requests">\xf0\x9f\x91\x80</a> <a href="https://github.com/infinitered/nsfwjs/commits?author=GantMan" title="Tests">\xe2\x9a\xa0\xef\xb8\x8f</a></td><td align="center"><a href="https://jamonholmgren.com"><img src="https://avatars3.githubusercontent.com/u/1479215?v=4" width="100px;" alt="Jamon Holmgren"/><br /><sub><b>Jamon Holmgren</b></sub></a><br /><a href="https://github.com/infinitered/nsfwjs/commits?author=jamonholmgren" title="Documentation">\xf0\x9f\x93\x96</a> <a href="#ideas-jamonholmgren" title="Ideas, Planning, & Feedback">\xf0\x9f\xa4\x94</a> <a href="https://github.com/infinitered/nsfwjs/commits?author=jamonholmgren" title="Code">\xf0\x9f\x92\xbb</a> <a href="#content-jamonholmgren" title="Content">\xf0\x9f\x96\x8b</a></td><td align="center"><a href="https://github.com/jstudenski"><img src="https://avatars0.githubusercontent.com/u/7350279?v=4" width="100px;" alt="Jeff Studenski"/><br /><sub><b>Jeff Studenski</b></sub></a><br /><a href="#design-jstudenski" title="Design">\xf0\x9f\x8e\xa8</a></td><td align="center"><a href="https://github.com/fvonhoven"><img src="https://avatars2.githubusercontent.com/u/10098988?v=4" width="100px;" alt="Frank von Hoven III"/><br /><sub><b>Frank von Hoven III</b></sub></a><br /><a href="https://github.com/infinitered/nsfwjs/commits?author=fvonhoven" title="Documentation">\xf0\x9f\x93\x96</a> <a href="#ideas-fvonhoven" title="Ideas, Planning, & Feedback">\xf0\x9f\xa4\x94</a></td><td align="center"><a href="https://github.com/sandeshsoni"><img src="https://avatars3.githubusercontent.com/u/3761745?v=4" width="100px;" alt="Sandesh Soni"/><br /><sub><b>Sandesh Soni</b></sub></a><br /><a href="https://github.com/infinitered/nsfwjs/commits?author=sandeshsoni" title="Code">\xf0\x9f\x92\xbb</a></td><td align="center"><a href="https://github.com/seannam1218"><img src="https://avatars1.githubusercontent.com/u/24437898?v=4" width="100px;" alt="Sean Nam"/><br /><sub><b>Sean Nam</b></sub></a><br /><a href="https://github.com/infinitered/nsfwjs/commits?author=seannam1218" title="Documentation">\xf0\x9f\x93\x96</a></td><td align="center"><a href="https://github.com/emer7"><img src="https://avatars1.githubusercontent.com/u/21377166?v=4" width="100px;" alt="Gilbert Emerson"/><br /><sub><b>Gilbert Emerson</b></sub></a><br /><a href="https://github.com/infinitered/nsfwjs/commits?author=emer7" title="Code">\xf0\x9f\x92\xbb</a></td></tr><tr><td align="center"><a href="https://github.com/xilaraux"><img src="https://avatars2.githubusercontent.com/u/17703730?v=4" width="100px;" alt="Oleksandr Kozlov"/><br /><sub><b>Oleksandr Kozlov</b></sub></a><br /><a href="#infra-xilaraux" title="Infrastructure (Hosting, Build-Tools, etc)">\xf0\x9f\x9a\x87</a> <a href="https://github.com/infinitered/nsfwjs/commits?author=xilaraux" title="Tests">\xe2\x9a\xa0\xef\xb8\x8f</a> <a href="https://github.com/infinitered/nsfwjs/commits?author=xilaraux" title="Code">\xf0\x9f\x92\xbb</a></td><td align="center"><a href="http://morganlaco.com"><img src="https://avatars2.githubusercontent.com/u/4466642?v=4" width="100px;" alt="Morgan"/><br /><sub><b>Morgan</b></sub></a><br /><a href="https://github.com/infinitered/nsfwjs/commits?author=mlaco" title="Code">\xf0\x9f\x92\xbb</a> <a href="#ideas-mlaco" title="Ideas, Planning, & Feedback">\xf0\x9f\xa4\x94</a></td></tr></table>\n\n<!-- ALL-CONTRIBUTORS-LIST:END -->\n\nThis project follows the [all-contributors](https://github.com/all-contributors/all-contributors) specification. Contributions of any kind welcome!\n'