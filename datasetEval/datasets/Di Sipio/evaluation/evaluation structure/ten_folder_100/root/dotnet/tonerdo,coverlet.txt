b'# Coverlet\n\n[![Build Status](https://dev.azure.com/tonerdo/coverlet/_apis/build/status/tonerdo.coverlet?branchName=master)](https://dev.azure.com/tonerdo/coverlet/_build/latest?definitionId=3&branchName=master)\n\nCoverlet is a cross platform code coverage framework for .NET, with support for line, branch and method coverage. It works with .NET Framework on Windows and .NET Core on all supported platforms.\n\n# Main contents\n* [Installation](#Installation)\n* [QuickStart](#Quick-Start)\n* [How It Works](#How-It-Works)\n* [Know Issues](#Know-Issues)\n* [Consume nightly build](#Consume-nightly-build)\n* [Feature samples](Documentation/Examples.md)\n* [Cake Add-In](#Cake.-Add-In)\n* [Changelog](Documentation/Changelog.md)\n## Installation\n\n**VSTest Integration**:\n\n```bash\ndotnet add package coverlet.collector\n```\nN.B. You **MUST** add package only to test projects  \n\n**MSBuild Integration**:\n\n```bash\ndotnet add package coverlet.msbuild\n```\nN.B. You **MUST** add package only to test projects  \n\n**Global Tool**:\n\n```bash\ndotnet tool install --global coverlet.console\n```\n\n## Quick Start\n\n### VSTest Integration\n\nCoverlet is integrated into the Visual Studio Test Platform as a [data collector](https://github.com/Microsoft/vstest-docs/blob/master/docs/extensions/datacollector.md). To get coverage simply run the following command:\n\n```bash\ndotnet test --collect:"XPlat Code Coverage"\n```\n\nAfter the above command is run, a `coverage.cobertura.json` file containing the results will be published to the `TestResults` directory as an attachment. A summary of the results will also be displayed in the terminal.\n\nSee [documentation](Documentation/VSTestIntegration.md) for advanced usage.\n\n#### Requirements\n* _You need to be running .NET Core SDK v2.2.300 or newer_\n* _To run fully-featured collectors ([see #110](https://github.com/tonerdo/coverlet/issues/110)) you need to be running  .NET Core SDK v2.2.401 or newer_\n* _You need to reference version 16.1.0 and above of Microsoft.NET.Test.Sdk_\n```\n<PackageReference Include="Microsoft.NET.Test.Sdk" Version="16.1.0" />\n```\n\n### MSBuild Integration\n\nCoverlet also integrates with the build system to run code coverage after tests. Enabling code coverage is as simple as setting the `CollectCoverage` property to `true`\n\n```bash\ndotnet test /p:CollectCoverage=true\n```\n\nAfter the above command is run, a `coverage.json` file containing the results will be generated in the root directory of the test project. A summary of the results will also be displayed in the terminal.\n\nSee [documentation](Documentation/MSBuildIntegration.md) for advanced usage.\n\n#### Requirements\nRequires a runtime that support _.NET Standard 2.0 and above_\n\n### Global Tool\n\nThe `coverlet` tool is invoked by specifying the path to the assembly that contains the unit tests. You also need to specify the test runner and the arguments to pass to the test runner using the `--target` and `--targetargs` options respectively. The invocation of the test runner with the supplied arguments **must not** involve a recompilation of the unit test assembly or no coverage result will be generated.\n\nThe following example shows how to use the familiar `dotnet test` toolchain:\n\n```bash\ncoverlet /path/to/test-assembly.dll --target "dotnet" --targetargs "test /path/to/test-project --no-build"\n```\n\n_Note: The `--no-build` flag is specified so that the `/path/to/test-assembly.dll` assembly isn\'t rebuilt_\n\nSee [documentation](Documentation/GlobalTool.md) for advanced usage.\n\n#### Requirements\n.NET global tools rely on a .NET Core runtime installed on your machine https://docs.microsoft.com/en-us/dotnet/core/tools/global-tools#what-could-go-wrong\n\n.NET Coverlet global tool requires _.NET Core 2.2 and above_ \n\n\n## How It Works\n\nCoverlet generates code coverage information by going through the following process:\n\n### Before Tests Run\n\n* Locates the unit test assembly and selects all the referenced assemblies that have PDBs.\n* Instruments the selected assemblies by inserting code to record sequence point hits to a temporary file.\n\n### After Tests Run\n\n* Restore the original non-instrumented assembly files.\n* Read the recorded hits information from the temporary file.\n* Generate the coverage result from the hits information and write it to a file.\n\n_Note: The assembly you\'d like to get coverage for must be different from the assembly that contains the tests_\n\n## Are you in trouble with some feature? Check on [examples](Documentation/Examples.md)!\n\n## Know Issues\n\nUnfortunately we have some know issues, check it [here](Documentation/KnowIssues.md) \n\n## Cake Add-In\n\nIf you\'re using [Cake Build](https://cakebuild.net) for your build script you can use the [Cake.Coverlet](https://github.com/Romanx/Cake.Coverlet) add-in to provide you extensions to dotnet test for passing Coverlet arguments in a strongly typed manner.\n\n## Consume nightly build\n\nWe offer nightly build of master for all packages.\nSee the [documentation](Documentation/ConsumeNightlyBuild.md)\n\n## Issues & Contributions\n\nIf you find a bug or have a feature request, please report them at this repository\'s issues section. See the [CONTRIBUTING GUIDE](CONTRIBUTING.md) for details on building and contributing to this project.\n\n## Code of Conduct\n\nThis project enforces a code of conduct in line with the contributor covenant. See [CODE OF CONDUCT](CODE_OF_CONDUCT.md) for details.\n\n## License\n\nThis project is licensed under the MIT license. See the [LICENSE](LICENSE) file for more info.\n'