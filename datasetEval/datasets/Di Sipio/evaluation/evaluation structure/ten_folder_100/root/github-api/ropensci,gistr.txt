b'gistr\n=======\n\n\n[![cran checks](https://cranchecks.info/badges/worst/gistr)](https://cranchecks.info/pkgs/gistr)\n[![Build Status](https://api.travis-ci.org/ropensci/gistr.png)](https://travis-ci.org/ropensci/gistr)\n[![Build status](https://ci.appveyor.com/api/projects/status/4jmuxbbv8qg4139t/branch/master?svg=true)](https://ci.appveyor.com/project/sckott/gistr/branch/master)\n[![codecov.io](https://codecov.io/github/ropensci/gistr/coverage.svg?branch=master)](https://codecov.io/github/ropensci/gistr?branch=master)\n[![rstudio mirror downloads](http://cranlogs.r-pkg.org/badges/gistr)](https://github.com/metacran/cranlogs.app)\n[![cran version](http://www.r-pkg.org/badges/version/gistr)](https://cran.r-project.org/package=gistr)\n\n`gistr` is a light interface to GitHub\'s gists for R.\n\n## See also:\n\n* [rgithub](https://github.com/cscheid/rgithub) an R client for the Github API by Carlos Scheidegger\n* [git2r](https://github.com/ropensci/git2r) an R client for the libgit2 C library by Stefan Widgren\n* [gistfo](https://github.com/MilesMcBain/gistfo) for turning your untitled RStudio tabs into gists!\n\n## Quick start\n\n### Install\n\nStable version from CRAN\n\n\n```r\ninstall.packages("gistr")\n```\n\nOr dev version from GitHub.\n\n\n```r\ndevtools::install_github("ropensci/gistr")\n```\n\n\n```r\nlibrary("gistr")\n```\n\n### Authentication\n\nThere are two ways to authorise gistr to work with your GitHub account:\n\n* Generate a personal access token (PAT) at [https://help.github.com/articles/creating-an-access-token-for-command-line-use](https://help.github.com/articles/creating-an-access-token-for-command-line-use) and record it in the `GITHUB_PAT` environment variable.\n  - To test out this approach, execute this in R: `Sys.setenv(GITHUB_PAT = "blahblahblah")`, where "blahblahblah" is the PAT you got from GitHub. Then take `gistr` out for a test drive.\n  - If that works, you will probably want to define the GITHUB_PAT environment variable in a file such as `~/.bash_profile` or `~/.Renviron`.\n* Interactively login into your GitHub account and authorise with OAuth.\n\nUsing the PAT is recommended.\n\nUsing the `gist_auth()` function you can authenticate separately first, or if you\'re not authenticated, this function will run internally with each function call. If you have a PAT, that will be used, if not, OAuth will be used.\n\n\n```r\ngist_auth()\n```\n\n### Workflow\n\nIn `gistr` you can use pipes, introduced perhaps first in R in the package `magrittr`, to pass outputs from one function to another. If you have used `dplyr` with pipes you can see the difference, and perhaps the utility, of this workflow over the traditional workflow in R. You can use a non-piping or a piping workflow with `gistr`. Examples below use a mix of both workflows. Here is an example of a piping workflow (with some explanation):\n\n\n```r\nfile <- system.file("examples", "alm.md", package = "gistr")\ngists(what = "minepublic")[[1]] %>% # List my public gists, and index to get just the 1st one\n  add_files(file) %>% # Add a new file to that gist\n  update() # update sends a PATCH command to the Gists API to add the file to your gist online\n```\n\nAnd a non-piping workflow that does the same exact thing:\n\n\n```r\nfile <- system.file("examples", "alm.md", package = "gistr")\ng <- gists(what = "minepublic")[[1]]\ng <- add_files(g, file)\nupdate(g)\n```\n\nOr you could string them all together in one line (but it\'s rather difficult to follow what\'s going on because you have to read from the inside out)\n\n\n```r\nfile <- system.file("examples", "alm.md", package = "gistr")\nupdate(add_files(gists(what = "minepublic")[[1]], file))\n```\n\n### Rate limit information\n\n\n```r\nrate_limit()\n#> Rate limit: 5000\n#> Remaining:  4975\n#> Resets in:  56 minutes\n```\n\n### List gists\n\nLimiting to a few results here to keep it brief\n\n\n```r\ngists(per_page = 2)\n#> [[1]]\n#> <gist>6ac700bec42f7563bf809d8d92ae4906\n#>   URL: https://gist.github.com/6ac700bec42f7563bf809d8d92ae4906\n#>   Description: Password Dictionary for Brute force attack\n#>   Public: TRUE\n#>   Created/Edited: 2018-04-16T21:25:21Z / 2018-04-16T21:25:22Z\n#>   Files: dictionary.txt\n#>   Truncated?: FALSE\n#> \n#> [[2]]\n#> <gist>89df33d7a21ed92d2fad5c4cec96f8ae\n#>   URL: https://gist.github.com/89df33d7a21ed92d2fad5c4cec96f8ae\n#>   Description: Export documents to a zip file\n#>   Public: TRUE\n#>   Created/Edited: 2018-04-16T21:25:03Z / 2018-04-16T21:25:04Z\n#>   Files: export_zip.xqy\n#>   Truncated?: FALSE\n```\n\nSince a certain date/time\n\n\n```r\ngists(since=\'2014-05-26T00:00:00Z\', per_page = 2)\n#> [[1]]\n#> <gist>6ac700bec42f7563bf809d8d92ae4906\n#>   URL: https://gist.github.com/6ac700bec42f7563bf809d8d92ae4906\n#>   Description: Password Dictionary for Brute force attack\n#>   Public: TRUE\n#>   Created/Edited: 2018-04-16T21:25:21Z / 2018-04-16T21:25:22Z\n#>   Files: dictionary.txt\n#>   Truncated?: FALSE\n#> \n#> [[2]]\n#> <gist>89df33d7a21ed92d2fad5c4cec96f8ae\n#>   URL: https://gist.github.com/89df33d7a21ed92d2fad5c4cec96f8ae\n#>   Description: Export documents to a zip file\n#>   Public: TRUE\n#>   Created/Edited: 2018-04-16T21:25:03Z / 2018-04-16T21:25:04Z\n#>   Files: export_zip.xqy\n#>   Truncated?: FALSE\n```\n\nRequest different types of gists, one of public, minepublic, mineall, or starred.\n\n\n```r\ngists(\'minepublic\', per_page = 2)\n#> [[1]]\n#> <gist>d6c06c121e70016e1caf159c7d7b6aa6\n#>   URL: https://gist.github.com/d6c06c121e70016e1caf159c7d7b6aa6\n#>   Description: \n#>   Public: TRUE\n#>   Created/Edited: 2018-04-16T21:24:47Z / 2018-04-16T21:24:55Z\n#>   Files: code.R\n#>   Truncated?: FALSE\n#> \n#> [[2]]\n#> <gist>f271bcf55ad2e17c34f4e99e2458d232\n#>   URL: https://gist.github.com/f271bcf55ad2e17c34f4e99e2458d232\n#>   Description: a new cool gist\n#>   Public: TRUE\n#>   Created/Edited: 2018-04-16T21:24:46Z / 2018-04-16T21:24:46Z\n#>   Files: stuff.md\n#>   Truncated?: FALSE\n```\n\n\n### List a single commit\n\n\n```r\ngist(id = \'f1403260eb92f5dfa7e1\')\n#> <gist>f1403260eb92f5dfa7e1\n#>   URL: https://gist.github.com/f1403260eb92f5dfa7e1\n#>   Description: Querying bitly from R \n#>   Public: TRUE\n#>   Created/Edited: 2014-10-15T20:40:12Z / 2015-08-29T14:07:43Z\n#>   Files: bitly_r.md\n#>   Truncated?: FALSE\n```\n\n### Create gist\n\nYou can pass in files\n\n\n```r\nfile <- system.file("examples", "stuff.md", package = "gistr")\ngist_create(file, description=\'a new cool gist\', browse = FALSE)\n#> <gist>7563b7654b15a8c4cc9f69880ae78d18\n#>   URL: https://gist.github.com/7563b7654b15a8c4cc9f69880ae78d18\n#>   Description: a new cool gist\n#>   Public: TRUE\n#>   Created/Edited: 2018-04-16T21:25:58Z / 2018-04-16T21:25:58Z\n#>   Files: stuff.md\n#>   Truncated?: FALSE\n```\n\nOr, wrap `gist_create()` around some code in your R session/IDE, with just the function name, and a `{\'` at the start and a `}\'` at the end.\n\n\n```r\ngist_create(code={\'\nx <- letters\nnumbers <- runif(8)\nnumbers\n\n[1] 0.3229318 0.5933054 0.7778408 0.3898947 0.1309717 0.7501378 0.3206379 0.3379005\n\'})\n```\n\n\n```r\ngist_create(code={\'\nx <- letters\nnumbers <- runif(8)\nnumbers\n\n[1] 0.3229318 0.5933054 0.7778408 0.3898947 0.1309717 0.7501378 0.3206379 0.3379005\n\'}, browse=FALSE)\n#> <gist>b7f90fcb99dae005db9d837f1a21ee03\n#>   URL: https://gist.github.com/b7f90fcb99dae005db9d837f1a21ee03\n#>   Description: \n#>   Public: TRUE\n#>   Created/Edited: 2018-04-16T21:26:00Z / 2018-04-16T21:26:00Z\n#>   Files: code.R\n#>   Truncated?: FALSE\n```\n\n#### knit and create\n\nYou can also knit an input file before posting as a gist:\n\n\n```r\nfile <- system.file("examples", "stuff.Rmd", package = "gistr")\ngist_create(file, description=\'a new cool gist\', knit=TRUE)\n#> <gist>4162b9c53479fbc298db\n#>   URL: https://gist.github.com/4162b9c53479fbc298db\n#>   Description: a new cool gist\n#>   Public: TRUE\n#>   Created/Edited: 2014-10-27T16:07:31Z / 2014-10-27T16:07:31Z\n#>   Files: stuff.md\n```\n\nOr code blocks before (note that code blocks without knitr block demarcations will result in unexecuted code):\n\n\n```r\ngist_create(code={\'\nx <- letters\n(numbers <- runif(8))\n\'}, knit=TRUE)\n#> <gist>ec45c396dee4aa492139\n#>   URL: https://gist.github.com/ec45c396dee4aa492139\n#>   Description:\n#>   Public: TRUE\n#>   Created/Edited: 2014-10-27T16:09:09Z / 2014-10-27T16:09:09Z\n#>   Files: file81720d1ceff.md\n```\n\n### knit code from file path, code block, or gist file\n\nknit a local file\n\n\n```r\nfile <- system.file("examples", "stuff.Rmd", package = "gistr")\nrun(file, knitopts = list(quiet=TRUE)) %>% gist_create(browse = FALSE)\n#> <gist>5f05cf24cf459e0818ae2e128c14f301\n#>   URL: https://gist.github.com/5f05cf24cf459e0818ae2e128c14f301\n#>   Description: \n#>   Public: TRUE\n#>   Created/Edited: 2018-04-16T21:26:01Z / 2018-04-16T21:26:01Z\n#>   Files: stuff.md\n#>   Truncated?: FALSE\n```\n\n\n\nknit a code block (knitr code block notation missing, do add that in) (result not shown)\n\n\n```r\nrun({\'\nx <- letters\n(numbers <- runif(8))\n\'}) %>% gist_create\n```\n\nknit a file from a gist, has to get file first (result not shown)\n\n\n```r\ngists(\'minepublic\')[[1]] %>% run() %>% update()\n```\n\n### working with images\n\nThe GitHub API doesn\'t let you upload binary files (e.g., images) via their HTTP API, which we use in `gistr`. There is a workaround.\n\nIf you are using `.Rmd` or `.Rnw` files, you can set `imgur_inject = TRUE` in `gistr_create()` so that imgur knit options are injected at the top of your file so that images will be uploaded to imgur. Alternatively, you can do this yourself, setting knit options to use imgur.\n\nA file already using imgur\n\n\n```r\nfile <- system.file("examples", "plots_imgur.Rmd", package = "gistr")\ngist_create(file, knit=TRUE)\n#> <gist>1a6e7f7d6ddb739fce0b\n#>   URL: https://gist.github.com/1a6e7f7d6ddb739fce0b\n#>   Description:\n#>   Public: TRUE\n#>   Created/Edited: 2015-03-19T00:20:48Z / 2015-03-19T00:20:48Z\n#>   Files: plots_imgur.md\n```\n\nA file _NOT_ already using imgur\n\n\n```r\nfile <- system.file("examples", "plots.Rmd", package = "gistr")\ngist_create(file, knit=TRUE, imgur_inject = TRUE)\n#> <gist>ec9987ad245bbc668c72\n#>   URL: https://gist.github.com/ec9987ad245bbc668c72\n#>   Description:\n#>   Public: TRUE\n#>   Created/Edited: 2015-03-19T00:21:13Z / 2015-03-19T00:21:13Z\n#>   Files: plots.md\n```\n\n### List commits on a gist\n\n\n```r\ngists()[[1]] %>% commits()\n#> [[1]]\n#> <commit>\n#>   Version: bf6f7fcb219bed1ac3de465f707d17d344da4c22\n#>   User: sckott\n#>   Commited: 2018-04-16T21:25:59Z\n#>   Commits [total, additions, deletions]: [5,5,0]\n```\n\n### Star a gist\n\nStar\n\n\n```r\ngist(\'cbb0507082bb18ff7e4b\') %>% star()\n#> <gist>cbb0507082bb18ff7e4b\n#>   URL: https://gist.github.com/cbb0507082bb18ff7e4b\n#>   Description: This is my technical interview cheat sheet.  Feel free to fork it or do whatever you want with it.  PLEASE let me know if there are any errors or if anything crucial is missing.  I will add more links soon.\n#>   Public: TRUE\n#>   Created/Edited: 2014-05-02T19:43:13Z / 2018-04-16T21:11:53Z\n#>   Files: The Technical Interview Cheat Sheet.md\n#>   Truncated?: FALSE\n```\n\nUnstar\n\n```r\ngist(\'cbb0507082bb18ff7e4b\') %>% unstar()\n#> <gist>cbb0507082bb18ff7e4b\n#>   URL: https://gist.github.com/cbb0507082bb18ff7e4b\n#>   Description: This is my technical interview cheat sheet.  Feel free to fork it or do whatever you want with it.  PLEASE let me know if there are any errors or if anything crucial is missing.  I will add more links soon.\n#>   Public: TRUE\n#>   Created/Edited: 2014-05-02T19:43:13Z / 2018-04-16T21:27:36Z\n#>   Files: The Technical Interview Cheat Sheet.md\n#>   Truncated?: FALSE\n```\n\n### Edit a gist\n\nAdd files\n\n\n```r\nfile <- system.file("examples", "alm.md", package = "gistr")\ngists(what = "minepublic")[[1]] %>%\n  add_files(file) %>%\n  update()\n#> <gist>b7f90fcb99dae005db9d837f1a21ee03\n#>   URL: https://gist.github.com/b7f90fcb99dae005db9d837f1a21ee03\n#>   Description: \n#>   Public: TRUE\n#>   Created/Edited: 2018-04-16T21:26:00Z / 2018-04-16T21:26:25Z\n#>   Files: alm.md, code.R\n#>   Truncated?: FALSE, FALSE\n```\n\nDelete files\n\n\n```r\nfile <- system.file("examples", "alm.md", package = "gistr")\ngists(what = "minepublic")[[1]] %>%\n  delete_files(file) %>%\n  update()\n#> <gist>b7f90fcb99dae005db9d837f1a21ee03\n#>   URL: https://gist.github.com/b7f90fcb99dae005db9d837f1a21ee03\n#>   Description: \n#>   Public: TRUE\n#>   Created/Edited: 2018-04-16T21:26:00Z / 2018-04-16T21:26:26Z\n#>   Files: code.R\n#>   Truncated?: FALSE\n```\n\n### Open a gist in your default browser\n\n\n```r\ngists()[[1]] %>% browse()\n```\n\n> Opens the gist in your default browser\n\n### Get embed script\n\n\n```r\ngists()[[1]] %>% embed()\n#> [1] "<script src=\\"https://gist.github.com/sckott/b7f90fcb99dae005db9d837f1a21ee03.js\\"></script>"\n```\n\n### List forks\n\nReturns a list of `gist` objects, just like `gists()`\n\n\n```r\ngist(id=\'1642874\') %>% forks(per_page=2)\n#> [[1]]\n#> <gist>1642989\n#>   URL: https://gist.github.com/1642989\n#>   Description: Spline Transition\n#>   Public: TRUE\n#>   Created/Edited: 2012-01-19T21:45:20Z / 2018-02-07T07:49:17Z\n#>   Files: \n#>   Truncated?: \n#> \n#> [[2]]\n#> <gist>1643051\n#>   URL: https://gist.github.com/1643051\n#>   Description: Line Transition (Broken)\n#>   Public: TRUE\n#>   Created/Edited: 2012-01-19T21:51:30Z / 2016-12-01T07:19:06Z\n#>   Files: \n#>   Truncated?:\n```\n\n### Fork a gist\n\nReturns a `gist` object\n\n\n```r\ng <- gists()\n(forked <- g[[ sample(seq_along(g), 1) ]] %>% fork())\n#> <gist>ca541fdae95e8a2e009bea872595bd2b\n#>   URL: https://gist.github.com/ca541fdae95e8a2e009bea872595bd2b\n#>   Description: \n#>   Public: TRUE\n#>   Created/Edited: 2018-04-16T21:26:33Z / 2018-04-16T21:26:33Z\n#>   Files: .py\n#>   Truncated?: FALSE\n```\n\n\n\n## Example use case\n\n_Working with the Mapzen Pelias geocoding API_\n\nThe API is described at https://github.com/pelias/pelias, and is still in alpha they say. The steps: get data, make a gist. The data is returned from Mapzen as geojson, so all we have to do is literally push it up to GitHub gists and we\'re done b/c GitHub renders the map.\n\n\n```r\nlibrary(\'httr\')\nbase <- "http://pelias.mapzen.com/search"\nres <- GET(base, query = list(input = \'coffee shop\', lat = 45.5, lon = -122.6))\njson <- content(res, as = "text")\ngist_create(code = json, filename = "pelias_test.geojson")\n#> <gist>017214637bcfeb198070\n#>   URL: https://gist.github.com/017214637bcfeb198070\n#>   Description:\n#>   Public: TRUE\n#>   Created/Edited: 2014-10-28T14:42:36Z / 2014-10-28T14:42:36Z\n#>   Files: pelias_test.geojson\n```\n\nAnd here\'s that [gist](https://gist.github.com/sckott/017214637bcfeb198070)\n\n![pelias img](inst/img/gistr_ss.png)\n\n## Meta\n\n* Please [report any issues or bugs](https://github.com/ropensci/gistr/issues).\n* License: MIT\n* Get citation information for `gistr` in R doing `citation(package = \'gistr\')`\n* Please note that this project is released with a [Contributor Code of Conduct][coc]. By participating in this project you agree to abide by its terms.\n\n[![rofooter](https://ropensci.org/public_images/github_footer.png)](https://ropensci.org)\n\n[coc]: https://github.com/ropensci/gistr/blob/master/CODE_OF_CONDUCT.md\n'