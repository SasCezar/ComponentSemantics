b'# LottieXamarin\nLottie is a mobile library for Android and iOS that parses [Adobe After Effects](http://www.adobe.com/products/aftereffects.html) animations exported as json with [Bodymovin](https://github.com/bodymovin/bodymovin) and renders them natively on mobile!\n\n# Support\n\n* Feel free to open an issue. Make sure to use one of the templates!\n* Commercial support is available. Integration with your app or services, samples, feature request, etc. Email: [hello@baseflow.com](mailto:hello@baseflow.com)\n* Powered by: [baseflow.com](https://baseflow.com)\n\n## Download\n\nAndroid: [![NuGet Badge](https://buildstats.info/nuget/Com.Airbnb.Android.Lottie)](https://www.nuget.org/packages/Com.Airbnb.Android.Lottie/)\niOS: [![NuGet Badge](https://buildstats.info/nuget/Com.Airbnb.iOS.Lottie)](https://www.nuget.org/packages/Com.Airbnb.iOS.Lottie/)\nXamarin.Forms: [![NuGet Badge](https://buildstats.info/nuget/Com.Airbnb.Xamarin.Forms.Lottie)](https://www.nuget.org/packages/Com.Airbnb.Xamarin.Forms.Lottie/)\n\n\nFor the first time, designers can create **and ship** beautiful animations without an engineer painstakingly recreating it by hand. They say a picture is worth 1,000 words so here are 13,000:\n\n![Example1](https://raw.githubusercontent.com/airbnb/lottie-android/master/gifs/Example1.gif)\n\n\n![Example2](https://raw.githubusercontent.com/airbnb/lottie-android/master/gifs/Example2.gif)\n\n\n![Example3](https://raw.githubusercontent.com/airbnb/lottie-android/master/gifs/Example3.gif)\n\n\n![Community](https://raw.githubusercontent.com/airbnb/lottie-android/master/gifs/Community%202_3.gif)\n\n\n![Example4](https://raw.githubusercontent.com/airbnb/lottie-android/master/gifs/Example4.gif)\n\nAll of these animations were created in After Effects, exported with Bodymovin, and rendered natively with no additional engineering effort.\n\n[Bodymovin](https://github.com/bodymovin/bodymovin) is an After Effects plugin created by Hernan Torrisi that exports After effects files as json and includes a javascript web player. We\'ve built on top of his great work to extend its usage to Android, iOS, and React Native.\n\nRead more about it on our [blog post](http://airbnb.design/introducing-lottie/)\nOr get in touch on Twitter ([gpeal8](https://twitter.com/gpeal8)) or via lottie@airbnb.com\n\n## Sample App\n\nYou can build the sample app yourself or download it from the [Play Store](https://play.google.com/store/apps/details?id=com.airbnb.lottie). The sample app includes some built in animations but also allows you to load an animation from internal storage or from a url.\n\n## Using Lottie for Xamarin Android\nLottie supports Ice Cream Sandwich (API 14) and above.\nThe simplest way to use it is with LottieAnimationView:\n\n```xml\n<com.airbnb.lottie.LottieAnimationView\n        android:id="@+id/animation_view"\n        android:layout_width="wrap_content"\n        android:layout_height="wrap_content"\n        app:lottie_fileName="hello-world.json"\n        app:lottie_loop="true"\n        app:lottie_autoPlay="true" />\n```\n\nOr you can load it programatically in multiple ways.\nFrom a json asset in app/src/main/assets:\n```c#\nLottieAnimationView animationView = FindViewById<LottieAnimationView>(Resource.Id.animation_view);\nanimationView.SetAnimation("hello-world.json");\nanimationView.Loop = true;\n```\nThis method will load the file and parse the animation in the background and asynchronously start rendering once completed.\n\nIf you want to reuse an animation such as in each item of a list or load it from a network request JSONObject:\n```c#\n LottieAnimationView animationView = FindViewById<LottieAnimationView>(Resource.Id.animation_view);\n ...\n LottieComposition composition = LottieComposition.Factory.FromJson(Resources, jsonObject, (composition) => \n {\n     animationView.SetComposition(composition);\n     animationView.PlayAnimation();\n });\n```\n\nYou can then control the animation or add listeners:\n```c#\nanimationView.AddAnimatorUpdateListener(animationListener);\nanimationView.PlayAnimation();\n...\nif (animationView.IsAnimating) \n{\n    // Do something.\n}\n...\nanimationView.Progress = 0.5f;\n...\n// Custom animation speed or duration.\nValueAnimator animator = ValueAnimator.OfFloat(0f, 1f).SetDuration(500);\nanimator.Update += (sender, e) => animationView.Progress = (float)e.Animation.AnimatedValue;\nanimator.Start();\n...\nanimationView.CancelAnimation();\n```\n\n\nUnder the hood, `LottieAnimationView` uses `LottieDrawable` to render its animations. If you need to, you can use the the drawable form directly:\n```c#\nLottieDrawable drawable = new LottieDrawable();\nLottieComposition.Factory.FromAssetFileName(Context, "hello-world.json", (composition) => {\n    drawable.SetComposition(composition);\n});\n```\n\nIf your animation will be frequently reused, `LottieAnimationView` has an optional caching strategy built in. Use `LottieAnimationView#SetAnimation(String, CacheStrategy)`. `CacheStrategy` can be `Strong`, `Weak`, or `None` to have `LottieAnimationView` hold a strong or weak reference to the loaded and parsed animation. \n\nYou can also use the awaitable version of LottieComposition\'s asynchronous methods:\n```c#\nvar composition = await LottieComposition.Factory.FromAssetFileNameAsync(this.Context, assetName);\n..\nvar composition = await LottieComposition.Factory.FromJsonAsync(Resources, jsonObject);\n...\nvar composition = await LottieComposition.Factory.FromInputStreamAsync(this.Context, stream);\n```\n\n### Image Support\nYou can animate images if your animation is loaded from assets and your image file is in a \nsubdirectory of assets. Just call `SetImageAssetsFolder` on `LottieAnimationView` or \n`LottieDrawable` with the relative folder inside of assets and make sure that the images that \nbodymovin export are in that folder with their names unchanged (should be img_#).\nIf you use `LottieDrawable` directly, you must call `RecycleBitmaps` when you are done with it.\n\nIf you need to provide your own bitmaps if you downloaded them from the network or something, you\n can provide a delegate to do that:\n ```c#\nanimationView.SetImageAssetDelegate((LottieImageAsset asset) =>\n{\n    retun GetBitmap(asset);\n});\n```\n\n\n## Using Lottie for Xamarin iOS\nLottie supports iOS 8 and above.\nLottie animations can be loaded from bundled JSON or from a URL\n\nThe simplest way to use it is with LOTAnimationView:\n```c#\nLOTAnimationView animation = LOTAnimationView.AnimationNamed("LottieLogo1");\nthis.View.AddSubview(animation);\nanimation.PlayWithCompletion((animationFinished) => {\n  // Do Something\n});\n//You can also use the awaitable version\n//var animationFinished = await animation.PlayAsync();\n```\n\nOr you can load it programmatically from a NSUrl\n```c#\nLOTAnimationView animation = new LOTAnimationView(new NSUrl(url));\nthis.View.AddSubview(animation);\n```\n\nLottie supports the iOS `UIViewContentModes` ScaleAspectFit and ScaleAspectFill\n\nYou can also set the animation progress interactively.\n```c#\nCGPoint translation = gesture.GetTranslationInView(this.View);\nnfloat progress = translation.Y / this.View.Bounds.Size.Height;\nanimationView.AnimationProgress = progress;\n```\n\nWant to mask arbitrary views to animation layers in a Lottie View?\nEasy-peasy as long as you know the name of the layer from After Effects\n\n```c#\nUIView snapshot = this.View.SnapshotView(afterScreenUpdates: true);\nlottieAnimation.AddSubview(snapshot, layer: "AfterEffectsLayerName");\n```\n\nLottie comes with a `UIViewController` animation-controller for making custom viewController transitions!\n\n```c#\n#region View Controller Transitioning\npublic class LOTAnimationTransitionDelegate : UIViewControllerTransitioningDelegate\n{\n    public override IUIViewControllerAnimatedTransitioning GetAnimationControllerForPresentedController(UIViewController presented, UIViewController presenting, UIViewController source)\n    {\n        LOTAnimationTransitionController animationController =\n            new LOTAnimationTransitionController(\n            animation: "vcTransition1",\n            fromLayer: "outLayer",\n            toLayer: "inLayer");\n\n        return animationController;\n    }\n\n    public override IUIViewControllerAnimatedTransitioning GetAnimationControllerForDismissedController(UIViewController dismissed)\n    {\n        LOTAnimationTransitionController animationController = \n            new LOTAnimationTransitionController(\n                animation: "vcTransition2",\n                fromLayer: "outLayer",\n                toLayer: "inLayer");\n\n        return animationController;\n    } \n}\n#endregion\n```\n\nIf your animation will be frequently reused, `LOTAnimationView` has an built in LRU Caching Strategy.\n\n\n## Supported After Effects Features\n\n### Keyframe Interpolation\n\n---\n\n* Linear Interpolation\n\n* Bezier Interpolation\n\n* Hold Interpolation\n\n* Rove Across Time\n\n* Spatial Bezier\n\n### Solids\n\n---\n\n* Transform Anchor Point\n\n* Transform Position\n\n* Transform Scale\n\n* Transform Rotation\n\n* Transform Opacity\n\n### Masks\n\n---\n\n* Path\n\n* Opacity\n\n* Multiple Masks (additive)\n\n### Track Mattes\n\n---\n\n* Alpha Matte\n\n### Parenting\n\n---\n\n* Multiple Parenting\n\n* Nulls\n\n### Shape Layers\n\n---\n\n* Rectangle (All properties)\n\n* Ellipse (All properties)\n\n* Polystar (All properties)\n\n* Polygon (All properties. Integer point values only.)\n\n* Path (All properties)\n\n* Anchor Point\n\n* Position\n\n* Scale\n\n* Rotation\n\n* Opacity\n\n* Group Transforms (Anchor point, position, scale etc)\n\n* Multiple paths in one group\n\n#### Stroke (shape layer)\n\n---\n\n* Stroke Color\n\n* Stroke Opacity\n\n* Stroke Width\n\n* Line Cap\n\n* Dashes\n\n#### Fill (shape layer)\n\n---\n\n* Fill Color\n\n* Fill Opacity\n\n#### Trim Paths (shape layer)\n\n---\n\n* Trim Paths Start\n\n* Trim Paths End\n\n* Trim Paths Offset\n\n## Performance and Memory\n1. If the composition has no masks or mattes then the performance and memory overhead should be quite good. No bitmaps are created and most operations are simple canvas draw operations.\n2. If the composition has mattes, 2-3 bitmaps will be created at the composition size. The bitmaps are created automatically by lottie when the animation view is added to the window and recycled when it is removed from the window. For this reason, it is not recommended to use animations with masks or mattes in a RecyclerView because it will cause significant bitmap churn. In addition to memory churn, additional bitmap.eraseColor() and canvas.drawBitmap() calls are necessary for masks and mattes which will slow down the performance of the animation. For small animations, the performance hit should not be large enough to be obvious when actually used.\n4. If you are using your animation in a list, it is recommended to use a CacheStrategy in LottieAnimationView.setAnimation(String, CacheStrategy) so the animations do not have to be deserialized every time.\n\n## Try it out\nClone this repository and run the LottieSample module to see a bunch of sample animations. The JSON files for them are located in [LottieSample/src/main/assets](https://github.com/airbnb/lottie-android/tree/master/LottieSample/src/main/assets) and the orignal After Effects files are located in [/After Effects Samples](https://github.com/airbnb/lottie-android/tree/master/After%20Effects%20Samples)\n\nThe sample app can also load json files at a given url or locally on your device (like Downloads or on your sdcard).\n\n## Community Contributions\n * [Xamarin bindings](https://github.com/martijn00/LottieXamarin)\n * [NativeScript bindings](https://github.com/bradmartin/nativescript-lottie)\n * [Appcelerator Titanium bindings](https://github.com/m1ga/ti.animation)\n \n## Community Contributors\n * [modplug](https://github.com/modplug)\n * [fabionuno](https://github.com/fabionuno)\n * [matthewrdev](https://github.com/matthewrdev)\n * [alexsorokoletov](https://github.com/alexsorokoletov)\n * [jzeferino](https://github.com/jzeferino)\n \n## Alternatives\n1. Build animations by hand. Building animations by hand is a huge time commitment for design and engineering across Android and iOS. It\'s often hard or even impossible to justify spending so much time to get an animation right.\n2. [Facebook Keyframes](https://github.com/facebookincubator/Keyframes). Keyframes is a wonderful new library from Facebook that they built for reactions. However, Keyframes doesn\'t support some of Lottie\'s features such as masks, mattes, trim paths, dash patterns, and more.\n2. Gifs. Gifs are more than double the size of a bodymovin JSON and are rendered at a fixed size that can\'t be scaled up to match large and high density screens.\n3. Png sequences. Png sequences are even worse than gifs in that their file sizes are often 30-50x the size of the bodymovin json and also can\'t be scaled up.\n\n## Why is it called Lottie?\nLottie is named after a German film director and the foremost pioneer of silhouette animation. Her best known films are The Adventures of Prince Achmed (1926) \xe2\x80\x93 the oldest surviving feature-length animated film, preceding Walt Disney\'s feature-length Snow White and the Seven Dwarfs (1937) by over ten years\n[The art of Lotte Reineger](https://www.youtube.com/watch?v=LvU55CUw5Ck&feature=youtu.be)\n\n## Contributing\nContributors are more than welcome. Just upload a PR with a description of your changes.\nLottie uses [Facebook screenshot tests for Android](https://github.com/facebook/screenshot-tests-for-android) to identify pixel level changes/breakages. Please run `./gradlew --daemon recordMode screenshotTests` before uploading a PR to ensure that nothing has broken. Use a Nexus 5 emulator running Lollipop for this. Changed screenshots will show up in your git diff if you have.\n\nIf you would like to add more JSON files and screenshot tests, feel free to do so and add the test to `LottieTest`.\n\n## Issues or feature requests?\nFile github issues for anything that is unexpectedly broken. If an After Effects file is not working, please attach it to your issue. Debugging without the original file is much more difficult.\n\n# To build the source code from command line\n\n* msbuild Lottie.sln /t:restore\n* msbuild Lottie.sln /p:Configuration=Release \n'