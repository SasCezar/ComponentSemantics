b'=pod\n\n=encoding utf8\n\n=head2 Zef\n\nRaku / Perl6 Module Management\n\n=for HTML <a href="https://circleci.com/gh/ugexe/zef"><img src="https://circleci.com/gh/ugexe/zef.svg?style=shield"></a>\n          <a href="https://travis-ci.org/ugexe/zef"><img src="https://travis-ci.org/ugexe/zef.svg?branch=master"></a>\n          <a href="https://ci.appveyor.com/project/ugexe/zef/branch/master"><img src="https://ci.appveyor.com/api/projects/status/github/ugexe/zef?branch=master&passingText=Windows%20-%20OK&failingText=Windows%20-%20FAIL&pendingText=Windows%20-%20pending&svg=true"></a>\n\n=head1 Installation\n\n=head4 Manual\n\n    $ git clone https://github.com/ugexe/zef.git\n    $ cd zef\n    $ perl6 -I. bin/zef install .\n\n=head4 Rakudobrew\n\nTo install via rakudobrew, please use the following command:\n\n    $ rakudobrew build zef\n\n=head1 USAGE\n\n    zef --help\n    zef --version\n\n    # install the CSV::Parser distribution\n    zef install CSV::Parser\n\n    # search for distribution names matching `CSV`\n    zef search CSV\n\n    # detailed information for a matching distribution\n    zef info CSV::Parser\n\n    # list all available distributions\n    zef list\n\n    # list reverse dependencies of an identity\n    zef rdepends HTTP::UserAgent\n\n    # test project in current directory\n    zef test .\n\n    # fetch a specific module only\n    zef fetch CSV::Parser\n\n    # fetch a module, then shell into its local path\n    zef look CSV::Parser\n\n    # smoke test modules from all repositories\n    zef smoke\n\n    # run Build.pm if one exists in given path\n    zef build .\n\n    # update Repository package lists\n    zef update\n\n    # upgrade all distributions (BETA)\n    zef upgrade\n\n    # upgrade specific distribution (BETA)\n    zef upgrade CSV::Parser\n\n    # lookup module info by name/path/sha1\n    zef --sha1 locate 9FA0AC28824EE9E5A9C0F99951CA870148AE378E\n\n    # launch browser to named support urls from meta data\n    zef browse zef bugtracker\n\n=head2 More CLI\n\n=head4 B<install> [*@identities]\n\nNote: The install process does not install anything until all phases have completed. So, if the user requested to\nC<install A>, and A required module B: both would be downloaded, potentially built, tested, and installed -- but only\nif both passed all their tests. For example: if module A failed its tests, then module B would not be installed\n(even if it passed its own tests) unless forced.\n\n[C<@identities>] can take the form of a file path (starting with B<.> or B</>), URLs, paths, or identities:\n\n    # IDENTITY\n    zef install CSV::Parser\n    zef install "CSV::Parser:auth<tony-o>:ver<0.1.2>"\n    zef install "CSV::Parser:ver<0.1.2>"\n\n    # PATH\n    zef install ./Perl6-Net--HTTP\n\n    # URL\n    zef -v install git://github.com/ugexe/zef.git\n    zef -v install https://github.com/ugexe/zef/archive/master.tar.gz\n    zef -v install https://github.com/ugexe/zef.git@v0.1.22\n\nA request may contain any number and combination of these. Paths and URLs will be resolved first so they are available\nto fulfill any dependencies of other requested identities.\n\nB<Options>\n\n    # Install to a custom locations\n    --install-to=<id> # site/home/vendor/perl, or\n    -to=<id>          # inst#/home/some/path/custom\n\n    # Install all transitive and direct dependencies\n    # even if they are already installed globally (BETA)\n    --contained\n\n    # Load a specific Zef config file\n    --config-path=/some/path/config.json\n\n    # Install only the dependency chains of the requested distributions\n    --deps-only\n\n    # Ignore errors occuring during the corresponding phase\n    --force-resolve\n    --force-fetch\n    --force-extract\n    --force-build\n    --force-test\n    --force-install\n\n    # or set the default to all unset --force-* flags to True\n    --force\n\n    # Set the timeout for corresponding phases\n    --fetch-timeout=600\n    --extract-timeout=3600\n    --build-timeout=3600\n    --test-timeout=3600\n    --install-timeout=3600\n\n    # Number of simultaneous distributions/jobs to process for the corresponding phases\n    --fetch-degree=5\n    --test-degree=1\n\n    # or set the default to all unset --*-timeout flags to 0\n    --timeout=0\n\n    # Do everything except the actual installations\n    --dry\n\n    # Build/Test/Install each dependency serially before proceeding to Build/Test/Install the next\n    --serial\n\n    # Disable testing\n    --/test\n\n    # Disable build phase\n    --/build\n\n    # Disable fetching dependencies\n    --/depends\n    --/build-depends\n    --/test-depends\n\n    # Force a refresh for all module index indexes\n    --update\n\n    # Force a refresh for a specific ecosystem module index\n    --update=[ecosystem]\n\n    # Skip refreshing all module index indexes\n    --/update\n\n    # Skip refreshing for a specific ecosystem module index\n    --/update=[ecosystem]\n\n\nB<ENV Options>\n\n    # Number of simultaneous distributions/jobs to process for the corresponding phases (see: --[phase]-degree options)\n    ZEF_FETCH_DEGREE=5\n    ZEF_TEST_DEGREE=1\n\n    # Set the timeout for corresponding phases (see: --[phase]-timeout options)\n    ZEF_FETCH_TIMEOUT=600\n    ZEF_EXTRACT_TIMEOUT=3600\n    ZEF_BUILD_TIMEOUT=3600\n    ZEF_TEST_TIMEOUT=3600\n    ZEF_INSTALL_TIMEOUT=3600\n\n=head4 B<uninstall> [*@identities]\n\nUninstall the specified distributions\n\nNote: Requires a bleeding edge rakudo (not available in 6.c)\n\n=head4 B<update>\n\nUpdate the package indexes for all C<Repository> backends\n\nNote: Some C<Repository> backends, like the default Ecosystems, have an C<auto-update> option\nin C<resources/config.json> that can be enabled. This should be the number of hours until it should\nauto update based on the file system last modified time of the ecosystem json file location.\n\n=head4 B<upgrade> [*@identities] I<BETA>\n\nUpgrade specified identities. If no identities are provided, zef attempts to upgrade all installed distributions.\n\n=head4 B<search> [$identity]\n\nHow these are handled depends on the C<Repository> engine used, which by default is C<Zef::Repository::EcosystemsE<gt>p6cE<lt>>\n\n    $ zef -v --cpan --metacpan search URI\n    ===> Found 4 results\n    -------------------------------------------------------------------------\n    ID|From                              |Package             |Description\n    -------------------------------------------------------------------------\n    1 |Zef::Repository::LocalCache       |URI:ver<0.1.1>    |A URI impleme...\n    2 |Zef::Repository::Ecosystems<p6c>  |URI:ver<0.1.1>    |A URI impleme...\n    3 |Zef::Repository::Ecosystems<cpan> |URI:ver<0.1.1>    |A URI impleme...\n    4 |Zef::Repository::Ecosystems<cpan> |URI:ver<0.000.001>|A URI impleme...\n    -------------------------------------------------------------------------\n\n=head4 B<info> [$identity]\n\nView meta information of a distribution\n\n    $ zef -v info HTTP::UserAgent\n    - Info for: HTTP::UserAgent\n    - Identity: HTTP::UserAgent:ver<1.1.16>:auth<github:sergot>\n    - Recommended By: Zef::Repository::LocalCache\n    Author:  github:sergot\n    Description:     Web user agent\n    Source-url:      git://github.com/sergot/http-useragent.git\n    Provides: 11 modules\n    #       HTTP::Cookie\n    #       HTTP::Header\n    #       HTTP::Cookies\n    #       HTTP::Message\n    #       HTTP::Request\n    #       HTTP::Response\n    #       HTTP::MediaType\n    #       HTTP::UserAgent\n    #       HTTP::Header::Field\n    #       HTTP::Request::Common\n    #       HTTP::UserAgent::Common\n    Depends: 7 items\n    ---------------------------------\n    ID|Identity           |Installed?\n    ---------------------------------\n    1 |HTTP::Status       |\xe2\x9c\x93\n    2 |File::Temp         |\xe2\x9c\x93\n    3 |DateTime::Parse    |\xe2\x9c\x93\n    4 |Encode             |\xe2\x9c\x93\n    5 |MIME::Base64       |\xe2\x9c\x93\n    6 |URI                |\xe2\x9c\x93\n    7 |IO::Capture::Simple|\xe2\x9c\x93\n    ---------------------------------\n\nB<Options>\n\n    # Extra details (eg, list dependencies and which ones are installed)\n    -v\n\n=head4 B<list> [*@from]\n\nList known available distributions\n\n    $ zef --installed list\n    ===> Found via /home/nickl/.rakudobrew/moar-master/install/share/perl6/site\n    CSV::Parser:ver<0.1.2>:auth<github:tony-o>\n    Zef:auth<github:ugexe>\n    ===> Found via /home/nickl/.rakudobrew/moar-master/install/share/perl6\n    CORE:ver<6.c>:auth<perl>\n\nNote that not every Repository may provide such a list, and such lists may only\nbe a subset. For example: We may not be able to get a list of every distribution\non metacpan, but we *can* get the $x most recent additions (we use 100 for now).\n\n[C<@from>] allows you to show results from specific repositories only:\n\n    zef --installed list perl   # Only list modules installed by rakudo itself\n\n    zef list cpan               # Only show available modules from the repository\n    zef list p6c                # with a name field matching the arguments to `list`\n    zef list cached             # (be sure the repository is enabled in config)\n\nOtherwise results from all enabled repositories will be returned.\n\nB<Options>\n\n    # Only list installed distributions\n    --installed\n\n    # Additionally list the modules of discovered distributions\n    -v\n\n=head4 B<depends> [$identity]\n\nList direct and transitive dependencies to the first successful build graph for C<$identity>\n\n    $ zef depends Cro::SSL\n    Cro::Core:ver<0.7>\n    IO::Socket::Async::SSL:ver<0.3>\n    OpenSSL:ver<0.1.14>:auth<github:sergot>\n\n=head4 B<rdepends> [$identity]\n\nList available distributions that directly depend on C<$identity>\n\n    $ zef rdepends Net::HTTP\n    Minecraft-Tools:ver<0.1.0>\n    LendingClub:ver<0.1.0>\n\n=head4 B<fetch> [*@identities]\n\nFetches candidates for given identities\n\n=head4 B<test> [*@paths]\n\nRun tests on each distribution located at [C<@paths>]\n\n=head4 B<build> [*@paths]\n\nRun the Build.pm file located in the given [C<@paths>]\n\nIf you want to create a build hook, put the following dependency-free boilerplate\nin a file named C<Build.pm> at the root of your distribution:\n\n    class Build {\n        method build($dist-path) {\n            # do build stuff to your module\n            # which is located at $dist-path\n        }\n    }\n\nSet the env variable B<ZEF_BUILDPM_DEBUG=1> or use the I<--debug> flag for additional debugging information.\n\nI<Note: In the future, a more appropriate hooking solution will replace this.>\n\n=head4 B<look> [$identity]\n\nFetches the requested distribution and any dependencies (if requested), changes the directory to that of the fetched\ndistribution, and then stops program execution. This allows you modify or look at the source code before manually\ncontinuing the install via C<zef install .>\n\nNote that the path to any dependencies that needed to be fetched will be set in env at B<PERL6LIB>, so you should\nbe able to run any build scripts, tests, or complete a manual install without having to specify their locations.\n\n=head4 B<browse> $identity [bugtracker | homepage | source]\n\nB<Options>\n\n    # disables launching a browser window (just shows url)\n    --/open\n\nOutput the url and launch a browser to open it.\n\n    # also opens browser\n    $ zef browse Net::HTTP bugtracker\n    https://github.com/ugexe/Perl6-Net--HTTP/issues\n\n    # only outputs the url\n    $ zef browse Net::HTTP bugtracker --/open\n    https://github.com/ugexe/Perl6-Net--HTTP/issues\n\n=head4 B<locate> [$identity, $name-path, $sha1-id]\n\nB<Options>\n\n    # The argument is a sha1-id (otherwise assumed to be an identity or name-path)\n    --sha1\n\nLookup a locally installed module by $identity, $name-path, or $sha1-id\n\n    $ zef --sha1 locate A9948E7371E0EB9AFDF1EEEB07B52A1B75537C31\n    ===> From Distribution: zef:ver<*>:auth<github:ugexe>:api<>\n    lib/Zef/CLI.pm6 => ~/rakudo/install/share/perl6/site/sources/A9948E7371E0EB9AFDF1EEEB07B52A1B75537C31\n\n    $ zef locate Zef::CLI\n    ===> From Distribution: zef:ver<*>:auth<github:ugexe>:api<>\n    lib/Zef/CLI.pm6 => ~/rakudo/install/share/perl6/site/sources/A9948E7371E0EB9AFDF1EEEB07B52A1B75537C31\n\n    $ zef locate lib/Zef/CLI.pm6\n    ===> From Distribution: zef:ver<*>:auth<github:ugexe>:api<>\n    Zef::CLI => ~/rakudo/install/share/perl6/site/sources/A9948E7371E0EB9AFDF1EEEB07B52A1B75537C31\n\n=head4 B<nuke> [RootDir | TempDir | StoreDir]\n\nDeletes all paths in the specific configuration directory\n\n=head4 B<nuke> [site | home]\n\nDeletes all paths that are rooted in the prefix of the matching CompUnit::Repository name\n\n    # uninstall all modules\n    $ zef nuke site home\n\n=head2 Output Verbosity\n\nYou can control the logging level using the following flags:\n\n    # More/less detailed output\n    --error, --warn, --info (default), --verbose (-v), --debug\n\n=head1 Global Configuration\n\n=head3 Finding the configuration file\n\nYou can always see the configuration file that will be used by running:\n\n    $ zef --help\n\nIn most cases the default configuration combined with command line options should be enough for most users.\n\nIf you are most users (e.g. not: power users, packagers, zef plugin developers) you hopefully don\'t care about this section! \n\n=head3 How the configuration file is chosen\n\nThe configuration file will be chosen at runtime from one of two (technically four) locations, and one can affect the others (this is not really a design decision and suggestions and PRs are welcome).\n\nFirst, and the most precise way, is to specify the config file by passing C<--config-path="..."> to any zef command.\n\nSecond, third, and fourth we look at the path pointed to by C<%?RESOURCESE<lt>config.jsonE<gt>>. This will point to C<$zef-dir/resources/config.json>, where C<$zef-dir> will be either:\n\n=over 4\n\n=item * The prefix of a common configuration directory, such as C<$XDG_CONFIG_HOME>  or C<$HOME/.config>.\n\n=item * The prefix of a rakudo installation location - This is the case if the modules loaded for bin/zef come from an installation CompUnit::Repository.\n\n=item * The current working directory C<$*CWD> - This is the case when modules loaded for bin/zef come from a non-installation CompUnit::Repository (such as C<-I $dist-path>).\n\nTo understand how this is chosen, consider:\n\n    # Modules not loaded from an ::Installation,\n    # so %?RESOURCES is $*CWD/resources\n    $ perl6 -I. bin/zef --help\n    ...\n    CONFIGURATION /home/user/perl6/zef/resources/config.json\n    ...\n\n    # Installed zef script loads modules from an ::Installation,\n    # so %?RESOURCES is $perl6-share-dir/site/resources\n    $ zef --help\n    ...\n    CONFIGURATION /home/user/perl6/install/share/perl6/site/resources/EE5DBAABF07682ECBE72BEE98E6B95E5D08675DE.json\n    ...\n\n=back\n\nThis config is loaded, but it is not yet the chosen config! We check that temporary config\'s C<%configE<lt>RootDirE<gt>> for valid json in a file named C<config.json> (i.e. C<%configE<lt>RootDirE<gt>/config.json>). This can be confusing (so it may go away or be refined - PRs welcome) but for most cases it just means C<$*HOME/.zef/config.json> will override an installed zef configuration file.\n\nTo summarize:\n\n=over 4\n\n=item * You can edit the C<resources/config.json> file before you install zef.\n\nWhen you C<perl6 -I. bin/zef install .> that configuration file be be used to install zef and will also be installed with zef such that it will be the default.\n\n=item * You can create a C<%configE<lt>RootDirE<gt>/config.json> file.\n\nWhere C<%configE<lt>RootDirE<gt>>\ncomes from the previously mentioned C<%?RESOURCESE<lt>config.jsonE<gt>>\'s C<RootDir> field (C<$*HOME/.zef> in most cases), to allow overriding zef config behavior on a per user basis (allows setting different C<--install-to> targets for, say, a root user and a regular user). Since this new config file could have a different C<RootDir> than the default config (used to find the new one in the first place) this behavior may be changed in the future to be less confusing.\n\n=item * You can override both of the previous entries by passing C<zef --config-path="$path" E<lt>any commandE<gt>>\n\n=back\n\n=head3 Configuration fields\n\n=head4 Basic Settings\n\n=over 4\n\n=item * B<RootDir> - Where zef will look for a custom config.json file\n\n=item * B<TempDir> - A staging area for items that have been fetched and need to be extracted/moved\n\n=item * B<StoreDir> - Where zef caches distributions, package lists, etc after they\'ve been fetched and extracted\n\n=item * B<DefaultCUR> - This sets the default value for C<--install-to="...">. The default value of C<auto> means it will first try installing to rakudo\'s installation prefix, and if its not writable by the current user it will install to C<$*HOME/.perl6>. These directories are not chosen by zef - they are actually represented by the magic strings C<site> and C<home> (which, like C<auto>, are valid values despite not being paths along with C<vendor> and C<perl>)\n\n=back\n\n=head4 Phases / Plugins Settings\n\nThese consist of an array of hashes that describe how to instantiate some class that fulfills the appropriate interface from I<Zef.pm> (C<Repository> C<Fetcher> C<Extractor> C<Builder> C<Tester>)\n\nThe descriptions follow this format:\n\n    {\n        "short-name" : "p6c",\n        "enabled" : 1,\n        "module" : "Zef::Repository::Ecosystems",\n        "options" : { }\n    }\n\nand are instantiated via\n\n    ::($hash<module>).new(|($hash<options>)\n\n=over 4\n\n=item * B<short-name> - This adds an enable and disable flag by the same name to the CLI (e.g. C<--p6c> and C<--/p6c>) and is used when referencing which object took some action.\n\n=item * B<enabled> - Set to 0 to skip over the object during consideration (it will never be loaded). If omitted or if the value is non 0 then it will be enabled for use.\n\n=item * B<module> - The name of the class to instantiate. While it doesn\'t technically have to be a module it I<does> need to be a known namespace to C<require>.\n\n=item * B<options> - These are passed to the objects C<new> method and may not be consistent between modules as they are free to implement their own requirements.\n\n=back\n\nSee the configuration file in L<resources/config.json|https://github.com/ugexe/zef/blob/master/resources/config.json> for a\nlittle more information on how plugins are invoked.\n\nYou can see debug output related to chosing and loading plugins by setting the env variable B<ZEF_PLUGIN_DEBUG=1>\n\n=head1 FAQ\n\n=head3 CPAN?\n\nCPAN is now used as a default (alongside the familiar p6c "ecosystem").\n\n    # Explicitly enable cpan (now defaults to the same as `zef search zef`)\n    $ zef --cpan search Inline::Perl5\n\n=head3 Proxy support?\n\nAll the default fetching plugins have proxy support, but you\'ll need to refer to the backend program\'s\n(wget, curl, git, etc) docs. You may need to set an I<ENV> variable, or you may need to add a command line\noption for that specific plugin in I<resources/config.json>\n\n=head3 Custom installation locations?\n\nPass a path to the I<-to> / I<--install-to> option and prefix the path with C<inst#> (unless you know what you\'re doing)\n\n    $ zef -to="inst#/home/perl6/custom" install Text::Table::Simple\n    ===> Searching for: Text::Table::Simple\n    ===> Testing: Text::Table::Simple:ver<0.0.3>:auth<github:ugexe>\n    ===> Testing [OK] for Text::Table::Simple:ver<0.0.3>:auth<github:ugexe>\n    ===> Installing: Text::Table::Simple:ver<0.0.3>:auth<github:ugexe>\n\nTo make the custom location discoverable:\n\n    # Set the PERL6LIB env:\n    $ PERL6LIB="inst#/home/perl6/custom" perl6 -e "use Text::Table::Simple; say \'ok\'"\n    ok\n\n    # or simply include it as needed\n    $ perl6 -Iinst#/home/perl6/custom -e "use Text::Table::Simple; say \'ok\'"\n    ok\n\n=head3 Test reporting?\n\nThis feature can be enabled by passing `--p6ctesters` (and having C<Net::HTTP> installed) or `--cpantesters` (and having C<Zef::CPANReporter> installed)\n\n=cut\n'