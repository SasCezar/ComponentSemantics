b'# Qlot\n\n[![Build Status](https://travis-ci.org/fukamachi/qlot.svg?branch=master)](https://travis-ci.org/fukamachi/qlot)\n\n**Qlot** (pronounced `ky\xc3\xbc-\'l\xc3\xa4t`, like culotte) is a project-local library installer using Quicklisp facility. This aims to be like [Bundler](http://bundler.io) of Ruby or [Carton](http://search.cpan.org/~miyagawa/Carton/lib/Carton.pm) of Perl.\n\n<strong><span style="color:red">Warning</span>: This software is still BETA quality. The APIs will be likely to change.</strong>\n\n## Usage\n\n```\n# "qlfile" of "myapp"\ngit clack https://github.com/fukamachi/clack.git\ngithub datafly fukamachi/datafly :branch v0.7.x\nql log4cl 2014-03-17\n```\n\n```\n$ cd /path/to/myapp\n\n# Installing libraries project-locally.\n$ qlot install\n\n# Updating depending libraries of a project.\n$ qlot update\n\n# Updating specific libraries\n$ qlot update --project mito\n\n# Execute a command with a project-local Quicklisp\n$ qlot exec ros -S . run\n$ qlot exec clackup app.lisp\n```\n\n## What Qlot is trying to solve\n\nWe have Quicklisp, the central library registry. It made installation of libraries damn easy.\n\nHowever, what only you can specify is the month of distribution. Which means you have to use all libraries of the same moment and you cannot use a newer/older version of a library for your project.\n\n"local-projects/" or ASDF configurations may be a solution to this problem, but there are a couple of problems.\n\n1) *They are not project-local.* If you have multiple projects that use the different version of the same library, it would be a problem.\n\n2) *They are difficult to fix the version or to update them.* If your project need to work on other than your machine, for instance on other people\'s machine or on servers, the version of depending libraries should be the same.\n\nThis is what Qlot is trying to solve.\n\n## Requirements\n\n* ASDF 3.2 or above\n\n## Installation\n\n### via Quicklisp\n\n```common-lisp\n(ql:quickload :qlot)\n```\n\n### via Roswell\n\nIt also can be installed with [Roswell](https://github.com/roswell/roswell).\n\n```\n$ ros install qlot\n\n# Install the latest version from GitHub\n$ ros install fukamachi/qlot\n```\n\nIt\'s almost the same as using Quicklisp, except it also introduces a shell command "qlot".\n\n```\n$ which qlot\n/Users/nitro_idiot/.roswell/bin/qlot\n$ qlot\nUsage: qlot COMMAND [ARGS..]\n\nCOMMANDS:\n    install\n        Installs libraries to \'./.qlot\'.\n\n    update\n        Makes \'./.qlot\' up-to-date and update \'qlfile.lock\'.\n        Possible to update specific projects with --project option.\n        ex) qlot update --project mito\n\n    bundle\n        Dumps all libraries to \'./bundle-libs\' to allow to load them without Qlot and Quicklisp.\n\n    run\n        Starts REPL with the project local Quicklisp dists (Same as \'qlot exec ros run\').\n\n    exec [shell-args..]\n        Invokes the following shell-command with the project local Quicklisp.\n```\n\n## Tutorial\n\n### Adding "qlfile"\n\nPut a file "qlfile" at the root of your project directory.\n\nSee [qlfile syntax](#qlfile-syntax) section to know how to write it.\n\n### Installation of libraries\n\nYou can install libraries into the project directory via:\n\n```\n$ qlot install\n```\n\nIt creates `.qlot/` directory in the project directory and a file `qlfile.lock`.\n\n`qlfile.lock` is similar to `qlfile` except the library versions are qualified. This will ensure that other developers or your deployment environment use exactly the same versions of libraries you just installed.\n\nMake sure you add `qlfile` and `qlfile.lock` to your version controlled repository and make the `.qlot/` directory ignored.\n\n```\n$ echo .qlot/ >> .gitignore\n$ git add qlfile qlfile.lock\n$ git commit -m \'Start using Qlot.\'\n```\n\n### Updating the project-local Quicklisp\n\nYou can update the content of `.qlot/` directory via:\n\n```\n$ qlot update\n\n# Update a specific project\n$ qlot update --project mito\n$ qlot update --project mito,sxql\n```\n\nIt will also overwrite `qlfile.lock`.\n\n## Commands\n\n### install\n\n`qlot install` will install Quicklisp and libraries that declared in `qlfile` project-locally. `qlfile.lock` will be used with precedence if it exists.\n\n```\n$ qlot install\n$ qlot install /path/to/myapp/qlfile\n```\n\n### update\n\n`qlot update` will update the project-local `.qlot/` directory using `qlfile`.\n\n```\n$ qlot update\n\n# Update a specific project\n$ qlot update --project mito\n$ qlot update --project mito,sxql\n```\n\n### exec\n\n`qlot exec` does following:\n\n* configures `CL_SOURCE_REGISTRY` environment variable by adding a current directory;\n* adds Roswell\'s `bin` directory to the `PATH` environment variable;\n* executes given command with arguments.\n\nHere are few usefull commands:\n\n* `qlot exec ros emacs` - starts Emacs for development. Inferior lisp will use only\n  systems, installed by `qlot install`. If you want to use systems from directories other than\n  current and `./.qlot/`, then set `CL_SOURCE_REGISTRY` variable before starting `qlot`.\n  This can be useful in case, if you have development versions of some systems, for example,\n  in `~/common-lisp/` directory and want to use them during project development:\n\n  ```\n  CL_SOURCE_REGISTRY=~/common-lisp// qlot exec ros emacs\n  ```\n\n  Read more about `CL_SOURCE_REGISTRY` in\n  [asdf\'s documentation](https://common-lisp.net/project/asdf/asdf/Shell_002dfriendly-syntax-for-configuration.html).\n* `qlot exec ros build some-app.ros` - another command, useful, to build a binary\n  from systems, fixed in `qlfile` and `qlfile.lock`. This way you can be sure that your builds are stable.\n\n## `qlfile` syntax\n\n"qlfile" is a collection of Quicklisp dist declarations. Each line of that represents a dist.\n\n```\n<source> <project name> [arg1, arg2..]\n```\n\nCurrently, `<source>` must be one of `dist`, `ql`, `ultralisp`, `http`, `git` or `github`.\n\n### ql\n\n```\nql <project name> <version>\nql <project name>\n```\n\n`ql` source will download libraries from Quicklisp official dist.\n\nIf you want to use Clack in Quicklisp dist of January 13, 2014, qlfile would be like this.\n\n```\nql clack 2014-01-13\n```\n\n### ultralisp\n\n```\nultralisp <project name> <version>\nultralisp <project name>\n```\n\n`ultralisp` is same as `ql` except downloading from Ultralisp.\n\n### http\n\n```\nhttp <project name> <url> [<file md5>]\n```\n\n`http` source will download a tarball.\n\n```\nhttp yason http://netzhansa.com/yason.tar.gz\n```\n\n### git\n\n```\ngit <project name> <repos url>\ngit <project name> <repos url> :ref <commit ref>\ngit <project name> <repos url> :branch <branch name>\ngit <project name> <repos url> :tag <tag name>\n```\n\n`git` source will download libraries from a public git repository.\n\n```\ngit clack https://github.com/fukamachi/clack.git\n```\n\nYou can also specify `:ref`, `:branch` or `:tag`.\n\n```\ngit clack https://github.com/fukamachi/clack.git :branch develop\ngit datafly https://github.com/fukamachi/datafly.git :tag v0.7.4\ngit cl-dbi https://github.com/fukamachi/cl-dbi.git :ref 54928984e5756e92ba298aae51de8b95a6b0cf4b\n```\n\n#### Retrieving from private repository\n\nQlot doesn\'t authenticate itself, but retrieving from private repository can be done via git\'s SSH key authentication. Which means, if the current user can `git clone`, Qlot also would be possible to do it.\n\n```\ngit myapp git@github.com:somewrite-adtech/myapp\n```\n\n### github\n\n```\ngithub <project name> <repos>\ngithub <project name> <repos> :ref <commit ref>\ngithub <project name> <repos> :branch <branch name>\ngithub <project name> <repos> :tag <tag name>\n```\n\n`github` source is similar to `git`, but it is specifically for GitHub. As it uses GitHub API and tarballs GitHub serves, it doesn\'t require "git" command.\n\n```\ngithub datafly fukamachi/datafly\ngithub datafly fukamachi/datafly :branch develop\n```\n\n### dist\n\n```\ndist <dist name> <distribution URL> [<dist version>]\n```\n\n`dist` allows to use a custom Quicklisp dist, like Ultralisp.\n\n```\ndist quicklisp http://beta.quicklisp.org/dist/quicklisp.txt\ndist ultralisp http://dist.ultralisp.org/\n```\n\n## Priorities of distributions\n\nIf multiple distributions provide the same library, lower one would take priority over higher ones.\n\n## Working with SLIME\n\n[SLIME](https://github.com/slime/slime) is the most popular development environment in Common Lisp. However, its REPL always loads the global Quicklisp, not the project-local one.\n\nHere\'s quick steps to start project-local REPL with SLIME:\n\n1. Add the following function to `init.el`.\n\n```emacs-lisp\n(defun slime-qlot-exec (directory)\n  (interactive (list (read-directory-name "Project directory: ")))\n  (slime-start :program "qlot"\n               :program-args \'("exec" "ros" "-S" "." "run")\n               :directory directory\n               :name \'qlot\n               :env (list (concat "PATH=" (mapconcat \'identity exec-path ":")))))\n```\n\n2. Relaunch the Emacs.\n3. Invoke `M-x slime-qlot-exec RET /path/to/project/`.\n\n## Working with local git repositories\n\n`PROJECT_ROOT/.qlot/local-projects` can be used for local git repositories. Symbolic links are also be accessible in Qlot environment.\n\n## Author\n\n* Eitaro Fukamachi (e.arrows@gmail.com)\n\n## Copyright\n\nCopyright (c) 2014 Eitaro Fukamachi (e.arrows@gmail.com)\n\n## License\n\nLicensed under the MIT License.\n'