b'[![Home](https://framagit.org/steckerhalter/quelpa/raw/master/logo/quelpa-logo-h64.png)](https://framagit.org/steckerhalter/quelpa)\n\nBuild and install your Emacs Lisp packages on-the-fly and directly from source.\n\n### News\n\n2018/06/18 - code moved to [framagit.org](https://framagit.org/steckerhalter/quelpa), **please open issues [here](https://framagit.org/steckerhalter/quelpa/issues)** (github is only an MS mirror now 8)  \n2018/03/25 - support for various fetchers has been added again: `wiki`, `bzr`, `cvs`, `darcs`, `fossil`, `svn`.\n\n\n<!-- doctoc command used to generate the index: doctoc --title=\'---\' --maxlevel=3 README.md -->\n<!-- START doctoc generated TOC please keep comment here to allow auto update -->\n<!-- DON\'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->\n---\n\n- [Overview](#overview)\n- [Requirements](#requirements)\n- [Installation](#installation)\n- [Usage](#usage)\n  - [Installing with a package name](#installing-with-a-package-name)\n  - [Installing with a recipe](#installing-with-a-recipe)\n  - [Upgrading individual packages](#upgrading-individual-packages)\n  - [Upgrading all packages](#upgrading-all-packages)\n  - [Stable packages](#stable-packages)\n  - [Managing packages](#managing-packages)\n  - [Additional fetchers](#additional-fetchers)\n  - [Additional options](#additional-options)\n- [MacOS instructions](#macos-instructions)\n- [Windows instructions](#windows-instructions)\n  - [Cygwin](#cygwin)\n  - [Native](#native)\n- [Why "quelpa"?](#why-quelpa)\n\n<!-- END doctoc generated TOC please keep comment here to allow auto update -->\n\n## Overview\n\n`quelpa` is a tool to compile and install Emacs Lisp packages locally from local or remote source code.\n\nGiven a recipe in [MELPA\'s format](https://github.com/melpa/melpa#recipe-format), for example:\n\n``` elisp\n(quelpa \'(hydra :repo "abo-abo/hydra" :fetcher github))\n```\n\n`quelpa` gets the package source code, builds an ELPA compatible package and installs that locally with `package.el`. The installed packages can then be managed in the usual way with `M-x list-packages`.\n\n`quelpa` can be used in many ways, for example to manage your personal packages, testing development versions of other packages or as a helper when developing a package to test building, compiling and installing it.\n\nTo get an idea how to use it to manage your Emacs setup, take a look at the [steckemacs configuration](https://framagit.org/steckerhalter/steckemacs.el), which uses [quelpa-use-package](https://framagit.org/steckerhalter/quelpa-use-package) to integrate with `use-package`.\n\nYou can build and install packages from (fetcher names in parens): Git (`git`), Github (`github`), Bazaar (`bzr`), Mercurial (`hg`), Subversion (`svn`), CVS (`cvs`), Darcs (`darcs`), Fossil (`fossil`) and EmacsWiki (`wiki`)\n\n## Requirements\n\n-   Emacs 24.3.1\n-   git: <http://git-scm.com/>\n\nEvery build requires the corresponding build tool. To install a `subversion` hosted package, you need to have `subversion` installed.\n\nNote: Even if the sources of a package are fetched with a VCS tool you have installed, they might have dependencies that require a different VCS tool. Better install the most common ones before proceeding.\n\n## Installation\n\n**Note**: For Windows, see the [Instructions for Windows](#windows-instructions) before continuing\n\nFirst `quelpa` needs to be installed. You can install `quelpa` either from MELPA (see https://github.com/melpa/melpa#usage for setup):\n\n\n    M-x package-install RET quelpa RET\n\nor if you are not using MELPA:\n\n```cl\n(package-initialize)\n(if (require \'quelpa nil t)\n    (quelpa-self-upgrade)\n  (with-temp-buffer\n    (url-insert-file-contents "https://framagit.org/steckerhalter/quelpa/raw/master/bootstrap.el")\n    (eval-buffer)))\n```\n\nEvaluate this expression in your `*scratch*` buffer to bootstrap `quelpa`. Add it to your Emacs init file to make sure `quelpa` will be installed and upgraded automatically when needed.\n\nIf you don\'t like `quelpa` doing self-upgrades (although this is recommended), use the following snippet instead:\n\n```cl\n(package-initialize)\n(unless (require \'quelpa nil t)\n  (with-temp-buffer\n    (url-insert-file-contents "https://framagit.org/steckerhalter/quelpa/raw/master/bootstrap.el")\n    (eval-buffer)))\n```\n\n**Note**: `(package-initialize)` can be omitted if you are already running the command before the snippet in your init file.\n\n## Usage\n\nCool. Now that we are all setup, enjoy the ride.\n\nThere are two ways to install packages with `quelpa`:\n\n### Installing with a package name\n\nCheck <https://melpa.org/> for any packages you would like to install. You only need to know the name:\n\n```cl\n(quelpa \'magit)\n```\n\nRunning this expression will fetch the `magit` source code from Github, build a package in the ELPA format and install it.\n\nInteractive installation is supported as well. Just execute `M-x quelpa` and select a recipe name from MELPA.\n\nIf the package has dependencies they will be installed first.\n\n### Installing with a recipe\n\nYou can also install packages that are not on MELPA. For this you need to provide a recipe in MELPA\'s format.\n\nThe recipe is a list and consist of the package name and keywords. A minimal recipe would look like this:\n\n``` elisp\n\'(discover-my-major :fetcher git :url "https://framagit.org/steckerhalter/discover-my-major.git")\n```\n\nDepending on the fetcher, different keywords can or have to be supplied. So to install `discover-my-major` you would have to use:\n\n``` elisp\n(quelpa \'(discover-my-major :fetcher git :url "https://framagit.org/steckerhalter/discover-my-major.git"))\n```\n\nDon\'t forget the quote before the recipe.\n\n### Upgrading individual packages\n\nPer default `quelpa` does not do anything if a package is already installed. You can customize this behavior globally by setting the variable `quelpa-upgrade-p` to `t` manually:\n\n```cl\n(setq quelpa-upgrade-p t)\n```\n\nAlternatively customize this variable by executing `M-x customize-variable quelpa-upgrade-p RET`.\n\nIt is also possible to override this default behavior for individual packages:\n\n#### Interactive Overriding\n\nWhen `quelpa` is called interactively with a prefix argument (e.g `C-u M-x quelpa`) it will try to upgrade the given package even if the global variable `quelpa-upgrade-p` is set to nil.\n\nThat means `C-u M-x quelpa magit RET` will upgrade magit.\n\nPlease note that the `:upgrade` parameter described below is still preferred over the prefix argument.\n\n#### Non-Interactive Overriding\n\n```cl\n(quelpa \'company :upgrade t)\n```\n\nThis way `quelpa` will try to upgrade `company` even if upgrading is disabled globally.\n\n```cl\n(quelpa \'(ag :repo "Wilfred/ag.el" :fetcher github) :upgrade nil)\n```\n\nWhen used that way, `quelpa` will not upgrade `ag`. This can be used to "pin" packages when evaluating a buffer with `quelpa` invocations.\n\n### Upgrading all packages\n\nUpgrading all your `quelpa` packages at init is one option to keep them up to date, but can slow it down considerably. Alternatively you can execute `M-x quelpa-upgrade` and upgrade every cached package.\n\nThis command relies on an intact cache file which is set in the `quelpa-cache-file` variable. It is updated after every `quelpa` invocation. To reset it for debugging purposes, just delete the file and better keep a backup.\n\nNormally `quelpa` also upgrades itself as well here. You can disable this by setting `quelpa-self-upgrade-p` to `nil`:\n\n```cl\n(setq quelpa-self-upgrade-p nil)\n```\n\n### Stable packages\n\n`quelpa` can be instructed to build stable packages. This means that the repository with the source code (`git` or `hg` are supported) is queried for a stable tag and if one is found that version will be built.\n\nFor more information please see [MELPA\'s notes on stable packages](https://github.com/melpa/melpa#stable-packages).\n\nIn `quelpa` there is a global variable where building of stable packages can be enabled, so that all packages are built stable (if available for the individual package):\n\n```cl\n(setq quelpa-stable-p t)\n```\n\nor you can set it just for one package by supplying `stable` as an argument:\n\n```cl\n(quelpa \'anzu :stable t)\n```\n\nor as part of the recipe itself:\n\n```cl\n(quelpa \'(ag :repo "Wilfred/ag.el" :fetcher github :stable t))\n```\n\nThe definition as part of the recipe has the highest priority and overrides the other two methods. Likewise adding it as an argument overrides the global variable. So the priority is like: recipe > argument > `quelpa-stable-p`.\n\nNote that dev version numbers are usually higher than stable version numbers (they are using the build date as version) so if you want to install a stable version for an installed dev package you will first have to uninstall that package.\n\n### Managing packages\n\nBecause `quelpa` installs packages using the built-in Emacs package management system, you can use its regular interface by executing `M-x list-packages` and work with your packages as you would normally do. Deleting a package does not affect the `quelpa` cache yet.\n\nCurrently `quelpa` does not remove obsolete packages after upgrades. To delete all obsolete packages from time to time use: \n\n-   `M-x list-packages RET`\n-   press  `~` to mark all obsolete packages for deletion\n-   press `x` and confirm deletion\n\n### Additional fetchers\n\n#### URL\n\nBuilds packages from single `.el` files. It works like this:\n\n```cl\n(quelpa \'(rainbow-mode :url "http://git.savannah.gnu.org/cgit/emacs/elpa.git/plain/packages/rainbow-mode/rainbow-mode.el" :fetcher url))\n```\n\nYou specify the `:url` (either a remote or local one like `file:///path/to/file.el`) of the file and as `:fetcher` `url`.\n\nAnother example:\n\n```cl\n(quelpa \'(ox-rss :url "http://orgmode.org/cgit.cgi/org-mode.git/plain/contrib/lisp/ox-rss.el" :fetcher url))\n\n```\n\nBy default upgrades are managed through file hashes, so if the content changed, `quelpa` will upgrade the package. Existing version numbers are retained. `quelpa` uses a version suffix that still allows the original version to have priority. So if you should install a package from another source with the same version it will be preferred.\n\nTo keep the original version unmodified use the parameter `:version original`. For example:\n\n```cl\n(quelpa \'(queue :url "http://www.dr-qubit.org/download.php?file=predictive/queue.el" :fetcher url :version original))\n```\n\n#### File\n\nBuilds single-file packages from local `.el` files:\n\n``` elisp\n(quelpa \'(rainbow-mode :fetcher file :path "/path/to/rainbow-mode/rainbow-mode.el"))\n```\n\nOr multi-file packages from a local directory:\n\n``` elisp\n;; You can also use `~\' in the :path and it will expand to the home directory.\n(quelpa \'(rainbow-mode :fetcher file :path "~/path/to/rainbow-mode/dir"))\n```\n\nSpecifying a directory for the `:path` does not retain existing version numbers,\nnor does it make any use of the `:version original` parameter.\n\n### Additional options\n\n#### Inhibit MELPA git checkout or updates on init\n\nUpon initialization `quelpa` usually updates the MELPA git repo (stored in `quelpa-build-dir`/`package-build`) which ensures you always have the latest recipes from MELPA available. This causes as small delay and some people don\'t like that (presumably people that do not use or know `emacs --daemon` and `emacsclient`).\n\nYou can disable these updates by setting `quelpa-update-melpa-p` to `nil` before requiring `quelpa`:\n\n```cl\n(setq quelpa-update-melpa-p nil)\n```\n\nOr, if you don\'t want to use the MELPA git repo at all (e.g. if you\'re using `quelpa` mainly for installing packages outside of MELPA,) you can also set `quelpa-checkout-melpa-p` to `nil`:\n\n```cl\n(setq quelpa-checkout-melpa-p nil)\n```\n\n#### Modify MELPA Recipes\n\nWhen installing a package, `quelpa` will install any listed dependencies via the recipe that MELPA has for it. But maybe you want to use a different recipe, or perhaps the dependency is not even on MELPA, which would cause an installation failure.\n\nYou can create a directory with recipe files and tell `quelpa` to look there for an appropriate recipe:\n\n``` elisp\n(add-to-list \'quelpa-melpa-recipe-stores "/path/to/custom/recipe/dir")\n```\n\nThis way, if no recipe is found in this custom directory, it will fallback to the next directory in the list, which in this case would be the directory containing the recipes from MELPA.\n\nThe files themselves should be named after the package name, without any extension like `.el` or `.rcp`.\n\nAlternatively, you can also specify a list of recipes instead.\n\n## MacOS instructions\n\nAs MacOS is a BSD-based operating system, its `tar` command is different from GNU Tar.  If you\'re using an additional package manager, it should be possible to install GNU tar to resolve the issue.\n\n### Homebrew\n\nPeople using [homebrew](http://brew.sh/) will be able to install the package using the homebrew package of `gnu-tar`.\n\n### MacPorts\n\nPeople using [MacPorts](https://www.macports.org/) or Ports, which is similar in maby ways to the pkg system on FreeBSD, can resolve the issue by installing the `gnutar` package.\n\n## Windows instructions\n\nOn Windows there are some caveats so the procedure to make Emacs work with `quelpa` is outlined below. You can either use the native Windows build from GNU or the Cygwin port. If you\'d like to have a complete *nix environment on your Windows machine then the Cygwin version is to be preferred.\n\nThe Cygwin port is also easier to install as there are less manual steps necessary.\n\n### Cygwin\n\n#### Install Cygwin\n\nDownload either the 64-bit or 32-bit setup file from <http://cygwin.com/install.html>. If your Windows version is 64-bit then make sure to use the 64-bit installer to avoid some problems that only happen with the 32-bit version.\n\nIt is usually better to install Cygwin just for the current user, not system-wide:\n\n- Open the location where you have downloaded the setup executable in Explorer\n- Press shift and right-click -> open command prompt here\n\nRun for example:\n\n    setup-x86.exe --no-admin\n\nJust leave the default packages selected and finish the installer\n\n#### Install a sane package manager\n\nInstall apt-cyg from https://github.com/transcode-open/apt-cyg:\n\nOpen the Cygwin terminal and execute:\n\n    lynx -source rawgit.com/transcode-open/apt-cyg/master/apt-cyg > apt-cyg\n    install apt-cyg /bin\n\n#### Install Emacs\n\nThen install Emacs like this:\n\n    apt-cyg install wget git emacs-w32 emacs-el\n\nThis will take quite a while...\n\n##### Fix issue on 32-bit Cygwin\n\nUsing the 32-bit version of Cygwin I\'ve got weird vfork errors and had to do a *rebase* (see http://cygwin.wikia.com/wiki/Rebaseall):\n\n- Close the Cygwin terminal\n- Start/Run: "C:\\cygwin\\bin\\dash.exe" (adapt the path to your Cygwin install)\n- Run: `/bin/rebaseall -v`\n- Close dash\n\n#### Enjoy\n\nSo then everything should work with `quelpa`. Open the Cygwin terminal, install your init file and enjoy Emacs on Windows (even `emacs --daemon` works with the Cygwin build)\n\n### Native\n\n#### Emacs\n\nDownload and unpack Emacs from <https://ftp.gnu.org/gnu/emacs/windows/> (for example to `c:\\emacs`)\n\nSome libraries are missing for SSL to work with Emacs so you will have to download the gnutls build from sourceforge: <http://sourceforge.net/projects/ezwinports/files/>\n\nCopy all .dll files from the gnutls archive to the `c:\\emacs\\bin` folder.\n\nAdd `c:\\emacs\\bin` to the Windows `PATH` environment variable.\n\n#### Git\n\nInstall Git from <https://git-scm.com/download/win>. **Make sure to choose these options in the installer**:\n\n    Use Git from the Windows Command Prompt\n\n#### Tar\n\n`tar` is needed by `quelpa` to build the `elpa` packages and has to be installed additionally.\n\nDownload MinGW from <http://sourceforge.net/projects/mingw/files/latest/download> and start the installer.\n\nWhen you can choose the packages that should get installed go to `All Packages` -> `MSYS Base System` and mark `msys-tar` (bin) for installation. Then apply the changes.\n\nNow copy `tar`, `msys-1.0.dll`, `msys-regex-1.dll`, `msys-intl-8.dll`, `msys-iconv-2.dll` from `C:\\MinGW\\msys\\1.0\\bin` to `c:\\emacs\\bin`\n\nThen Emacs should work with `quelpa`.\n\n## Why "quelpa"?\n\nThe german word `Quelle` means `spring` (as in: water source) but also `source`. `source code` is translated to `Quellcode`. `ELPA` is the abbreviation for Emacs Lisp Package Archive. You get the idea.\n\n'