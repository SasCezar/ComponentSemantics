b'# CNN Image Retrieval in MatConvNet: Training and evaluating CNNs for Image Retrieval in MatConvNet\n\nThis is a MATLAB toolbox that implements the training and testing of the approach described in our papers:\n\n**Deep Shape Matching**,  \nRadenovi\xc4\x87 F., Tolias G., Chum O., \nECCV 2018 [[arXiv](https://arxiv.org/abs/1709.03409)]\n\n**Fine-tuning CNN Image Retrieval with No Human Annotation**,  \nRadenovi\xc4\x87 F., Tolias G., Chum O., \nTPAMI 2018 [[arXiv](https://arxiv.org/abs/1711.02512)]\n\n**CNN Image Retrieval Learns from BoW: Unsupervised Fine-Tuning with Hard Examples**,  \nRadenovi\xc4\x87 F., Tolias G., Chum O., \nECCV 2016 [[arXiv](http://arxiv.org/abs/1604.02426)]\n\n<img src="http://cmp.felk.cvut.cz/cnnimageretrieval/img/cnnimageretrieval_network_medium.png" width=\\textwidth/>\n\n## Prerequisites\n\nIn order to run this toolbox you will need:\n\n1. MATLAB (tested with MATLAB R2017a on Debian 8.1)\n1. MatConvNet MATLAB toolbox version [1.0-beta25](http://www.vlfeat.org/matconvnet/download/matconvnet-1.0-beta25.tar.gz)\n1. All the rest (data + networks) is automatically downloaded with our scripts\n\n## Image retrieval\n\nThis code implements:\n\n1. Training (fine-tuning) CNN for image retrieval\n1. Learning supervised whitening for CNN image representations\n1. Testing CNN image retrieval on Oxford5k and Paris6k datasets\n\nRun the following script in MATLAB:\n\n```\n>> run [MATCONVNET_ROOT]/matlab/vl_setupnn;\n>> run [CNNIMAGERETRIEVAL_ROOT]/setup_cnnimageretrieval;\n>> train_cnnimageretrieval;\n>> test_cnnimageretrieval;\n```\nSee ```[CNNIMAGERETRIEVAL_ROOT]/examples/train_cnnimageretrieval``` and ```[CNNIMAGERETRIEVAL_ROOT]/examples/test_cnnimageretrieval``` for additional details. \n\nWe provide the pretrained networks trained using the same parameters as in our ECCV 2016 and TPAMI 2018 papers. Performance comparison with the networks trained with our [CNN Image Retrieval in PyTorch](https://github.com/filipradenovic/cnnimageretrieval-pytorch), on the original and the revisited Oxford and Paris benchmarks:\n\n| Model | Oxford | Paris | ROxf (M) | RPar (M) | ROxf (H) | RPar (H) |\n|:------|:------:|:------:|:------:|:------:|:------:|:------:|\n| VGG16-GeM (MatConvNet) | 87.9 | 87.7 | 61.9 | 69.3 | 33.7 | 44.3 |\n| VGG16-GeM (PyTorch) | 87.2 | 87.8 | 60.5 | 69.3 | 32.4 | 44.3 |\n| ResNet101-GeM (MatConvNet) | 87.8 | 92.7 | 64.7 | 77.2 | 38.5 | 56.3 |\n| ResNet101-GeM (PyTorch) | 88.2 | 92.5 | 65.3 | 76.6 | 40.0 | 55.2 |\n\n**Note**: Data and networks used for training and testing are automatically downloaded when using the example scripts.\n\n## Sketch-based image retrieval and shape matching\n\nThis code implements:\n\n1. Training (fine-tuning) CNN for sketch-based image retrieval and shape matching\n1. Testing CNN sketch-based image retrieval on Flickr15k dataset\n\nRun the following script in MATLAB:\n\n```\n>> run [MATCONVNET_ROOT]/matlab/vl_setupnn;\n>> run [CNNIMAGERETRIEVAL_ROOT]/setup_cnnimageretrieval;\n>> train_cnnsketch2imageretrieval;\n>> test_cnnsketch2imageretrieval;\n```\nSee ```[CNNIMAGERETRIEVAL_ROOT]/examples/train_cnnsketch2imageretrieval``` and ```[CNNIMAGERETRIEVAL_ROOT]/examples/test_cnnsketch2imageretrieval``` for additional details. \n\nWe provide the pretrained networks trained using the same parameters as in our ECCV 2018 paper. The Flickr15k dataset used in the paper is slightly outdated compared to the latest one that is automatically downloaded when using this code (0.1 difference in mAP), so we report results here:\n\n|EdgeMAC components|||||\n|:--|:--:|:--:|:--:|:--:|\n|Fine-tuned|x|x|x|x|\n|Mirror||x||x|\n|Multi-scale|||x|x|\n|mAP|42.0|43.5|45.7|46.2|\n\n\n**Note**: Data and networks used for testing are automatically downloaded when using the example scripts.\n\n## Related publications\n\n### Image retrieval\n```\n@article{RTC18a,\n title = {Fine-tuning {CNN} Image Retrieval with No Human Annotation},\n author = {Radenovi{\\\'c}, F. and Tolias, G. and Chum, O.}\n journal = {TPAMI},\n year = {2018}\n}\n```\n```\n@inproceedings{RTC16,\n title = {{CNN} Image Retrieval Learns from {BoW}: Unsupervised Fine-Tuning with Hard Examples},\n author = {Radenovi{\\\'c}, F. and Tolias, G. and Chum, O.},\n booktitle = {ECCV},\n year = {2016}\n}\n```\n\n### Sketch-based image retrieval and shape matching\n```\n@article{RTC18b,\n title = {Deep Shape Matching},\n author = {Radenovi{\\\'c}, F. and Tolias, G. and Chum, O.}\n journal = {ECCV},\n year = {2018}\n}\n```\n\n### Revisited benchmarks for Oxford and Paris (\'roxford5k\' and \'rparis6k\')\n```\n@inproceedings{RITAC18,\n author = {Radenovi{\\\'c}, F. and Iscen, A. and Tolias, G. and Avrithis, Y. and Chum, O.},\n title = {Revisiting Oxford and Paris: Large-Scale Image Retrieval Benchmarking},\n booktitle = {CVPR},\n year = {2018}\n}\n```'