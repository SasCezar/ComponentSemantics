b'# MBeautifier\n\nMBeautifier is a lightweight M-Script based MATLAB source code formatter usable directly in the MATLAB Editor.\n\n![Basic working](https://cloud.githubusercontent.com/assets/12681120/20592407/904cb1d6-b22d-11e6-93dd-1637c3738e50.png)\n\n\nMain features\n-------------\n - Padding operators and keywords with white spaces\n - Configurable indentation character and level. Indentation using the Smart Indent functionality of the MATLAB Editor\n - Removal/addition of continuous empty lines\n - Inserting missing element separators (commas) in matrix and cell array initializations\n - Insert missing continuous symbol line in matrix and cell array initializations\n - In-lining continuous lines \n - Formats the current page of the MATLAB Editor or only a selection in the MATLAB Editor or file(s) \n - While everything above is configurable in a single XML file\n\nDeployment and Configuration\n----------------------------\nSimply add the root directory to the MATLAB path.\n\n### Configuration\n\nThe configuration can be modified by editing the `MBeautifier\\resources\\settings\\MBeautyConfigurationRules.xml` file.\n\n#### Configuration rules\n\nCurrently three types of configuration rules are implemented: `Operator padding rule`, `Keyword padding rule` and `Special rule`.\n\n#### Operator padding rules\n\nEach `OperatorPaddingRule` represents the formatting rules for one single operator and consists of a key, the string that should be replaced and a string that should be used for the replacement.\n\n    <OperatorPaddingRule>\n        <Key>NotEquals</Key>\n        <ValueFrom>~=</ValueFrom>\n        <ValueTo> ~= </ValueTo>\n    </OperatorPaddingRule>\n\t\nThe example above shows the rule for the "not equals" operator. The `ValueFrom` node stores the operator `~=` and the `ValueTo` node stores the expected format: the operator should be preceded and followed by a white-space character.\n\n#### Keyword padding rules\n\nEach `KeyworPaddingRule` represents the formatting rules for one single keyword and consists the keyword itself, and a numeric value of the needed white-space padding on the right side.\n\n\t<KeyworPaddingRule>\n\t\t<Keyword>properties</Keyword>\n\t\t<RightPadding>1</RightPadding>\n\t</KeyworPaddingRule>\n\t\nThe example above shows the rule for the keyword "properties". The `RightPadding` node stores the expected right padding white space amount: the keyword should be preceded by one white space character.\n\n> Note: Not all of the keywords are listed - only the ones where controlling padding makes sense.\n\n#### Special rules\n\nThese rules are basically switches for certain functionalities of MBeautifier.\n\nThe current list of special rules:\n\n##### Special rules regarding new lines\n - **MaximalNewLines**: Integer value. MBeautifier will remove continuous empty lines. This rule can be used to specify the maximal number of maximal continuous empty lines.\n - **SectionPrecedingNewlineCount**: Integer value. Defines how many empty lines should precede the section comments (`%% `). Negative values mean no special formatting is needed (the final format is defined by the input and the MaximalNewLines rule). For any number "X" bigger or equal to zero: section comments will be preceded exactly by X empty lines.\n - **SectionTrailingNewlineCount**: Integer value. Defines how many empty lines should follow the section comments (`%% `). Negative values mean no special formatting is needed (the final format is defined by the input and the MaximalNewLines rule). For any number "X" bigger or equal to zero: section comments will be followed exactly by X empty lines.\n - **EndingNewlineCount**: Integer value. Defines how many empty lines should be placed on the end of the input. Negative values mean no special formatting is needed (the final format is defined by the input and the MaximalNewLines rule). For any number "X" bigger or equal to zero: input will trailed exactly by X empty lines.\n - **AllowMultipleStatementsPerLine**: [1|0]. If set to 1, MBeautifier will allow multiple statements per line (`a = 1; b = 2;`), otherwise it will break every statement into a new line. Defaults to "0".\n \n##### Special rules regarding matrix and cell array separators\n \n - **AddCommasToMatrices**: [1|0]. Indicates whether the missing element separator commas in matrices should be inserted. For example: `[1 2 3]` will be formatted as `[1, 2, 3]`.\n - **AddCommasToCellArrays**: [1|0]. Indicates whether the missing element separator commas in cell arrays should be inserted. For example: `{1 2 3}` will be formatted as `{1, 2, 3}`.\n \n##### Special rules arithmetic operators \n\n - **MatrixIndexing_ArithmeticOperatorPadding**: [1|0]. Indicates whether the arithmetic operators should be padded by white spaces (using the operator padding rules), when they are used to index matrices. For example: `matrix(end+1) = 1` can be formatted as `matrix(end+1) = 1` when value is set to 0, or as `matrix(end + 1) = 1` if value is set to 1.\n - **CellArrayIndexing_ArithmeticOperatorPadding**: [1|0]. Indicates the same as `MatrixIndexing_ArithmeticOperatorPadding` but for cell arrays.\n \n##### Special rules regarding continous lines\n\n - **InlineContinousLines**: [1|0]. If set to 1, MBeautifier will in-line continuous line operators ("...") everywhere except in matrices (inside [] brackets) and in curly brackets ({}) - these cases are handled by the next two options. In-lining means: the "..." operator will be removed and the next line will be copied into its place.\n - **InlineContinousLinesInMatrixes**: [1|0]. Same as **InlineContinousLines**, but only has effect inside brackets ("[]").\n - **InlineContinousLinesInCurlyBracket**: [1|0]. Same as **InlineContinousLines**, but only has effect inside curly brackets ("{}").\n \n##### Special rules regarding indentation\n\n - **IndentationCharacter**: [white-space|tab]. Specifies which character should be used for auto-indentation: white space or tabulator. Defaults to "white-space".\n - **IndentationCount**: Integer value. Specifies the level of auto-indentation (how many **IndentationCharacter** means one level of indentation). Defaults to "4".\n - **Indentation_TrimBlankLines**: [1|0]. Specifies if blank lines (lines containing only white space characters - as result of auto-indentation) should be trimmed (made empty) by MBeautifier. Defaults to "1" as it can lead to smaller file sizes.\n - **Indentation_Strategy**: [\'AllFunctions\'|\'NestedFunctions\'|\'NoIndent\']. Controls the "Function indenting format" preference of the MATLAB editor used by MBeautifier: changes the indentation level of the functions\' body. Possible values: "AllFunctions" - indent the body of each function, "NestedFunctions" - indent the body of nested functions only, "NoIndent" - all of the functions\' body will be indented the same amount as the function keyword itself.\n  \n#### Directives\n\nMBeautifier directives are special constructs which can be used in the source code to control MBeautifier during the formatting process. The example below controls the directive named `Format` and sets its value to `on` and then later to `off`.\n\n    a =  1;\n    % MBeautifierDirective:Format:Off\n    longVariableName = \'where the assigement is\';\n    aligned          = \'with the next assignment\';\n    % MBD:Format:On\n    someMatrix  =  [1 2 3];\n    \nThe standard format of a directive line is:\n - following the pattern: `<ws>%<ws>MBeautifierDirective<ws>:<ws>:NAME<ws>:<ws>VALUE<ws>[NEWLINE]` or : `<ws>%<ws>MBD<ws>:<ws>:NAME<ws>:<ws>VALUE<ws>[NEWLINE]`where\n    -   `<ws>` means zero or more optional white space characters\n    -   `NAME` means the directive name (only latin letters, case insensitive)\n    -   `VALUE` means the directive value (only latin letters, case insensitive)\n - must not contain any code or any trailing comment  (only the directive comment above)\n - must not be inside a block comment\n - must not be inside any line continousment\n - the keyword `MBeautifierDirective` is freely interchangable with `MBD`\n\n> **Note: Directive names which are not present in the list below, or directive values which are not applicable to the specified directive will be ignored together with a MATLAB warning**.\n\n##### Directive List\n\n###### `Format`\nDirective to generally control the formatting process.\nPossible values:\n- `on` - Enable formatting\n- `off` - Disable formatting\n\nExample:\nIn the code-snippet below MBeautifier is formatting the first line using the configuration currently active, but will not format the lines 2,3,4,5. The last line will be beautified again using the current configuration.\n\n    a =  1;\n    % MBeautifierDirective:Format:Off\n    longVariableName = \'where the assigement is\';\n    aligned          = \'with the next assignment\';\n    % MBeautifierDirective:Format:On\n    someMatrix  =  [1 2 3];\n    \nThe formatted code will look like (configuration dependently):\n\n\ta = 1;\n\t% MBeautifierDirective:Format:Off\n\tlongVariableName = \'where the assigement is\';\n\taligned          = \'with the next assignment\';\n\t% MBeautifierDirective:Format:On\n\tsomeMatrix = [1, 2, 3];\n\nUsage\n-----\n\n### From MATLAB Command Window\n\nCurrently four approaches are supported:\n\n - Perform formatting on the currently active page of MATLAB Editor. Command: `MBeautify.formatCurrentEditorPage()`. By default the file is not saved, but it remains opened modified in the editor. Optionally the formatted file can be saved using the `MBeautify.formatCurrentEditorPage(true)` syntax.\n - Perform formatting on the currently selected text of the active page of MATLAB Editor. Command: `MBeautify.formatEditorSelection()`. An optional saving mechanism as above exists also in this case. Useful in case of large files, but in any case `MBeautify.formatCurrentEditorPage()` is suggested.\n - Perform formatting on a file. Command: `MBeautify.formatFile(file)`. Can be used with (1)one argument: the input file is formatted and remains open in the MATLAB editor unsaved; (2)two arguments as `MBeautify.formatFile(file, outFile)`: the formatted file is saved to the specified output file if possible. Output can be the same as input.\n - Perform formatting on several files in a directory. Command: `MBeautify.formatFiles(directory, fileFilter)`. The first argument is an absolute path to a directory, the second one is a wildcard expression (used for `dir` command) to filter files in the target directory. The files will be formatted in-place (overwritten). \n \n### Shortcuts\n \n There is a possibility to create shortcuts for the first three approaches above, which shortcut buttons will appear under the "Shortcuts" tab of MATLAB\'s main window.\n \n To create these buttons, the following commands can be used:\n \n  - `MBeautify.createShortcut(\'editorpage\')`: Creates a shortcut for `MBeautify.formatCurrentEditorPage()`  \n  - `MBeautify.createShortcut(\'editorselection\')`: Creates a shortcut for `MBeautify.formatEditorSelection()`\n  - `MBeautify.createShortcut(\'file\')`: Creates a shortcut for `MBeautify.formatFile(sourceFile, destFile)`\n  \n These shortcuts will add the MBeautifier root directory to the MATLAB path too, therefore no MATLAB path preparation is needed to use MBeautifier next time when a new Matlab instance is opened.\n \n Supported Matlab versions\n -------------------------\n \n The oldest version of MATLAB to be used to test MBeautifier is R2013b.\n \n Planned future versions\n -----------------------\n \nIt is planned that the project is maintained until MATLAB is shipped with a code formatter with a similar functionality.\n \nIt is planned to make MBeautifier also usable in Octave, by starting a new development branch using Java/Kotlin (versions 2.*). The MATLAB based branched will be developed in branch versions (1.*). \n \n'