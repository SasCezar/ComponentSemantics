b'# UIWidgets\n[\xe4\xb8\xad\xe6\x96\x87](README-ZH.md)\n\n\n## Introduction\n\nUIWidgets is a plugin package for Unity Editor which helps developers to create, debug and deploy efficient,\ncross-platform Apps using the Unity Engine.\n\nUIWidgets is mainly derived from [Flutter](https://github.com/flutter/flutter). However, taking advantage of\nthe powerful Unity Engine, it offers developers many new features to improve their Apps\nas well as the develop workflow significantly.\n\n#### Efficiency\nUsing the latest Unity rendering SDKs, a UIWidgets App can run very fast and keep >60fps in most times.\n\n\n#### Cross-Platform\nA UIWidgets App can be deployed on all kinds of platforms including PCs, mobile devices and web page directly, like\nany other Unity projects.\n\n#### Multimedia Support\nExcept for basic 2D UIs, developers are also able to include 3D Models, audios, particle-systems to their UIWidgets Apps.\n\n\n#### Developer-Friendly\nA UIWidgets App can be debug in the Unity Editor directly with many advanced tools like\nCPU/GPU Profiling, FPS Profiling.\n\n\n## Example\n\n<div style="text-align: center"><table><tr>\n<td style="text-align: center">\n  <img src="https://connect-prd-cdn.unity.com/20190323/p/images/2a27606f-a2cc-4c9f-9e34-bb39ae64d06c_uiwidgets1.gif" width="200"/>\n</td>\n<td style="text-align: center">\n  <img src="https://connect-prd-cdn.unity.com/20190323/p/images/097a7c53-19b3-4e0a-ad27-8ec02506905d_uiwidgets2.gif" width="200" />\n</td>\n<td style="text-align: center">\n  <img src="https://connect-prd-cdn.unity.com/20190323/p/images/1f03c1d0-758c-4dde-b3a9-2f5f7216b7d9_uiwidgets3.gif" width="200"/>\n</td>\n<td style="text-align: center">\n  <img src="https://connect-prd-cdn.unity.com/20190323/p/images/a8884fbd-9e7c-4bd7-af46-0947e01d01fd_uiwidgets4.gif" width="200"/>\n</td>\n</tr></table></div>\n\n### Projects using UIWidgets\n\n#### Unity Connect App\nThe Unity Connect App is created using UIWidgets and available for both Android (https://connect.unity.com/connectApp/download)\nand iOS (Searching for "Unity Connect" in App Store). This project is open-sourced @https://github.com/UnityTech/ConnectAppCN.\n\n#### Unity Chinese Doc\nThe official website of Unity Chinese Documentation (https://connect.unity.com/doc) is powered by UIWidgets and\nopen-sourced @https://github.com/UnityTech/DocCN.\n\n## Requirements\n\n#### Unity\n\nInstall **Unity 2018.4.10f1 (LTS)** or **Unity 2019.1.14f1** and above. You can download the latest Unity on https://unity3d.com/get-unity/download.\n\n#### UIWidgets Package\nVisit our Github repository https://github.com/UnityTech/UIWidgets\n to download the latest UIWidgets package.\n\nMove the downloaded package folder into the **Package** folder of your Unity project.\n\nGenerally, you can make it using a console (or terminal) application by just a few commands as below:\n\n   ```none\n    cd <YourProjectPath>/Packages\n    git clone https://github.com/UnityTech/UIWidgets.git com.unity.uiwidgets\n   ```\n\n## Getting Start\n\n#### i. Overview\nIn this tutorial, we will create a very simple UIWidgets App as the kick-starter. The app contains\nonly a text label and a button. The text label will count the times of clicks upon the button.\n\nFirst of all, please open or create a Unity Project and open it with Unity Editor.\n\nAnd then open Project Settings, go to Player section and **add "UIWidgets_DEBUG" to the Scripting Define Symbols field.**\nThis enables the debug mode of UIWidgets for your development. Remove this for your release build afterwards.\n\n#### ii. Scene Build\nA UIWidgets App is usually built upon a Unity UI Canvas. Please follow the steps to create a\nUI Canvas in Unity.\n1. Create a new Scene by "File -> New Scene";\n1. Create a UI Canvas in the scene by "GameObject -> UI -> Canvas";\n1. Add a Panel (i.e., **Panel 1**) to the UI Canvas by right click on the Canvas and select "UI -> Panel". Then remove the\n**Image** Component from the Panel.\n\n#### iii. Create Widget\nA UIWidgets App is written in **C# Scripts**. Please follow the steps to create an App and play it\nin Unity Editor.\n\n1. Create a new C# Script named "UIWidgetsExample.cs" and paste the following codes into it.\n   ```csharp\n    using System.Collections.Generic;\n    using Unity.UIWidgets.animation;\n    using Unity.UIWidgets.engine;\n    using Unity.UIWidgets.foundation;\n    using Unity.UIWidgets.material;\n    using Unity.UIWidgets.painting;\n    using Unity.UIWidgets.ui;\n    using Unity.UIWidgets.widgets;\n    using UnityEngine;\n    using FontStyle = Unity.UIWidgets.ui.FontStyle;\n\n    namespace UIWidgetsSample {\n        public class UIWidgetsExample : UIWidgetsPanel {\n            protected override void OnEnable() {\n                // if you want to use your own font or font icons.\n                // FontManager.instance.addFont(Resources.Load<Font>(path: "path to your font"), "font family name");\n\n                // load custom font with weight & style. The font weight & style corresponds to fontWeight, fontStyle of\n                // a TextStyle object\n                // FontManager.instance.addFont(Resources.Load<Font>(path: "path to your font"), "Roboto", FontWeight.w500,\n                //    FontStyle.italic);\n\n                // add material icons, familyName must be "Material Icons"\n                // FontManager.instance.addFont(Resources.Load<Font>(path: "path to material icons"), "Material Icons");\n\n                base.OnEnable();\n            }\n\n            protected override Widget createWidget() {\n                return new WidgetsApp(\n                    home: new ExampleApp(),\n                    pageRouteBuilder: (RouteSettings settings, WidgetBuilder builder) =>\n                        new PageRouteBuilder(\n                            settings: settings,\n                            pageBuilder: (BuildContext context, Animation<float> animation,\n                                Animation<float> secondaryAnimation) => builder(context)\n                        )\n                );\n            }\n\n            class ExampleApp : StatefulWidget {\n                public ExampleApp(Key key = null) : base(key) {\n                }\n\n                public override State createState() {\n                    return new ExampleState();\n                }\n            }\n\n            class ExampleState : State<ExampleApp> {\n                int counter = 0;\n\n                public override Widget build(BuildContext context) {\n                    return new Column(\n                        children: new List<Widget> {\n                            new Text("Counter: " + this.counter),\n                            new GestureDetector(\n                                onTap: () => {\n                                    this.setState(()\n                                        => {\n                                        this.counter++;\n                                    });\n                                },\n                                child: new Container(\n                                    padding: EdgeInsets.symmetric(20, 20),\n                                    color: Colors.blue,\n                                    child: new Text("Click Me")\n                                )\n                            )\n                        }\n                    );\n                }\n            }\n        }\n    }\n   ```\n\n1. Save this script and attach it to **Panel 1** as its component.\n1. Press the "Play" Button to start the App in Unity Editor.\n\n#### iv. Build App\nFinally, the UIWidgets App can be built to packages for any specific platform by the following steps.\n1. Open the Build Settings Panel by "File -> Build Settings..."\n1. Choose a target platform and click "Build". Then the Unity Editor will automatically assemble\nall relevant resources and generate the final App package.\n\n#### How to load images?\n1. Put your images files in Resources folder. e.g. image1.png.\n2. You can add image1@2.png and image1@3.png in the same folder to support HD screens.\n3. Use Image.asset("image1") to load the image. Note: as in Unity, ".png" is not needed.\n\nUIWidgets supports Gif as well!\n1. Suppose you have loading1.gif. Rename it to loading1.gif.bytes and copy it to Resources folder.\n2. You can add loading1@2.gif.bytes and loading1@3.gif.bytes in the same folder to support HD screens.\n3. Use Image.asset("loading1.gif") to load the gif images.\n\n#### Using Window Scope\nIf you see the error `AssertionError: Window.instance is null` or null pointer error of `Window.instance`,\nit means the code is not running in the window scope. In this case, you can enclose your code\nwith window scope as below:\n```csharp\nusing(WindowProvider.of(your gameObject with UIWidgetsPanel).getScope()) {\n    // code dealing with UIWidgets,\n    // e.g. setState(() => {....})\n}\n```\n\nThis is needed if the code is in methods\nnot invoked by UIWidgets. For example, if the code is in `completed` callback of `UnityWebRequest`,\nyou need to enclose them with window scope.\nPlease see [HttpRequestSample](./Samples/UIWidgetSample/HttpRequestSample.cs) for detail.\nFor callback/event handler methods from UIWidgets (e.g `Widget.build, State.initState...`), you don\'t need do\nit yourself, since the framework ensure it\'s in window scope.\n\n#### Show Status Bar on Android\nStatus bar is always hidden by default when an Unity project is running on an Android device. If you\n want to show the status bar in your App, this\n [solution](https://github.com/Over17/UnityShowAndroidStatusBar) seems to be\n compatible to UIWidgets, therefore can be used as a good option before we release our\n full support solution on this issue.\n\n Besides,\n please set "Render Outside Safe Area" to true in the "Player Settings" to make this plugin working properly on Android P or later.\n\n\n\n\n#### Automatically Adjust Frame Rate\n\nTo build an App that is able to adjust the frame rate automatically, please open Project Settings, and in the Quality tab, set the "V Sync Count" option of the target platform to "Don\'t Sync".\nThe default logic is to reduce the frame rate when the screen is static, and change it back to 60 whenever the screen changes.\nIf you would like to disable this behavior, please set `Window.onFrameRateSpeedUp` and `Window.onFrameRateCoolDown` to null function, i.e., () => {}.\n\nNote that in Unity 2019.3 and above, UIWidgets will use OnDemandRenderAPI to implement this feature, which will greatly save the battery.\n\n#### WebGL Canvas Device Pixel Ratio Plugin\nThe width and height of the Canvas in browser may differ from the number of pixels the Canvas occupies on the screen.\nTherefore, the image may blur in the builded WebGL program.\nThe Plugin `Plugins/platform/webgl/UIWidgetsCanvasDevicePixelRatio_20xx.x.jslib` (2018.3 and 2019.1 for now) solves this issue.\nPlease select the plugin of the Unity version corresponding to your project, and disable other versions of this plugin, as follows: select this plugin in the **Project** panel, and uncheck **WebGL** under **Select platforms for plugin** in the **Inspector** panel.\nIf you need to disable this plugin for any reason, please disable all the versions of this plugin as described above.\n\nThis plugin overrides the following parameters in the Unity WebGL building module:\n```none\nJS_SystemInfo_GetWidth\nJS_SystemInfo_GetHeight\nJS_SystemInfo_GetCurrentCanvasWidth\nJS_SystemInfo_GetCurrentCanvasHeight\n$Browser\n$JSEvents\n```\nIf you would like to implement your own WebGL plugin, and your plugin overrides at least one of the above parameters, you need to disable the `UIWidgetsCanvasDevicePixelRatio` plugin in the above mentioned way to avoid possible conflicts.\nIf you still need the function provided by this plugin, you can mannually apply the modification to Unity WebGL building module introduced in this plugin.\nAll the modifications introduced in `UIWidgetsCanvasDevicePixelRatio` are marked by `////////// Modifcation Start ////////////` and `////////// Modifcation End ////////////`.\nIn the marked codes, all the multiplications and divisions with `devicePixelRatio` are introduced by our modification.\nTo learn about the original script in detail, please refer to `SystemInfo.js` and `UnityNativeJS/UnityNative.js` in `PlaybackEngines/WebGLSupport/BuildTools/lib` in your Unity Editor installation.\n\n#### Image Import Setting\nUnity, by default, resizes the width and height of an imported image to the nearest integer that is a power of 2.\nIn UIWidgets, you should almost always disable this by selecting the image in the "Project" panel, then in the "Inspector" panel set the "Non Power of 2" option (in "Advanced") to "None", to prevent your image from being resized unexpectedly.\n\n#### Update Emoji\nUIWidgets supports rendering emoji in (editable) texts.\nThe default emoji resource version is [iOS 13.2](https://emojipedia.org/apple/ios-13.2).\nWe also prepared the resources of [Google Emoji](https://emojipedia.org/google).\nTo switch to Google version of emoji, please follow the following steps:\n\n1. Copy `Runtime/Resources/backup~/EmojiGoogle.png` to `Runtime/Resources/images` folder.\n2. In the **Project** panel, find and select `EmojiGoogle` asset, and in the **Inspector** panel, change **Max Size** to 4096, disable **Generate Mipmaps**, and enable **Alpha Is Transparency**.\n3. In the `OnEnable()` function in your class overriding `UIWidgetsPanel`, add the following code\n\n```csharp\nEmojiUtils.configuration = EmojiUtils.googleEmojiConfiguration;\n```\n\nIf you would like to use your own images for emoji, please follow the following steps:\n\n1. Create the sprite sheet (take `EmojiGoogle.png` as an example), and put in a `Resources` folder in your project, (for example `Resources/myImages/MyEmoji.png`).\n2. In the `OnEnable()` function, add the following code (replace example values with actual value). Note that the order of emoji codes should be consistent with the sprite sheet.\n\n```csharp\nEmojiUtils.configuration = new EmojiResourceConfiguration(\n  spriteSheetAssetName: "myImage/MyEmoji",\n  emojiCodes: new List<int> {\n    0x1f004, 0x1f0cf, 0x1f170, ...\n  },\n  spriteSheetNumberOfRows: 36,\n  spriteSheetNumberOfColumns: 37,\n);\n```\n\n#### Interact with GameObject Drag&Drops\n\n<p align="center">\n  <img src="https://connect-prd-cdn.unity.com/20190718/p/images/e3c9cf9b-c732-4eb2-9afd-fe7de894f342_Custom_Inspector_Showcase_320px.gif" width="300"/>\n</p>\n\nWith the provided packaged stateful widget `UnityObjectDetector` and its `onRelease` callback function, you can easily drag some objects (for example GameObject from Hierarchy, files from Project Window, etc) into the area, get the UnityEngine.Object[] references and make further modification.\n\n\n## Debug UIWidgets Application\n\n#### Define UIWidgets_DEBUG\nIt\'s recommended to define the **UIWidgets_DEBUG** script symbol in editor, this will turn on\ndebug assertion in UIWidgets, which will help to find potential bugs earlier. To do this:\nplease go to **Player Settings -> Other Settings -> Configuration -> Scripting Define Symbols**,\nand add **UIWidgets_DEBUG**.\nThe symbol is for debug purpose, please remove it from your release build.\n\n#### UIWidgets Inspector\nThe UIWidgets Inspector tool is for visualizing and exploring the widget trees. You can find it\nvia *Window/Analysis/UIWidgets* inspector in Editor menu.\n\n**Note**\n* **UIWidgets_DEBUG** needs to be define for inspector to work properly.\n* Inspector currently only works in Editor Play Mode, inspect standalone built application is not supported for now.\n\n## Learn\n\n#### Samples\nYou can find many UIWidgets sample projects on Github, which cover different aspects and provide you\nlearning materials in various levels:\n* UIWidgetsSamples (https://github.com/UIWidgets/UIWidgetsSamples). These samples are developed by the dev team in order to illustrates all the features of \nUIWidgets. First clone this Repo to the **Assets** folder of your local UIWidgets project. Then\nyou can find all the sample scenes under the **Scene** folder.\nYou can also try UIWidgets-based Editor windows by clicking the new **UIWidgetsTests** tab on the main menu\nand open one of the dropdown samples.\n* awesome-UIWidgets by Liangxie (https://github.com/liangxiegame/awesome-uiwidgets). This Repo contains \nlots of UIWidget demo apps and third-party applications. \n* ConnectApp (https://github.com/UnityTech/ConnectAppCN). This is an online, open-source UIWidget-based App developed \nby the dev team. If you are making your own App with UIWidgets, this project will provides you with \nmany best practice cases.\n\n\n#### Wiki\nThe develop team is still working on the UIWidgets Wiki. However, since UIWidgets is mainly derived from Flutter,\n you can refer to Flutter Wiki to access detailed descriptions of UIWidgets APIs\n from those of their Flutter counterparts.\nMeanwhile, you can join the discussion channel at (https://connect.unity.com/g/uiwidgets)\n\n#### FAQ\n\n| Question     | Answer  |\n| :-----------------------------------------------| ---------------------: |\n| Can I create standalone App using UIWidgets?     | **Yes**  |\n| Can I use UIWidgets to build game UIs?   | **Yes**    |\n| Can I develop Unity Editor plugins using UIWidgets?  | **Yes** |\n| Is UIWidgets a extension of UGUI/NGUI? | **No** |\n| Is UIWidgets just a copy of Flutter? | **No** |\n| Can I create UI with UIWidgets by simply drag&drop? | **No** |\n| Do I have to pay for using UIWidgets? | **No** |\n| Any IDE recommendation for UIWidgets? | **Rider, VSCode(Open .sln)** |\n\n## How to Contribute\n\nCheck [CONTRIBUTING.md](CONTRIBUTING.md)\n'