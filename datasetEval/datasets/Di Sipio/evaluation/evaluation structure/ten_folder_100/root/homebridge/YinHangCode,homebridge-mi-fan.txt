b'# homebridge-mi-fan\n[![npm version](https://badge.fury.io/js/homebridge-mi-fan.svg)](https://badge.fury.io/js/homebridge-mi-fan)\n\nXiaoMi fan plugins for HomeBridge.   \n   \nThanks for [nfarina](https://github.com/nfarina)(the author of [homebridge](https://github.com/nfarina/homebridge)), [OpenMiHome](https://github.com/OpenMiHome/mihome-binary-protocol), [aholstenson](https://github.com/aholstenson)(the author of [miio](https://github.com/aholstenson/miio)), [ABC](https://github.com/hassbian-ABC), \xe5\xb0\x8f\xe9\xa9\xac\xe5\x93\xa5, all other developer and testers.   \n   \n**Note: If you find bugs, please submit them to [issues](https://github.com/YinHangCode/homebridge-mi-fan/issues) or [QQ Group: 107927710](//shang.qq.com/wpa/qunwpa?idkey=8b9566598f40dd68412065ada24184ef72c6bddaa11525ca26c4e1536a8f2a3d).**   \n\n![](https://raw.githubusercontent.com/YinHangCode/homebridge-mi-fan/master/images/ZhiMiDCVariableFrequencyFan.jpg)\n![](https://raw.githubusercontent.com/YinHangCode/homebridge-mi-fan/master/images/ZhiMiNaturalWindFan.jpg)\n![](https://raw.githubusercontent.com/YinHangCode/homebridge-mi-fan/master/images/MiDCVariableFrequencyFan.jpg)\n![](https://raw.githubusercontent.com/YinHangCode/homebridge-mi-fan/master/images/DmakerFan.jpg)\n\n\n## Supported Devices\n1.ZhiMiDCVariableFrequencyFan(\xe6\x99\xba\xe7\xb1\xb3\xe7\x9b\xb4\xe6\xb5\x81\xe5\x8f\x98\xe9\xa2\x91\xe8\x90\xbd\xe5\x9c\xb0\xe6\x89\x87 799RMB)   \n2.ZhiMiNaturalWindFan(\xe6\x99\xba\xe7\xb1\xb3\xe8\x87\xaa\xe7\x84\xb6\xe9\xa3\x8e\xe9\xa3\x8e\xe6\x89\x87 599RMB)   \n3.MiDCVariableFrequencyFan(\xe7\xb1\xb3\xe5\xae\xb6\xe7\x9b\xb4\xe6\xb5\x81\xe5\x8f\x98\xe9\xa2\x91\xe8\x90\xbd\xe5\x9c\xb0\xe6\x89\x87 399RMB)   \n4.DmakerFan(\xe7\xb1\xb3\xe5\xae\xb6\xe9\xa3\x8e\xe6\x89\x871X 299RMB)\n\n## Pre-Requirements\n1.Make sure your IOS version is ios11 or later.   \n## Installation\n1. Install HomeBridge, please follow it\'s [README](https://github.com/nfarina/homebridge/blob/master/README.md).   \nIf you are using Raspberry Pi, please read [Running-HomeBridge-on-a-Raspberry-Pi](https://github.com/nfarina/homebridge/wiki/Running-HomeBridge-on-a-Raspberry-Pi).   \n2. Make sure you can see HomeBridge in your iOS devices, if not, please go back to step 1.   \n3. Install packages.   \n```\nnpm install -g homebridge-mi-fan\n```\n## Configuration\n```\n"platforms": [{\n    "platform": "MiFanPlatform",\n    "deviceCfgs": [{\n        "type": "ZhiMiDCVariableFrequencyFan",\n        "ip": "192.168.1.xxx",\n        "token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",\n        "fanName": "room fan",\n        "fanDisable": false,\n        "temperatureName": "room temperature",\n        "temperatureDisable": false,\n        "humidityName": "room humidity",\n        "humidityDisable": false,\n        "buzzerSwitchName": "fan buzzer switch",\n        "buzzerSwitchDisable": true,\n        "ledBulbName": "fan led switch",\n        "ledBulbDisable": true\n    }, {\n        "type": "ZhiMiNaturalWindFan",\n        "ip": "192.168.1.xxx",\n        "token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",\n        "fanName": "room fan",\n        "fanDisable": false,\n        "temperatureName": "room temperature",\n        "temperatureDisable": false,\n        "humidityName": "room humidity",\n        "humidityDisable": false,\n        "buzzerSwitchName": "fan buzzer switch",\n        "buzzerSwitchDisable": true,\n        "ledBulbName": "fan led switch",\n        "ledBulbDisable": true\n    }, {\n        "type": "MiDCVariableFrequencyFan",\n        "ip": "192.168.1.xxx",\n        "token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",\n        "fanName": "room fan",\n        "fanDisable": false,\n        "temperatureName": "room temperature",\n        "temperatureDisable": false,\n        "humidityName": "room humidity",\n        "humidityDisable": false,\n        "buzzerSwitchName": "fan buzzer switch",\n        "buzzerSwitchDisable": true,\n        "ledBulbName": "fan led switch",\n        "ledBulbDisable": true\n    }, {\n        "type": "DmakerFan",\n        "ip": "192.168.1.xxx",\n        "token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",\n        "fanName": "room fan",\n        "fanDisable": false,\n        "buzzerSwitchName": "fan buzzer switch",\n        "buzzerSwitchDisable": true,\n        "ledBulbName": "fan led switch",\n        "ledBulbDisable": true\n    }]\n}]\n```\n\n## Get token\n### Get token by miio2.db\nsetup MiJia(MiHome) app in your android device or android virtual machine.   \nopen MiJia(MiHome) app and login your account.   \nrefresh device list and make sure device display in the device list.   \nget miio2.db(path: /data/data/com.xiaomi.smarthome/databases/miio2.db) file from your android device or android virtual machine.   \nopen website [[Get MiIo Tokens By DataBase File](http://miio2.yinhh.com/)], upload miio2.db file and submit.    \n### Get token by network\nOpen command prompt or terminal. Run following command:\n```\nmiio --discover\n```\nWait until you get output similar to this:\n```\nDevice ID: xxxxxxxx   \nModel info: Unknown   \nAddress: 192.168.88.xx   \nToken: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx via auto-token   \nSupport: Unknown   \n```\n"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" is token.   \nIf token is "???", then reset device and connect device created Wi-Fi hotspot.   \nRun following command:   \n```\nmiio --discover --sync\n```\nWait until you get output.   \nFor more information about token, please refer to [OpenMiHome](https://github.com/OpenMiHome/mihome-binary-protocol) and [miio](https://github.com/aholstenson/miio).   \n\n## Version Logs\n### 0.1.1 (2019-06-03)\n1.add support for DmakerFan.\n### 0.1.0 (2018-07-11)\n1.add support for Mi DC VariableFrequency Fan.   \n2.add support for ZhiMi NaturalWind Fan.   \n### 0.0.5 (2018-02-10)\n1.update \'package.json\'.   \n### 0.0.4 (2017-09-11)\n1.optimized code.   \n### 0.0.3 (2017-09-09)\n1.optimized code.   \n### 0.0.2 (2017-09-09)\n1.fixed bug that led switch error.   \n### 0.0.1 (2017-09-05)\n1.support for ZhiMi DC VariableFrequency Fan.   \n'