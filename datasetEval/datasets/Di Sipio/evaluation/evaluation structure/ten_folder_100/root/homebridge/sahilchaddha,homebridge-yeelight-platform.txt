b'# homebridge-yeelight-platform\n\n[![NPM](https://nodei.co/npm/homebridge-yeelight-platform.png?downloads=true&downloadRank=true&stars=true)](https://nodei.co/npm/homebridge-yeelight-platform/)\n\n[![npm](https://img.shields.io/npm/dm/homebridge-yeelight-platform.svg)](https://www.npmjs.com/package/homebridge-yeelight-platform)\n[![npm](https://img.shields.io/npm/v/homebridge-yeelight-platform.svg)](https://www.npmjs.com/package/homebridge-yeelight-platform)\n[![CircleCI](https://circleci.com/gh/sahilchaddha/homebridge-yeelight-platform.svg?style=svg)](https://circleci.com/gh/sahilchaddha/homebridge-yeelight-platform)\n\n\n**Homebridge plugin for Yeelight Lights supporting Scenes/Moods/Color Flow/Custom Presets/Music Flow/Night Mode**\n\n## Description\n\n## Installation\n\n```shell\n    $ npm install -g --unsafe-perm homebridge\n    $ npm install -g --unsafe-perm homebridge-yeelight-platform\n```\n\nEdit config.json. Refer to `config-sample.json`.\n\n## Available Presets Scenes\n\n```\n  night_mode\n  birthday_party\n  candle_flicker\n  disco\n  flash_notify\n  police_1\n  police_2\n  alarm\n  gaming\n  calm\n  \n  custom\n```\n\n### Writing Custom Color Flow\n\nIf you want to write a custom flow, scene should be `custom` in config.json. Also provide `params` paramameter.\n\nExample : \n```json\n     {\n        "name": "Dark Cave",\n        "scene": "custom",\n        "params": "2000,1,255,70,2000,1,255,100,5000,1,255,70,3000,1,13369548,100,3000,1,13369548,10"\n    }\n```\n\nSample Preset: `"1000, 2, 2700, 100, 500, 1,255, 10, 5000, 7, 0,0, 500, 2, 5000, 1"`\n\nNOTE: Each visible state changing is defined to be a flow tuple that contains 4\nelements: `[duration, mode, value, brightness]`. \n\nA flow expression is a series of flow tuples.\nSo for above preset example, it means: change CT to 2700K & maximum brightness\ngradually in 1000ms, then change color to red & 10% brightness gradually in 500ms, then\nstay at this state for 5 seconds, then change CT to 5000K & minimum brightness gradually in\n500ms.\n\n`[duration, mode, value, brightness]`:\n\n\nDuration: Gradual change time or sleep time, in milliseconds,\nminimum value 50.\n\n\nMode: 1 \xe2\x80\x93 color, 2 \xe2\x80\x93 color temperature, 7 \xe2\x80\x93 sleep.\n\n\nValue: RGB value when mode is 1, CT value when mode is 2,\nIgnored when mode is 7.\n\n\nBrightness: Brightness value, -1 or 1 ~ 100. Ignored when mode is 7.\nWhen this value is -1, brightness in this tuple is ignored (only color or CT change takes effect). \n\nParams for Night Mode scene, Set `params` as a number. 1 => CT Mode, 2 => RGB Mode, 3 => HSV Mode, 4 => CF Mode.\nSwitching off Night Mode will reset to provided params mode. If params not provided, it will only turn off lights, will not revert color to old state.\n\n### Demo\n\n#### Yeelight Color Bulb\n\n![Demo](https://raw.githubusercontent.com/sahilchaddha/homebridge-yeelight-platform/master/demo.gif)\n\n#### Mi Bedside Lamp\n\n![Demo2](https://raw.githubusercontent.com/sahilchaddha/homebridge-yeelight-platform/master/demo2.gif)\n\nNote : Night Mode is super low brightness mode which was not shown properly in the demo video due to camera quality.\n\n## Compatible Devices\n\nhttps://www.yeelight.com/en_US/product/wifi-led-c\n\nhttps://www.yeelight.com/en_US/product/luna-mc\n\nhttps://www.yeelight.com/en_US/product/luna\n\nhttps://www.yeelight.com/en_US/product/mijia-lamp\n\nhttps://www.yeelight.com/en_US/product/lemon-color\n\nhttps://www.yeelight.com/en_US/product/lemon-ct\n\nhttps://www.yeelight.com/en_US/product/pitaya-plus\n\nhttps://www.yeelight.com/en_US/product/eos\n\nhttps://www.yeelight.com/en_US/product/cherry1s\n\nhttps://www.mi.com/us/yeelight-led-light-bulb/\n\nhttps://www.mi.com/us/mi-bedside-lamp/\n\n## Sample Config : \n\n\n```json\n{\n            "platform": "Yeelight-Platform",\n            "addResetSwitch": true,\n            "shouldTurnOff": true,\n            "scenes": [\n                {\n                    "name": "Dark Cave",\n                    "scene": "custom",\n                    "params": "2000,1,255,70,2000,1,255,100,5000,1,255,70,3000,1,13369548,100,3000,1,13369548,10"\n                },\n                {\n                    "name": "Break in",\n                    "scene": "custom",\n                    "params": "500,1,255,100,500,1,255,10"\n                },\n                {\n                    "name": "Disco",\n                    "scene": "disco"\n                },\n                {\n                    "name": "Party",\n                    "scene": "birthday_party"\n                },\n                {\n                    "name": "Flash",\n                    "scene": "flash_notify"\n                },\n                {\n                    "name": "Candle Light",\n                    "scene": "candle_flicker"\n                },\n                {\n                    "name": "Police_1",\n                    "scene": "police_1"\n                },\n                {\n                    "name": "Police_2",\n                    "scene": "police_2"\n                },\n                {\n                    "name": "Alarm",\n                    "scene": "alarm"\n                },\n                {\n                    "name": "Gaming",\n                    "scene": "gaming"\n                },\n                {\n                    "name": "Night Mode",\n                    "scene": "night_mode",\n                    "lights": [\n                        "0x000000000543dd83"\n                    ]\n                }\n            ]\n        }\n```\n\n## Plugin Config : \n\n| Config                          | Type                | Description                                           | Default |\n|------------------------------------|---------------------|-------------------------------------------------------|--------|\n| addResetSwitch                      | bool      | Should add Reset Switch to reset all scenes. Reset switch will not reset night_mode.                          | true|\n| shouldTurnOff                      | bool      | Global Should turn off lights after scene is over. set false if you want lights to go back to their original state | true|\n| pollingInterval                      | number      | Time in ms, for plugin to poll the light to update HomeKit characteristics | 15000|\n| scenes                      | Array (Object)      | Scenes                          | Required|\n| rgb                      | Object (light ID: true/false)      | Key-Value pair for light Ids you wish to use rgb pallete instead of hsv. | Optional|\n| autoLights                      | Object (light ID: true/false)      | Key-Value pair for light Ids to let Homekit automations set correct values. Homekit trumps Yeelight State | Optional|\n\n### Scenes Config : \n\n| Config                          | Type                | Description                                           | Default |\n|------------------------------------|---------------------|-------------------------------------------------------|--------|\n| name                      | string      | Accessory Name                          | Required, Unique|\n| scene                      | string      | Scene Name. For lists of scenes refer to [Available Preset Scenes](https://github.com/sahilchaddha/homebridge-yeelight-platform#available-presets-scenes) | Required|\n| params                      | string      | Custom Color Flow Params. This parameter is required if scene is `custom`. Refer to [Writing Color Flow params](https://github.com/sahilchaddha/homebridge-yeelight-platform#writing-custom-color-flow) | Optional|\n| lights                      | Array (string)      | Array of Light Ids to set scene to. All other lights will be ignored. | Run scene on all lights|\n| shouldTurnOff                      | bool      | Scene Specific Should turn off lights after scene is over. set false if you want lights to go back to their original state | Global Value|\n\n### Getting Light ID :\n\nOnce your light is connected and displayed on Home App. You can get its light ID by simply looking at Serial Number of the accessory in Home App.\n\n<img src="https://raw.githubusercontent.com/sahilchaddha/homebridge-yeelight-platform/master/serial-no.jpeg" width="200" height="400" />\n\n## Lint\n\n```shell\n    $ npm run lint\n```\n\n## Reference Documentation : \n\nYeelight Official API Documentation\n\nhttps://www.yeelight.com/download/Yeelight_Inter-Operation_Spec.pdf\n\n## Need Help ?\n\nGet Slack Invite => `https://homebridge-slackin.glitch.me/`\n\nSlack Channel => `https://homebridgeteam.slack.com/messages/yeelight-platform`\n\nSlack User => `@sahilchaddha`\n\n### Author\n\nSahil Chaddha\n\nmail@sahilchaddha.com\n'