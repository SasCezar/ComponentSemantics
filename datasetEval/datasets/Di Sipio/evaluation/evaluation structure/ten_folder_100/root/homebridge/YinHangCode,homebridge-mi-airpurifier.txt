b'# homebridge-mi-airpurifier\n[![npm version](https://badge.fury.io/js/homebridge-mi-airpurifier.svg)](https://badge.fury.io/js/homebridge-mi-airpurifier)\n\nXiaoMi air purifier plugins for HomeBridge.   \nThanks for [nfarina](https://github.com/nfarina)(the author of [homebridge](https://github.com/nfarina/homebridge)), [OpenMiHome](https://github.com/OpenMiHome/mihome-binary-protocol), [aholstenson](https://github.com/aholstenson)(the author of [miio](https://github.com/aholstenson/miio)), [licuhui](https://github.com/licuhui), [superszy](https://github.com/superszy), all other developer and testers.   \n\n**Note: I have only a part of these devices, so some devices don\'t have tested. If you find bugs, please submit them to [issues](https://github.com/YinHangCode/homebridge-mi-airpurifier/issues) or [QQ Group: 107927710](//shang.qq.com/wpa/qunwpa?idkey=8b9566598f40dd68412065ada24184ef72c6bddaa11525ca26c4e1536a8f2a3d).**   \n\n![](https://raw.githubusercontent.com/YinHangCode/homebridge-mi-airpurifier/master/images/MiAirPurifier.jpg)\n![](https://raw.githubusercontent.com/YinHangCode/homebridge-mi-airpurifier/master/images/MiAirPurifier2.jpg)\n![](https://raw.githubusercontent.com/YinHangCode/homebridge-mi-airpurifier/master/images/MiAirPurifierPro.jpg)\n![](https://raw.githubusercontent.com/YinHangCode/homebridge-mi-airpurifier/master/images/MiAirPurifier2S.jpg)\n![](https://raw.githubusercontent.com/YinHangCode/homebridge-mi-airpurifier/master/images/MiAirPurifierMAX.jpg)\n\n## Supported Devices\n1.MiAirPurifier(\xe5\xb0\x8f\xe7\xb1\xb3\xe7\xa9\xba\xe6\xb0\x94\xe5\x87\x80\xe5\x8c\x96\xe5\x99\xa8)   \n2.MiAirPurifier2(\xe5\xb0\x8f\xe7\xb1\xb3\xe7\xa9\xba\xe6\xb0\x94\xe5\x87\x80\xe5\x8c\x96\xe5\x99\xa82)   \n3.MiAirPurifierPro(\xe5\xb0\x8f\xe7\xb1\xb3\xe7\xa9\xba\xe6\xb0\x94\xe5\x87\x80\xe5\x8c\x96\xe5\x99\xa8Pro)   \n4.MiAirPurifier2S(\xe5\xb0\x8f\xe7\xb1\xb3\xe7\xa9\xba\xe6\xb0\x94\xe5\x87\x80\xe5\x8c\x96\xe5\x99\xa82S)   \n5.MiAirPurifierMAX(\xe7\xb1\xb3\xe5\xae\xb6\xe7\xa9\xba\xe6\xb0\x94\xe5\x87\x80\xe5\x8c\x96\xe5\x99\xa8MAX) ---- coming soon   \n\n## Pre-Requirements\n1.Make sure your IOS version is ios11 or later.   \n\n## Installation\n1. Install HomeBridge, please follow it\'s [README](https://github.com/nfarina/homebridge/blob/master/README.md).   \nIf you are using Raspberry Pi, please read [Running-HomeBridge-on-a-Raspberry-Pi](https://github.com/nfarina/homebridge/wiki/Running-HomeBridge-on-a-Raspberry-Pi).   \n2. Make sure you can see HomeBridge in your iOS devices, if not, please go back to step 1.   \n3. Install packages.   \n```\nnpm install -g homebridge-mi-airpurifier\n```\n\n## Configuration\n```\n"platforms": [{\n    "platform": "MiAirPurifierPlatform",\n    "deviceCfgs": [{\n        "type": "MiAirPurifier",\n        "ip": "192.168.88.xx",\n        "token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",\n        "airPurifierDisable": false,\n        "airPurifierName": "MiAirPurifier",\n        "silentModeSwitchDisable": false,\n        "silentModeSwitchName": "MiAirPurifier Silent Mode Switch",\n        "buzzerSwitchDisable": true,\n        "buzzerSwitchName": "MiAirPurifier Buzzer Switch",\n        "ledBulbDisable": true,\n        "ledBulbName": "MiAirPurifier LED Switch",\n        "airQualityDisable": false,\n        "airQualityName": "MiAirPurifier AirQuality"\n    }, {\n        "type": "MiAirPurifier2",\n        "ip": "192.168.88.xx",\n        "token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",\n        "airPurifierDisable": false,\n        "airPurifierName": "MiAirPurifier2",\n        "silentModeSwitchDisable": false,\n        "silentModeSwitchName": "MiAirPurifier2 Silent Mode Switch",\n        "temperatureDisable": false,\n        "temperatureName": "MiAirPurifier2 Temperature",\n        "humidityDisable": false,\n        "humidityName": "MiAirPurifier2 Humidity",\n        "buzzerSwitchDisable": true,\n        "buzzerSwitchName": "MiAirPurifier2 Buzzer Switch",\n        "ledBulbDisable": true,\n        "ledBulbName": "MiAirPurifier2 LED Switch",\n        "airQualityDisable": false,\n        "airQualityName": "MiAirPurifier2 AirQuality"\n    }, {\n        "type": "MiAirPurifierPro",\n        "ip": "192.168.88.xx",\n        "token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",\n        "airPurifierDisable": false,\n        "airPurifierName": "MiAirPurifierPro",\n        "silentModeSwitchDisable": false,\n        "silentModeSwitchName": "MiAirPurifierPro Silent Mode Switch",\n        "temperatureDisable": false,\n        "temperatureName": "MiAirPurifierPro Temperature",\n        "humidityDisable": false,\n        "humidityName": "MiAirPurifierPro Humidity",\n        "buzzerSwitchDisable": true,\n        "buzzerSwitchName": "MiAirPurifierPro Buzzer Switch",\n        "ledBulbDisable": true,\n        "ledBulbName": "MiAirPurifierPro LED Switch",\n        "airQualityDisable": false,\n        "airQualityName": "MiAirPurifierPro AirQuality"\n    }, {\n        "type": "MiAirPurifier2S",\n        "ip": "192.168.88.xx",\n        "token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",\n        "airPurifierDisable": false,\n        "airPurifierName": "MiAirPurifier2S",\n        "silentModeSwitchDisable": false,\n        "silentModeSwitchName": "MiAirPurifier2S Silent Mode Switch",\n        "temperatureDisable": false,\n        "temperatureName": "MiAirPurifier2S Temperature",\n        "humidityDisable": false,\n        "humidityName": "MiAirPurifier2S Humidity",\n        "buzzerSwitchDisable": true,\n        "buzzerSwitchName": "MiAirPurifier2S Buzzer Switch",\n        "ledBulbDisable": true,\n        "ledBulbName": "MiAirPurifier2S LED Switch",\n        "airQualityDisable": false,\n        "airQualityName": "MiAirPurifier2S AirQuality"\n    }]\n}]\n```\n\n## Get token\n### Get token by miio2.db\nsetup MiJia(MiHome) app in your android device or android virtual machine.   \nopen MiJia(MiHome) app and login your account.   \nrefresh device list and make sure device display in the device list.   \nget miio2.db(path: /data/data/com.xiaomi.smarthome/databases/miio2.db) file from your android device or android virtual machine.   \nopen website [[Get MiIo Tokens By DataBase File](http://miio2.yinhh.com/)], upload miio2.db file and submit.    \n### Get token by network\nOpen command prompt or terminal. Run following command:\n```\nmiio --discover\n```\nWait until you get output similar to this:\n```\nDevice ID: xxxxxxxx   \nModel info: Unknown   \nAddress: 192.168.88.xx   \nToken: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx via auto-token   \nSupport: Unknown   \n```\n"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" is token.   \nIf token is "???", then reset device and connect device created Wi-Fi hotspot.   \nRun following command:   \n```\nmiio --discover --sync\n```\nWait until you get output.   \nFor more information about token, please refer to [OpenMiHome](https://github.com/OpenMiHome/mihome-binary-protocol) and [miio](https://github.com/aholstenson/miio).   \n\n## Version Logs\n### 0.1.3 (2018-07-11)\n1.add MiAirPurifier, MiAirPurifier2, MiAirPurifier2S, MiAirPurifierPro FilterLife feature.   \n### 0.1.2 (2018-02-10)\n1.update \'package.json\'.   \n### 0.1.1 (2018-01-21)\n1.remove feature of turn to manual mode when set rotation speed, because of it will affect HomeKit automation.   \n### 0.1.0 (2017-11-16)\n1.support for XiaoMi AirPurifier2S.   \n2.modify class name, reduce the probability of conflicts due to the same class name and other plugins.   \n### 0.0.9 (2017-10-28)\n1.fixed bug that XiaoMi AirPurifierPro power status display inaccurate.   \n### 0.0.8 (2017-10-12)\n1.fixed bug that XiaoMi AirPurifier can not work.   \n### 0.0.7 (2017-10-01)\n1.fixed bug that linkage issues between silent mode switch accessory and air purifier accessory.   \n### 0.0.6 (2017-09-22)\n1.fixed bug that silent mode switch accessory don\'t display.   \n2.fixed bug that XiaoMi AirPurifierPro led light accessory display brightness.    \n### 0.0.5 (2017-09-21)\n1.fixed bug that XiaoMi AirPurifier and XiaoMi AirPurifierPro air purifier accessory don\'t display.   \n### 0.0.4 (2017-09-11)\n1.optimized code.   \n### 0.0.3 (2017-09-10)\n1.fixed bug that air purifier accessory disable when set "silentModeSwitchDisable" value is true.   \n### 0.0.2 (2017-09-09)\n1.fixed bug that can not startup.   \n2.add setting silent mode switch disable feature.   \n3.optimized code.   \n### 0.0.1 (2017-09-09)\n1.support for XiaoMi AirPurifier.   \n2.support for XiaoMi AirPurifier2.   \n3.support for XiaoMi AirPurifierPro.   \n'