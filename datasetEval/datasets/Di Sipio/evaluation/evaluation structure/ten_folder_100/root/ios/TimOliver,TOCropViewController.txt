b'# TOCropViewController\n\n<p align="center">\n<img src="https://github.com/TimOliver/TOCropViewController/raw/master/Images/screenshot.jpg" width="900" style="margin:0 auto" />\n</p>\n\n[![Build status](https://badge.buildkite.com/f2e7dda942eae2aadb2c456f1f8a9fba97c8feb378ad8638df.svg)](https://buildkite.com/xd-ci/tocropviewcontroller-run-ci)\n[![Version](https://img.shields.io/cocoapods/v/TOCropViewController.svg?style=flat)](http://cocoadocs.org/docsets/TOCropViewController)\n[![Carthage compatible](https://img.shields.io/badge/Carthage-compatible-4BC51D.svg?style=flat)](https://github.com/Carthage/Carthage)\n[![GitHub license](https://img.shields.io/badge/license-MIT-blue.svg)](https://raw.githubusercontent.com/TimOliver/TOCropViewController/master/LICENSE)\n[![Platform](https://img.shields.io/cocoapods/p/TOCropViewController.svg?style=flat)](http://cocoadocs.org/docsets/TOCropViewController)\n[![Beerpay](https://beerpay.io/TimOliver/TOCropViewController/badge.svg?style=flat)](https://beerpay.io/TimOliver/TOCropViewController)\n[![PayPal](https://img.shields.io/badge/paypal-donate-blue.svg)](https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=M4RKULAVKV7K8)\n[![Twitch](https://img.shields.io/badge/twitch-timXD-6441a5.svg)](http://twitch.tv/timXD)\n\n\n`TOCropViewController` is an open-source `UIViewController` subclass to crop out sections of `UIImage` objects, as well as perform basic rotations. It is excellent for things like editing profile pictures, or sharing parts of a photo online. It has been designed with the iOS Photos app editor in mind, and as such, behaves in a way that should already feel familiar to users of iOS.\n\nFor Swift developers, `CropViewController` is a Swift wrapper that completely encapsulates `TOCropViewController` and provides a much more native, Swiftier interface.\n\n#### Proudly powering apps by\n\n<p align="center">\n<img src="https://github.com/TimOliver/TOCropViewController/raw/master/Images/users.png" width="900" style="margin:0 auto" />\n</p>\n\n## Features\n* Crop images by dragging the edges of a grid overlay.\n* Optionally, crop circular copies of images.\n* Rotate images in 90-degree segments.\n* Clamp the crop box to a specific aspect ratio.\n* A reset button to completely undo all changes.\n* iOS 7/8 translucency to make it easier to view the cropped region.\n* The choice of having the controller return the cropped image to a delegate, or immediately pass it to a `UIActivityViewController`.\n* A custom animation and layout when the device is rotated to landscape mode.\n* Custom \'opening\' and \'dismissal\' animations.\n* Localized in 18 languages.\n\n## System Requirements\niOS 8.0 or above\n\n## Installation\n\n<details>\n  <summary><strong>CocoaPods</strong></summary>\n  \n  <h4>Objective-C</h4>\n\nAdd the following to your Podfile:\n``` ruby\npod \'TOCropViewController\'\n```\n\n<h4>Swift</h4>\n\nAdd the following to your Podfile:\n``` ruby\npod \'CropViewController\'\n```\n</details>\n\n<details>\n  <summary><strong>Carthage</strong></summary>\n\n1. Add the following to your Cartfile:\n``` \ngithub "TimOliver/TOCropViewController"\n```\n\n2. Run `carthage update`\n\n3. From the `Carthage/Build` folder, import one of the two frameworks into your Xcode project. For Objective-C projects, import just `TOCropViewController.framework`  and for Swift, import `CropViewController.framework` instead. Each framework is separate; you do not need to import both.\n\n4. Follow the remaining steps on [Getting Started with Carthage](https://github.com/Carthage/Carthage#getting-started) to finish integrating the framework.\n\n</details>\n\n<details>\n<summary><strong>Manual Installation</strong></summary>\n\nAll of the necessary source and resource files for `TOCropViewController` are in `Objective-C/TOCropViewController`, and all of the necessary Swift files are in `Swift/CropViewController`.\n\nFor Objective-C projects, copy just the `TOCropViewController` directory to your Xcode project. For Swift projects, copy both `TOCropViewController` and `CropViewController` to your project.\n</details>\n\n## Examples\nUsing `TOCropViewController` is very straightforward. Simply create a new instance passing the `UIImage` object you wish to crop, and then present it modally on the screen.\n\nWhile `TOCropViewController` prefers to be presented modally, it can also be pushed to a `UINavigationController` stack.\n\nFor a complete working example, check out the sample apps included in this repo.\n\n<details>\n<summary><strong>Basic Implementation</strong></summary>\n\n#### Swift\n```swift\nfunc presentCropViewController {\n  let image: UIImage = ... //Load an image\n  \n  let cropViewController = CropViewController(image: image)\n  cropViewController.delegate = self\n  present(cropViewController, animated: true, completion: nil)\n}\n\nfunc cropViewController(_ cropViewController: CropViewController, didCropToImage image: UIImage, withRect cropRect: CGRect, angle: Int) {\n        // \'image\' is the newly cropped version of the original image\n    }\n```\n\n#### Objective-C\n```objc\n- (void)presentCropViewController\n{\n  UIImage *image = ...; // Load an image\n  \n  TOCropViewController *cropViewController = [[TOCropViewController alloc] initWithImage:image];\n  cropViewController.delegate = self;\n  [self presentViewController:cropViewController animated:YES completion:nil];\n}\n\n- (void)cropViewController:(TOCropViewController *)cropViewController didCropToImage:(UIImage *)image withRect:(CGRect)cropRect angle:(NSInteger)angle\n{\n  // \'image\' is the newly cropped version of the original image\n}\n```\n\nSimilar to many `UIKit` `UIViewController` subclasses, like `MFMailComposeViewController`, the class responsible for presenting view controller should also take care of dismissing it upon cancellation. To dismiss `TOCropViewController`, implement the `cropViewController:didFinishCancelled:` delegate method, and call `dismissViewController:animated:` from there.\n</details>\n\n<details>\n<summary><strong>Making a Circular Cropped Image</strong></summary>\n\n#### Swift\n```swift\nfunc presentCropViewController() {\n    var image: UIImage? // Load an image\n    let cropViewController = CropViewController(croppingStyle: .circular, image: image)\n    cropViewController.delegate = self\n    self.present(cropViewController, animated: true, completion: nil)\n}\n\nfunc cropViewController(_ cropViewController: TOCropViewController?, didCropToCircularImage image: UIImage?, with cropRect: CGRect, angle: Int) {\n    // \'image\' is the newly cropped, circular version of the original image\n}\n```\n\n\n#### Objective-C\n```objc\n- (void)presentCropViewController\n{\nUIImage *image = ...; // Load an image\n\nTOCropViewController *cropViewController = [[TOCropViewController alloc] initWithCroppingStyle:TOCropViewCroppingStyleCircular image:image];\ncropViewController.delegate = self;\n[self presentViewController:cropViewController animated:YES completion:nil];\n}\n\n- (void)cropViewController:(TOCropViewController *)cropViewController didCropToCircularImage:(UIImage *)image withRect:(CGRect)cropRect angle:(NSInteger)angle\n{\n// \'image\' is the newly cropped, circular version of the original image\n}\n```\n</details>\n\n<details>\n<summary><strong>Sharing Cropped Images Via a Share Sheet</strong></summary>\n\n#### Swift\n```swift\nfunc presentCropViewController() {\n    var image: UIImage? // Load an image\n    let cropViewController = CropViewController(image: image)\n    cropViewController.showActivitySheetOnDone = true\n    self.present(cropViewController, animated: true, completion: nil)\n}\n```\n\n#### Objective-C\n```objc\n- (void)presentCropViewController\n{\n  UIImage *image = ...; // Load an image\n  \n  TOCropViewController *cropViewController = [[TOCropViewController alloc] initWithImage:image];\n  cropViewController.showActivitySheetOnDone = YES;\n  [self presentViewController:cropViewController animated:YES completion:nil];\n}\n```\n</details>\n\n<details>\n<summary><strong>Presenting With a Custom Animation</strong></summary>\n\nOptionally, `TOCropViewController` also supports a custom presentation animation where an already-visible copy of the image will zoom in to fill the screen.\n\n#### Swift\n```swift\n\nfunc presentCropViewController() {\n    var image: UIImage? // Load an image\n    var imageView = UIImageView(image: image)\n    var frame: CGRect = view.convert(imageView.frame, to: view)\n    \n    let cropViewController = CropViewController(image: image)\n    cropViewController.delegate = self\n    self.present(cropViewController, animated: true, completion: nil)\n    cropViewController.presentAnimated(fromParentViewController: self, fromFrame: frame, completion: nil)\n}\n```\n\n#### Objective-C\n```objc\n- (void)presentCropViewController\n{\n  UIImage *image = ...;\n  UIImageView *imageView = [[UIImageView alloc] initWithImage:image];\n  CGRect frame = [self.view convertRect:imageView.frame toView:self.view];\n  \n  TOCropViewController *cropViewController = [[TOCropViewController alloc] initWithImage:image];\n  cropViewController.delegate = self;\n  [self presentViewController:cropViewController animated:YES completion:nil];\n  [cropViewController presentAnimatedFromParentViewController:self fromFrame:frame completion:nil];\n}\n```\n</details>\n\n## Architecture of `TOCropViewController`\nWhile traditional cropping UI implementations will usually just have a dimming view with a square hole cut out of the middle, `TOCropViewController` goes about its implementation a little differently.\n\n<p align="center">\n<img src="https://raw.githubusercontent.com/TimOliver/TOCropViewController/master/breakdown.jpg" width="702" style="margin:0 auto" />\n</p>\n\nSince there are two views that are overlaid over the image (A dimming view and a translucency view), trying to cut a hole open in both of them would be rather complex. Instead, an image view is placed in a scroll view in the background, and a copy of the image view is placed on top, inside a container view that is clipped to the designated cropping size. The size and position of the foreground image is then made to match the background view, creating the illusion that there is a hole in the dimming views, and minimising the number of views onscreen.\n\n## Supporters\n\n### Sponsors\n\n<a href="https://github.com/marcosgriselli"><img src="https://avatars0.githubusercontent.com/u/14804033?s=460&v=4" width="100" /></a>\n\n### Donations\n\n<p float="left">\n\t<a href="https://apps.apple.com/us/app/mematic-the-meme-maker/id491076730">\n\t<img src="https://github.com/TimOliver/TOCropViewController/raw/master/Images/Donators/Mematic.jpg" height="100" style="padding-right:20px" />\n\t</a>   \n\t<a href="https://apps.apple.com/us/app/credminder-credential-manager/id1438352691">\n\t<img src="https://github.com/TimOliver/TOCropViewController/raw/master/Images/Donators/CredMinder.jpg" height="100" />\n\t</a>\n</p>\n\n## Credits\n`TOCropViewController` was originally created by [Tim Oliver](http://twitter.com/TimOliverAU) as a component for [iComics](http://icomics.co), a comic reader app for iOS.\n\nThanks also goes to `TOCropViewController`\'s growing list of [contributors](https://github.com/TimOliver/TOCropViewController/graphs/contributors)!\n\niOS Device mockups used in the screenshot created by [Pixeden](http://www.pixeden.com).\n\n## License\nTOCropViewController is licensed under the MIT License, please see the [LICENSE](LICENSE) file. ![analytics](https://ga-beacon.appspot.com/UA-5643664-16/TOCropViewController/README.md?pixel)\n'