b'passff\n======\n\n[![Join the chat at https://gitter.im/jvenant/passff](https://badges.gitter.im/Join%20Chat.svg)](https://gitter.im/jvenant/passff?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)\n\n**[zx2c4 pass](http://www.zx2c4.com/projects/password-store/)** management extension for **Mozilla Firefox**. [Pending Chrome port](https://github.com/passff/passff/issues/105)\n\n**Official signed version can be found on the [Mozilla add-on page](https://addons.mozilla.org/firefox/addon/passff)**\n\n![passff](https://user-images.githubusercontent.com/1518387/33810636-8c95df16-de07-11e7-8857-283e7300ecff.png)\n\n### Overview\nThis extension will allow you to access your **[zx2c4 pass](http://www.zx2c4.com/projects/password-store/)** repository directly from your web browser.\n\nYou can choose to automatically fill and submit login forms if a matching password entry is found.\n\n### Browser compatibility\n* Firefox 50+ (or 54 for [full support](#i-use-an-old-version-of-firefox-and-i-have-weird-behaviours))\n\n### Installation\n\n##### xz2c4 pass repository\nThis extension requires **[zx2c4 pass](http://www.zx2c4.com/projects/password-store/)** to be installed and set up with a password repository. Make sure you can execute `pass show some-password-name` in a terminal before continuing.\n\n##### Host application\nFor the extension to communicate with your system\'s `pass` script, you need to install what\'s called the host application from [the official GitHub repository](https://github.com/passff/passff-host).\nThe host application allows the extension to communicate with `pass` on your system.\n\n##### PassFF extension\nInstall the current release of PassFF for your browser:\n  - [Firefox](https://addons.mozilla.org/firefox/addon/passff)\n\nPrevious releases are available for download as XPI files from [our releases page](https://github.com/passff/passff/releases). However, this is strongly discouraged for security reasons!\n\n##### A graphical *pinentry* program\nThis program prompts you for your passphrase. One is probably already installed.\nIf PassFF does not work, install one of these programs:\n  - For Ubuntu/Debian: `pinentry-gtk` or `pinentry-qt` or `pinentry-fltk`\n  - For CentOS/RHEL: `pinentry-qt4` or `pinentry-qt`\n  - For MacOS: `pinentry-mac`\n\nIf that does not work for you, you may have to configure GnuPG to use the right pinentry program. See the [Troubleshooting](#troubleshooting) section.\n\nNote: Since the host app runs non-interactively, **a console *pinentry* such as `pinentry-ncurses` is useless** and may render PassFF unusable if this is the default pinentry.\n\n##### One-time-password (OTP) Authentication\nPassFF can generate tokens to fill OTP input fields if the [pass-otp](https://github.com/tadfisher/pass-otp) extension is installed and the key URI is configured in the password file.\n\n### Password formats\nTo make the most of the extension, you should format your password files according to our expected formats.\n\nIf you only want the extension to fill out passwords, you don\'t need any special format for your password files. But if you follow our formats, the extension can also visit the website\'s URL and fill out the username and other input fields for you.\n\n##### Multi-line format\nThis is the *preferred organizational scheme used by the author* of [pass](https://www.passwordstore.org/).\n\n```\n<the_password>\nlogin: <the_login>\nurl: <the_url>\n<other_inputfield_name> : <inputfield_value>\n```\n\nYou can change or configure additional names for the `login` and `url` fields in preferences.\n\nIf none of the provided fields matches a login field name, the username is taken from the filename, e.g.\n`example.com/janedoe` will have a default username of `janedoe`.\n\nLines besides the login and URL that match the format `<other_inputfield_name>: <value>` can be used to fill in input fields besides the login and password fields. The left hand side of the colon should match the input field\'s `name` or `id` attribute.\n\nExamples\n```\nnu8kzeo2Aese\nlogin: bob\nurl: https://github.com/login\n```\n\n```\nAephieryZ2Ya\nlogin: kevin\nurl: example.com\notpauth://totp/Example:alice@google.com?secret=JBSWY3DPEHPK3PXP&issuer=Example\npin: 1234\n```\n\n##### File-structure format\nAlternatively, you can organize your login information with file structure. For example, if you have this file structure:\n* www\n  * supersite.com\n    * login\n    * password\n    * url\n    * totp\n  * mysite.com\n\nPassFF will\n* get the login from the "login", the url from the "url" and the password from the "password" file under supersite.com\n* get the login from the "login" field inside the mysite.com entry for mysite.com (see [format above](#multi-line-format))\n\nThe file structure approach does not support custom input fields.\n\nNote that the file structure format is recognized and assumed by PassFF whenever a file name matches a reserved field name such as `user`, `url`, `password` or `login`. This might cause unexpected behavior in cases where there is a file in [multi-line format](#multi-line-format) whose name happens to be a reserved field name.\n\n##### Improve Suggestions\n\nUnless you activate the preference "Index URL fields on startup", the auto-suggestions in the menus are based on matches of the current web page\'s URL against the *names* of password store entries. In the following, you find an explanation how you can improve matching quality by adapting the names and paths of your password store entries.\n\nGenerally speaking, the match quality is best, if the exact hostname as well as all alphanumeric parts of the URL\'s path appear exactly in your entry\'s name. An entry is excluded from the matching if no part of the hostname is contained in its name. Matching (parts of) the hostname is more important than matching parts from the rest of the URL.\n\nFor the URL `https://bugs.gentoo.org/index.cgi?GoAheadAndLogIn=1`, best match quality is reached if your password store entry contains the strings `bugs.gentoo.org`, `index` and `GoAheadAndLogIn` in arbitrary order, but for it to be ranked in the matching process at all, it\'s enough for it to contain the strings `bugs` or `gentoo`.\n\n*Example (Only one entry per hostname):* If you don\'t have multiple credentials for one hostname in your password store, you get the best results from naming the entries after the exact hostname. In this scenario, if you name an entry `/some/arbitrary/path/bugs.gentoo.org`, it will always rank highest on `https://bugs.gentoo.org/index.cgi?GoAheadAndLogIn=1`.\n\n*Example (More than one entry per hostname):* If you happen to have several credentials for one hostname, you could name a directory in your password store after the hostname and list the different credentials inside that directory. Suppose you have different credentials for each of the following URLs:\n```\nhttps://my.example.com/cloud\nhttps://my.example.com/blog?login\nhttps://my.example.com/blog?admin\n```\nYou could store them in your password store as \n```\n/some/path/my.example.com/cloud\n/some/path/my.example.com/blog-login\n/some/path/my.example.com/blog-admin\n```\nHowever, the following will work equally well:\n```\n/business/cloud/my.example.com\n/personal/my.example.com-blog-login\n/personal/my.example.com-blog-admin\n```\n\n### Configuration and preferences\n\n##### Extension preferences\nAccessible from the gear button in the toolbar menu, preferences let you fine-tune the behaviour of PassFF.\nSome of them are described below:\n\n- Inputs (A comma separated list of input names. Input field names in a web page *containing* one of those values will be filled with the corresponding value.)\n  - Passwords input names\n  - Login input names\n  - OTP input names\n- Fields (A comma separated list of field names. The first matching field in the password data or in the store tree will be used as the corresponding value.)\n  - Login field names\n  - Password field names\n  - URL field names\n  - OTP Auth field names\n  - Regex for hiding items (tests the full path to the item)\n- Adding Passwords\n  - The default length for generating passwords\n  - Whether or not to include special characters in generated passwords by default\n  - Preferred new password method ("generate" or "insert")\n\n##### Host application preferences\nIf you use a customized `pass` installation: environment variables, customized repository path or extensions, you may have to [configure the host application accordingly](https://github.com/passff/passff-host#preferences).\n\n### Usage\nOnce installed, you should have a new icon in your toolbar. Click the icon to browse your password repository or search using a **fuzzy matching** algorithm.\n\n##### Keyboard shortcuts\nThe default shortcut to open the menu is <kbd>ctrl</kbd>+<kbd>y</kbd>.\n\nWith the menu open, you can press <kbd>enter</kbd> to execute one of the following commands, according to your preferences:\n- Goto, fill and submit\n- Goto and fill\n- Fill and submit\n- Fill\n\n##### Input menu\nPassFF can *mark fillable input fields with the PassFF icon*. It adds an icon in the fields that PassFF can automatically fill. The icon is clickable and pops up a menu to select the password.\nPassFF fills the input fields and optionally submit depending on your preferences. You can always override this behavior by clicking the pencil (Fill) or the paper plane (Fill & Submit).\n\nThis feature can be disabled in the preferences.\n\n#### Contextual menu\nIn *any* input field, fillable or not, you can access a contextual menu (right-click) in order to:\n  - Add the input field\'s name in the *Login input names* for (auto)filling,\n  - Add the input field\'s name in the *OTP input names* for (auto)filling,\n  - Select a password to fill the input fields.\n\n#### Adding new passwords\nIn order to add a password in your repository, select the \'plus\' (+) icon in the toolbar menu.\n\n### Issues\nIf you\'re having problems, the most common causes are misconfigured preferences or an incorrect installation of the host application. You can get more information by [debugging the extension](docs/CONTRIBUTING.md).\n\nFirst, [make sure the host application is installed correctly](https://github.com/passff/passff-host).\n\nConfigure the script\'s execution parameters appropriately in the host app `passff.py`: E.g., set `COMMAND` to the path to the `pass` binary (if installed with homebrew, the default location is `/usr/local/bin/pass`). With those settings in place, the extension should be able to find your passwords.\n\n### Troubleshooting\n\n##### I use an old version of Firefox and I have weird behaviours\nPassFF is developed for the [last version of **Firefox**](https://en.wikipedia.org/wiki/Firefox_version_history#Current_and_future_releases).\nPassFF should also work on previous versions above Firefox 50, which introduced [*native messaging*](https://blog.mozilla.org/addons/2016/08/25/webextensions-in-firefox-50/) for WebExtensions.\nHowever, HTTP authentication is available from Firefox 54 onwards.\n\n##### I get a window saying: *gpg: decryption failed: No secret key*\n##### Nothing happens when I click on a password and select an action\n##### PassFF does not prompt me for the passphrase\n##### PassFF works but only intermittently\nIt may be a problem with your pin-entry program, while your gpg-agent sometimes caches your passphrase.\n\nPossible solutions:\n  - [Install a graphical pinentry program](#A-graphical-pinentry-program)\n  - Configure GnuPG to call your pinentry program\n    - Add the line `pinentry-program /path/to/your/pinentry` to `~/.gnupg/gpg-agent.conf`\n    - You may need to create this file.\n    - See https://wiki.archlinux.org/index.php/GnuPG#pinentry\n\nRelated issues:\n * [No dialog opening up on Arch Linux](https://github.com/passff/passff/issues/330)\n * [Decryption failed on MacOS](https://github.com/passff/passff/issues/325)\n * [Script execution failed on CentOS](https://github.com/passff/passff/issues/367)\n \n##### The icon/toolbar menu suggests no or the wrong entries\n\nSee the section [Improve Suggestions](https://github.com/passff/passff#improve-suggestions) above.\n\n### Contributing\n\n##### Is the documentation too obscure?\nOpen a new issue. We will gratefully clarify the doc.\n\n##### Would you like to translate PassFF?\nOpen a new issue to tell us about it, or make a pull request.\n\n##### Would you like to code?\nSee [CONTRIBUTING](docs/CONTRIBUTING.md).\n\n### Thanks\nDevelopment and improvements\n * [Johan Venant](https://github.com/jvenant)\n * [Tobias Umbach](https://github.com/sometoby)\n * [Lenz Weber](https://github.com/phryneas)\n * [Thomas Vogt](https://github.com/tuxor1337)\n\nRussian translation : [Grigorii Horos](https://github.com/horosgrisa)\n'