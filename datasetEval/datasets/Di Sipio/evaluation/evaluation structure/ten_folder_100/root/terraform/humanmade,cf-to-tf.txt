b'<table width="100%">\n\t<tr>\n\t\t<td align="left" width="80%">\n\t\t\t<strong>CloudFormation to Terraform</strong><br />\n            A simple cli tool for generating Terraform configuration for existing CloudFormation templates.\n\t\t</td>\n\t\t<td align="center" width="20%">\n\t\t\t<a href="https://travis-ci.org/humanmade/cf-to-tf">\n\t\t\t\t<img src="https://travis-ci.org/humanmade/cf-to-tf.svg?branch=master" alt="Build status">\n\t\t\t</a>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td align="center">\n\t\t\tA <strong><a href="https://hmn.md/">Human Made</a></strong> project. Maintained by @nathanielks.\n\t\t</td>\n\t\t<td align="center">\n\t\t\t<img src="https://hmn.md/content/themes/hmnmd/assets/images/hm-logo.svg" width="100" />\n\t\t</td>\n\t</tr>\n</table>\n\n# CloudFormation to Terraform\n\nThis node CLI tool is used for generating both Terraform configuration files as well as Terraform state so that you can use Terraform to manage CloudFormation templates. To further clarify, it does not generate terraform configuration for the individual resources CloudFormation provisions, it generates an `aws_cloudformation_stack` resource so that you can manage your existing CloudFormation stacks with Terraform instead of or in conjunction with the AWS Console and CLI.\n\n## Getting Started\n\n```\nnpm i -g @humanmade/cf-to-tf\n```\n\n### Recommended Dependencies\n\nAs this was designed to generate Terraform resources, it\'d be a good idea to install [`terraform`](https://www.terraform.io/intro/getting-started/install.html). You can install the binary by itself or use a tool like `brew` to manage it for you.\n\nIt\'s also recommended to install [`json2hcl`](https://github.com/kvz/json2hcl) as this will assist in processing output from `cf-to-tf` later.\n\n## Demo\n\nLet\'s use the following CloudFormation Stack response as an example:\n```\n{\n    "Stacks": [\n        {\n            "StackId": "arn:aws:cloudformation:eu-central-1:123456789012:stack/foobarbaz/255491f0-71b8-11e7-a154-500c52a6cefe",\n            "Description": "FooBar Stack",\n            "Parameters": [\n                {\n                    "ParameterValue": "bar",\n                    "ParameterKey": "foo"\n                },\n                {\n                    "ParameterValue": "baz",\n                    "ParameterKey": "bar"\n                },\n                {\n                    "ParameterValue": "qux",\n                    "ParameterKey": "baz"\n\n                }\n            ],\n            "Tags": [\n                {\n                    "Value": "bar",\n                    "Key": "foo"\n                },\n                {\n                    "Value": "qux",\n                    "Key": "baz"\n                }\n            ],\n            "Outputs": [\n                {\n                    "Description": "Foobarbaz",\n                    "OutputKey": "FooBarBaz",\n                    "OutputValue": "output value"\n                }\n            ],\n            "CreationTime": "2017-07-26T04:08:57.266Z",\n            "Capabilities": [\n                "CAPABILITY_IAM"\n            ],\n            "StackName": "foobarbaz",\n            "NotificationARNs": [],\n            "StackStatus": "CREATE_COMPLETE",\n            "DisableRollback": true\n        }\n    ]\n}\n```\n\nRunning `cf-to-tf --stack foobarbaz config | json2hcl | cf-to-tf clean-hcl | terraform fmt -` will generate the following config:\n\n```\nresource "aws_cloudformation_stack" "network" {\n  capabilities     = ["CAPABILITY_IAM"]\n  disable_rollback = true\n  name             = "foobarbaz"\n\n  parameters = {\n    foo = "bar"\n    bar = "baz"\n    baz = "qux"\n  }\n\n  tags = {\n    foo = "bar"\n    baz = "qux"\n  }\n}\n```\n\n\n## Usage\n\n```\nUsage: cf-to-tf [options] [command]\n\n\nOptions:\n\n  -s, --stack <stack>                 The CloudFormation stack to import\n  -r, --resource-name <resourceName>  The name to assign the terraform resource\n  -h, --help                          output usage information\n\n\nCommands:\n\n  config      Generates Terraform configuration in JSON\n  state       Generates Terraform state file in JSON\n  template    Prints the CloudFormation Stack Template\n  clean-hcl   Cleans generated HCL according to my preferences\n```\n\n### Terraform JSON Files\n\nThis tool is designed to be used in conjunction with other tools. It will only output the data to `STDOUT` and is designed to be piped to another program to write the file to a location. For example, to generate a configuration file for a stack named `lambda-resources`, we could do the following:\n\n```\ncf-to-tf -s lambda-resources config | tee main.tf.json\n```\n\nThis command will fetch a CloudFormation stack named `lambda-resources` and generate the required Terraform configuration for it. We then pipe the output to `tee` which will write to a file named `main.tf.json`. Because HCL is JSON compatible, Terraform can read the `main.tf.json` natively.\n\n### Terraform State\n\nTo generate the associated Terraform state for this CloudFormation stack, you would run the following:\n\n```\ncf-to-tf -s lambda-resources state | tee terraform.tfstate\n```\n\nThis will create a state file from scratch. It assumes you don\'t already have an existing state file in place. I\'m considering updating the tool to write just the resource portion of the state so it can be added to an existing state file, but that wasn\'t an immediate priority.\n\n### Pretty Printing\n\nBoth of these commands will generate compressed JSON output, meaning whitespace has been stripped. To pretty print the output for enhanced readability, you could pipe the output to `jq`, and then to `tee`:\n\n```\ncf-to-tf -s lambda-resources config | jq \'.\' | tee main.tf.json\ncf-to-tf -s lambda-resources state | jq \'.\' | tee terraform.tfstate\n```\n\n### Generating HCL\n\nIt\'s also possible to use a tool called [`json2hcl`](https://github.com/kvz/json2hcl) to generate HCL:\n\n```\ncf-to-tf -s lambda-resources config | json2hcl | tee main.tf\n```\n\nUnfortunately, while `json2hcl` outputs valid HCL, it\'s not in the format I like. To solve that problem, the `clean-hcl` command is also available. To output HCL in the format you\'ll normally see, you can execute this chain:\n\n```\ncf-to-tf -s lambda-resources config | json2hcl | cf-to-tf clean-hcl | terraform fmt - | tee main.tf\n```\n\nWe\'re doing the same thing we were doing before, but now we\'re also piping the result to `cf-to-tf clean-hcl` which formats the file a certain way, then piping it to `terraform fmt -` which formats the file further (primarily, this tool aligns `=` and adds newlines where necessary).\n\n### Reading from STDIN\n\nIt\'s also possible to have `cf-to-tf` read stack data from `STDIN`. For example, if you have the JSON response from the `aws-cli` call stored in a variable for re-use, you can do the following:\n\n```\nJSON="$(aws cloudformation describe-stacks --stack-name lambda-resources)"\necho "$JSON" | cf-to-tf -s - config\n```\n\n### AWS Authentication\n\nThe command uses the AWS SDK under the hood to retrieve the CloudFormation stack details, so set your authentication credentials as you would normally (`~/.aws/credentials`, `AWS_PROFILE`, `AWS_REGION`, etc).\n\n### Batch Import scripts\n\nFor an example of how to use this script in batch operations importing multiple stacks in multiple regions, refer to [this gist](https://gist.github.com/nathanielks/9282d59ab065f8ee0e373ca7199df085).\n'