b'# appengine-maven-repository\n\nPrivate Maven repositories hosted on Google App-Engine, backed by Google Cloud Storage, supporting HTTP Basic authentication and minimalistic user access control deployed in less than 5 minutes.\n\n   * [Why ?](#why-)\n   * [Installation](#installation)\n      * [Prerequisites](#prerequisites)\n      * [Configuration](#configuration)\n      * [Deployment](#deployment)\n   * [Usage](#usage)\n   * [Limitations](#limitations)\n   * [License](#license)\n   \n# Why ?\n\nPrivate Maven repositories shouldn\'t cost you [an arm and a leg](https://www.cloudrepo.io/pricing.html), nor requires you to become a [Linux Sys-Admin](https://inthecheesefactory.com/blog/how-to-setup-private-maven-repository/en) to setup, and should ideally be **zero maintenance** and **costs nothing**.\n\nThanks to Google App-Engine\'s [free quotas](https://cloud.google.com/appengine/docs/quotas), you\'ll benefits for free of:\n\n* 5GB of storage\n* 1GB of daily incoming bandwidth\n* 1GB of daily outgoing bandwidth\n* 20,000+ storage ops per day\n\nMoreover, no credit card is required to benefits of the quotas above.\n\n# Installation\n\n## Prerequisites\n\n### Create a new Project\nFirst of all, you\'ll need to go to your [Google Cloud console](https://console.cloud.google.com/projectselector/appengine/create?lang=java&st=true) to create a new App Engine application: \n\n![](https://i.imgur.com/SD1WwP3.png)\n\nAs soon as your project is created, a default [Google Cloud storage bucket](https://console.cloud.google.com/storage/browser) has been automatically created for you which provides the first 5GB of storage for free.\n\n### Setup the Google Cloud SDK\n\nFollow the [official documentation](https://cloud.google.com/sdk/docs/) to install the latest Google Cloud SDK. As a shorthand, you\'ll find below the Ubuntu/Debian instructions:\n\n\n```bash\n$ export CLOUD_SDK_REPO="cloud-sdk-$(lsb_release -c -s)"\n$ echo "deb http://packages.cloud.google.com/apt $CLOUD_SDK_REPO main" | sudo tee -a /etc/apt/sources.list.d/google-cloud-sdk.list\n$ curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -\n$ sudo apt-get update && sudo apt-get install google-cloud-sdk\n```\n\nDo not forget to install the `app-engine-java` [component](https://cloud.google.com/sdk/docs/components#external_package_managers). If you installed the Google Cloud SDK using the instructions above:\n\n```bash\n$ sudo apt-get install google-cloud-sdk-app-engine-java\n```\n\nAs a last step, configure the `gcloud` command line environment and select your newly created App Engine project when requested to do so:\n\n```bash\n$ gcloud init\n$ gcloud auth application-default login\n```\n\n## Configuration\n\nClone (or [download](https://github.com/renaudcerrato/appengine-maven-repository/archive/master.zip)) the source code:\n\n```bash\n$ git clone https://github.com/renaudcerrato/appengine-maven-repository.git\n```\n\nUpdate [`WEB-INF/users.txt`](src/main/webapp/WEB-INF/users.txt) to declare users, passwords and permissions:\n\n```ini\n# That file declares your users - using basic authentication.\n# Minimalistic access control is provided through the following permissions: write, read, or list.\n# Syntax is:\n# <username>:<password>:<permission>\n# (use \'*\' as username and password to declare anonymous users)\nadmin:l33t:write\njohn:j123:read\ndonald:coolpw:read\nguest:guest:list\n```\n> The `list` permission allows users to list the content of the repository but prohibits downloads. The `read` permission allows downloads (and implies `list`). The `write` permission allows uploads (and implies `read`).\n\n> Anonymous users are supported by using "*" for both username and password. For example, `*:*:read` will allow anonymous read access. \n\n## Deployment\n\nOnce you\'re ready to go live, just push the application to Google App-Engine:\n\n```bash\n$ cd appengine-maven-repository\n$ ./gradlew appengineDeploy\n```\n\nAnd voil\xc3\xa0! Your private Maven repository is hosted and running at the following address:\n\n`https://<your-project-id>.appspot.com`\n\n# Usage\n\nYou\'ll find some usage examples in the [examples](examples) folder. There\'s absolutely no extra steps required to fetch and/or deploy Maven artifacts to your repository: simply use your favorite Maven tools as you\'re used to do. \n\nAn example deploying artifacts using the maven plugin for Gradle:\n\n```gradle\napply plugin: \'java\'\napply plugin: \'maven\'\n\n...\n\nuploadArchives {\n    repositories {\n        mavenDeployer {\n            repository(url: "https://<your-project-id>.appspot.com") {\n                authentication(userName: "admin", password: "s3curepa55w0rd")\n            }\n            pom.version = "1.0.0"\n            pom.artifactId = "test"\n            pom.groupId = "com.example"\n        }\n    }\n}\n```\n\nUsing the above plugin, deploying artifacts to your repository is as simple as:\n\n```bash\n$ ./gradlew upload\n```\n\nIn the other way, accessing password protected Maven repositories using Gradle only requires you to specify the `credentials` closure:\n\n```gradle\nrepositories {\n    ...\n    maven {\n        credentials {\n            username \'user\'\n            password \'YouCantGuess\'\n        }\n        url "https://<your-project-id>.appspot.com"\n    }\n}\n```\n\n> Ensure you do NOT commit credentials with your code. With Gradle, you can achieve this by amending the above examples using the approach specified [here](http://stackoverflow.com/a/12751665/752167) of moving your creds to `~/.gradle/gradle.properties` and only referring to the variable names within your build.\n\n# Limitations\n\nGoogle App-Engine HTTP requests are limited to 32MB - and thus, any artifacts above that limit can\'t be hosted.\n\n# License\n\n```\nCopyright 2018 Cerrato Renaud\n\nLicensed under the Apache License, Version 2.0 (the "License");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n```\n'