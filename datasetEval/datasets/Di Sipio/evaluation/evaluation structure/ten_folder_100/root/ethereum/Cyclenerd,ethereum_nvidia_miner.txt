b'# Ethereum Mining with NVIDIA Graphics Cards and Ubuntu\n\n**USB** flash drive **ISO** image for **Ethereum** mining with **NVIDIA** graphics cards and Ubuntu **GNU/Linux** (64-bit Intel/AMD (x86_64)).\nOther cryptocurrencies, such as **Monero** or **Zcash**, can also be mined.\n\n![Ubuntu](https://www.nkn-it.de/img/distro/logos/ubuntu.png)\n![NVIDIA](https://www.nkn-it.de/img/logos/nvidia_cuda.jpg)\n\nPress the \xf0\x9f\x91\x81\xef\xb8\x8f "Watch" button to get updates. Do not forget the  \xf0\x9f\x8c\x9f "Star" button \xf0\x9f\x98\x80\n\n\xf0\x9f\x9a\xa8\n**Use at your own risk.**\n**Hope to help you.**\n**Do not make me responsible for broken hardware.**\n\xf0\x9f\x9a\xa8\n\n## Introduction\n\n* This ISO image is based on \xf0\x9f\x90\xa7 **Ubuntu 16.04.3 LTS (Server)**.\n* **KISS**, keep it simple, stupid. Only the most necessary included. No \xf0\x9f\x92\xa9 bullshit.\n* **NVIDIA** drivers version **390.25** installed.\n* **CUDA 8** (`/usr/local/cuda-8.0`) and **CUDA 9.1** (`/usr/local/cuda-9.1`) ready to be used.\n* [ethminer](https://github.com/ethereum-mining/ethminer) with the optimized code by [David Li](https://github.com/davilizh) (from NVIDIA) already compiled and ready for use.\n\t* The code is optimized for NVIDIA GTX 1060, can improve NVIDIA GTX 1060 with 2 GPC performance by 15%, and NVIDIA GTX 1060 with 1 GPC performance by more than 30%. Meanwhile, it also increases performance on NVIDIA GTX 1070.\n* Claymore\'s dual miner version 10.6, XMR-Stak Monero miner and EWBF\'s Zcash miner are also included.\n* Already configured to participate in the [ethermine](https://ethermine.org/) ethereum mining pool.\n* The installation is optimized for operation **without monitor** (headless).\n* No hard disk drive (HDD/SSD) required. Installation on USB flash drive.\n* Created and **tested** with NVIDIA GeForce GTX 1060, NVIDIA GeForce GTX 1070 and NVIDIA GTX 1080.\n\n\n## Navigation\n\n* [Leave a Tip](#leave-a-tip-)\n* [Installation](#installation)\n\t* [Download](#download)\n\t\t* [MD5](#md5)\n\t* [Copy](#copy)\n\t\t* [Windows](#windows)\n\t\t* [macOS](#-macos)\n\t* [Mainboard](#mainboard)\n\t* [Login](#login)\n\t* [Setup](#setup)\n\t* [Mine](#mine)\n\t\t* [miner.sh](#minersh)\n\t* [Overclocking](#overclocking)\n\t\t * [With nvidia-overclock.sh (nvidia-settings)](#with--nvidia-overclocksh-nvidia-settings)\n\t\t * [Why not use nvidia-smi?](#why-not-use-nvidia-smi)\n * [Other things you should do](#other-things-you-should-do)\n\t* [Update ethminer Ethereum Miner](#update-ethminer-ethereum-miner)\n\t* [Update Claymore\'s Dual Ethereum Miner](#update-claymores-dual-ethereum-miner)\n\t* [Update XMR-Stak Monero Miner](#update-xmr-stak-monero-miner)\n\t* [Update EWBF\'s CUDA Zcash Miner](#update-ewbfs-cuda-zcash-miner)\n\t* [Install ccminer CUDA Miner](#install-ccminer-cuda-miner)\n * [Wi-Fi WLAN](#wi-fi-wlan)\n* [Monitoring](#monitoring)\n\t* [Munin](#munin)\n\t* [Fail2ban](#fail2ban)\n\t* [VNC](#vnc)\n* [Help](#help-)\n* [Known Issues](#known-issues)\n\n\n## Leave a Tip \xf0\x9f\x99\x8f\n\nWith this ISO image, you can immediately mine Ethereum (ETH).\nDo not spend long time searching and researching.\n\nI would be happy about a small donation. Thank you very much.\n\n| Currency | Address                                      |\n|----------|----------------------------------------------|\n| Ethereum | `0xfbbc9f870bccadf8847eba29b0ed3755e30c9f0d` |\n| Bitcoin  | `13fQA3mCQPmnXBDSmfautP4VMq6Sj2GVSA`         |\n\n\n\n## Installation\n\nIf you do not trust me and do not want to use the image,\nyou will find all configuration files and scripts in the [files](https://github.com/Cyclenerd/ethereum_nvidia_miner/tree/master/files) folder.\nYou only have to install an Ubuntu Linux with all the drivers and tools yourself.\n\nIf you want to get started quickly, simply use the pre-configured ISO image\n(contains the shell scripts, tools, and all necessary drivers).\n\n\n### Download\n\nDownload the ISO image via BitTorrent (`ethereum-ubuntu-nvidia-miner_v3.img.7z.torrent`).\nCompressed 1.8GB, unzipped 7.5GB.\n\n[![Download](https://www.nkn-it.de/img/download_button_200px.png)](https://github.com/Cyclenerd/ethereum_nvidia_miner/raw/master/ethereum-ubuntu-nvidia-miner_v3.img.7z.torrent)\n\n#### MD5\n\nIt is recommended to test that the image is correct and safe to use.\nThe MD5 calculation gives a checksum, which must equal the MD5 value of a correct ISO image.\n\n| Filename                               | MD5sum                             |\n| -------------------------------------- |:----------------------------------:|\n| ethereum-ubuntu-nvidia-miner_v3.img.7z | `af0b46286047534035e8834b65692334` |\n| ethereum-ubuntu-nvidia-miner_v3.img    | `2ec9e5f871e6a89355006b1cac534859` |\n\nMore help is available here:\nhttps://en.wikipedia.org/wiki/Md5sum\n\n\n### Copy\n\n1. Unzip the [7zip](http://www.7-zip.org/download.html) file `ethereum-ubuntu-nvidia-miner_v3.img.7z`.\n2. Copy the image `ethereum-ubuntu-nvidia-miner_v3.img` to a at least 8GB USB flash drive.\n\nLarger USB flash drive should also work.\nI use the "Sandisk 32GB Ultra Fit USB 3.0 Flash Drive".\n\nThe copy can be done with `dd`.  \xe2\x9a\xa0\xef\xb8\x8f The copy lasts long. Be patient.\n\nHow this works exactly is explained to you here:\nhttps://wiki.archlinux.org/index.php/USB_flash_installation_media#Using_dd\n\n#### Windows\n\nUse the free and open source software [Rufus](https://rufus.akeo.ie/).\nSimply select the ISO `ethereum-ubuntu-nvidia-miner_v3.img`, the USB drive you want to create the bootable Linux onto and click start.\n\nBe sure to select DD mode or the image will be transferred incorrectly.\n\n#### \xf0\x9f\x8d\x8e macOS\n\nIdentify the disk (not partition) of your USB flash drive e.g. disk3:\n\n    nils@macbookpro ~ $ diskutil list\n\nUnmount your USB flash drive:\n\n    nils@macbookpro ~ $ diskutil unmountDisk /dev/disk3\n\nCopy the image to your USB flash drive:\n\n    nils@macbookpro ~ $ sudo dd bs=1m if=Downloads/ethereum-ubuntu-nvidia-miner_v3.img of=/dev/rdisk3\n\nBtw. `rdisk3` (with r) not `disk3` is not a write error.\n\n\n### Mainboard\n\nSet the primary graphics output to one of your NVIDIA cards.\nDisable Secure Boot (UEFI) and boot from the USB flash drive.\n\n\n### Login\n\nThe network configuration is done by DHCP. Look in your router which IP your miner has.\n\nConnect via SSH with your miner.\n\n    nils@macbookpro ~ $ ssh prospector@minerIP\n\nCredentials. Password should be changed (`passwd`):\n\n* \xf0\x9f\x91\xa4 Username: `prospector`\n* \xf0\x9f\x94\x91 Password: `m1n1ng`\n\n\n### Setup\n\nThere is an extra program which helps you with the initial setup. Type `setup` to start it.\n\n    prospector@mine ~ $ setup\n\n![setup](https://www.nkn-it.de/img/ethereum_nvidia_miner/mine-setup.jpg)\n\nGo through __each__ step. If you have everything set you should do a `reboot`.\n\n\n### Mine\n\nAfter a minute uptime, a script (`screen`) starts automatically in the background, which starts the mining.\n\n    prospector@mine ~ $ crontab -l\n    \n    # run screen after reboot\n    @reboot sleep 60 && /usr/bin/screen -d -m\n\nEnter `mine` to get it in the foreground:\n\n    prospector@mine ~ $ mine\n\nUse key combination <kbd>Ctrl</kbd> + <kbd>a</kbd>, and subsequently pressing a key to execute one of the commands given below:\n\n* <kbd>n</kbd> : switches to the next available console\n* <kbd>p</kbd> : switches back to the previous console\n* <kbd>c</kbd> : creates a new virtual Bash console\n* <kbd>d</kbd> : detaches the current screen sessions and brings you back to the normal terminal\n\n![htop](https://www.nkn-it.de/img/ethereum_nvidia_miner/mine-top.jpg)\n![nvidia-smi](https://www.nkn-it.de/img/ethereum_nvidia_miner/mine-gpu.jpg)\n![etherminer](https://www.nkn-it.de/img/ethereum_nvidia_miner/mine-miner.jpg)\n\nMore help is available here:\nhttps://help.ubuntu.com/community/Screen\n\n#### miner.sh\n\nThe `miner.sh` script starts automatically (`mine` console).\nIf you want to make settings that go beyond the `setup` program, you need to adjust it.\nIf you want to mine other cryptocurrencies, like Monero or Zcash, you also need to adjust this file.\n\n    prospector@mine ~ $ nano -w miner.sh\n\n\n### Overclocking\n\nTo pull the last MH/s out of your cards, you should overclock.\n\n#### With  nvidia-overclock.sh (nvidia-settings)\n\nRun the `nvidia-overclock.sh` to adjust the memory and graphics clock.\nThe settings are lost after a restart. You have to repeat it.\n\n    prospector@mine ~ $ nvidia-overclock\n\nFor safety I did not add it in the autostart.\nSometimes you exaggerate when overclocking, and you\'ll be glad if a simple reboot helps.\n\nIf you are sure that everything works, you can add it to the autostart.\nFor security, it will start after 10 minutes.\n\n    prospector@mine ~ $ crontab -e\n    \n    # After 10 minutes uptime, \'nvidia-overclock.sh\' starts automatically\n    # Only remove the comment if you are sure that everything works!!!\n    #@reboot sleep 600 && bash ~/nvidia-overclock.sh >/dev/null 2>&1\n\nYou should experiment with the values and adjust the values in the script.\nI wish you success \xf0\x9f\xa4\x93\n\n#### Why not use nvidia-smi?\n\nnvidia-smi does not work with my cards (NVIDIA GeForce GTX 1060 and 1070).\n\n    prospector@mine ~ $ nvidia-smi -i 0 -ac 4004,1987\n    Setting applications clocks is not supported for GPU 0000:01:00.0.\n    Treating as warning and moving on.\n    All done.\n\nNo idea if this is a \xf0\x9f\x90\x9b bug. Have tried several drivers. Forums are full of bug reports.\nWith `nvidia-settings` I have no problems.\n\nYou can try it with your cards. It should work with Ti models. Here the text from the help:\n\n    -ac, --applications-clocks=MEM_CLOCK,GRAPHICS_CLOCK\n\n> Specifies maximum <memory,graphics> clocks as a pair (e.g. 2000,800) that defines GPU\'s speed while running applications on a GPU.\n\n\n\n### Other things you should do\n\n\n#### Update ethminer Ethereum Miner \n\nUpdate and recompile [ethminer](https://github.com/ethereum-mining/ethminer):\n\n    prospector@mine ~ $ cd ~/ethereum-mining/ethminer\n    prospector@mine ethminer $ git pull\n    prospector@mine ethminer $ cd build/\n    prospector@mine build $ cmake -D CUDA_TOOLKIT_ROOT_DIR=/usr/local/cuda-9.1 ..\n    prospector@mine build $ cmake --build . --config release\n\n\n#### Update Claymore\'s Dual Ethereum Miner \n\nDownload the [latest version](https://bitcointalk.org/index.php?topic=1433925.0) Claymore\'s Dual Ethereum miner for Linux and copy it to your USB flash driver.\nThe copy can be done via SCP.\n\nOn Windows, you can use [FileZilla](https://filezilla-project.org/) or [WinSCP](https://winscp.net/).\nOn Linux and macOS it works like this:\n\n```\nnils@macbookpro ~ $ scp "Claymore\'s Dual GPU Miner - LINUX.tar.gz" prospector@minerIP:/home/prospector/\n```\n\nUnpack the tar.gz file into the `~/claymore-dual-miner` folder:\n\n```\nprospector@mine ~ $ tar xvfz "Claymore\'s Dual GPU Miner - LINUX.tar.gz" -C ~/claymore-dual-miner --strip-components=1\n```\n\n\n#### Update XMR-Stak Monero Miner\n\nUpdate and recompile [XMR-Stak](https://github.com/fireice-uk/xmr-stak):\n\n```\nprospector@mine:~ $ cd ~/monero-mining/xmr-stak/\nprospector@mine:~/monero-mining/xmr-stak $ git pull\nprospector@mine:~/monero-mining/xmr-stak $ nano -w xmrstak/donate-level.hpp # Edit donation fee \nprospector@mine:~/monero-mining/xmr-stak $ cd build/\nprospector@mine:~/monero-mining/xmr-stak/build $ cmake -DXMR-STAK_COMPILE=generic -D CUDA_TOOLKIT_ROOT_DIR=/usr/local/cuda-9.1 -DOpenCL_ENABLE=OFF ..\nprospector@mine:~/monero-mining/xmr-stak/build $ make install\n```\nSelect the CPU compute architecture:\n\n* `-DXMR-STAK_COMPILE=generic` = the miner can be used on all CPU\'s with sse2\n* `-DXMR-STAK_COMPILE=native`  = the miner can be used only on the system where it is compiled but will archive the highest hash rate\n\n\n#### Update EWBF\'s CUDA Zcash Miner\n\nDownload the [latest version](https://bitcointalk.org/index.php?topic=1707546.0) EWBF\'s CUDA Zcash miner for Linux and copy it to your USB flash driver.\nThe copy can be done via SCP.\n\nOn Windows, you can use [FileZilla](https://filezilla-project.org/) or [WinSCP](https://winscp.net/).\nOn Linux and macOS it works like this:\n\n```\nnils@macbookpro ~ $ scp "Zec Miner Linux Bin.tar.gz" prospector@minerIP:/home/prospector/\n```\n\nUnpack the tar.gz file into the `~/zcash-mining/ewbf/` folder:\n\n```\nprospector@mine ~ $ tar xvfz "Zec Miner Linux Bin.tar.gz" -C ~/zcash-mining/ewbf/ --strip-components=1\n```\n\n\n#### Install ccminer CUDA Miner\n\nCompile [ccminer](https://github.com/tpruvot/ccminer):\n\n```\nprospector@mine:~ $ sudo apt-get install libcurl4-openssl-dev libssl-dev libjansson-dev automake autotools-dev build-essential\nprospector@mine:~ $ sudo ln -s /usr/local/cuda-8.0 /usr/local/cuda\nprospector@mine:~ $ git clone https://github.com/tpruvot/ccminer.git\nprospector@mine:~ $ cd ccminer\nprospector@mine:~/ccminer $ git checkout linux\nprospector@mine:~/ccminer $ ./build.sh\nprospector@mine:~/ccminer $ ./ccminer --version\n```\n\n\n### Wi-Fi WLAN\n\nThe `wpa_supplicant` package, which includes the main program `wpa_supplicant` and the passphrase tool `wpa_passphrase` are already installed.\n\nThis method allows quickly connecting to a wireless network whose SSID is already known, making use of `wpa_passphrase`, a command line tool which generates the minimal configuration needed: \n\n    prospector@mine ~ $ sudo wpa_passphrase "SSID" "WPA2-KEY" > /etc/wpa_supplicant/wpa_supplicant.conf\n\nTest configuration:\n\n    prospector@mine ~ $ sudo wpa_supplicant -i wlan0 -D wext -c /etc/wpa_supplicant/wpa_supplicant.conf -d\n\nTo enable Wi-Fi on the next reboot, remove the comments in the file `/etc/network/interfaces`:\n\n    prospector@mine ~ $ sudo nano -w /etc/network/interfaces\n    prospector@mine ~ $ reboot\n\nMore help is available here:\nhttps://wiki.archlinux.org/index.php/WPA_supplicant\n\n\n\n## Monitoring\n\nOf course, with SSH.\n\n\n### Munin\n\n`munin` and the `lighttpd` web server are also installed. You can use it to access statistics pages.\n\n    http://minerIP/munin\n\nHere you can find diagrams of the sensors, etc.\n\n![munin](https://www.nkn-it.de/img/ethereum_nvidia_miner/munin-sensors.jpg)\n\n\n### Fail2ban\n\nFail2ban is installed.\nThe program monitors logins via SSH. Too many false logins from an IP and the IP is blocked.\nAt each start (reboot) and block you will receive an e-mail.\nYou should check your e-mails from time to time.\n\n    prospector@mine ~ $ mutt\n\nMore help is available here:\nhttps://help.ubuntu.com/community/Fail2ban\n\n\n### VNC\n\nStart `x11vnc` server.\n\n    prospector@mine ~ $ x11vnc\n\nEnter the IP address and display in VNC Viewer to establish a direct connection. For example:\n\n    minerIP:0\n\n![x11vnc](https://www.nkn-it.de/img/ethereum_nvidia_miner/mine-x11vnc.jpg)\n\n\n\n## Help \xf0\x9f\x91\x8d\n\nIf you have found a bug (English is not my mother tongue) or have any improvements, send me a pull request.\n\n### Commits, Comments & Pull requests\n\nI like to have _elementary_ commits as it is much easier to manage for reviewing and debugging. \nSo please **don\'t** be afraid to make **as many** commits as needed.\nMerging many commits is as easy as merging one, if not easier.\nPull requests can regroup many commits at once.\nJust try to explain in the pull comment the \'\'why\'\' I should merge it (if it\'s not obvious).\nPlease do not try to summarize several big changes (new features) in one pull.\n\nAnd a few more things:\n\n* Variables must be uppercase and must begin with `MY_`.\n* Functions must be lower case and must begin with `my_`.\n* Check your shell scripts with [ShellCheck](https://www.shellcheck.net/) before submitting.\n* Please use four spaces to indent.\n\n## Known Issues\n\nNVIDIA tools (especially `nvidia-smi`) seems to be lagging on 7 GPU rigs, \ncrashing the system and/or causing some system instabilities.\nIssue reproduced on two different 7 GPUs rigs (different motherboard & GPU brands).\nSix graphics cards work without problems.\n\nNVIDIA GeForce GTX 1050 Ti does not have Performance Level 3 (only Level 2) thus `nvidia-overclock.sh` has to be changed (change [3] with [2]).\n\n'