b'[![Android Arsenal](https://img.shields.io/badge/Android%20Arsenal-Context--Menu.Android-brightgreen.svg?style=flat)](https://android-arsenal.com/details/1/1387) [![Yalantis](https://github.com/Yalantis/Context-Menu.Android/blob/master/badge.png)](https://yalantis.com/?utm_source=github) [![](https://jitpack.io/v/yalantis/context-menu.android.svg)](https://jitpack.io/#yalantis/context-menu.android)\n\n# ContextMenu \n\n#### You can easily add awesome animated context menu to  your app. \n\nCheck this [project on dribbble](https://dribbble.com/shots/1785274-Menu-Animation-for-Additional-Functions?list=users&offset=17)\n\nCheck this [project on Behance](https://www.behance.net/gallery/20411445/Mobile-Animations-Interactions)  \n\n<image src="https://cdn.dribbble.com/users/125056/screenshots/1785274/99miles-profile-light_1-1-4.gif"/>\n\n### Usage:\n\n*For a working implementation, have a look at the ```app``` module*\n\n#### \t1. Clone repository and add sources into your project or use Gradle:\n\nAdd it in your root build.gradle at the end of repositories:\n```\n\tallprojects {\n\t\trepositories {\n\t\t\t...\n\t\t\tmaven { url \'https://jitpack.io\' }\n\t\t}\n\t}\n```\nAdd the dependency\n```\n\tdependencies {\n\t        implementation \'com.github.Yalantis:Context-Menu.Android:1.1.4\'\n\t}\n```\n#### \t2. Create list of `MenuObject`, which consists of icon or icon and description.\nYou can use any `drawable, resource, bitmap, color` as image:\n```\n    menuObject.drawable = ...\n    menuObject.setResourceValue(...)\n    menuObject.setBitmapValue(...)\n    menuObject.setColorValue(...)\n   ```\nYou can set image `ScaleType`:\n```\n    menuObject.scaleType = ScaleType.FIT_XY\n```\nYou can use any `resource, drawable, color` as background:\n```\n    menuObject.setBgResourceValue(...)\n    menuObject.setBgDrawable(...)\n    menuObject.setBgColorValue(...)\n```\nNow You can easily add text appearance style for menu titles: \n```\n\tIn your project styles create style for text appearance\n\t(For better visual effect extend it from TextView.DefaultStyle):\n\t\n\t<style name="TextViewStyle" parent="TextView.DefaultStyle">\n        \t<item name="android:textStyle">italic|bold</item>\n        \t<item name="android:textColor">#26D0EB</item>\n\t</style>\n\n\tAnd set it\'s id to your MenuObject :\t\n    \n        val bitmapDrawable = BitmapDrawable(\n                resources,\n                BitmapFactory.decodeResource(resources, R.drawable.icn_3)\n        )\n\n        val menuObject = MenuObject("Add to friends").apply {\n            drawable = bitmapDrawable\n            menuTextAppearanceStyle = R.style.TextViewStyle\n        }\n```\nYou can use any `color` as text color:\n```\n    menuObject.textColor = ...\n```\nYou can set any `color` as divider color:\n```\n    menuObject.dividerColor = ...\n```\nExample:  \n```\n    val close = MenuObject().apply { setResourceValue(R.drawable.icn_close) }\n\n    val send = MenuObject("Send message").apply { setResourceValue(R.drawable.icn_1) }\n    \n    val addFriend = MenuObject("Add to friends").apply {\n            drawable = BitmapDrawable(\n                    resources,\n                    BitmapFactory.decodeResource(resources, R.drawable.icn_3)\n            )\n    }\n\n    val menuObjects = mutableListOf<MenuObject>().apply {\n            add(close)\n            add(send)\n            add(addFriend)\n    }\n```\n\n####\t3. Create `newInstance` of `ContextMenuDialogFragment`, which received `MenuParams` object.\n\n```\n    val menuParams = MenuParams(\n    \tactionBarSize = resources.getDimension(R.dimen.tool_bar_height).toInt(),\n    \tmenuObjects = getMenuObjects(),\n    \tisClosableOutside = false\n    \t// set other settings to meet your needs\n    )\n    \n    // If you want to change the side you need to add \'gravity\' parameter,\n    // by default it is MenuGravity.END.\n    \n    // For example:\n    \n    val menuParams = MenuParams(\n    \tactionBarSize = resources.getDimension(R.dimen.tool_bar_height).toInt(),\n    \tmenuObjects = getMenuObjects(),\n    \tisClosableOutside = false,\n    \tgravity = MenuGravity.START\n    )\n    \n    val contextMenuDialogFragment = ContextMenuDialogFragment.newInstance(menuParams)\n```\n\n####\t4. Set menu with button, which will open `ContextMenuDialogFragment`.\n\n```\n    override fun onCreateOptionsMenu(menu: Menu?): Boolean {\n        menuInflater.inflate(R.menu.menu_main, menu)\n        return true\n    }\n\n    override fun onOptionsItemSelected(item: MenuItem?): Boolean {\n        item?.let {\n            when (it.itemId) {\n                R.id.context_menu -> {\n                    showContextMenuDialogFragment()\n                }\n            }\n        }\n\n        return super.onOptionsItemSelected(item)\n    }\n```\n\n####\t5. Add menu item listeners.\n```\n    contextMenuDialogFragment = menuItemClickListener = { view, position ->\n    \t// do something here\n    }\n\t    \n    contextMenuDialogFragment = menuItemLongClickListener = { view, position ->\n    \t// do something here\n    }\n```\n\n## Customization: \nFor better experience menu item size should be equal to `ActionBar` height.\n\n`newInstance` of `ContextMenuDialogFragment` receives `MenuParams` object that has the fields:\n\n`menuObjects` - list of MenuObject objects,\n\n`animationDelay` - delay in millis after fragment opening and before closing, which will make animation smoother on slow devices,\n\n`animationDuration` - duration of every piece of animation in millis,\n\n`isClosableOutside` - if menu can be closed on touch to non-button area,\n\n`isFitSystemWindows` - if true, then the default implementation of fitSystemWindows(Rect) will be executed,\n\n`isClipToPadding` - true to clip children to the padding of the group, false otherwise.\n\nThe last two parameters may be useful if you use _Translucent_ parameters in your theme:\n```\n    <item name="android:windowTranslucentStatus">true</item>\n```\nTo stay `Context Menu` below Status Bar set `fitSystemWindows` to true and `clipToPadding` to false.\n\n## Compatibility\n  \n  * Android KitKat 4.4+\n\n# Changelog\n\n### Version: 1.1.4\n\n  * added background color animation\n\n### Version: 1.1.2\n\n  * added animation on close outside menu\n\n### Version: 1.1.1\n\n  * bug with `menuObject.textColor` was fixed\n\n### Version: 1.1.0\n\n  * library rewrited on Kotlin\n  * added `rtl` support\n  * added `gravity` parameter for `MenuParams`\n\n### Version: 1.0.8\n\n  * added transparent menu background support\n  * dependencies actualized\n\n### Version: 1.0.7\n\n  * Text in menu now also clickable\n  * Support libs and gradle updated\n\n### Version: 1.0.6\n\n  * com.android.tools.build:gradle:1.5.0\n  * Support libs and sdk updated to 23 \n\n### Version: 1.0.5\n\n  * Fixed `setClosableOutside` [issue](https://github.com/Yalantis/Context-Menu.Android/issues/25).\n  * Fixed `setAnimationDuration` doesn\xc2\xb4t work for open event [issue](https://github.com/Yalantis/Context-Menu.Android/issues/22).\n  * Fixed menu item listener setting mechanism. It can be not activity but any class that implements listeners now. [Issue](https://github.com/Yalantis/Context-Menu.Android/issues/24). Attention! You have to set listeners to the context fragment manually. Check block 5 in the `Usage`.\n\n### Version: 1.0.4\n\n  * Old `ContextMenuDialogFragment` `newInstance` methods are deprecated. Use new universal one that received `MenuParams`.\n  * Added possibility to dismiss menu by clicking on non-button area. See `MenuParams.setClosableOutside(boolean)`.\n\n### Version: 1.0.3\n\n  * Added menu text appearence style. (Note: other text style methods are deprecated).\n\n### Version: 1.0.2\n\n  * Changed `MenuObject` constructors. Image setting is moved to methods\n  * Added styling of `MenuObject` image, background, text color, divider color\n  * Added possibility to interact with translucent Status Bar\n\n### Version: 1.0.1\n\n  * Added `OnMenuItemLongClickListener` (usage: the same as `OnMenuItemClickListener`, check sample app)\n  * Renamed:\n```\ncom.yalantis.contextmenu.lib.ContextMenuDialogFragment.ItemClickListener ->\ncom.yalantis.contextmenu.lib.interfaces.OnMenuItemClickListener\n\ncom.yalantis.contextmenu.lib.ContextMenuDialogFragment.ItemClickListener.onItemClick(...) ->\ncom.yalantis.contextmenu.lib.interfaces.OnMenuItemClickListener.onMenuItemClick(...)\n```\n\n### Version: 1.0\n\n  * Pilot version\n\n#### Let us know!\n\nWe\xe2\x80\x99d be really happy if you sent us links to your projects where you use our component. Just send an email to github@yalantis.com And do let us know if you have any questions or suggestion regarding the animation. \n\nP.S. We\xe2\x80\x99re going to publish more awesomeness wrapped in code and a tutorial on how to make UI for Android (iOS) better than better. Stay tuned!\n\n## License\n\n    Copyright 2019, Yalantis\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n'