b'![Event Gateway - React to any event with FaaS function across clouds](https://s3.amazonaws.com/assets.github.serverless/event-gateway-readme-header-v2.gif)\n\n[We\'re Hiring!](https://serverless.com/company/jobs/) \xe2\x80\xa2 [Website](https://serverless.com/event-gateway/) \xe2\x80\xa2 [Slack](https://join.slack.com/t/serverless-contrib/shared_invite/enQtMzgxMTkxMzIzNTU3LTY0OGZlYWI2OTI4YTliMWQ0YWNlZGZjMDhkNDAyZGQyZDYwMzYwMTlmNmVmMzMzNmI4YzAyNjg0ZjZkYTdmMzU) \xe2\x80\xa2 [Newsletter](http://eepurl.com/b8dv4P) \xe2\x80\xa2 [Forum](http://forum.serverless.com) \xe2\x80\xa2 [Meetups](https://github.com/serverless/meetups) \xe2\x80\xa2 [Twitter](https://twitter.com/goserverless)\n\nThe Event Gateway combines both API Gateway and Pub/Sub functionality into a single event-driven experience. It\'s\ndataflow for event-driven, serverless architectures. It routes Events (data) to Functions (serverless compute).\nEverything it cares about is an event! Even calling a function. It makes it easy to share events across different\nsystems, teams and organizations!\n\nUse the Event Gateway right now, by running the **[Event Gateway Getting Started Application](https://github.com/serverless/event-gateway-getting-started)** with the _[Serverless Framework](https://serverless.com/framework/)_.\n\nFeatures:\n\n* **Platform agnostic** - All your cloud services are now compatible with one another: share cross-cloud functions and events with AWS Lambda, Microsoft Azure, IBM Cloud and Google Cloud Platform.\n* **Send events from any cloud** - Data streams in your application become events. Centralize events from any cloud provider to get a bird\xe2\x80\x99s eye view of all the data flowing through your cloud.\n* **React to cross-cloud events** - You aren\xe2\x80\x99t locked in to events and functions being on the same provider: Any event, on any cloud, can trigger any function. Set events and functions up like dominoes and watch them fall.\n* **First-class support for CloudEvents** - Emit and react to events in [CloudEvents](https://cloudevents.io/) standard.\n* **Expose events to your team** - Share events and functions to other parts of the application. Your teammates can find them and utilize them in their own services.\n* **Extendable through middleware** - Perform data transforms, authorizations, serializations, and other custom computes straight from the Event Gateway.\n\nThe Event Gateway is a L7 proxy and realtime dataflow engine, intended for use with Functions-as-a-Service on AWS,\nAzure, Google & IBM.\n\n_The project is under heavy development. The APIs will continue to [change](#versioning) until we release a 1.0.0 version. It\'s not\nyet ready for production applications._\n\n[![Build Status](https://travis-ci.org/serverless/event-gateway.svg?branch=master)](https://travis-ci.org/serverless/event-gateway)\n\n![Event Gateway - Build event-driven integrations with lambda, cloud functions, kubernetes](https://s3.amazonaws.com/assets.github.serverless/event-gateway-integrations-2.png)\n\n## Contents\n\n1.  [Quick Start](#quick-start)\n1.  [Running the Event Gateway](#running-the-event-gateway)\n1.  [Motivation](#motivation)\n1.  [Components](#components)\n    1.  [Event Registry](#event-registry)\n    1.  [Function Discovery](#function-discovery)\n    1.  [Subscriptions](#subscriptions)\n    1.  [Spaces](#spaces)\n1.  [CloudEvents Support](#cloudevents-support)\n1.  [SDKs](#sdks)\n1.  [Versioning](#versioning)\n1.  [FAQ](#faq)\n1.  [Background](#background)\n1.  [Community](#community)\n\n## Reference\n\n1.  [API](./docs/api.md)\n1.  [Event Types](./docs/event-types.md)\n1.  [Subscription Types](./docs/subscription-types.md)\n1.  [Architecture](./docs/architecture.md)\n1.  [Clustering](./docs/clustering.md)\n1.  [System Events and Plugin System](./docs/system-events-and-plugin-system.md)\n1.  [System Metrics](./docs/metrics.md)\n1.  [Reliability Guarantees](./docs/reliability-guarantees.md)\n\n## Quick Start\n\n### Getting Started\n\nLooking for an example to get started? The easiest way to use the Event Gateway is with the [`serverless-event-gateway-plugin`](https://github.com/serverless/serverless-event-gateway-plugin) with the Serverless Framework. Check out the [**Getting Started Example**](https://github.com/serverless/event-gateway-getting-started) to deploy your first service to the Event Gateway.\n\n## Running the Event Gateway\n\n### Hosted version\n\nIf you don\'t want to run the Event Gateway yourself, you can use the hosted version provided by the Serverless team. [Sign up here](https://dashboard.serverless.com)!\n\n### via Docker\n\nThere is an [official Docker image](https://hub.docker.com/r/serverless/event-gateway/).\n\n```bash\ndocker run -p 4000:4000 -p 4001:4001 serverless/event-gateway --dev\n```\n\n### Binary\n\nOn macOS or Linux run the following to download the binary:\n\n```\ncurl -sfL https://raw.githubusercontent.com/serverless/event-gateway/master/install.sh | sh\n```\n\nOn Windows download [binary](https://github.com/serverless/event-gateway/releases).\n\nThen run the binary in development mode with:\n\n```bash\n$ event-gateway --dev\n```\n\n### Kubernetes\n\nThe repo contains `helm` [charts](contrib/helm/README.md) for a quick deploy to an existing cluster using native nginx Ingress. To deploy\na development cluster you can follow the [minikube](contrib/helm/MINIKUBE.md) instructions.\n\n---\n\nIf you want more detailed information on running and developing with the Event Gateway,\nplease check [Running Locally](./docs/running-locally.md) and [Developing](./docs/developing.md) guides.\n\n## Motivation\n\n* It is cumbersome to plug things into each other. This should be easy! Why do I need to set up a queue system to\n  keep track of new user registrations or failed logins?\n* Introspection is terrible. There is no performant way to emit logs and metrics from a function. How do I know\n  a new piece of code is actually working? How do I feed metrics to my existing monitoring system? How do I\n  plug this function into to my existing analytics system?\n* Using new functions is risky without the ability to incrementally deploy them.\n* The AWS API Gateway is frequently cited as a performance and cost-prohibitive factor for using AWS Lambda.\n\n## Components\n\n### Event Registry\n\nEvent Registry is a single source of truth about events occuring in the space. Every event emitted to a space has to have event\ntype registered beforehand. Event Registry also provides a way to authorize incoming events. Please check\n[Event Types](./docs/event-types.md) reference for more information.\n\n### Function Discovery\n\nDiscover and call serverless functions from anything that can reach the Event Gateway. Function Discovery supports the\nfollowing function types:\n\n* FaaS functions (AWS Lambda, Google Cloud Functions, Azure Functions, IBM Cloud Functions)\n* Connectors (AWS Kinesis, AWS Kinesis Firehose, AWS SQS)\n* HTTP endpoints/Webhook (e.g. POST http://example.com/function)\n\nFunction Discovery stores information about functions allowing the Event Gateway to call them as a reaction to received\nevent.\n\n#### Example: Register An AWS Lambda Function\n\n<details open>\n<summary>curl example</summary>\n\n```bash\ncurl --request POST \\\n  --url http://localhost:4001/v1/spaces/default/functions \\\n  --header \'content-type: application/json\' \\\n  --data \'{\n    "functionId": "hello",\n    "type": "awslambda",\n    "provider":{\n      "arn": "arn:aws:lambda:us-east-1:377024778620:function:bluegreen-dev-hello",\n      "region": "us-east-1"\n    }\n}\'\n```\n</details>\n\n<details>\n<summary>Node.js SDK example</summary>\n\n```javascript\nconst eventGateway = new EventGateway({ url: \'http://localhost\' })\neventGateway.registerFunction({\n  functionId: \'sendEmail\',\n  type: \'awslambda\',\n  provider: {\n    arn: \'xxx\',\n    region: \'us-west-2\'\n  }\n})\n```\n</details>\n\n### Subscriptions\n\nLightweight pub/sub system. Allows functions to asynchronously receive custom events. Instead of rewriting your\nfunctions every time you want to send data to another place, this can be handled entirely in configuration\nusing the Event Gateway. This completely decouples functions from one another, reducing communication costs across\nteams, eliminates effort spent redeploying functions, and allows you to easily share events across functions,\nHTTP services, even different cloud providers. Functions may be registered as subscribers to a custom event.\nWhen an event occurs, all subscribers are called asynchronously with the event as its argument.\n\nCreating a subscription requires providing ID of registered function, an event type, an HTTP method (`POST` by default),\nand a path (`/` by default). The method and path properties defines HTTP endpoint which Events API will be listening on.\n\nEvent Gateway supports two subscription types: `async` and `sync`. Please check [Subscription Types](./docs/subscription-types.md)\nreference for more information.\n\n#### Example: Subscribe to an Event\n\n<details open>\n<summary>curl example</summary>\n\n```bash\ncurl --request POST \\\n  --url http://localhost:4001/v1/spaces/default/subscriptions \\\n  --header \'content-type: application/json\' \\\n  --data \'{\n    "type": "async",\n    "eventType": "user.created",\n    "functionId": "sendEmail",\n    "path": "/myteam"\n  }\'\n```\n</details>\n<details>\n<summary>Node.js SDK example</summary>\n\n```javascript\nconst eventGateway = new EventGateway({ url: \'http://localhost\' })\neventGateway.subscribe({\n  type: \'async\',\n  eventType: \'user.created\',\n  functionId: \'sendEmail\',\n  path: \'/myteam\'\n})\n```\n</details>\n\n`sendEmail` function will be invoked for every `user.created` event to `<Events API>/myteam` endpoint.\n\n#### Example: Emit an Event\n\n<details open>\n<summary>curl example</summary>\n\n```bash\ncurl --request POST \\\n  --url http://localhost:4000/ \\\n  --header \'content-type: application/json\' \\\n  --data \'{\n    "eventType": "myapp.user.created",\n    "eventID": "66dfc31d-6844-42fd-b1a7-a489a49f65f3",\n    "cloudEventsVersion": "0.1",\n    "source": "/myapp/services/users",\n    "eventTime": "1990-12-31T23:59:60Z",\n    "data": { "userID": "123" },\n    "contentType": "application/json"\n  }\'\n```\n\n</details>\n<details>\n<summary>Node.js SDK example</summary>\n\n```javascript\nconst eventGateway = new EventGateway({ url: \'http://localhost\' })\neventGateway.emit({\n  "eventType": "myapp.user.created",\n  "eventID": "66dfc31d-6844-42fd-b1a7-a489a49f65f3",\n  "cloudEventsVersion": "0.1",\n  "source": "/myapp/services/users",\n  "eventTime": "1990-12-31T23:59:60Z",\n  "data": { "userID": "123" },\n  "contentType": "application/json"\n})\n```\n</details>\n\n#### Example: Subscribe to an `http.request` Event\n\nNot all data are events that\'s why Event Gateway has a special, built-in [`http.request` event type](./docs/api.md#http-request-event) that enables subscribing to\nraw HTTP requests.\n\n<details open>\n<summary>curl example</summary>\n\n```bash\ncurl --request POST \\\n  --url http://localhost:4001/v1/spaces/default/subscriptions \\\n  --header \'content-type: application/json\' \\\n  --data \'{\n    "type": "sync",\n    "eventType": "http.request",\n    "functionId": "listUsers",\n    "method": "GET",\n    "path": "/users"\n  }\'\n```\n\n</details>\n<details>\n<summary>Node.js SDK example</summary>\n\n```javascript\nconst eventGateway = new EventGateway({ url: \'http://localhost\' })\neventGateway.subscribe({\n  type: \'sync\',\n  eventType: \'http.request\',\n  functionId: \'listUsers\',\n  method: \'GET\',\n  path: \'/users\'\n})\n```\n</details>\n\n`listUsers` function will be invoked for every HTTP GET request to `<Events API>/users` endpoint.\n\n### Spaces\n\nOne additional concept in the Event Gateway are Spaces. Spaces provide isolation between resources. Space is a\ncoarse-grained sandbox in which entities (Functions and Subscriptions) can interact freely. All actions are\npossible within a space: publishing, subscribing and invoking.\n\nSpace is not about access control/authentication/authorization. It\'s only about isolation. It doesn\'t enforce any\nspecific subscription path.\n\nThis is how Spaces fit different needs depending on use-case:\n\n* single user - single user uses default space for registering function and creating subscriptions.\n* multiple teams/departments - different teams/departments use different spaces for isolation and for hiding internal\n  implementation and architecture.\n\nTechnically speaking Space is a mandatory field ("default" by default) on Function or Subscription object that user has\nto provide during function registration or subscription creation. Space is a first class concept in Config API. Config\nAPI can register function in specific space or list all functions or subscriptions from a space.\n\n## CloudEvents Support\n\nEvent Gateway has the first-class support for [CloudEvents](https://cloudevents.io/). It means few things.\n\nFirst of all, if the event emitted to the Event Gateway is in CloudEvents format, the Event Gateway is able to recognize it and trigger proper subscriptions based on event type specified in the event. Event Gateway supports both Structured Content and Binary Content modes described in [HTTP Transport Binding spec](https://github.com/cloudevents/spec/blob/master/http-transport-binding.md).\n\nSecondly, there is a special, built-in [HTTP Request Event](./docs/api.md#http-request-event) type allowing reacting to raw HTTP requests that are not formatted according to CloudEvents spec. This event type can be especially helpful for building REST APIs.\n\nCurrently, Event Gateway supports [CloudEvents v0.1 schema](https://github.com/cloudevents/spec/blob/master/spec.md) specification.\n\n## SDKs\n\n* [SDK for Node.js](https://github.com/serverless/event-gateway-sdk)\n\n## Versioning\n\nThis project uses [Semantic Versioning 2.0.0](http://semver.org/spec/v2.0.0.html). We are in initial development phase\nright now (v0.X.Y). The public APIs should not be considered stable. Every breaking change will be listed in the\n[release changelog](https://github.com/serverless/event-gateway/releases).\n\n## FAQ\n\n### What The Event Gateway is NOT\n\n* it\'s not a replacement for message queues (no message ordering, currently weak durability guarantees only)\n* it\'s not a replacement for streaming platforms (no processing capability and consumers group)\n* it\'s not a replacement for existing service discovery solutions from the microservices world\n\n### Event Gateway vs FaaS Providers\n\nThe Event Gateway is NOT a FaaS platform. It integrates with existing FaaS providers (AWS Lambda, Google Cloud Functions,\nAzure Functions, OpenWhisk Actions). The Event Gateway enables building large serverless architectures in a unified way\nacross different providers.\n\n## Background\n\nSOA came along with a new set of challenges. In monolithic architectures, it was simple to call a built-in library or\nrarely-changing external service. In SOA it involves much more network communication which [is not reliable](https://en.wikipedia.org/wiki/Fallacies_of_distributed_computing). The main problems to solve include:\n\n1.  Where is the service deployed? How many instances are there? Which instance is the closest to me? (service discovery)\n2.  Requests to the service should be balanced between all service instances (load balancing)\n3.  If a remote service call failed I want to retry it (retries)\n4.  If the service instance failed I want to stop sending requests there (circuit breaking)\n5.  Services are written in multiple languages, I want to communicate between them using the best language for the particular task (sidecar)\n6.  Calling remote service should not require setting up new connection every time as it increases request time (persistent connections)\n\nThe following systems are solutions those problems:\n\n* [Linkerd](https://linkerd.io/)\n* [Istio](https://istio.io/)\n* [Hystrix](https://github.com/Netflix/Hystrix/wiki) (library, not sidecar)\n* [Finagle](https://twitter.github.io/finagle/) (library, not sidecar)\n\nThe main goal of those tools is to manage the inconveniences of network communication.\n\n### Microservices Challenges & FaaS\n\nThe greatest benefit of serverless/FaaS is that it solves almost all of above problems:\n\n1.  service discovery: I don\'t care! I have a function name, that\'s all I need.\n2.  load balancing: I don\'t care! I know that there will be a function to handle my request (blue/green deployments still an issue though)\n3.  retries: It\'s highly unusual that my request will not proceed as function instances are ephemeral and failing function is immediately replaced with a new instance. If it happens I can easily send another request. In case of failure, it\'s easy to understand what is the cause.\n4.  circuit breaking: Functions are ephemeral and auto-scaled, low possibility of flooding/DoS & [cascading failures](https://landing.google.com/sre/book/chapters/addressing-cascading-failures.html).\n5.  sidecar: calling function is as simple as calling method from cloud provider SDK.\n6.  in FaaS setting up persistent connection between two functions defeats the purpose as functions instances are ephemeral.\n\nTools like Envoy/Linkerd solve different domain of technical problems that doesn\'t occur in serverless space. They have a lot of features that are unnecessary in the context of serverless computing.\n\n### Service Discovery in FaaS = Function Discovery\n\nService discovery problems may be relevant to serverless architectures, especially when we have a multi-cloud setup or we want to call a serverless function from a legacy system (microservices, etc...). There is a need for some proxy that will know where the function is actually deployed and have retry logic built-in. Mapping from function name to serverless function calling metadata is a different problem from tracking the availability of a changing number of service instances. That\'s why there is a room for new tools that solves **function discovery** problem rather than the service discovery problem. Those problems are fundamentally different.\n'