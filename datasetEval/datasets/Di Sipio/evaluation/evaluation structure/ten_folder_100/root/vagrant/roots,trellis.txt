b'# Trellis\n[![Release](https://img.shields.io/github/release/roots/trellis.svg?style=flat-square)](https://github.com/roots/trellis/releases)\n[![Build Status](https://img.shields.io/circleci/build/gh/roots/trellis?style=flat-square)](https://circleci.com/gh/roots/trellis)\n[![Follow Roots](https://img.shields.io/twitter/follow/rootswp.svg?style=flat-square&color=1da1f2)](https://twitter.com/rootswp)\n\nAnsible playbooks for setting up a LEMP stack for WordPress.\n\n- Local development environment with Vagrant\n- High-performance production servers\n- Zero-downtime deploys for your [Bedrock](https://roots.io/bedrock/)-based WordPress sites\n\n## What\'s included\n\nTrellis will configure a server with the following and more:\n\n* Ubuntu 18.04 Bionic LTS\n* Nginx (with optional FastCGI micro-caching)\n* PHP 7.3\n* MariaDB (a drop-in MySQL replacement)\n* SSL support (scores an A+ on the [Qualys SSL Labs Test](https://www.ssllabs.com/ssltest/))\n* Let\'s Encrypt for free SSL certificates\n* HTTP/2 support (requires SSL)\n* Composer\n* WP-CLI\n* sSMTP (mail delivery)\n* MailHog\n* Memcached\n* Fail2ban and ferm\n\n## Documentation\n\nFull documentation is available at [https://roots.io/trellis/docs/](https://roots.io/trellis/docs/).\n\n## Requirements\n\nMake sure all dependencies have been installed before moving on:\n\n* [Composer](https://getcomposer.org/doc/00-intro.md#installation-linux-unix-osx)\n* [Virtualbox](https://www.virtualbox.org/wiki/Downloads) >= 4.3.10\n* [Vagrant](https://www.vagrantup.com/downloads.html) >= 2.1.0\n\n**Windows user?** [Read the Windows getting started docs](https://roots.io/getting-started/docs/windows-development-environment-trellis/) for slightly different installation instructions.\n\n## Installation\n\nThe recommended directory structure for a Trellis project looks like:\n\n```shell\nexample.com/      # \xe2\x86\x92 Root folder for the project\n\xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 trellis/      # \xe2\x86\x92 Your clone of this repository\n\xe2\x94\x94\xe2\x94\x80\xe2\x94\x80 site/         # \xe2\x86\x92 A Bedrock-based WordPress site\n    \xe2\x94\x94\xe2\x94\x80\xe2\x94\x80 web/\n        \xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 app/  # \xe2\x86\x92 WordPress content directory (themes, plugins, etc.)\n        \xe2\x94\x94\xe2\x94\x80\xe2\x94\x80 wp/   # \xe2\x86\x92 WordPress core (don\'t touch!)\n```\n\nSee a complete working example in the [roots-example-project.com repo](https://github.com/roots/roots-example-project.com).\n\n1. Create a new project directory:\n```plain\n$ mkdir example.com && cd example.com\n```\n2. Install Trellis:\n```plain\n$ git clone --depth=1 git@github.com:roots/trellis.git && rm -rf trellis/.git\n```\n3. Install Bedrock into the `site` directory:\n```plain\n$ composer create-project roots/bedrock site\n```\n\n## Local development setup\n\n1. Configure your WordPress sites in `group_vars/development/wordpress_sites.yml` and in `group_vars/development/vault.yml`\n2. Ensure you\'re in the trellis directory: `cd trellis`\n3. Run `vagrant up`\n\n[Read the local development docs](https://roots.io/trellis/docs/local-development-setup/) for more information.\n\n## Remote server setup (staging/production)\n\nFor remote servers, installing Ansible locally is an additional requirement. See the [docs](https://roots.io/trellis/docs/remote-server-setup/#requirements) for more information.\n\nA base Ubuntu 18.04 (Bionic) server is required for setting up remote servers. OS X users must have [passlib](http://pythonhosted.org/passlib/install.html#installation-instructions) installed.\n\n1. Configure your WordPress sites in `group_vars/<environment>/wordpress_sites.yml` and in `group_vars/<environment>/vault.yml` (see the [Vault docs](https://roots.io/trellis/docs/vault/) for how to encrypt files containing passwords)\n2. Add your server IP/hostnames to `hosts/<environment>`\n3. Specify public SSH keys for `users` in `group_vars/all/users.yml` (see the [SSH Keys docs](https://roots.io/trellis/docs/ssh-keys/))\n4. Run `ansible-playbook server.yml -e env=<environment>` to provision the server\n\n[Read the remote server docs](https://roots.io/trellis/docs/remote-server-setup/) for more information.\n\n## Deploying to remote servers\n\n1. Add the `repo` (Git URL) of your Bedrock WordPress project in the corresponding `group_vars/<environment>/wordpress_sites.yml` file\n2. Set the `branch` you want to deploy\n3. Run `./bin/deploy.sh <environment> <site name>`\n4. To rollback a deploy, run `ansible-playbook rollback.yml -e "site=<site name> env=<environment>"`\n\n[Read the deploys docs](https://roots.io/trellis/docs/deploys/) for more information.\n\n## Contributing\n\nContributions are welcome from everyone. We have [contributing guidelines](https://github.com/roots/guidelines/blob/master/CONTRIBUTING.md) to help you get started.\n\n## Trellis sponsors\n\nHelp support our open-source development efforts by [becoming a patron](https://www.patreon.com/rootsdev).\n\n<a href="https://kinsta.com/?kaid=OFDHAJIXUDIV"><img src="https://cdn.roots.io/app/uploads/kinsta.svg" alt="Kinsta" width="200" height="150"></a> <a href="https://k-m.com/"><img src="https://cdn.roots.io/app/uploads/km-digital.svg" alt="KM Digital" width="200" height="150"></a> <a href="https://scaledynamix.com/"><img src="https://cdn.roots.io/app/uploads/scale-dynamix.svg" alt="Scale Dynamix" width="200" height="150"></a>\n\n## Community\n\nKeep track of development and community news.\n\n* Participate on the [Roots Discourse](https://discourse.roots.io/)\n* Follow [@rootswp on Twitter](https://twitter.com/rootswp)\n* Read and subscribe to the [Roots Blog](https://roots.io/blog/)\n* Subscribe to the [Roots Newsletter](https://roots.io/subscribe/)\n* Listen to the [Roots Radio podcast](https://roots.io/podcast/)\n'