b'# JJG-Ansible-Windows\n\n> **Important Note**: Vagrant now includes an [`ansible_local` provisioner](https://docs.vagrantup.com/v2/provisioning/ansible_local.html), which provides a much more reliable Ansible provisioning experience within a Vagrant VM. This project will no longer be updated for use beyond Vagrant 1.8.1.\n\nWindows shell provisioning script to bootstrap Ansible from within a Vagrant VM running on Windows.\n\nThis script is configured to use configure any Linux-based VM (Debian, Ubuntu, Fedora, RedHat, CentOS, etc.) so it can run Ansible playbooks from within the VM through Vagrant.\n\nRead more about this script, and other techniques for using Ansible within a Windows environment, on Server Check.in: [Running Ansible within Windows](https://servercheck.in/blog/running-ansible-within-windows).\n\n## Usage\n\nIn your Vagrantfile, use a conditional provisioning statement if you want to use this script (which runs Ansible from within the VM instead of on your host\xe2\x80\x94this example assumes your playbook is inside within a \'provisioning\' folder, and this script is within provisioning/JJG-Ansible-Windows):\n\n```ruby\n# Use rbconfig to determine if we\'re on a windows host or not.\nrequire \'rbconfig\'\nis_windows = (RbConfig::CONFIG[\'host_os\'] =~ /mswin|mingw|cygwin/)\nif is_windows\n  # Provisioning configuration for shell script.\n  config.vm.provision "shell" do |sh|\n    sh.path = "provisioning/JJG-Ansible-Windows/windows.sh"\n    sh.args = "/vagrant/provisioning/playbook.yml"\n  end\nelse\n  # Provisioning configuration for Ansible (for macOS/Linux hosts).\n  config.vm.provision "ansible" do |ansible|\n    ansible.playbook = "provisioning/playbook.yml"\n    ansible.sudo = true\n  end\nend\n```\n\nNote that the `windows.sh` script will run within the VM and will run the given playbook against localhost with `--connection=local` inside the VM. You shouldn\'t/can\'t pass a custom inventory file to the script, as you can using Vagrant\'s Ansible provisioner.\n\n### Role Requirements File\n\nIf your playbook requires roles to be installed which are not present in a `roles` directory within the playbook\'s directory, then you should add the roles to a [role requirements](http://docs.ansible.com/galaxy.html#advanced-control-over-role-requirements-files) file. Place the resulting `requirements.txt` or `requirements.yml` file in the same directory as your playbook, and the roles will be installed automatically.\n\n## Licensing and More Info\n\nCreated by [Jeff Geerling](http://jeffgeerling.com/) in 2014. Licensed under the MIT license; see the LICENSE file for more info.\n'