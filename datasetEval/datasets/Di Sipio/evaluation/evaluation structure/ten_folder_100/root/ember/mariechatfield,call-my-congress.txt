b"# Call My Congress\n\n[![Greenkeeper badge](https://badges.greenkeeper.io/mariechatfield/call-my-congress.svg)](https://greenkeeper.io/)\n\n[![Build Status](https://travis-ci.org/mariechatfield/call-my-congress.svg?branch=master)](https://travis-ci.org/mariechatfield/call-my-congress)\n\nCall My Congress is a small application that helps US citizens quickly find contact information for their congressional representatives.\n\nIt is built using data freely provided by the [US Census Geocoding Services](https://geocoding.geo.census.gov/) and [ProPublica](https://www.propublica.org/datastore/apis).\n\nThe app consists of an Ember client app and an Express server. All the front end application code can be found in [`app/`](app/). The back end application code can be found in [`backend/app/`](backend/app/).\n\n## Prerequisites\n\nYou will need the following things properly installed on your computer.\n\n* [Git](http://git-scm.com/)\n* [Node.js](http://nodejs.org/) (with NPM)\n* [Ember CLI](http://ember-cli.com/)\n* [PhantomJS](http://phantomjs.org/)\n\n## Installation\n\n* `git clone https://github.com/mchat/call-my-congress.git` this repository\n* `cd call-my-congress`\n* `npm install`\n\n## Running / Development\n\nSince this application includes both a front end and a back end, you will need to start up two servers to begin development.\n\n*Note: Running the backend requires access to ProPublica. You'll need to obtain an API key for the [ProPublica Congress API](https://www.propublica.org/datastore/api/propublica-congress-api) to make valid requests.*\n\n* `PROPUBLICA_API_KEY=[...] npm run backend`\n* `npm run frontend`\n* Visit [http://localhost:4200](http://localhost:4200) to see the app running locally.\n\nBoth of these servers will automatically reload whenever you save changes.\n\n### Running Tests\n\nTo run all tests once (used for Travis CI builds):\n* `npm test`\n\nThis runs both the front end and back end test suites. You can also run either suite just once with:\n* `npm run test:backend`\n* `npm run test:frontend`\n\nTo develop against tests:\n* `npm run test-server:backend`\n* `npm run test-server:frontend`\n\nThis will start a test server for the test suite in question, and will reload your tests whenever you save either app or test code.\n\nPro tip for front end tests: the tests will be opened in your browser. You can use the `filter` query param to run a subset of tests. I.e. `?filter=Integration | Component` will only run the component integration tests.\n\n### Building\n\n* `ember build` (development)\n* `ember build --environment production` (production)\n\n### Deploying\n\nChanges pushed to master are automatically deployed to Heroku once they have a passing build.\n\nThis app is deployed to two separate dynos on Heroku. The first (`call-my-congress`) is configured to run only the front end Ember application. The second (`call-my-congress-backend`) runs the Express server.\n\n`call-my-congress` proxies all `/api/` requests to `call-my-congress-backend`, which is defined in [`static.json`](static.json).\n\n### Caching Strategy\n\nCall My Congress relies on third-party APIs to serve district and congressional data. When Call My Congress is experiencing a high volume of traffic, we want to ensure we don't overwhelm our third-party APIs with requests or hit their designated rate limits.\n\nSince most of the response data (congressional representatives, their contact information, and mapping zip codes to districts) does not change on a frequent basis, we can cache the responses and avoid making additional requests for the same data.\n\nZip code to district data is cached by zip code lookup, and held for one week.\n\nCongressional representative data is cached by either House or Senate, and held for one day.\n\nThe current cache implementation uses only app memory (which means each server starts with a completely empty cache when it refreshes, and multiple servers running the app cannot share a cache). We should consider adding a database (like Redis) to further enable Call My Congress to scale in the future if the app-memory cache hits the top of its constraints.\n\n__Note:__ We will _never_ cache or log district lookup by street address, as this is personally-identifiable information and unique to the point that there aren't any gains to be made. Zip code lookups are sufficiently de-anonymized and general to warrant caching.\n\n### Contributing\n\nPRs and improvements are welcome! If you'd like to contribute but aren't sure where to start, here's a short wish list of small contributions:\n\n* Improve high-level documentation (particularly around getting started or running locally)\n* Document a component with its expected inputs and behavior\n* Add another test for a case that's missing\n* Try out the app on a different browser or operating system, and if there are any bugs then [file an issue](../../issues) and consider trying to fix it\n* Translate helper text and error messages into a new language ([original English strings](app/locales/en/translations.js))\n"