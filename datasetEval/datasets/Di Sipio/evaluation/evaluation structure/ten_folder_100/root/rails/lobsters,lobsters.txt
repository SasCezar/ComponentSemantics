b"### Lobsters Rails Project [![Build Status](https://travis-ci.org/lobsters/lobsters.svg?branch=master)](https://travis-ci.org/lobsters/lobsters)\n\nThis is the\n[quite sad](https://www.reddit.com/r/rails/comments/6jz7tq/source_code_lobsters_a_hacker_news_clone_built/)\nsource code to the site operating at\n[https://lobste.rs](https://lobste.rs).\nIt is a Rails 5 codebase and uses a SQL (MariaDB in production) backend for the database.\n\nYou are free to use this code to start your own [sister site](https://github.com/lobsters/lobsters/wiki)\nbecause the code is available under a [permissive license](https://github.com/lobsters/lobsters/blob/master/LICENSE) (3-clause BSD).\nWe welcome bug reports and code contributions that help use improve [lobste.rs](https://lobste.rs).\nAs a volunteer project we're reluctant to take on work that's not useful to our site, so please understand if we don't want to adopt your custom feature.\n\n2019-05-29 experiment:\nAre you interested in running your own sister site and not technical, or otherwise willing to pay for hosting/support?\nMaybe you're a Reddit community unhappy with their redesign, want an internal site for your company, or want to experiement with community design?\nPlease contact Peter (email that name @push.cx).\nI'm exploring the idea of a hosting company to run sites using the codebase, or maybe consulting on custom features, and would love to hear from you.\n(The only change to Lobsters would be that someone's getting paid to PR back bug fixes.)\n\n\n#### Contributing bugfixes and new features\n\nWe'd love to have your help.\nPlease see the [CONTRIBUTING](https://github.com/lobsters/lobsters/blob/master/CONTRIBUTING.md) file for details.\n\n#### Initial setup\n\nUse the steps below for a local install or\n[lobsters-ansible](https://github.com/lobsters/lobsters-ansible) for our production deployment config.\nThere's an external project [docker-lobsters](https://github.com/utensils/docker-lobsters) if you want to use Docker.\n\n* Install Ruby 2.3.\n\n* Checkout the lobsters git tree from Github\n    ```sh\n    $ git clone git://github.com/lobsters/lobsters.git\n    $ cd lobsters\n    lobsters$\n    ```\n\n* Install Nodejs, needed (or other execjs) for uglifier\n    ```sh\n    Fedora: sudo yum install nodejs\n    Ubuntu: sudo apt-get install nodejs\n    OSX: brew install nodejs\n    ```\n\n* Run Bundler to install/bundle gems needed by the project:\n\n    ```sh\n    lobsters$ bundle\n    ```\n    \n    * If when installing the `mysql2` gem on macOS, you see \n      `ld: library not found for -l-lpthread` in the output, see \n      [this solution](https://stackoverflow.com/a/44790834/204052) for a fix.\n      You might also see `ld: library not found for -lssl` if you're using\n      macOS 10.4+ and Homebrew `openssl`, in which case see\n      [this solution](https://stackoverflow.com/a/39628463/1042144).\n\n* Create a MySQL (other DBs supported by ActiveRecord may work, only MySQL and\nMariaDB have been tested) database, username, and password and put them in a\n`config/database.yml` file.  You will also want a separate database for\nrunning tests:\n\n    ```yaml\n    development:\n      adapter: mysql2\n      encoding: utf8mb4\n      reconnect: false\n      database: lobsters_dev\n      socket: /tmp/mysql.sock\n      username: *dev_username*\n      password: *dev_password*\n      \n    test:\n      adapter: mysql2\n      encoding: utf8mb4\n      reconnect: false\n      database: lobsters_test\n      socket: /tmp/mysql.sock\n      username: *test_username*\n      password: *test_password*\n    ```\n\n* Load the schema into the new database:\n\n    ```sh\n    lobsters$ rails db:schema:load\n    ```\n\n* On your production server, copy `config/initializers/production.rb.sample`\n  to `config/initalizers/production.rb` and customize it with your site's\n  `domain` and `name`. (You don't need this on your dev machine).\n\n* Put your site's custom CSS in `app/assets/stylesheets/local`.\n\n* Seed the database to create an initial administrator user, the `inactive-user`, and at least one tag:\n\n    ```sh\n    lobsters$ rails db:seed\n    ```\n\n* On your personal computer, you can add some sample data and run the Rails server in development mode.\n  You should be able to login to `http://localhost:3000` with your new `test` user:\n\n    ```sh\n    lobsters$ rails fake_data\n    lobsters$ rails server\n    ```\n\n* Deploying the site in production requires setting up a web server and running the app in production mode.\n  There are more tools and options available than we can describe; find a guide or an expert.\n  The lobsters-ansible repo has our config files to crib from. Some app-specific notes:\n\n* Set up crontab or another scheduler to run regular jobs:\n\n    ```\n    */5 * * * *  cd /path/to/lobsters && env RAILS_ENV=production sh -c 'bundle exec ruby script/mail_new_activity; bundle exec ruby script/post_to_twitter; bundle exec ruby script/traffic_range'\n    ```\n\n* See `config/initializers/production.rb.sample` for GitHub/Twitter integration help.\n\n#### Administration\n\nBasic moderation happens on-site, but most other administrative tasks require use of the rails console in production.\nAdministrators can create and edit tags at `/tags`.\n"