b'# Elasticsearch\n\n[![Build Status](https://travis-ci.org/elastic/elasticsearch-rails.svg?branch=master)](https://travis-ci.org/elastic/elasticsearch-rails) [![Code Climate](https://codeclimate.com/github/elastic/elasticsearch-rails/badges/gpa.svg)](https://codeclimate.com/github/elastic/elasticsearch-rails)\n\nThis repository contains various Ruby and Rails integrations for [Elasticsearch](http://elasticsearch.org):\n\n* ActiveModel integration with adapters for ActiveRecord and Mongoid\n* _Repository pattern_ based persistence layer for Ruby objects\n* Enumerable-based wrapper for search results\n* ActiveRecord::Relation-based wrapper for returning search results as records\n* Convenience model methods such as `search`, `mapping`, `import`, etc\n* Rake tasks for importing the data\n* Support for Kaminari and WillPaginate pagination\n* Integration with Rails\' instrumentation framework\n* Templates for generating example Rails application\n\nElasticsearch client and Ruby API is provided by the\n**[elasticsearch-ruby](https://github.com/elasticsearch/elasticsearch-ruby)** project.\n\n## Compatibility\n\nThe libraries are compatible with Ruby 1.9.3 and higher.\n\nThe version numbers follow the Elasticsearch major versions. The `master` branch is compatible with\nthe Elasticsearch `master` branch, therefore, with the next major version.\n\n| Rubygem       |   | Elasticsearch |\n|:-------------:|:-:| :-----------: |\n| 0.1           | \xe2\x86\x92 | 1.x           |\n| 2.x           | \xe2\x86\x92 | 2.x           |\n| 5.x           | \xe2\x86\x92 | 5.x           |\n| 6.x           | \xe2\x86\x92 | 6.x           |\n| 7.x           | \xe2\x86\x92 | 7.x           |\n| master        | \xe2\x86\x92 | master        |\n\nUse a release that matches the major version of Elasticsearch in your stack. Each client version is\nbackwards compatible with all minor versions of the same major version.\n\nCheck out [Elastic product end of life dates](https://www.elastic.co/support/eol)\nto learn which releases are still actively supported and tested.\n\n## Installation\n\nInstall each library from [Rubygems](https://rubygems.org/gems/elasticsearch):\n\n```ruby\ngem install elasticsearch-model\ngem install elasticsearch-rails\n```\n\nTo use an unreleased version, add it to your `Gemfile` for [Bundler](http://bundler.io):\n\n```ruby\ngem \'elasticsearch-model\', github: \'elastic/elasticsearch-rails\', branch: \'5.x\'\ngem \'elasticsearch-rails\', github: \'elastic/elasticsearch-rails\', branch: \'5.x\'\n```\n\n## Usage\n\nThis project is split into three separate gems:\n\n* [**`elasticsearch-model`**](https://github.com/elasticsearch/elasticsearch-rails/tree/master/elasticsearch-model),\n  which contains search integration for Ruby/Rails models such as ActiveRecord::Base and Mongoid,\n\n* [**`elasticsearch-persistence`**](https://github.com/elasticsearch/elasticsearch-rails/tree/master/elasticsearch-persistence),\n  which provides a standalone persistence layer for Ruby/Rails objects and models\n\n* [**`elasticsearch-rails`**](https://github.com/elasticsearch/elasticsearch-rails/tree/master/elasticsearch-rails),\n  which contains various features for Ruby on Rails applications\n\nExample of a basic integration into an ActiveRecord-based model:\n\n```ruby\nrequire \'elasticsearch/model\'\n\nclass Article < ActiveRecord::Base\n  include Elasticsearch::Model\n  include Elasticsearch::Model::Callbacks\nend\n\n# Index creation right at import time is not encouraged.\n# Typically, you would call create_index! asynchronously (e.g. in a cron job)\n# However, we are adding it here so that this usage example can run correctly.\nArticle.__elasticsearch__.create_index!\nArticle.import\n\n@articles = Article.search(\'foobar\').records\n```\n\nYou can generate a simple Ruby on Rails application with a single command\n(see the [other available templates](https://github.com/elasticsearch/elasticsearch-rails/tree/master/elasticsearch-rails#rails-application-templates)):\n\n```bash\nrails new searchapp --skip --skip-bundle --template https://raw.github.com/elasticsearch/elasticsearch-rails/master/elasticsearch-rails/lib/rails/templates/01-basic.rb\n```\n\nExample of using Elasticsearch as a repository for a Ruby domain object:\n\n```ruby\nrequire \'virtus\'\nclass Article\n  include Virtus.model\n  attribute :title, String\nend\n\nrequire \'elasticsearch/persistence\'\nrepository = Elasticsearch::Persistence::Repository.new\n\nrepository.save Article.new(title: \'Test\')\n# POST http://localhost:9200/repository/article\n# => {"_index"=>"repository", "_type"=>"article", "_id"=>"Ak75E0U9Q96T5Y999_39NA", ...}\n```\n\n**Please refer to each library documentation for detailed information and examples.**\n\n### Model\n\n* [[README]](https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md)\n* [[Documentation]](http://rubydoc.info/gems/elasticsearch-model/)\n* [[Test Suite]](https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/test)\n\n### Persistence\n\n* [[README]](https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-persistence/README.md)\n* [[Documentation]](http://rubydoc.info/gems/elasticsearch-persistence/)\n* [[Test Suite]](https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-persistence/test)\n\n### Rails\n\n* [[README]](https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-rails/README.md)\n* [[Documentation]](http://rubydoc.info/gems/elasticsearch-rails)\n* [[Test Suite]](https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-rails/test)\n\n## Development\n\nTo work on the code, clone the repository and install all dependencies first:\n\n```\ngit clone https://github.com/elastic/elasticsearch-rails.git\ncd elasticsearch-rails/\nbundle install\nrake bundle:install\n```\n\n### Running the Test Suite\n\nYou can run unit and integration tests for each sub-project by running the respective Rake tasks in their folders.\n\nYou can also unit, integration, or both tests for all sub-projects from the top-level directory:\n\n    rake test:all\n\nThe test suite expects an Elasticsearch cluster running on port 9250, and **will delete all the data**. You can launch an isolated, in-memory Elasticsearch cluster with the following Rake task:\n\n    TEST_CLUSTER_COMMAND=/tmp/builds/elasticsearch-2.0.0-SNAPSHOT/bin/elasticsearch TEST_CLUSTER_NODES=1 bundle exec rake test:cluster:start\n\nSee more information in the documentation  for the [`elasticsearch-extensions`](https://github.com/elasticsearch/elasticsearch-ruby/tree/master/elasticsearch-extensions#testcluster) gem.\n\n## License\n\nThis software is licensed under the Apache 2 license, quoted below.\n\n    Licensed to Elasticsearch B.V. under one or more contributor\n    license agreements. See the NOTICE file distributed with\n    this work for additional information regarding copyright\n    ownership. Elasticsearch B.V. licenses this file to you under\n    the Apache License, Version 2.0 (the "License"); you may\n    not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n    \n    \thttp://www.apache.org/licenses/LICENSE-2.0\n    \n    Unless required by applicable law or agreed to in writing,\n    software distributed under the License is distributed on an\n    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n    KIND, either express or implied.  See the License for the\n    specific language governing permissions and limitations\n    under the License.\n'