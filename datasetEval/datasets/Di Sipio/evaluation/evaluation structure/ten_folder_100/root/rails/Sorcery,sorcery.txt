b"# Sorcery: Magical Authentication\n\n[![Gem Version](https://badge.fury.io/rb/sorcery.svg)](https://rubygems.org/gems/sorcery)\n[![Gem Downloads](https://img.shields.io/gem/dt/sorcery.svg)](https://rubygems.org/gems/sorcery)\n[![Build Status](https://travis-ci.org/Sorcery/sorcery.svg?branch=master)](https://travis-ci.org/Sorcery/sorcery)\n[![Code Climate](https://codeclimate.com/github/Sorcery/sorcery.svg)](https://codeclimate.com/github/Sorcery/sorcery)\n[![Inline docs](http://inch-ci.org/github/Sorcery/sorcery.svg?branch=master)](http://inch-ci.org/github/Sorcery/sorcery)\n[![Join the chat at https://gitter.im/Sorcery/sorcery](https://badges.gitter.im/join_chat.svg)](https://gitter.im/Sorcery/sorcery?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)\n\nMagical Authentication for Rails. Supports ActiveRecord, DataMapper, Mongoid and MongoMapper.\n\nInspired by Restful Authentication, Authlogic and Devise. Crypto code taken almost unchanged from Authlogic. OAuth code inspired by OmniAuth and Ryan Bates's Railscast about it.\n\n### Philosophy\n\nSorcery is a stripped-down, bare-bones authentication library, with which you can write your own authentication flow. It was built with a few goals in mind:\n\n- Less is more - less than 20 public methods to remember for the entire feature-set make the lib easy to 'get'.\n- No built-in or generated code - use the library's methods inside *your own* MVC structures, and don't fight to fix someone else's.\n- Magic yes, Voodoo no - the lib should be easy to hack for most developers.\n- Configuration over Confusion - Centralized (1 file), Simple & short configuration as possible, not drowning in syntactic sugar.\n- Keep MVC cleanly separated - DB is for models, sessions are for controllers. Models stay unaware of sessions.\n\n## Table of Contents\n\n1. [Useful Links](#useful-links)\n2. [API Summary](#api-summary)\n3. [Installation](#installation)\n4. [Configuration](#configuration)\n5. [Full Features List by Module](#full-features-list-by-module)\n6. [Planned Features](#planned-features)\n7. [Contributing](#contributing)\n8. [Contact](#contact)\n9. [License](#license)\n\n## Useful Links\n\n- [Documentation](http://rubydoc.info/gems/sorcery)\n- [Railscast](http://railscasts.com/episodes/283-authentication-with-sorcery)\n- [Simple tutorial](https://github.com/Sorcery/sorcery/wiki/Simple-Password-Authentication)\n- [Example Rails app](https://github.com/Sorcery/sorcery-example-app)\n\nCheck out the tutorials in the [wiki](https://github.com/Sorcery/sorcery/wiki) for more:\n\n- [DataMapper Support](https://github.com/Sorcery/sorcery/wiki/DataMapper-Support)\n- [DelayedJob Integration](https://github.com/Sorcery/sorcery/wiki/DelayedJob-Integration)\n- [Simple Password Authentication](https://github.com/Sorcery/sorcery/wiki/Simple-Password-Authentication)\n- [Single Table Inheritance Support](https://github.com/Sorcery/sorcery/wiki/Single-Table-Inheritance-Support)\n- [Upgrading](https://github.com/Sorcery/sorcery/wiki/Upgrading)\n\n## API Summary\n\nBelow is a summary of the library methods. Most method names are self\nexplaining and the rest are commented:\n\n### Core\n\n```ruby\nrequire_login # This is a before action\nlogin(email, password, remember_me = false)\nauto_login(user) # Login without credentials\nlogout\nlogged_in? # Available in views\ncurrent_user # Available in views\nredirect_back_or_to # Use when a user tries to access a page while logged out, is asked to login, and we want to return him back to the page he originally wanted\n@user.external? # Users who signed up using Facebook, Twitter, etc.\n@user.active_for_authentication? # Add this method to define behaviour that will prevent selected users from signing in\n@user.valid_password?('secret') # Compares 'secret' with the actual user's password, returns true if they match\nUser.authenticates_with_sorcery!\n```\n\n### HTTP Basic Auth\n\n```ruby\nrequire_login_from_http_basic # This is a before action\n```\n\n### External\n\n```ruby\nlogin_at(provider) # Sends the user to an external service (Facebook, Twitter, etc.) to authenticate\nlogin_from(provider) # Tries to login from the external provider's callback\ncreate_from(provider) # Create the user in the local app database\nbuild_from(provider) # Build user instance using user_info_mappings\n```\n\n### Remember Me\n\n```ruby\nauto_login(user, should_remember = false) # Login without credentials, optional remember_me\nremember_me!\nforget_me!\nforce_forget_me! # Forgets all sessions by clearing the token, even if remember_me_token_persist_globally is set to true\n```\n\n### Reset Password\n\n```ruby\nUser.load_from_reset_password_token(token)\n@user.generate_reset_password_token! # Use if you want to send the email by yourself\n@user.deliver_reset_password_instructions! # Generates the token and sends the email\n@user.change_password(new_password)\n@user.change_password!(new_password) # Same as change_password but raises exception on save\n```\n\n### Session Timeout\n\n```ruby\ninvalidate_active_sessions! #Invalidate all sessions with a login_time or last_action_time before the current time. Must Opt-in\n```\n\n### User Activation\n\n```ruby\nUser.load_from_activation_token(token)\n@user.setup_activation\n@user.activate!\n```\n\nPlease see the tutorials in the github wiki for detailed usage information.\n\n## Installation\n\nAdd this line to your application's Gemfile:\n\n```ruby\ngem 'sorcery'\n```\n\nAnd then execute:\n\n    $ bundle\n\nOr install it yourself as:\n\n    $ gem install sorcery\n\n## Configuration\n\nRun the following command to generate the core migration file, the initializer file and the\n`User` model class.\n\n    $ rails generate sorcery:install\n\nRun the following command generate the migrations files for remember_me and reset_password submodules and will create the initializer file (and add submodules to it), and create the `User` model class.\n\n    $ rails generate sorcery:install remember_me reset_password\n\nRun the following command to generate the core migration file, the initializer and change the model class (in the initializer and migration files) to the class `Person` (and its pluralized version, 'people')\n\n    $ rails generate sorcery:install --model Person\n\nRun the following command to generate only the migration files for the specified submodules and will add them to the initializer file.\n\n    $ rails generate sorcery:install http_basic_auth external remember_me --only-submodules\n\nInside the initializer, the comments will tell you what each setting does.\n\n## Full Features List by Module\n\n**Core** (see [lib/sorcery/model.rb](https://github.com/Sorcery/sorcery/blob/master/lib/sorcery/model.rb) and [lib/sorcery/controller.rb](https://github.com/Sorcery/sorcery/blob/master/lib/sorcery/controller.rb)):\n\n- Login / logout, optional return user to requested url on login, configurable redirect for non-logged-in users.\n- Password encryption, algorithms: bcrypt (default), MD5, SHA-1, SHA-256, SHA-512, AES or custom. Configurable stretches and salt.\n- Configurable attribute names for username, password and email.\n- Allow multiple fields to serve as username.\n\n**User Activation** (see [lib/sorcery/model/submodules/user_activation.rb](https://github.com/Sorcery/sorcery/blob/master/lib/sorcery/model/submodules/user_activation.rb)):\n\n- User activation by email with optional success email\n- Configurable attribute names\n- Configurable mailer, method name, and attribute name\n- Configurable temporary token expiration\n- Optionally prevent non-active users to login\n\n**Reset Password** (see [lib/sorcery/model/submodules/reset_password.rb](https://github.com/Sorcery/sorcery/blob/master/lib/sorcery/model/submodules/reset_password.rb)):\n\n- Reset password with email verification\n- Configurable mailer, method name, and attribute name\n- Configurable temporary token expiration\n- Configurable time between emails (hammering protection)\n\n**Remember Me** (see [lib/sorcery/model/submodules/remember_me.rb](https://github.com/Sorcery/sorcery/blob/master/lib/sorcery/model/submodules/remember_me.rb)):\n\n- Remember me with configurable expiration\n- Configurable attribute names\n- Configurable to persist globally (supporting multiple browsers at the same time), or starting anew after each login\n\n**Session Timeout** (see [lib/sorcery/controller/submodules/session_timeout.rb](https://github.com/Sorcery/sorcery/blob/master/lib/sorcery/controller/submodules/session_timeout.rb)):\n\n- Configurable session timeout\n- Optionally session timeout will be calculated from last user action\n- Optionally enable a method to clear all active sessions, expects an `invalidate_sessions_before` datetime attribute.\n\n**Brute Force Protection** (see [lib/sorcery/model/submodules/brute_force_protection.rb](https://github.com/Sorcery/sorcery/blob/master/lib/sorcery/model/submodules/brute_force_protection.rb)):\n\n- Brute force login hammering protection\n- configurable logins before lock and lock duration\n\n**Basic HTTP Authentication** (see [lib/sorcery/controller/submodules/http_basic_auth.rb](https://github.com/Sorcery/sorcery/blob/master/lib/sorcery/controller/submodules/http_basic_auth.rb)):\n\n- A before action for requesting authentication with HTTP Basic\n- Automatic login from HTTP Basic\n- Automatic login is disabled if session key changed\n\n**Activity Logging** (see [lib/sorcery/model/submodules/activity_logging.rb](https://github.com/Sorcery/sorcery/blob/master/lib/sorcery/model/submodules/activity_logging.rb)):\n\n- Automatic logging of last login, last logout, last activity time and IP address for last login\n- Configurable timeout by which to decide whether to include a user in the list of logged in users\n\n**External** (see [lib/sorcery/controller/submodules/external.rb](https://github.com/Sorcery/sorcery/blob/master/lib/sorcery/controller/submodules/external.rb)):\n\n- OAuth1 and OAuth2 support (currently: Twitter, Facebook, Github, Google, Heroku, LinkedIn, VK, LiveID, Xing, Salesforce)\n- Configurable database column names\n- Authentications table\n\n## Planned Features\n\n- Passing a block to encrypt, allowing the developer to define his own mix of salting and encrypting\n- Forgot username, maybe as part of the reset_password module\n- Scoping logins (to a subdomain or another arbitrary field)\n- Allowing storing the salt and encrypted password in the same DB field for extra security\n- Other reset password strategies (security questions?)\n- Other brute force protection strategies (captcha)\n\nHave an idea? Let us know, and it might get into the gem!\n\n## Contributing\n\nBug reports and pull requests are welcome on GitHub at https://github.com/Sorcery/sorcery.\n\n- [Git Workflow](https://github.com/Sorcery/sorcery/wiki/Git-Workflow)\n- [Running the specs](https://github.com/Sorcery/sorcery/wiki/Running-the-specs)\n\n## Contact\n\nFeel free to ask questions using these contact details:\n\n**Current Maintainers:**\n\n- Chase Gilliam ([@Ch4s3](https://github.com/Ch4s3)) | [Email](mailto:chase.gilliam@gmail.com)\n- Josh Buker ([@athix](https://github.com/athix)) | [Email](mailto:jbuker@aeonsplice.com)\n\n**Past Maintainers:**\n\n- Noam Ben-Ari ([@NoamB](https://github.com/NoamB)) | [Email](mailto:nbenari@gmail.com) | [Twitter](https://twitter.com/nbenari)\n- Kir Shatrov ([@kirs](https://github.com/kirs)) | [Email](mailto:shatrov@me.com) | [Twitter](https://twitter.com/Kiiiir)\n- Grzegorz Witek ([@arnvald](https://github.com/arnvald)) | [Email](mailto:arnvald.to@gmail.com) | [Twitter](https://twitter.com/arnvald)\n\n## License\n\nThe gem is available as open source under the terms of the [MIT License](http://opensource.org/licenses/MIT).\n"