b'\n# Blockchain Wallet API V2\n\nProgrammatically interface with your Blockchain.info wallet.\n\n## Contents\n\n  * [Getting Started](#getting-started)\n  * [Upgrading](#upgrading)\n  * [API Documentation](#api-documentation)\n  * [RPC API](#rpc)\n  * [Installation](#installation)\n  * [Troubleshooting](#troubleshooting)\n  * [Usage](#usage)\n  * [Development](#development)\n  * [Deployment](#deployment)\n\n## Getting Started\n\nTo use this API, you will need to run small local service which be responsible for managing your Blockchain.info wallet. Your application interacts with this service locally via HTTP API calls.\n\nStart by completing the following steps:\n\n  1. Follow the [installation instructions](#installation)\n  2. Start the server: `$ blockchain-wallet-service start --port 3000`\n  3. Reference the [documentation](#api-documentation) and start interacting with your wallet programmatically!\n\nNote that `blockchain-wallet-service` is designed to be run locally on the same machine as your application and therefore will only accept connections from `localhost`. If you modify this service to accept external connections, be sure to add the appropriate firewall rules to prevent unauthorized use.\n\nAn API code is required for wallet creation and higher request limits. For basic usage, no API code is required. Request an API code [here](https://blockchain.info/api/api_create_code).\n\n## Upgrading\n\nIf you already have an application that uses [Blockchain.info\'s Wallet API](https://blockchain.info/api/blockchain_wallet_api), you will need to complete the steps in the Getting Started section above and then, in your application code, replace calls to `blockchain.info/merchant/...` with `localhost:<port>/merchant/...`.\n\n## API Documentation\n\nView the [original documentation](https://blockchain.info/api/blockchain_wallet_api).\n\nAll endpoints present in the API documentation above are supported in Blockchain Wallet API V2. The differences between two are:\n\n  * The "consolidate addresses" endpoint has been omitted\n\nAll endpoints can be called with `GET` or `POST`, and can only be accessed from `localhost`.\n\n### Creating a new Blockchain Wallet\n\nEndpoint: `/api/v2/create`\n\nQuery Parameters:\n\n  * `password` - main wallet password (required)\n  * `api_code` - blockchain.info wallet api code (required)\n  * `priv` - private key to import into wallet as first address (optional)\n  * `label` - label to give to the first address generated in the wallet (optional)\n  * `email` - email to associate with the newly created wallet (optional)\n\nSample Response:\n\n```json\n{\n  "guid": "05f290be-dbef-4636-a809-868893c51711",\n  "address": "13R9dBgKwBP29JKo11zhfi74YuBsMxJ4qY",\n  "label": "Main address"\n}\n```\n\n### Make Payment\n\nEndpoint: `/merchant/:guid/payment`\n\nQuery Parameters:\n\n  * `to` - bitcoin address to send to (required)\n  * `amount` - amount **in satoshi** to send (required)\n  * `password` - main wallet password (required)\n  * `second_password` - second wallet password (required, only if second password is enabled)\n  * `api_code` - blockchain.info wallet api code (optional)\n  * `from` - bitcoin address or account index to send from (optional)\n  * `fee` - specify transaction fee **in satoshi**\n  * `fee_per_byte` - specify transaction fee-per-byte **in satoshi**\n\n*It is recommended that transaction fees are specified using the `fee_per_byte` parameter, which will compute your final fee based on the size of the transaction. You can also set a static fee using the `fee` parameter, but doing so may result in a low fee-per-byte, leading to longer confirmation times.*\n\nSample Response:\n\n```json\n{\n  "to" : ["1A8JiWcwvpY7tAopUkSnGuEYHmzGYfZPiq"],\n  "from": ["17p49XUC2fw4Fn53WjZqYAm4APKqhNPEkY"],\n  "amounts": [200000],\n  "fee": 1000,\n  "txid": "f322d01ad784e5deeb25464a5781c3b20971c1863679ca506e702e3e33c18e9c",\n  "success": true\n}\n```\n\n### Send to Many\n\nEndpoint: `/merchant/:guid/sendmany`\n\nQuery Parameters:\n\n  * `recipients` - a *URI encoded* [JSON object](http://json.org/example.html), with bitcoin addresses as keys and the **satoshi** amounts as values (required, see example below)\n  * `password` - main wallet password (required)\n  * `second_password` - second wallet password (required, only if second password is enabled)\n  * `api_code` - blockchain.info wallet api code (optional)\n  * `from` - bitcoin address or account index to send from (optional)\n  * `fee` - specify transaction fee **in satoshi**\n  * `fee_per_byte` - specify transaction fee-per-byte **in satoshi**\n\n*It is recommended that transaction fees are specified using the `fee_per_byte` parameter, which will compute your final fee based on the size of the transaction. You can also set a static fee using the `fee` parameter, but doing so may result in a low fee-per-byte, leading to longer confirmation times.*\n\nURI Encoding a JSON object in JavaScript:\n\n```js\nvar myObject = { address1: 10000, address2: 50000 };\nvar myJSONString = JSON.stringify(myObject);\n// `encodeURIComponent` is a global function\nvar myURIEncodedJSONString = encodeURIComponent(myJSONString);\n// use `myURIEncodedJSONString` as the `recipients` parameter\n```\n\nSample Response:\n\n```json\n{\n  "to" : ["1A8JiWcwvpY7tAopUkSnGuEYHmzGYfZPiq", "18fyqiZzndTxdVo7g9ouRogB4uFj86JJiy"],\n  "from": ["17p49XUC2fw4Fn53WjZqYAm4APKqhNPEkY"],\n  "amounts": [16000, 5400030],\n  "fee": 2000,\n  "txid": "f322d01ad784e5deeb25464a5781c3b20971c1863679ca506e702e3e33c18e9c",\n  "success": true\n}\n```\n\n### Fetch Wallet Balance\n\nEndpoint: `/merchant/:guid/balance`\n\nQuery Parameters:\n\n  * `password` - main wallet password (required)\n  * `api_code` - blockchain.info wallet api code (required)\n\nSample Response:\n\n```json\n{ "balance": 10000 }\n```\n\n### Enable HD Functionality\n\nEndpoint: `/merchant/:guid/enableHD`\n\nQuery Parameters:\n\n  * `password` - main wallet password (required)\n  * `api_code` - blockchain.info wallet api code (optional)\n\nThis will upgrade a wallet to an HD (Hierarchical Deterministic) Wallet, which allows the use of accounts. See [BIP32](https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki) for more information on HD wallets and accounts.\n\n### List Active HD Accounts\n\nEndpoint: `/merchant/:guid/accounts`\n\nQuery Parameters:\n\n  * `password` - main wallet password (required)\n  * `api_code` - blockchain.info wallet api code (optional)\n\n### List HD xPubs\n\nEndpoint: `/merchant/:guid/accounts/xpubs`\n\nQuery Parameters:\n\n  * `password` - main wallet password (required)\n  * `api_code` - blockchain.info wallet api code (optional)\n\n### Create New HD Account\n\nEndpoint: `/merchant/:guid/accounts/create`\n\nQuery Parameters:\n\n  * `label` - label to assign to the newly created account (optional)\n  * `password` - main wallet password (required)\n  * `api_code` - blockchain.info wallet api code (optional)\n\n### Get Single HD Account\n\nEndpoint: `/merchant/:guid/accounts/:xpub_or_index`\n\nQuery Parameters:\n\n  * `password` - main wallet password (required)\n  * `api_code` - blockchain.info wallet api code (optional)\n\n### Get HD Account Receiving Address\n\nEndpoint: `/merchant/:guid/accounts/:xpub_or_index/receiveAddress`\n\nQuery Parameters:\n\n  * `password` - main wallet password (required)\n  * `api_code` - blockchain.info wallet api code (optional)\n\n### Check HD Account Balance\n\nEndpoint: `/merchant/:guid/accounts/:xpub_or_index/balance`\n\nQuery Parameters:\n\n  * `password` - main wallet password (required)\n  * `api_code` - blockchain.info wallet api code (optional)\n\n### Archive HD Account\n\nEndpoint: `/merchant/:guid/accounts/:xpub_or_index/archive`\n\nQuery Parameters:\n\n  * `password` - main wallet password (required)\n  * `api_code` - blockchain.info wallet api code (optional)\n\n### Unarchive HD Account\n\nEndpoint: `/merchant/:guid/accounts/:xpub_or_index/unarchive`\n\nQuery Parameters:\n\n  * `password` - main wallet password (required)\n  * `api_code` - blockchain.info wallet api code (optional)\n\n### List Addresses (deprecated, use the HD API instead)\n\nEndpoint: `/merchant/:guid/list`\n\nQuery Parameters:\n\n  * `password` - main wallet password (required)\n  * `api_code` - blockchain.info wallet api code (optional)\n\nSample Response:\n\n```json\n{\n  "addresses": [\n    {\n        "balance": 79434360,\n        "address": "1A8JiWcwvpY7tAopUkSnGuEYHmzGYfZPiq",\n        "label": "My Wallet",\n        "total_received": 453300048335\n    },\n    {\n        "balance": 0,\n        "address": "17p49XUC2fw4Fn53WjZqYAm4APKqhNPEkY",\n        "total_received": 0\n    }\n  ]\n}\n```\n\n### Fetch Address Balance (deprecated, use the HD API instead)\n\nEndpoint: `/merchant/:guid/address_balance`\n\nQuery Parameters:\n\n  * `address` - address to fetch balance for (required)\n  * `password` - main wallet password (required)\n  * `api_code` - blockchain.info wallet api code (optional)\n\nNote: unlike the hosted API, there is no option of a `confirmations` parameter for specifying minimum confirmations.\n\nSample Response:\n\n```json\n{ "balance": 129043, "address": "19r7jAbPDtfTKQ9VJpvDzFFxCjUJFKesVZ", "total_received": 53645423 }\n```\n\n### Generate Address (deprecated, use the HD API instead)\n\nEndpoint: `/merchant/:guid/new_address`\n\nQuery Parameters:\n\n  * `password` - main wallet password (required)\n  * `label` - label to give to the address (optional)\n  * `api_code` - blockchain.info wallet api code (optional)\n\nSample Response:\n\n```json\n{ "address" : "18fyqiZzndTxdVo7g9ouRogB4uFj86JJiy" , "label":  "My New Address" }\n```\n\n### Archive Address (deprecated, use the HD API instead)\n\nEndpoint: `/merchant/:guid/archive_address`\n\nQuery Parameters:\n\n  * `address` - address to archive (required)\n  * `password` - main wallet password (required)\n  * `api_code` - blockchain.info wallet api code (optional)\n\nSample Response:\n\n```json\n{ "archived" : "18fyqiZzndTxdVo7g9ouRogB4uFj86JJiy" }\n```\n\n### Unarchive Address (deprecated, use the HD API instead)\n\nEndpoint: `/merchant/:guid/unarchive_address`\n\nQuery Parameters:\n\n  * `address` - address to unarchive (required)\n  * `password` - main wallet password (required)\n  * `api_code` - blockchain.info wallet api code (optional)\n\nSample Response:\n\n```json\n{ "active" : "18fyqiZzndTxdVo7g9ouRogB4uFj86JJiy" }\n```\n\n## RPC\n\nBitcoind compatible RPC API. Full documentation available [here](https://blockchain.info/api/json_rpc_api).\n\nStarting the RPC server:\n\n```\n$ blockchain-wallet-service start-rpc [options]\n```\n\nView additional options and instructions under [Usage](#usage).\n\nDifferences from server API:\n\n  * Option `-rpcssl` is not supported\n  * Method `listsinceblock` is not supported\n  * Param `minConfimations` is not supported for methods `listreceivedbyaccount` and `listreceivedbyaddress`\n  * Param `minimumConfirmations` is not supported for method `getbalance`\n  * Param `confirmations` is not supported for method `listaccounts`\n  * Responses representing transactions have a different format\n\n## Installation\n\n[`nodejs`](https://nodejs.org) and [`npm`](https://npmjs.com) are required to install and use this API service. Installation:\n\n```sh\n$ npm install -g blockchain-wallet-service\n```\n\nFor the best stability and performance, make sure you are always using the latest version.\n\nTo check your version:\n\n```sh\n$ blockchain-wallet-service -V\n```\n\nTo update to the latest version:\n\n```sh\n$ npm update -g blockchain-wallet-service\n```\n\nRequires:\n\n  * node >= 6.0.0\n  * npm >= 3.0.0\n\nIf you have issues with the installation process, see the troubleshooting section below.\n\n## Troubleshooting\n\nInstallation errors:\n\n  * If you are getting `EACCESS` or permissions-related errors, it might be necessary to run the install as root, using the `sudo` command.\n\n  * If you are getting errors concerning node-gyp or python, install with `npm install --no-optional`\n\nStartup errors:\n\n  * If startup fails with `/usr/bin/env: node: No such file or directory`, it\'s possible node is not installed, or was installed with a different name (Ubuntu, for example, installs node as nodejs). If node was installed with a different name, create a symlink to your node binary: `sudo ln -s /usr/bin/nodejs /usr/bin/node`, or install node through [Node Version Manager](https://github.com/creationix/nvm).\n\nRuntime errors:\n\n  * If you are seeing a `TypeError` claiming that an object `has no method \'compare\'`, it is because you are on a version of Node older than 0.12, before the `compare` method was added to Buffers. Try upgrading to at least Node version 0.12.\n\n  * If you are getting wallet decryption errors despite having correct credentials, then it\'s possible that you do not have Java installed, which is required by a dependency of the my-wallet-v3 module. Not having Java installed during the `npm install` process can result in the inability to decrypt wallets. Download the JDK from [here for Mac](https://support.apple.com/kb/DL1572) or by running `apt-get install default-jdk` on debian-based linux systems.\n\nTimeout Errors:\n\n  * If you are getting a timeout response, additional authorization from your blockchain wallet may be required. This can occur when using an unrecognized browser or IP address. An email authorizing the API access attempt will be sent to the registered user that will require action in order to authorize future requests.\n\nIf this section did not help, please open a github issue or visit our [support center](https://blockchain.zendesk.com).\n\n## Usage\n\nAfter installing the service, the command `blockchain-wallet-service` will be available for use.\n\n### Options\n\n  * `-h, --help` - output usage information\n  * `-V, --version` - output the version number\n  * `-c, --cwd` - use the current directory as the wallet service module (development only)\n\n### Commands\n\n#### start\n\nUsage: `blockchain-wallet-service start [options]`\n\nThis command will start the service, making Blockchain Wallet API V2 available on a specified port.\n\nCommand options:\n\n  * `-h, --help` - output usage information\n  * `-p, --port` - port number to run the server on (defaults to `3000`)\n  * `-b, --bind` - bind to a specific ip (defaults to `127.0.0.1`, note that binding to an ip other than this can lead to security vulnerabilities)\n  * `--ssl-key` - the path to your ssl key (optional)\n  * `--ssl-cert` - the path to your ssl certificate (optional)\n\nTo open the service to all incoming connections, bind to `0.0.0.0`.\n\n#### start-rpc\n\nUsage: `blockchain-wallet-service start-rpc [options]`\n\nThis command will start the JSON RPC server.\n\nOptions:\n\n  * `-k, --key` - api code to use for server requests (required option)\n  * `-p, --rpcport` - rpc server port (default: 8000)\n  * `-b, --bind` - bind to a specific ip (defaults to `127.0.0.1`, note that binding to an ip other than this can lead to security vulnerabilities)\n\nGet an API code [here](https://blockchain.info/api/api_create_code).\n\n### Examples\n\nTo start the Wallet API service on port 3000:\n\n```sh\n$ blockchain-wallet-service start --port 3000\n```\n\n## Development\n\n  1. Clone this repo\n  2. Run `yarn --ignore-engines`\n  3. Run `yarn start`\n  4. Dev server is now running on port 3000\n\nIf you are developing `blockchain-wallet-client` alongside this module, it is useful to create a symlink to `my-wallet-v3`:\n\n```sh\n$ ln -s ../path/to/my-wallet-v3 node_modules/blockchain-wallet-client\n```\n\n### Testing\n\n```sh\n$ yarn test\n```\n\n### Configuration\n\nOptional parameters can be configured in a `.env` file:\n\n  * `PORT` - port number for running dev server (default: `3000`)\n  * `BIND` - ip address to bind the service to (default: `127.0.0.1`)\n\n## Deployment\n\nIf you want to use blockchain-wallet-service in your UNIX production server, you just have to run:\n\n```sh\n$ nohup blockchain-wallet-service start --port 3000 &\n```\n'