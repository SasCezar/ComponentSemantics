b'# reform\n\n[![Release](https://img.shields.io/github/release/go-reform/reform.svg)](https://github.com/go-reform/reform/releases/latest)\n[![GoDoc](https://godoc.org/gopkg.in/reform.v1?status.svg)](https://godoc.org/gopkg.in/reform.v1)\n[![Gitter](https://badges.gitter.im/Join%20Chat.svg)](https://gitter.im/go-reform/reform?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge)\n[![Travis CI Build Status](https://travis-ci.org/go-reform/reform.svg?branch=v1-stable)](https://travis-ci.org/go-reform/reform)\n[![AppVeyor Build status](https://ci.appveyor.com/api/projects/status/kbkyjmic461xa7b3/branch/v1-stable?svg=true)](https://ci.appveyor.com/project/AlekSi/reform/branch/v1-stable)\n[![Coverage Report](https://codecov.io/gh/go-reform/reform/branch/v1-stable/graph/badge.svg)](https://codecov.io/gh/go-reform/reform)\n[![Go Report Card](https://goreportcard.com/badge/gopkg.in/reform.v1)](https://goreportcard.com/report/gopkg.in/reform.v1)\n[![GolangCI](https://golangci.com/badges/github.com/golangci/golangci-lint.svg)](https://golangci.com)\n\n<a href="https://en.wikipedia.org/wiki/Peter_the_Great"><img align="right" alt="Reform gopher logo" title="Peter the Reformer" src=".github/reform.png"></a>\n\nA better ORM for Go and `database/sql`.\n\nIt uses non-empty interfaces, code generation (`go generate`), and initialization-time reflection\nas opposed to `interface{}`, type system sidestepping, and runtime reflection. It will be kept simple.\n\nSupported SQL dialects:\n\n| RDBMS                | Library and drivers                                                                                 | Status\n| -----                | -------------------                                                                                 | ------\n| PostgreSQL           | [github.com/lib/pq](https://github.com/lib/pq) (`postgres`)                                         | Stable. Tested with all [supported](https://www.postgresql.org/support/versioning/) versions.\n|                      | [github.com/jackc/pgx/stdlib](https://github.com/jackc/pgx) (`pgx`)                                 | Stable. Tested with all [supported](https://www.postgresql.org/support/versioning/) versions.\n| MySQL                | [github.com/go-sql-driver/mysql](https://github.com/go-sql-driver/mysql) (`mysql`)                  | Stable. Tested with all [supported](https://www.mysql.com/support/supportedplatforms/database.html) versions.\n| SQLite3              | [github.com/mattn/go-sqlite3](https://github.com/mattn/go-sqlite3) (`sqlite3`)                      | Stable.\n| Microsoft SQL Server | [github.com/denisenkom/go-mssqldb](https://github.com/denisenkom/go-mssqldb) (`sqlserver`, `mssql`) | Stable. Tested on Windows with: SQL2008R2SP2, SQL2012SP1, SQL2014, SQL2016. On Linux with: [`microsoft/mssql-server-linux:latest` Docker image](https://hub.docker.com/r/microsoft/mssql-server-linux/).\n\nNotes:\n* [`clientFoundRows=true` flag](https://github.com/go-sql-driver/mysql#clientfoundrows) is required for `mysql` driver.\n* `mssql` driver is [deprecated](https://github.com/denisenkom/go-mssqldb#deprecated) (but not `sqlserver` driver).\n\n\n## Quickstart\n\n1. Make sure you are using Go 1.10+. Install or update `reform` package, `reform` and `reform-db` commands\n   (see about versioning below):\n    ```\n    go get -u gopkg.in/reform.v1/...\n    ```\n\n2. Use `reform-db` command to generate models for your existing database schema. For example:\n    ```\n    reform-db -db-driver=sqlite3 -db-source=example.sqlite3 init\n    ```\n\n3. Update generated models or write your own \xe2\x80\x93 `struct` representing a table or view row. For example,\n   store this in file `person.go`:\n    ```go\n    //go:generate reform\n\n    //reform:people\n\ttype Person struct {\n\t\tID        int32      `reform:"id,pk"`\n\t\tName      string     `reform:"name"`\n\t\tEmail     *string    `reform:"email"`\n\t\tCreatedAt time.Time  `reform:"created_at"`\n\t\tUpdatedAt *time.Time `reform:"updated_at"`\n\t}\n    ```\n\n    Magic comment `//reform:people` links this model to `people` table or view in SQL database.\n    The first value in field\'s `reform` tag is a column name. `pk` marks primary key.\n    Use value `-` or omit tag completely to skip a field.\n    Use pointers (recommended) or `sql.NullXXX` types for nullable fields.\n\n4. Run `reform [package or directory]` or `go generate [package or file]`. This will create `person_reform.go`\n   in the same package with type `PersonTable` and methods on `Person`.\n\n5. See [documentation](https://godoc.org/gopkg.in/reform.v1) how to use it. Simple example:\n\n    ```go\n\t// Use reform.NewDB to create DB.\n\n\t// Save record (performs INSERT or UPDATE).\n\tperson := &Person{\n\t\tName:  "Alexey Palazhchenko",\n\t\tEmail: pointer.ToString("alexey.palazhchenko@gmail.com"),\n\t}\n\tif err := DB.Save(person); err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\t// ID is filled by Save.\n\tperson2, err := DB.FindByPrimaryKeyFrom(PersonTable, person.ID)\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\tfmt.Println(person2.(*Person).Name)\n\n\t// Delete record.\n\tif err = DB.Delete(person); err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\t// Find records by IDs.\n\tpersons, err := DB.FindAllFrom(PersonTable, "id", 1, 2)\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\tfor _, p := range persons {\n\t\tfmt.Println(p)\n\t}\n    ```\n\n\n## Background\n\nreform was born during summer 2014 out of frustrations with existing Go ORMs. All of them have a method\n`Save(record interface{})` which can be used like this:\n\n```go\norm.Save(User{Name: "gopher"})\norm.Save(&User{Name: "gopher"})\norm.Save(nil)\norm.Save("Batman!!")\n```\n\nNow you can say that last invocation is obviously invalid, and that it\'s not hard to make an ORM to accept both\nfirst and second versions. But there are two problems:\n\n1. Compiler can\'t check it. Method\'s signature in `godoc` will not tell us how to use it.\n   We are essentially working against those tools by sidestepping type system.\n2. First version is still invalid, since one would expect `Save()` method to set record\'s primary key after `INSERT`,\n   but this change will be lost due to passing by value.\n\nFirst proprietary version of reform was used in production even before `go generate` announcement.\nThis free and open-source version is the fourth milestone on the road to better and idiomatic API.\n\n\n## Versioning policy\n\nWe are following [Semantic Versioning](http://semver.org/spec/v2.0.0.html),\nusing [gopkg.in](https://gopkg.in) and filling a [changelog](CHANGELOG.md).\n\nWe use branch `v1-stable` (default on Github) for v1 development and tags `v1.Y.Z` for releases.\nAll v1 releases are SemVer-compatible, breaking changes will not be applied.\nCanonical import path is `gopkg.in/reform.v1`.\n`go get -u gopkg.in/reform.v1/...` will install the latest released version.\nTo install not yet released v1 version one can do checkout manually while preserving import path:\n```\ncd $GOPATH/src/gopkg.in/reform.v1\ngit fetch\ngit checkout origin/v1-stable\ngo install -v gopkg.in/reform.v1/reform\n```\n\n\n## Additional packages\n\n* [github.com/AlekSi/pointer](https://github.com/AlekSi/pointer) is very useful for working with reform structs with pointers.\n\n\n## Caveats and limitations\n\n* There should be zero `pk` fields for Struct and exactly one `pk` field for Record.\n  Composite primary keys are not supported ([#114](https://github.com/go-reform/reform/issues/114)).\n* `pk` field can\'t be a pointer (`== nil` [doesn\'t work](https://golang.org/doc/faq#nil_error)).\n* Database row can\'t have a Go\'s zero value (0, empty string, etc.) in primary key column.\n\n\n## License\n\nCode is covered by standard MIT-style license. Copyright (c) 2016-2018 Alexey Palazhchenko.\nSee [LICENSE](LICENSE) for details. Note that generated code is covered by the terms of your choice.\n\nThe reform gopher was drawn by Natalya Glebova. Please use it only as reform logo.\nIt is based on the original design by Ren\xc3\xa9e French, released under [Creative Commons Attribution 3.0 USA license](https://creativecommons.org/licenses/by/3.0/).\n\n\n## Contributing\n\nSee [Contributing Guidelines](.github/CONTRIBUTING.md).\n'