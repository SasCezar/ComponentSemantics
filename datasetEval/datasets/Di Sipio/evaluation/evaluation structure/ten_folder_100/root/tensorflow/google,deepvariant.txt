b'# DeepVariant\n\nDeepVariant is an analysis pipeline that uses a deep neural network to call\ngenetic variants from next-generation DNA sequencing data. DeepVariant relies on\n[Nucleus](https://github.com/google/nucleus), a library of Python and C++ code\nfor reading and writing data in common genomics file formats (like SAM and VCF)\ndesigned for painless integration with the\n[TensorFlow](https://www.tensorflow.org/) machine learning framework.\n\n## How to run\n\nWe recommend using our Docker solution. The command will look like this:\n\n```\nBIN_VERSION="0.9.0"\nsudo docker run \\\n  -v "YOUR_INPUT_DIR":"/input" \\\n  -v "YOUR_OUTPUT_DIR:/output" \\\n  google/deepvariant:"${BIN_VERSION}" \\\n  /opt/deepvariant/bin/run_deepvariant \\\n  --model_type=WGS \\ **Replace this string with exactly one of the following [WGS,WES,PACBIO]**\n  --ref=/input/YOUR_REF \\\n  --reads=/input/YOUR_BAM \\\n  --output_vcf=/output/YOUR_OUTPUT_VCF \\\n  --output_gvcf=/output/YOUR_OUTPUT_GVCF \\\n  --num_shards=$(nproc) **This will use all your cores to run make_examples. Feel free to change.**\n```\n\nFor more information, see:\n\n  * [Quick Start](docs/deepvariant-quick-start.md)\n  * [Full documentation list](docs/README.md)\n  * [Best practices for multi-sample variant calling with DeepVariant](docs/trio-merge-case-study.md)\n\n## How to cite\n\nIf you\'re using DeepVariant in your work, please cite:\n\n[A universal SNP and small-indel variant caller using deep neural networks. Nature Biotechnology 36, 983\xe2\x80\x93987 (2018).](https://rdcu.be/7Dhl) <br/>\nRyan Poplin, Pi-Chuan Chang, David Alexander, Scott Schwartz, Thomas Colthurst, Alexander Ku, Dan Newburger, Jojo Dijamco, Nam Nguyen, Pegah T. Afshar, Sam S. Gross, Lizzie Dorfman, Cory Y. McLean, Mark A. DePristo, <br/>\ndoi: https://doi.org/10.1038/nbt.4235\n\n## Why Use DeepVariant?\n\n*   **High accuracy** - In 2016 DeepVariant won\n    [PrecisionFDA Truth Challenge](https://precision.fda.gov/challenges/truth/results)\n    for best SNP Performance. DeepVariant maintains high accuracy across data\n    from different sequencing technologies, prep methods, and species.\n*   **Flexibility** - Out-of-the-box use for\n    [PCR-positive](https://ai.googleblog.com/2018/04/deepvariant-accuracy-improvements-for.html)\n    samples and\n    [low quality sequencing runs](https://blog.dnanexus.com/2018-01-16-evaluating-the-performance-of-ngs-pipelines-on-noisy-wgs-data/),\n    and easy adjustments for\n    [different sequencing technologies](https://google.github.io/deepvariant/posts/2019-01-14-highly-accurate-snp-and-indel-calling-on-pacbio-ccs-with-deepvariant/)\n    and\n    [non-human species](https://google.github.io/deepvariant/posts/2018-12-05-improved-non-human-variant-calling-using-species-specific-deepvariant-models/).\n*   **Ease of use** - No filtering is needed beyond setting your preferred\n    minimum quality threshold.\n*   **Cost effectiveness** - With a single non-preemptible n1-standard-16\n    machine on Google Cloud, it costs ~$9.11 to call a 30x whole genome and\n    ~$0.39 to call an exome. With preemptible pricing, the cost is $2.19 for a\n    30x whole genome and $0.09 for whole exome (not considering preemption).\n*   **Speed** - On a 64-core CPU-only machine, DeepVariant completes a 50x WGS\n    in 5 hours and an exome in 16 minutes [(1)](#myfootnote1)</sup>. Multiple\n    options for acceleration exist, taking the WGS pipeline to as fast as 40\n    minutes (see [external solutions](#external-solutions)).\n*   **Usage options** - DeepVariant can be run via Docker or binaries, using\n    both on-premise hardware or in the cloud, with support for hardware\n    accelerators like GPUs and TPUs.\n\n<a name="myfootnote1">(1)</a>: Time estimates do not include mapping.\n\n## DeepVariant Setup\n\n### Prerequisites\n\n*   Unix-like operating system (cannot run on Windows)\n*   Python 2.7\n\n### Official Solutions\n\nBelow are the official solutions provided by the\n[Genomics team in Google Brain](https://research.google.com/teams/brain/genomics/).\n\nName                                                                                                | Description\n:-------------------------------------------------------------------------------------------------: | -----------\n[Docker](docs/deepvariant-quick-start.md)           | This is the recommended method.\n[Build from source](docs/deepvariant-build-test.md) | DeepVariant comes with scripts to build it on Ubuntu 14 and 16, with Ubuntu 16 recommended. To build and run on other Unix-based systems, you will need to modify these scripts.\nPrebuilt Binaries                                                                                   | Available at [`gs://deepvariant/`](https://console.cloud.google.com/storage/browser/deepvariant). These are compiled to use SSE4 and AVX instructions, so you will need a CPU (such as Intel Sandy Bridge) that supports them. You can check the `/proc/cpuinfo` file on your computer, which lists these features under "flags".\n\n### External Solutions\n\nThe following pipelines are not created or maintained by the\n[Genomics team in Google Brain](https://research.google.com/teams/brain/genomics/).\nPlease contact the relevant teams if you have any questions or concerns.\n\nName                                                                                                                                                                                                                                                                                                                                                                                                                     | Description\n:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | -----------\n[Running DeepVariant on Google Cloud Platform](https://cloud.google.com/genomics/docs/tutorials/deepvariant)                                                                                                                                                                                                                                                                                                             | Docker-based pipelines optimized for cost and speed. Code can be found [here](https://github.com/googlegenomics/gcp-deepvariant-runner).\n[DeepVariant-on-spark from ATGENOMIX](https://github.com/atgenomix/deepvariant-on-spark)                                                                                                                                                                                                                                                                                                                                 | A germline short variant calling pipeline that runs DeepVariant on Apache Spark at scale with support for multi-GPU clusters (e.g. NVIDIA DGX-1).\n[Parabricks](https://docs.parabricks.com/standalone-tools/variant-callers/deepvariant)                                                                                                                                                                                                                                                                                                                                                   | An accelerated DeepVariant pipeline with multi-GPU support that runs our WGS pipeline in just 40 minutes, at a cost of $2-$3 per sample. This provides a 7.5x speedup over a 64-core CPU-only machine at lower cost.\n[DNAnexus DeepVariant App](https://platform.dnanexus.com/app/deepvariant_germline)                                                                                                                                                                                                                                                                                                                                       | Offers parallelized execution with a GUI interface (requires platform account).\n[Nextflow Pipeline](https://github.com/nf-core/deepvariant)                                                                                                                                                                                                                                                                                                                                                              | Offers parallel processing of multiple BAMs and Docker support.\n[DNAstack Pipeline](https://app.dnastack.com/auth/realms/DNAstack/protocol/openid-connect/auth?client_id=dnastack-client&redirect_uri=https%3A%2F%2Fapp.dnastack.com%2F%3Fredirect_fragment%3D%252Forg%252F473079%252Fproj%252F473096%252Fapp%252Fworkflow%252F425685%252Frun&state=42231553-9fbc-4d71-a10e-d6ce42415c01&nonce=daf2568d-4fe7-48e2-ab60-858937244a87&response_mode=query&response_type=code&scope=openid) | Cost-optimized DeepVariant pipeline (requires platform account).\n\n## Additional References\n\n*   [DeepVariant Blog](https://goo.gl/deepvariant)\n*   [DeepVariant release notes](https://github.com/google/deepvariant/releases)\n\n## Contribution Guidelines\n\nPlease [open a pull request](https://github.com/google/deepvariant/compare) if\nyou wish to contribute to DeepVariant. Note, we have not set up the\ninfrastructure to merge pull requests externally. If you agree, we will test and\nsubmit the changes internally and mention your contributions in our\n[release notes](https://github.com/google/deepvariant/releases). We apologize\nfor any inconvenience.\n\nIf you have any difficulty using DeepVariant, feel free to\n[open an issue](https://github.com/google/deepvariant/issues/new). If you have\ngeneral questions not specific to DeepVariant, we recommend that you post on a\ncommunity discussion forum such as [BioStars](https://www.biostars.org/).\n\n## License\n\n[BSD-3-Clause license](LICENSE)\n\n## Acknowledgements\n\nDeepVariant happily makes use of many open source packages. We would like to\nspecifically call out a few key ones:\n\n*   [Boost Graph Library](http://www.boost.org/doc/libs/1_65_1/libs/graph/doc/index.html)\n*   [abseil-cpp](https://github.com/abseil/abseil-cpp) and\n    [abseil-py](https://github.com/abseil/abseil-py)\n*   [CLIF](https://github.com/google/clif)\n*   [GNU Parallel](https://www.gnu.org/software/parallel/)\n*   [htslib & samtools](http://www.htslib.org/)\n*   [Nucleus](https://github.com/google/nucleus)\n*   [numpy](http://www.numpy.org/)\n*   [SSW Library](https://github.com/mengyao/Complete-Striped-Smith-Waterman-Library)\n*   [TensorFlow and Slim](https://www.tensorflow.org/)\n\nWe thank all of the developers and contributors to these packages for their\nwork.\n\n## Disclaimer\n\nThis is not an official Google product.\n'