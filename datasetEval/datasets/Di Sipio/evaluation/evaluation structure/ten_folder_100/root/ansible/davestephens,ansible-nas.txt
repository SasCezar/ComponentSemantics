b"# Ansible NAS\n\n[![Build Status](https://img.shields.io/travis/com/davestephens/ansible-nas/master?logo=travis&style=flat-square)](https://travis-ci.com/davestephens/ansible-nas) [![Gitter chat](https://img.shields.io/gitter/room/ansible-nas/chat.svg?logo=gitter&style=flat-square)](https://gitter.im/Ansible-NAS/Chat) [![license](https://img.shields.io/github/license/DAVFoundation/api_doc.svg?style=flat-square)](https://github.com/davestephens/ansible-nas/blob/master/LICENSE) [![Ko-fi](https://img.shields.io/static/v1.svg?label=ko-fi&message=Buy%20Me%20A%20Coffee&color=orange&style=flat-square&logo=buy-me-a-coffee)](https://ko-fi.com/davestephens)\n\nAfter getting burned by broken FreeNAS updates one too many times, I figured I\ncould do a much better job myself using just a stock Ubuntu install, some clever\nAnsible config and a bunch of Docker containers.\n\n## What Ansible-NAS Can Set Up\n\n* An awesome dashboard to your home server (Heimdall)\n* Any number of Samba shares or NFS exports for you to store your stuff\n* A BitTorrent client\n* A Usenet downloader\n* Various media management tools - Sonarr, Sickchill, CouchPotato, Radarr, Bazarr\n* Media streaming via Plex, Emby or Jellyfin\n* Music streaming with Airsonic\n* An RSS newsfeed reader - Miniflux\n* A Dropbox replacement via Nextcloud\n* Various ways to see stats about your NAS - Glances, dashboards in Grafana\n* A backup tool - allows scheduled backups to Amazon S3, OneDrive, Dropbox etc\n* An IRC bouncer and web-based client\n* Source control with Gitea\n* SSL secured external access to applications via Traefik\n* A Docker host with Portainer for image and container management\n* An automatic dynamic DNS updater if you use Cloudflare to host your domain DNS\n* A Personal finance manager\n* eBook management with calibre-web\n* Content management with Joomla\n* A dual panel local file manager\n\n### Docker Containers Used\n\n* [Airsonic](https://airsonic.github.io/) - catalog and stream music\n* [Bazarr](https://github.com/morpheus65535/bazarr) - companion to Radarr and Sonarr for downloading subtitles\n* [Bitwarden_rs](https://github.com/dani-garcia/bitwarden_rs) - Self-Hosting port of password manager\n* [Calibre](https://hub.docker.com/r/linuxserver/calibre-web) - eBook Library\n* [Cloud Commander](https://cloudcmd.io/) - A dual panel file manager with integrated web console and text editor\n* [Cloudflare DDNS](https://hub.docker.com/r/joshuaavalon/cloudflare-ddns/) - automatically update Cloudflare with your IP address\n* [CouchPotato](https://couchpota.to/) - for downloading and managing movies\n* [Duplicati](https://www.duplicati.com/) - for backing up your stuff\n* [Emby](https://emby.media/) - Media streaming and management\n* [Firefly III](https://firefly-iii.org/) - Free and open source personal finance manager\n* [get_iplayer](https://github.com/get-iplayer/get_iplayer) - download programmes from BBC iplayer\n* [Gitea](https://gitea.io/en-us/) - Self-hosted Github clone\n* [Glances](https://nicolargo.github.io/glances/) - for seeing the state of your system via a web browser\n* [Grafana](https://github.com/grafana/grafana) - Dashboarding tool\n* [Guacamole](https://guacamole.apache.org/) - Web based remote desktop gateway, supports VNC, RDP and SSH\n* [Heimdall](https://heimdall.site/) - Home server dashboard\n* [Home Assistant](https://www.home-assistant.io) - Open source home automation\n* [InfluxDB](https://github.com/influxdata/influxdb) - Time series database used for stats collection\n* [Jackett](https://github.com/Jackett/Jackett) - API Support for your favorite torrent trackers\n* [Jellyfin](https://jellyfin.github.io) - The Free Software Media System\n* [Joomla](https://www.joomla.org/) - Open source content management system\n* [MiniDlna](https://sourceforge.net/projects/minidlna/) - simple media server which is fully compliant with DLNA/UPnP-AV clients\n* [Miniflux](https://miniflux.app/) - An RSS news reader\n* [Mosquitto](https://mosquitto.org) - An open source MQTT broker\n* [MyMediaForAlexa](https://www.mymediaalexa.com/) - Lets you stream your music collection to your alexa device\n* [Netdata](https://my-netdata.io/) - An extremely comprehensive system monitoring solution\n* [Nextcloud](https://nextcloud.com/) - A self-hosted Dropbox alternative\n* [NZBget](https://nzbget.net/) - The most efficient usenet downloader\n* [openHAB](https://www.openhab.org/) - A vendor and technology agnostic open source automation software for your home\n* [Plex](https://www.plex.tv/) - Plex Media Server\n* [Portainer](https://portainer.io/) - for managing Docker and running custom images\n* [pyLoad](https://pyload.net/) - A download manager with a friendly web-interface\n* [Radarr](https://radarr.video/) - for organising and downloading movies\n* [Sickchill](https://sickchill.github.io/) - for managing TV episodes\n* [Sonarr](https://sonarr.tv/) - for downloading and managing TV episodes\n* [Tautulli](http://tautulli.com/) - Monitor Your Plex Media Server\n* [Telegraf](https://github.com/influxdata/telegraf) - Metrics collection agent\n* [The Lounge](https://thelounge.chat) - Web based always-on IRC client\n* [TimeMachine](https://github.com/awlx/samba-timemachine) - Samba-based mac backup server\n* [Traefik](https://traefik.io/) - Web proxy and SSL certificate manager\n* [Transmission](https://transmissionbt.com/) - BitTorrent client (with OpenVPN if you have a supported VPN provider)\n* [Wallabag](https://wallabag.org/) - Save and classify articles. Read them later.\n* [Watchtower](https://github.com/v2tec/watchtower) - Monitor your Docker containers and update them if a new version is available\n* [ZNC](https://wiki.znc.in/ZNC) - IRC bouncer to stay connected to favourite IRC networks and channels\n\n## What This Could Do\n\nAnsible-NAS can run anything that's in a Docker image, which is why Portainer is\nincluded. A NAS configuration is a pretty personal thing based on what you\ndownload, what media you view, how many photos you take...so it's difficult to\nplease everyone.\n\nThat said, if specific functionality you want isn't included and you think\nothers could benefit, add it and raise a PR!\n\n## What This Doesn't Do\n\nAnsible NAS doesn't set up your disk partitions, primarily because getting it wrong can be incredibly destructive.\nThat aside, configuring partitions is usually a one-time (or very infrequent) event, so there's not much to be\ngained by automating it. Check out the [docs](https://davestephens.github.io/ansible-nas) for recommended setups.\n\n## Quick Start\n\n:skull: Before running anything, check out the playbook and understand what it\ndoes. Run it against a VM and make sure you're happy. ***Do not*** blindly\ndownload code from the internet and trust that it's going to work as you expect.\n:skull:\n\n1. Enable the Ubuntu Universe repository: `sudo add-apt-repository universe`\n2. Install Ansible: `sudo apt install ansible`\n3. `git clone https://github.com/davestephens/ansible-nas.git && cd ansible-nas`\n4. Copy `group_vars/all.yml.dist` to  `group_vars/all.yml`.\n5. Open up `group_vars/all.yml` and follow the instructions there for configuring your Ansible NAS.\n6. If you plan to use Transmission with OpenVPN, also copy `group_vars/vpn_credentials.yml.dist` to\n`group_vars/vpn_credentials.yml` and fill in your settings.\n7. Copy `inventory.dist` to `inventory` and update it.\n8. Install the dependent roles: `ansible-galaxy install -r requirements.yml` (you might need sudo to install Ansible roles)\n9. Run the playbook - something like `ansible-playbook -i inventory nas.yml -b -K` should do you nicely.\n\n## Documentation\n\nYou can read the docs [here](https://davestephens.github.io/ansible-nas). PRs\nfor more documentation always welcome!\n\n## Migrating from FreeNAS\n\nAssuming that your Ubuntu system disk is separate from your storage (it should be!):\n\n1. Ensure you have a working backup of your data.\n2. Check that the working backup you think you have actually works.\n3. SSH to the server and run `zpool list` to determine available ZFS pools.\n4. `zpool import <pool_name>` against each of the pools you want to attach.\n5. `chown -R root:root /mnt/<pool_name>` to fix the ownership of the data.\n6. Follow the Quick Start instructions above.\n\n## Requirements\n\n* Ansible NAS targets the latest Ubuntu LTS release, which is currently Ubuntu\n  Server 18.04.3 LTS.\n* You can run Ansible-NAS on whatever you like, read the docs for more info. I\n  use an HP Microserver.\n\n## Getting Help\n\nGetting help is easy! You can:\n\n* Read the [docs](https://davestephens.github.io/ansible-nas)\n* Raise an [issue](https://github.com/davestephens/ansible-nas/issues)\n* Chat on [Gitter](https://gitter.im/Ansible-NAS/Chat)\n\n## Contributing\n\nContributions are welcome, please feel free to raise a PR!\n\n* Restrict pull requests to one piece of functionality or bugfix at a time.\n* Test your new functionality or bugfix using the included\n  `tests/test-vagrant.sh` script to spin up a test VM. Note that Ansible-NAS\n  requires Vagrant version 2.2.2 or later, so for stock Ubuntu 18.04.2, you will\n  have to download and install the newest version from\n  https://www.vagrantup.com/downloads.html.\n* Run `ansible-lint` against the playbook before committing. (There is a VSCode\n  task set up to run the right command for you)\n* Please know that your efforts are appreciated, thanks! :+1:\n\nDevelopment of Ansible-NAS is carried out in [Visual Studio Code](https://code.visualstudio.com/) - you'll get some nice\nrecommended extensions and task setups if you do the same.\n\n## Support\n\nIf you've enjoyed Ansible-NAS as much as I do working on it, please consider [buying me a coffee](https://ko-fi.com/davestephens) :coffee:\n\n## Thanks\n\nThanks to the awesome dudes at [JetBrains](https://www.jetbrains.com/?from=Ansible-NAS) for supplying core contributors with JetBrains Open Source licenses!\n"