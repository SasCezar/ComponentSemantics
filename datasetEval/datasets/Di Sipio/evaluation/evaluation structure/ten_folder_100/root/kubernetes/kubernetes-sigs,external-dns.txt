b'<p align="center">\n\t<img src="img/external-dns.png" width="40%" align="center" alt="ExternalDNS">\n</p>\n\n# ExternalDNS\n[![Build Status](https://travis-ci.org/kubernetes-sigs/external-dns.svg?branch=master)](https://travis-ci.org/kubernetes-sigs/external-dns)\n[![Coverage Status](https://coveralls.io/repos/github/kubernetes-sigs/external-dns/badge.svg?branch=master)](https://coveralls.io/github/kubernetes-sigs/external-dns?branch=master)\n[![GitHub release](https://img.shields.io/github/release/kubernetes-sigs/external-dns.svg)](https://github.com/kubernetes-sigs/external-dns/releases)\n[![go-doc](https://godoc.org/github.com/kubernetes-sigs/external-dns?status.svg)](https://godoc.org/github.com/kubernetes-sigs/external-dns)\n[![Go Report Card](https://goreportcard.com/badge/github.com/kubernetes-sigs/external-dns)](https://goreportcard.com/report/github.com/kubernetes-sigs/external-dns)\n\nExternalDNS synchronizes exposed Kubernetes Services and Ingresses with DNS providers.\n\n## What It Does\n\nInspired by [Kubernetes DNS](https://github.com/kubernetes/dns), Kubernetes\' cluster-internal DNS server, ExternalDNS makes Kubernetes resources discoverable via public DNS servers. Like KubeDNS, it retrieves a list of resources (Services, Ingresses, etc.) from the [Kubernetes API](https://kubernetes.io/docs/api/) to determine a desired list of DNS records. *Unlike* KubeDNS, however, it\'s not a DNS server itself, but merely configures other DNS providers accordingly\xe2\x80\x94e.g. [AWS Route 53](https://aws.amazon.com/route53/) or [Google Cloud DNS](https://cloud.google.com/dns/docs/).\n\nIn a broader sense, ExternalDNS allows you to control DNS records dynamically via Kubernetes resources in a DNS provider-agnostic way.\n\nThe [FAQ](docs/faq.md) contains additional information and addresses several questions about key concepts of ExternalDNS.\n\nTo see ExternalDNS in action, have a look at this [video](https://www.youtube.com/watch?v=9HQ2XgL9YVI) or read this [blogpost](https://medium.com/wearetheledger/deploying-test-environments-with-azure-devops-eks-and-externaldns-67abe647e4e).\n\n## The Latest Release: v0.5\n\nExternalDNS\' current release is `v0.5`. This version allows you to keep selected zones (via `--domain-filter`) synchronized with Ingresses and Services of `type=LoadBalancer` in various cloud providers:\n* [Google Cloud DNS](https://cloud.google.com/dns/docs/)\n* [AWS Route 53](https://aws.amazon.com/route53/)\n* [AWS Service Discovery](https://docs.aws.amazon.com/Route53/latest/APIReference/overview-service-discovery.html)\n* [AzureDNS](https://azure.microsoft.com/en-us/services/dns)\n* [CloudFlare](https://www.cloudflare.com/dns)\n* [RcodeZero](https://www.rcodezero.at/)\n* [DigitalOcean](https://www.digitalocean.com/products/networking)\n* [DNSimple](https://dnsimple.com/)\n* [Infoblox](https://www.infoblox.com/products/dns/)\n* [Dyn](https://dyn.com/dns/)\n* [OpenStack Designate](https://docs.openstack.org/designate/latest/)\n* [PowerDNS](https://www.powerdns.com/)\n* [CoreDNS](https://coredns.io/)\n* [Exoscale](https://www.exoscale.com/dns/)\n* [Oracle Cloud Infrastructure DNS](https://docs.cloud.oracle.com/iaas/Content/DNS/Concepts/dnszonemanagement.htm)\n* [Linode DNS](https://www.linode.com/docs/networking/dns/)\n* [RFC2136](https://tools.ietf.org/html/rfc2136)\n* [NS1](https://ns1.com/)\n* [TransIP](https://www.transip.eu/domain-name/)\n* [VinylDNS](https://www.vinyldns.io)\n\nFrom this release, ExternalDNS can become aware of the records it is managing (enabled via `--registry=txt`), therefore ExternalDNS can safely manage non-empty hosted zones. We strongly encourage you to use `v0.5` (or greater) with `--registry=txt` enabled and `--txt-owner-id` set to a unique value that doesn\'t change for the lifetime of your cluster. You might also want to run ExternalDNS in a dry run mode (`--dry-run` flag) to see the changes to be submitted to your DNS Provider API.\n\nNote that all flags can be replaced with environment variables; for instance,\n`--dry-run` could be replaced with `EXTERNAL_DNS_DRY_RUN=1`, or\n`--registry txt` could be replaced with `EXTERNAL_DNS_REGISTRY=txt`.\n\n## Status of providers\n\nExternalDNS supports multiple DNS providers which have been implemented by the [ExternalDNS contributors](https://github.com/kubernetes-sigs/external-dns/graphs/contributors). Maintaining all of those in a central repository is a challenge and we have limited resources to test changes. This means that it is very hard to test all providers for possible regressions and, as written in the [Contributing](#Contributing) section, we encourage contributors to step in as maintainers for the individual providers and help by testing the integrations.\n\nEnd-to-end testing of ExternalDNS is currently\n[performed](https://github.com/zalando-incubator/kubernetes-on-aws/blob/dev/test/e2e/external_dns.go)\nin the separate\n[kubernetes-on-aws](https://github.com/zalando-incubator/kubernetes-on-aws)\nrepository.\n\nWe define the following stability levels for providers:\n\n- **Stable**: Used for smoke tests before a release, used in production and maintainers are active.\n- **Beta**: Community supported, well tested, but maintainers have no access to resources to execute integration tests on the real platform and/or are not using it in production.\n- **Alpha**: Community provided with no support from the maintainers apart from reviewing PRs.\n\nThe following table clarifies the current status of the providers according to the aforementioned stability levels:\n\n| Provider | Status |\n| -------- | ------ |\n| Google Cloud DNS | Stable |\n| AWS Route 53 | Stable |\n| AWS Service Discovery | Beta |\n| AzureDNS | Beta |\n| CloudFlare | Beta\n| RcodeZero | Alpha |\n| DigitalOcean | Alpha |\n| DNSimple | Alpha |\n| Infoblox | Alpha |\n| Dyn | Alpha |\n| OpenStack Designate | Alpha |\n| PowerDNS | Alpha |\n| CoreDNS | Alpha |\n| Exoscale | Alpha |\n| Oracle Cloud Infrastructure DNS | Alpha |\n| Linode DNS | Alpha |\n| RFC2136 | Alpha |\n| NS1 | Alpha |\n| TransIP | Alpha |\n| VinylDNS | Alpha |\n| RancherDNS | Alpha |\n\n## Running ExternalDNS:\n\nThe are two ways of running ExternalDNS:\n\n* Deploying to a Cluster\n* Running Locally\n\n### Deploying to a Cluster\n\nThe following tutorials are provided:\n\n* [Alibaba Cloud](docs/tutorials/alibabacloud.md)\n* AWS\n\t* [ALB Ingress Controller](docs/tutorials/alb-ingress.md)\n\t* [Route53](docs/tutorials/aws.md)\n\t\t* [Same domain for public and private Route53 zones](docs/tutorials/public-private-route53.md)\n\t* [Service Discovery](docs/tutorials/aws-sd.md)\n* [Azure DNS](docs/tutorials/azure.md)\n* [Azure Private DNS](docs/tutorials/azure-private-dns.md)\n* [Cloudflare](docs/tutorials/cloudflare.md)\n* [CoreDNS](docs/tutorials/coredns.md)\n* [DigitalOcean](docs/tutorials/digitalocean.md)\n* [DNSimple](docs/tutorials/dnsimple.md)\n* [Dyn](docs/tutorials/dyn.md)\n* [Exoscale](docs/tutorials/exoscale.md)\n* [ExternalName Services](docs/tutorials/externalname.md)\n* Google Container Engine\n\t* [Using Google\'s Default Ingress Controller](docs/tutorials/gke.md)\n\t* [Using the Nginx Ingress Controller](docs/tutorials/nginx-ingress.md)\n* [Headless Services](docs/tutorials/hostport.md)\n* [Infoblox](docs/tutorials/infoblox.md)\n* [Istio Gateway Source](docs/tutorials/istio.md)\n* [Kubernetes Security Context](docs/tutorials/security-context.md)\n* [Linode](docs/tutorials/linode.md)\n* [Nginx Ingress Controller](docs/tutorials/nginx-ingress.md)\n* [NS1](docs/tutorials/ns1.md)\n* [OpenStack Designate](docs/tutorials/designate.md)\n* [Oracle Cloud Infrastructure (OCI) DNS](docs/tutorials/oracle.md)\n* [PowerDNS](docs/tutorials/pdns.md)\n* [RcodeZero](docs/tutorials/rcodezero.md)\n* [RancherDNS (RDNS)](docs/tutorials/rdns.md)\n* [RFC2136](docs/tutorials/rfc2136.md)\n* [TransIP](docs/tutorials/transip.md)\n* [VinylDNS](docs/tutorials/vinyldns.md)\n\n### Running Locally\n\n#### Technical Requirements\n\nMake sure you have the following prerequisites:\n* A local Go 1.7+ development environment.\n* Access to a Google/AWS account with the DNS API enabled.\n* Access to a Kubernetes cluster that supports exposing Services, e.g. GKE.\n\n#### Setup Steps\n\nFirst, get ExternalDNS:\n\n```console\n$ git clone https://github.com/kubernetes-sigs/external-dns.git && cd external-dns\n```\n\n**This project uses [Go modules](https://github.com/golang/go/wiki/Modules) as\nintroduced in Go 1.11 therefore you need Go >=1.11 installed in order to build.**\nIf using Go 1.11 you also need to [activate Module\nsupport](https://github.com/golang/go/wiki/Modules#installing-and-activating-module-support).\n\nAssuming Go has been setup with module support it can be built simply by running:\n\n```console\n$ make\n```\n\nThis will create external-dns in the build directory directly from master.\n\nNext, run an application and expose it via a Kubernetes Service:\n\n```console\n$ kubectl run nginx --image=nginx --replicas=1 --port=80\n$ kubectl expose deployment nginx --port=80 --target-port=80 --type=LoadBalancer\n```\n\nAnnotate the Service with your desired external DNS name. Make sure to change `example.org` to your domain.\n\n```console\n$ kubectl annotate service nginx "external-dns.alpha.kubernetes.io/hostname=nginx.example.org."\n```\n\nOptionally, you can customize the TTL value of the resulting DNS record by using the `external-dns.alpha.kubernetes.io/ttl` annotation:\n\n```console\n$ kubectl annotate service nginx "external-dns.alpha.kubernetes.io/ttl=10"\n```\n\nFor more details on configuring TTL, see [here](docs/ttl.md).\n\nLocally run a single sync loop of ExternalDNS.\n\n```console\n$ external-dns --registry txt --txt-owner-id my-cluster-id --provider google --google-project example-project --source service --once --dry-run\n```\n\nThis should output the DNS records it will modify to match the managed zone with the DNS records you desire. It also assumes you are running in the `default` namespace. See the [FAQ](docs/faq.md) for more information regarding namespaces.\n\nNote: TXT records will have `my-cluster-id` value embedded. Those are used to ensure that ExternalDNS is aware of the records it manages.\n\nOnce you\'re satisfied with the result, you can run ExternalDNS like you would run it in your cluster: as a control loop, and **not in dry-run** mode:\n\n```console\n$ external-dns --registry txt --txt-owner-id my-cluster-id --provider google --google-project example-project --source service\n```\n\nCheck that ExternalDNS has created the desired DNS record for your Service and that it points to its load balancer\'s IP. Then try to resolve it:\n\n```console\n$ dig +short nginx.example.org.\n104.155.60.49\n```\n\nNow you can experiment and watch how ExternalDNS makes sure that your DNS records are configured as desired. Here are a couple of things you can try out:\n* Change the desired hostname by modifying the Service\'s annotation.\n* Recreate the Service and see that the DNS record will be updated to point to the new load balancer IP.\n* Add another Service to create more DNS records.\n* Remove Services to clean up your managed zone.\n\nThe [tutorials](docs/tutorials) section contains examples, including Ingress resources, and shows you how to set up ExternalDNS in different environments such as other cloud providers and alternative Ingress controllers.\n\n# Note\n\nIf using a txt registry and attempting to use a CNAME the `--txt-prefix` must be set to avoid conflicts.  Changing `--txt-prefix` will result in lost ownership over previously created records.\n\n# Roadmap\n\nExternalDNS was built with extensibility in mind. Adding and experimenting with new DNS providers and sources of desired DNS records should be as easy as possible. It should also be possible to modify how ExternalDNS behaves\xe2\x80\x94e.g. whether it should add records but never delete them.\n\nHere\'s a rough outline on what is to come (subject to change):\n\n### v0.1\n\n- [x] Support for Google CloudDNS\n- [x] Support for Kubernetes Services\n\n### v0.2\n\n- [x] Support for AWS Route 53\n- [x] Support for Kubernetes Ingresses\n\n### v0.3\n\n- [x] Support for AWS Route 53 via ALIAS\n- [x] Support for multiple zones\n- [x] Ownership System\n\n### v0.4\n\n- [x] Support for AzureDNS\n- [x] Support for CloudFlare\n- [x] Support for DigitalOcean\n- [x] Multiple DNS names per Service\n\n### v0.5 - _current version_\n\n- [x] Support for creating DNS records to multiple targets (for Google and AWS)\n- [x] Support for OpenStack Designate\n- [x] Support for PowerDNS\n- [x] Support for Linode\n- [x] Support for RcodeZero\n- [x] Support for NS1\n- [x] Support for TransIP\n- [x] Support for Azure Private DNS\n\n### v0.6\n\n- [ ] Ability to replace Kops\' [DNS Controller](https://github.com/kubernetes/kops/tree/master/dns-controller) (This could also directly become `v1.0`)\n\n### v1.0\n\n- [ ] Ability to replace Kops\' [DNS Controller](https://github.com/kubernetes/kops/tree/master/dns-controller)\n- [x] Ability to replace Zalando\'s [Mate](https://github.com/linki/mate)\n- [x] Ability to replace Molecule Software\'s [route53-kubernetes](https://github.com/wearemolecule/route53-kubernetes)\n\n### Yet to be defined\n\n* Support for CoreDNS\n* Support for record weights\n* Support for different behavioral policies\n* Support for Services with `type=NodePort`\n* Support for CRDs\n* Support for more advanced DNS record configurations\n\nHave a look at [the milestones](https://github.com/kubernetes-sigs/external-dns/milestones) to get an idea of where we currently stand.\n\n## Contributing\n\nWe encourage you to get involved with ExternalDNS, as users, contributors or as new maintainers that can take over some parts like different providers and help with code reviews.\n\nProviders which currently need maintainers:\n\n* Azure\n* Cloudflare\n* Digital Ocean\n* Google Cloud Platform\n\nAny provider should have at least one maintainer. It would be nice if you run it in production, but it is not required.\nYou should check changes and make sure your provider is working correctly.\n\nIt would be also great to have an automated end-to-end test for different cloud providers, so help from Kubernetes maintainers and their idea on how this can be done would be valuable.\n\nRead the [contributing guidelines](CONTRIBUTING.md) and have a look at [the contributing docs](docs/contributing/getting-started.md) to learn about building the project, the project structure, and the purpose of each package.\n\nIf you are interested please reach out to us on the [Kubernetes slack](http://slack.k8s.io) in the #external-dns channel.\n\nFor an overview on how to write new Sources and Providers check out [Sources and Providers](docs/contributing/sources-and-providers.md).\n\n## Heritage\n\nExternalDNS is an effort to unify the following similar projects in order to bring the Kubernetes community an easy and predictable way of managing DNS records across cloud providers based on their Kubernetes resources:\n\n* Kops\' [DNS Controller](https://github.com/kubernetes/kops/tree/master/dns-controller)\n* Zalando\'s [Mate](https://github.com/linki/mate)\n* Molecule Software\'s [route53-kubernetes](https://github.com/wearemolecule/route53-kubernetes)\n\n## Kubernetes Incubator\n\nThis is a [Kubernetes Incubator project](https://github.com/kubernetes/community/blob/master/incubator.md).\nThe project was established 2017-Feb-9 (initial announcement [here](https://groups.google.com/forum/#!searchin/kubernetes-dev/external$20dns%7Csort:relevance/kubernetes-dev/2wGQUB0fUuE/9OXz01i2BgAJ)).\nThe incubator team for the project is:\n\n* Sponsor: sig-network\n* Champion: Tim Hockin (@thockin)\n* SIG: sig-network\n\nFor more information about sig-network, such as meeting times and agenda, check out the [community site](https://github.com/kubernetes/community/tree/master/sig-network).\n\n### Code of conduct\n\nParticipation in the Kubernetes community is governed by the [Kubernetes Code of Conduct](code-of-conduct.md).\n'