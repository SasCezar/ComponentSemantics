b'SocketCluster\n======\n\n[![Join the chat at https://gitter.im/SocketCluster/socketcluster](https://badges.gitter.im/Join%20Chat.svg)](https://gitter.im/SocketCluster/socketcluster?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)\n\n[![SocketCluster logo](https://raw.github.com/SocketCluster/socketcluster/master/assets/logo.png)](http://socketcluster.io/)\n\nComplete documentation available at: http://socketcluster.io/\n\nDocumentation for SCC is available at https://github.com/SocketCluster/socketcluster/blob/master/scc-guide.md\n\n## Introduction\n\nSocketCluster is a fast, highly scalable HTTP + realtime server engine which lets you build multi-process\nrealtime servers that make use of all CPU cores on a machine/instance.\nIt removes the limitations of having to run your Node.js server as a single thread and makes your backend\nresilient by automatically recovering from worker crashes and aggregating errors into a central log on each host.\nSC can also auto-scale across multiple hosts on top of Kubernetes; see SCC guide: https://github.com/SocketCluster/socketcluster/blob/master/scc-guide.md.\n\nFollow the project on Twitter: https://twitter.com/SocketCluster\nSubscribe for updates: http://socketcluster.launchrock.com/\n\n\n## Installation\n\nThere are two ways to install SocketCluster.\n\n\n### The easy way (Sets up boilerplate - Ready to run):\n\nSetup the socketcluster command:\n\n```bash\nnpm install -g socketcluster\n```\n\nOR\n\n```bash\nsudo npm install -g socketcluster\n```\n\nThen\n\n```bash\nsocketcluster create myapp\n```\n\nOnce it\'s installed, go to your new myapp/ directory and launch with:\n\n```bash\nnode server\n```\n\nAccess at URL http://localhost:8000/\n\n### The hard way (More modular - Separate server and client):\n\n```bash\nnpm install socketcluster\n```\n\nYou will also need to install the client separately which you can get using the following command:\n\n```bash\nnpm install socketcluster-client\n```\n\nThe socketcluster-client script is called socketcluster.js (located in the main socketcluster-client directory)\n- You should include it in your HTML page using a &lt;script&gt; tag in order to interact with SocketCluster.\nFor more details on how to use socketcluster-client, go to https://github.com/SocketCluster/socketcluster-client\n\nIt is recommended that you use Node.js version >=0.10.22 due to memory leaks present in older versions.\n\n### Using over HTTPS\n\nIn order to run SocketCluster over HTTPS, all you need to do is set the protocol to \'https\' and\nprovide your private key and certificate as a start option when you instantiate SocketCluster - Example:\n\n```js\nvar socketCluster = new SocketCluster({\n  workers: 3,\n  brokers: 3,\n  port: 8000,\n  appName: \'myapp\',\n  workerController: \'worker.js\',\n  protocol: \'https\',\n  protocolOptions: {\n    key: fs.readFileSync(__dirname + \'/keys/enc_key.pem\', \'utf8\'),\n    cert: fs.readFileSync(__dirname + \'/keys/cert.pem\', \'utf8\'),\n    passphrase: \'passphase4privkey\'\n  }\n});\n```\n\nThe protocolOptions option is exactly the same as the one you pass to a standard Node HTTPS server:\nhttp://nodejs.org/api/https.html#https_https_createserver_options_requestlistener\n\n\n## Docker and SocketCluster\n\nYou can create an app on top of SocketCluster\'s docker image. The SC container can be run standalone or\nas a base image for your own container.\n\nThe official SocketCluster container on DockerHub is here: https://hub.docker.com/r/socketcluster/socketcluster/\n\nThe Dockerfile for the base image is here: https://github.com/SocketCluster/socketcluster/blob/master/sample/Dockerfile\n\nTo use the SocketCluster container as your base image, your app\'s Dockerfile might look like this:\n\n```\nFROM socketcluster/socketcluster\nMAINTAINER John Smith\n\nLABEL version="1.0.0"\nLABEL description="Custom app based on SocketCluster"\n\nWORKDIR /usr/src/\nCOPY . /usr/src/\n\nRUN npm install\n\nEXPOSE 8000\n\nCMD ["npm", "start"]\n\n```\n\nThen you can just build your container using:\n\n```docker build -t my-socketcluster-app:v1.0.0 .```\n\nNote that there are more ways to run SocketCluster with Docker.\nYou can also mount your own volumes and point to custom worker.js and broker.js files which are\ninside those volumes using environment variables. You can see the environment variables which are used\nby SocketCluster here: https://github.com/SocketCluster/socketcluster/blob/master/sample/server.js\n\nDocker volumes allow you to sneak your own directories (containing your own worker.js and broker.js source files) into the SocketCluster container without having to rebuild the image (good for development).\nRead this section on volumes to get an idea of how they work with Docker: https://docs.docker.com/engine/userguide/containers/dockervolumes/\n\nNote that if you want to attach any volumes to your SocketCluster container, you should mount them to the ```/usr/src/``` path (inside the container) - That\'s the root directory from which SC loads user-defined source code.\n\nFor example, if you wanted to quickly run SocketCluster with your own workerController file (```worker.js```), you could just put your ```worker.js``` file inside a ```/home/my-username/controllers/``` directory (on your host system) and then bundle it into the container as a volume by running a command like this (example):\n\n```\ndocker run -d -v /home/my-username/controllers/:/usr/src/controllers/ -p 8000:8000 -e "SOCKETCLUSTER_WORKER_CONTROLLER=/usr/src/controllers/worker.js" socketcluster/socketcluster\n```\n\nTo summarize:\n\n- The ```-d``` flag just tells Docker to run the container in the background.\n- The ```-v``` flag tells docker to mount the ```/home/my-username/controllers/``` directory (which is on your host machine) and map it to the ```/usr/src/controllers/``` (inside the SocketCluster container).\n- The ```-e``` flag allows you to define custom environment variables. Here we are just using the SOCKETCLUSTER_WORKER_CONTROLLER env var to tell SocketCluster\nto use the worker.js file which is inside the volume which we just mounted to the container at path ```/usr/src/controllers/```.\n- The final argument ```socketcluster/socketcluster``` is the Docker image.\n\n\n## Contribute to SocketCluster\n\n- More integration test cases needed\n- Unit tests\n- Efficiency/speed - faster is better!\n- Suggestions?\n\nTo contribute; clone this repo, then cd inside it and then run npm install to install all dependencies.\n\n\n## Change log\n\nSee [GitHub releases](https://github.com/SocketCluster/socketcluster/releases) for changes.\n\n\n## License\n\n[MIT](LICENSE)\n'