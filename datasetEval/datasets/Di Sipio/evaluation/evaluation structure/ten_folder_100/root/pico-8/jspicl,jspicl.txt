b'<p align="center">\n  <img src="https://raw.githubusercontent.com/AgronKabashi/assets/51844924e69fdef3129a04573f60b262f41cbea4/jspicl/logo-366x250.png" width="320">\n</p>\n\n# jspicl\njspicl is a Javascript to PICO-8 Lua transpiler. It creates an AST out of the JavaScript code and then transpiles it down to the LUA subset of which PICO-8 supports.\n\n#\n![npm version](https://img.shields.io/npm/v/jspicl.svg?logo=data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABG2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8%2BCiA8L3JkZjpSREY%2BCjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8%2BGkqr6gAAAYJpQ0NQc1JHQiBJRUM2MTk2Ni0yLjEAACiRdZG5S0NBEIe%2FRMUrHqCFhUWQaJWIBwRtBBNEhSAhRjBqk7xcQo7HewkSbAXbgIJo41XoX6CtYC0IiiKIjY21oo2G57xEiIiZZWe%2F%2Fe3MsDsL1mBKSev1Q5DO5LTAtMe%2BGFqyNz5jxUIz7bjCiq5O%2Bv0%2BatrHncSK3bjMWrXj%2FrXWaExXwNIkPKGoWk54Rti3llNN3hbuVpLhqPCpsFOTCwrfmnqkwi8mJyr8ZbIWDHjB2ilsT%2FziyC9WklpaWF6OI53KKz%2F3MV9ii2UW5mXtk9mLToBpPNiZZQovboYZF%2B%2FGxQiDsqNG%2FlA5f46s5CriVQporJIgSQ6nqHmpHpM1LnpMRoqC2f%2B%2FfdXjoyOV6jYPNDwZxls%2FNG5BqWgYn4eGUTqCuke4yFTzswcw9i56sao59qFjA84uq1pkB843oedBDWvhslQn0xqPw%2BsJtIWg6xpalis9%2Bznn%2BB6C6%2FJVV7C7BwMS37HyDQziZ72ofXamAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABX0lEQVRYhWNkIBH8Z%2FAxZmBgOIND2oSRYctZUsxjItUB1AajDhh1ACMuib%2F7I6cz%2FHjugCHxTfwHw2Hbz9j0%2FA9R4GUUZOXAEGdmP8Ci4ZCJTQ8LTqf9eO7A9OaABoZh%2FLoMf2t7sWphenqRgfH7B0wJTgGc1gx4FIw6YMAdwPL%2Fn7oxNol%2Fh4V%2B%2FOfXxZTgVsFtGhsnw38swv%2F%2Fsfz4X74Sqz0sDLgqFhO9w39%2FTMJtGRbwT1QNqzjTwQefcdkz4FEw6oBRB7AwMDCYYJPI%2BMo658w%2FzDJfk1GcYSFLDFbDNm2%2BxPD27RcMcUlhbl4fHPawMDLdxNqGc3%2Fxg%2BP8%2Fye4nY4FvH37heHFy08Y4lxcbByMneFY7RnwKBh1wIA7AGeLSJqR%2F4A7A0aDiEH0t%2FSPiY%2F5sDbJxMVFeJW42DCaZLy8HAdw2YOzTYgLaK79j7dndD2YcbRnNOqAoeUAACxTWA4U4oxaAAAAAElFTkSuQmCC&style=for-the-badge)\n![library size](https://img.shields.io/bundlephobia/min/jspicl.svg?style=for-the-badge&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABG2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+Gkqr6gAAAYJpQ0NQc1JHQiBJRUM2MTk2Ni0yLjEAACiRdZG5S0NBEIe/RMUrHqCFhUWQaJWIBwRtBBNEhSAhRjBqk7xcQo7HewkSbAXbgIJo41XoX6CtYC0IiiKIjY21oo2G57xEiIiZZWe//e3MsDsL1mBKSev1Q5DO5LTAtMe+GFqyNz5jxUIz7bjCiq5O+v0+atrHncSK3bjMWrXj/rXWaExXwNIkPKGoWk54Rti3llNN3hbuVpLhqPCpsFOTCwrfmnqkwi8mJyr8ZbIWDHjB2ilsT/ziyC9WklpaWF6OI53KKz/3MV9ii2UW5mXtk9mLToBpPNiZZQovboYZF+/GxQiDsqNG/lA5f46s5CriVQporJIgSQ6nqHmpHpM1LnpMRoqC2f+/fdXjoyOV6jYPNDwZxls/NG5BqWgYn4eGUTqCuke4yFTzswcw9i56sao59qFjA84uq1pkB843oedBDWvhslQn0xqPw+sJtIWg6xpalis9+znn+B6C6/JVV7C7BwMS37HyDQziZ72ofXamAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABX0lEQVRYhWNkIBH8Z/AxZmBgOIND2oSRYctZUsxjItUB1AajDhh1ACMuib/7I6cz/HjugCHxTfwHw2Hbz9j0/A9R4GUUZOXAEGdmP8Ci4ZCJTQ8LTqf9eO7A9OaABoZh/LoMf2t7sWphenqRgfH7B0wJTgGc1gx4FIw6YMAdwPL/n7oxNol/h4V+/OfXxZTgVsFtGhsnw38swv//sfz4X74Sqz0sDLgqFhO9w39/TMJtGRbwT1QNqzjTwQefcdkz4FEw6oBRB7AwMDCYYJPI+Mo658w/zDJfk1GcYSFLDFbDNm2+xPD27RcMcUlhbl4fHPawMDLdxNqGc3/xg+P8/ye4nY4FvH37heHFy08Y4lxcbByMneFY7RnwKBh1wIA7AGeLSJqR/4A7A0aDiEH0t/SPiY/5sDbJxMVFeJW42DCaZLy8HAdw2YOzTYgLaK79j7dndD2YcbRnNOqAoeUAACxTWA4U4oxaAAAAAElFTkSuQmCC)\n![npm downloads](https://img.shields.io/npm/dm/jspicl.svg?logo=data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABG2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8%2BCiA8L3JkZjpSREY%2BCjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8%2BGkqr6gAAAYJpQ0NQc1JHQiBJRUM2MTk2Ni0yLjEAACiRdZG5S0NBEIe%2FRMUrHqCFhUWQaJWIBwRtBBNEhSAhRjBqk7xcQo7HewkSbAXbgIJo41XoX6CtYC0IiiKIjY21oo2G57xEiIiZZWe%2F%2Fe3MsDsL1mBKSev1Q5DO5LTAtMe%2BGFqyNz5jxUIz7bjCiq5O%2Bv0%2BatrHncSK3bjMWrXj%2FrXWaExXwNIkPKGoWk54Rti3llNN3hbuVpLhqPCpsFOTCwrfmnqkwi8mJyr8ZbIWDHjB2ilsT%2FziyC9WklpaWF6OI53KKz%2F3MV9ii2UW5mXtk9mLToBpPNiZZQovboYZF%2B%2FGxQiDsqNG%2FlA5f46s5CriVQporJIgSQ6nqHmpHpM1LnpMRoqC2f%2B%2FfdXjoyOV6jYPNDwZxls%2FNG5BqWgYn4eGUTqCuke4yFTzswcw9i56sao59qFjA84uq1pkB843oedBDWvhslQn0xqPw%2BsJtIWg6xpalis9%2Bznn%2BB6C6%2FJVV7C7BwMS37HyDQziZ72ofXamAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABX0lEQVRYhWNkIBH8Z%2FAxZmBgOIND2oSRYctZUsxjItUB1AajDhh1ACMuib%2F7I6cz%2FHjugCHxTfwHw2Hbz9j0%2FA9R4GUUZOXAEGdmP8Ci4ZCJTQ8LTqf9eO7A9OaABoZh%2FLoMf2t7sWphenqRgfH7B0wJTgGc1gx4FIw6YMAdwPL%2Fn7oxNol%2Fh4V%2B%2FOfXxZTgVsFtGhsnw38swv%2F%2Fsfz4X74Sqz0sDLgqFhO9w39%2FTMJtGRbwT1QNqzjTwQefcdkz4FEw6oBRB7AwMDCYYJPI%2BMo658w%2FzDJfk1GcYSFLDFbDNm2%2BxPD27RcMcUlhbl4fHPawMDLdxNqGc3%2Fxg%2BP8%2Fye4nY4FvH37heHFy08Y4lxcbByMneFY7RnwKBh1wIA7AGeLSJqR%2F4A7A0aDiEH0t%2FSPiY%2F5sDbJxMVFeJW42DCaZLy8HAdw2YOzTYgLaK79j7dndD2YcbRnNOqAoeUAACxTWA4U4oxaAAAAAElFTkSuQmCC&style=for-the-badge)\n![](https://img.shields.io/npm/l/jspicl.svg?style=for-the-badge)\n#\n\n## CLI\nConsider using [jspicl-cli](https://github.com/AgronKabashi/jspicl-cli) instead to simplify your project setup. It includes several additional features such as watch mode (reloading your game when code changes), using PNGs as your game\'s spritesheet etc.\n\n## Installation\n```\nnpm install jspicl --save\n```\n\n## Usage\n```js\nimport jspicl from "jspicl";\n\nconst javascriptCode = `...`;\nconst { output, polyfills } = jspicl(javascriptCode);\nconsole.log(\n  Object.values(polyfills).join("\\n"),\n  output\n);\n```\n\nBy default, jspicl formats the LUA output for you but if performance ever becomes an issue you can turn this off through the options argument.\n```js\nconst { output, polyfills } = jspicl(javascriptCode, { prettify: false });\n```\n\n### Options\n<table>\n<thead>\n  <tr>\n    <th>Property</th>\n    <th>Type</th>\n    <th>Description</th>\n  </tr>\n</thead>\n<tbody>\n  <tr>\n    <td>input</td>\n    <td>string</td>\n    <td>JavaScript code to transpile into PICO-8 LUA</td>\n  </tr>\n  <tr>\n    <td>options</td>\n    <td>object</td>\n    <td></td>\n  </tr>\n  <tr>\n    <td>&nbsp;&nbsp;&nbsp;&nbsp;prettify</td>\n    <td>boolean</td>\n    <td>Format output</td>\n  </tr>\n  <tr>\n    <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;customMappers</td>\n    <td valign="top">HashMap&lt;string, function&gt;</td>\n    <td>Custom handlers for transpiling expressions, declarations or statements.</td>\n  </tr>\n</tbody>\n</table>\n\n### Return value\n| Property       | Type   | Description                     |\n|----------------|--------|---------------------------------|\n| output         | string | The transpiled javascript code  |\n| polyfills      | object | Table of required polyfills with their corresponding lua code. |\n\n## Customized transpilation\njspicl does not support all expressions or statements out of the box but it is\nextensible enough to allow for these to be added. It also allows existing ones to\nbe replaced if the implementation is considered unsatisfactory.\nThis is done by supplying a `customMappers` option. The only requirement imposed on\nthe AST node is that it contains a string property called `type` since this is used to identify the appropriate declaration, expression or statement.\n\n```js\nconst customMappers = {\n  // Replace the default while-statement implementation\n  WhileStatement: ({ body, test }, { transpile }) =>\n    `while ${transpile(test)} do\n      -- We have full control of the output!\n      ${transpile(body)}\n    end`,\n\n  // Add support for missing features\n  ForOfStatement: ({ left, right, body }) => {\n    // https://esprima.readthedocs.io/en/latest/syntax-tree-format.html#for-of-statement\n  },\n\n  // Custom statements, declarations and expressions are also valid\n  // as long as they are included in the AST\n  SuperDuperComment: () =>\n    `-- You\'re doing great!`\n\n  // ...\n};\n\nconst { output } = jspicl(javascriptCode, { customMappers });\n```\n\n## Known limitations\n\n|||\n|-|-|\n| ES2015+ | Not all ES2015+ features are supported. Run your code through a transpiler first such as [bubl\xc3\xa9](https://www.npmjs.com/package/buble) or [babel](https://www.npmjs.com/package/babel). |\n| prototype chains | Not supported|\n| Array methods | Not all prototype methods have been polyfilled yet. |\n| Math.max | Only supports two arguments. |\n| AST | Not all declarations, expressions and statements have been implemented. More will be added as needed. |\n\n## Versioning\nThis project uses semantic versioning\n\n## Related projects\n[jspicl CLI](https://github.com/AgronKabashi/jspicl-cli) - Command line interface for jspicl\n\n[games](https://github.com/topics/jspicl-sample) - Games created with jspicl\n'