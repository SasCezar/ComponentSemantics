b'vagrant-wagtail-develop\n=======================\n\nA script to painlessly set up a Vagrant environment for development of Wagtail.\n\nFeatures\n--------\n* An Ubuntu 18.04 LTS (Bionic Beaver) base image\n* Checkouts of Wagtail, bakerydemo, django-modelcluster and Willow ready to develop against\n* Node.js / npm toolchain for front-end asset building\n* Elasticsearch 5 installed (but disabled by default to make the VM less resource-heavy)\n* Optional packages installed (PostgreSQL, Embedly, Sphinx...)\n* Virtualenv for Python 3.6\n\nSetup\n-----\n\n**Requirements:** [VirtualBox](https://www.virtualbox.org/) and [Vagrant](https://www.vagrantup.com/).\n\nOpen a terminal and follow those instructions:\n\n```sh\n# 1. Decide where to put the project. We use "~/Development" in our examples.\ncd ~/Development\n# 2. Clone the vagrant-wagtail-develop repository in a new "wagtail-dev" folder.\ngit clone git@github.com:wagtail/vagrant-wagtail-develop.git wagtail-dev\n# 3. Move inside the new folder.\ncd wagtail-dev/\n# 4. Run the setup script. This will set up all required dependencies for you.\n./setup.sh\n```\n\n> Note: On platforms that can\'t run shell scripts, run the commands from [`setup.sh`](setup.sh) manually instead.\n\nIt can take a while (typically 15-20 minutes) to fetch and build all dependencies - you could go for a coffee in the meantime :)\n\nHere is the resulting folder structure:\n\n```sh\n.\n\xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 libs          # Supporting libraries to develop Wagtail against.\n\xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 vagrant       # Vagrant-related files.\n\xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 wagtail       # Wagtail repository / codebase.\n\xe2\x94\x94\xe2\x94\x80\xe2\x94\x80 bakerydemo    # Wagtail Bakery project used for development.\n```\n\nOnce setup is over,\n\n```sh\n# 5. ssh into your new Vagrant virtual machine.\nvagrant ssh\n# 6. Start up the bakerydemo development server.\n./manage.py runserver 0.0.0.0:8000\n# Success!\n```\n\n- Visit your site at http://localhost:8000\n- The admin interface is at http://localhost:8000/admin/ - log in with `admin` / `changeme`.\n\nWhat you can do\n---------------\n\n> Note: all of those commands are meant to be used **inside the Vagrant virtual machine**. To get there, go to your local Wagtail (`cd ~/Development/wagtail-dev`) set up and `vagrant up` then `vagrant ssh`.\n\nStart the bakerydemo server:\n\n```sh\n./manage.py runserver 0.0.0.0:8000\n# Then visit http://localhost:8000 in your browser.\n```\n\nRun the tests:\n\n```sh\ncd /vagrant/wagtail\n# Python tests.\n./runtests.py\n# Node tests.\nnpm run test\n```\n\nRun the linting:\n\n```sh\ncd /vagrant/wagtail\n# Python linting.\nmake lint\n# JavaScript linting.\nnpm run lint\n```\n\nBuild front-end assets:\n\n```sh\ncd /vagrant/wagtail\nnpm run build\n```\n\nStart front-end development tools and file watching:\n\n```sh\ncd /vagrant/wagtail\nnpm run start\n```\n\nBuild the documentation:\n\n```sh\ncd /vagrant/wagtail/docs\nmake html\n```\n\nStart Elasticsearch:\n\n```sh\nsudo service elasticsearch start\n```\n\nTo enable Elasticsearch on bakerydemo, add the following to `bakerydemo/settings/local.py`:\n\n```\nWAGTAILSEARCH_BACKENDS = {\n    \'default\': {\n        \'BACKEND\': \'wagtail.search.backends.elasticsearch5\',\n        \'URLS\': [\'http://localhost:9200\'],\n        \'INDEX\': \'wagtail\',\n        \'TIMEOUT\': 5,\n        \'OPTIONS\': {},\n        \'INDEX_SETTINGS\': {},\n    }\n}\n```\n\n\nGetting ready to contribute\n---------------------------\n\nHere are other actions you will likely need to do to make your first contribution to the project.\n\nSet up git remotes to Wagtail forks (run these lines outside of the Vagrant VM):\n\n```sh\ncd ~/Development/wagtail-dev/wagtail\n# Change the default origin remote to point to your fork.\ngit remote set-url origin git@github.com:<USERNAME>/wagtail.git\n# Add wagtail/wagtail as the "upstream" remote.\ngit remote add upstream git@github.com:wagtail/wagtail.git\n# Add springload/wagtail as the "springload" remote.\ngit remote add springload git@github.com:springload/wagtail.git\n# Add gasman/wagtail as the "gasman" remote.\ngit remote add gasman git@github.com:gasman/wagtail.git\n# Pull latest changes from all remotes / forks.\ngit pull --all\n```\n'