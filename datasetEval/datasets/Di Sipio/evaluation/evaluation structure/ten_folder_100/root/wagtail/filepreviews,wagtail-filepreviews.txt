b'wagtail-filepreviews\n====================\n\n.. image:: https://travis-ci.org/filepreviews/wagtail-filepreviews.svg?branch=master\n    :target: https://travis-ci.org/filepreviews/wagtail-filepreviews\n\n.. image:: https://img.shields.io/pypi/v/wagtaildocs_previews.svg\n   :target: https://pypi.python.org/pypi/wagtaildocs_previews\n\nExtend Wagtail\'s Documents with image previews and metadata from `FilePreviews.io`_\n\nInstalling\n----------\n\nInstall with **pip**:\n\n.. code-block:: sh\n\n    $ pip install wagtaildocs_previews\n\nSettings\n~~~~~~~~\n\nIn your settings file, add ``wagtaildocs_previews`` to ``INSTALLED_APPS``:\n\n.. code:: python\n\n    INSTALLED_APPS = [\n        # ...\n        \'wagtaildocs_previews\',\n        # ...\n    ]\n\nYou\'ll also need to set ``WAGTAILDOCS_DOCUMENT_MODEL``.\n\n.. code:: python\n\n    WAGTAILDOCS_DOCUMENT_MODEL = \'wagtaildocs_previews.PreviewableDocument\'\n\nURL configuration\n~~~~~~~~~~~~~~~~~\n\n.. code:: python\n\n    from wagtaildocs_previews import urls as wagtaildocs_urls\n\n    urlpatterns = [\n        # ...\n        url(r\'^documents/\', include(wagtaildocs_urls)),\n        # ...\n    ]\n\nFilePreviews.io API Keys\n~~~~~~~~~~~~~~~~~~~~~~~~\n\nFor previews to be generated for your documents, you\'ll need to have a\n`FilePreviews.io`_ account and an application\'s credentials. Once you have\nthe credentials, add them under the ``FilePreviews`` settings in your\nWagtail admin.\n\nUsage\n-----\n\nSince we\'re extending via ``WAGTAILDOCS_DOCUMENT_MODEL`` you should be using\n``get_document_model()`` to reference the correct Document model.\n\n.. code:: python\n\n    from wagtail.core.models import Page\n    from wagtail.documents.models import get_document_model\n    from wagtail.documents.edit_handlers import DocumentChooserPanel\n\n\n    class BookPage(Page):\n        book_file = models.ForeignKey(\n            get_document_model(),\n            null=True,\n            blank=True,\n            on_delete=models.SET_NULL,\n            related_name=\'+\'\n        )\n\n        content_panels = Page.content_panels + [\n            DocumentChooserPanel(\'book_file\'),\n        ]\n\n\nIn your template now you\'ll be able to access the ``preview_data`` field.\n\n.. code:: html\n\n    {% extends "base.html" %}\n    {% load wagtailcore_tags %}\n\n    {% block body_class %}resource-page{% endblock %}\n\n    {% block content %}\n        <h1>Book</h>\n        <h2>{{ page.book_file.title }}</h2>\n        <img src="{{ page.book_file.preview_data.preview.url|default:\'http://placehold.it/300x300\' }}" alt="">\n    {% endblock %}\n\nConfiguring thumbnail sizes and other options\n---------------------------------------------\n\nBy default, image previews and not resized at all. If you want to specify additional `FilePreviews options`_ like thumbnail size or metadata, specify the ``WAGTAILDOCS_PREVIEWS_OPTIONS_CALLBACK`` option in your settings.\n\n.. code:: python\n\n    WAGTAILDOCS_PREVIEWS_OPTIONS_CALLBACK=\'mysite.utils.get_preview_options\'\n\nIn the ``mysite.utils`` module, create a `get_preview_options` method.\n\n.. code:: python\n\n    def get_preview_options(document):\n        return {\n            \'sizes\': [300],\n            \'metadata\': [\'ocr\']\n        }\n\nBonus: Coding video session\n---------------------------\n\nHere\xe2\x80\x99s a coding session video building up to the released package.\n\n.. image:: https://cloud.githubusercontent.com/assets/83319/25309749/3bb64e16-27a3-11e7-8057-350a52484a0a.png\n   :target: https://www.youtube.com/watch?v=p2VY9zX2nNw\n\n.. _FilePreviews.io: http://filepreviews.io/\n.. _FilePreviews options: http://filepreviews.io/docs/endpoints/\n'