b'## KoaHub.js\n\n[![license](https://img.shields.io/github/license/koahubjs/koahub.svg?style=flat-square)](http://js.koahub.com)\n[![travis-ci](https://img.shields.io/travis/koahubjs/koahub.svg?style=flat-square)](https://travis-ci.org/koahubjs/koahub)\n[![codecov](https://codecov.io/gh/koahubjs/koahub/branch/master/graph/badge.svg)](https://codecov.io/gh/koahubjs/koahub)\n[![Dependency Status](https://img.shields.io/david/koahubjs/koahub.svg?style=flat-square)](https://david-dm.org/koahubjs/koahub)\n\nKoaHub.js -- \xe4\xb8\xad\xe6\x96\x87\xe6\x9c\x80\xe4\xbd\xb3\xe5\xae\x9e\xe8\xb7\xb5Node.js Web\xe5\xbf\xab\xe9\x80\x9f\xe5\xbc\x80\xe5\x8f\x91\xe6\xa1\x86\xe6\x9e\xb6\xe3\x80\x82\xe6\x94\xaf\xe6\x8c\x81Koa.js, Express.js\xe4\xb8\xad\xe9\x97\xb4\xe4\xbb\xb6\xe3\x80\x82\xe5\xbd\x93\xe5\x89\x8d\xe9\xa1\xb9\xe7\x9b\xae\xe5\xb7\xb2\xe5\x81\x9c\xe6\xad\xa2\xe7\xbb\xb4\xe6\x8a\xa4\xef\xbc\x8c\xe6\x8e\xa8\xe8\x8d\x90\xe4\xbd\xbf\xe7\x94\xa8[Doodoo.js](https://github.com/doodooke/doodoo.js)\n\n```javascript\n//base controller, admin/controller/base.controller.js\nmodule.exports = class extends koahub.controller {\n\n    async _initialize() {\n        console.log(\'base _initialize\');\n    }\n\n    async isLogin() {\n        console.log(\'base isLogin\');\n    }\n}\n\n//index controller, admin/controller/index.controller.js\nconst base = require(\'./base.controller\');\nmodule.exports = class extends base {\n\n    async _initialize() {\n        await super._initialize();\n    }\n\n    async index() {\n        this.view(1);\n    }\n\n    async index2() {\n        this.json(1, 2);\n    }\n\n    async index3() {\n        await this.render(\'index\');\n    }\n}\n```\n\xe7\x8e\xaf\xe5\xa2\x83\xe8\xa6\x81\xe6\xb1\x82\xef\xbc\x9aNode.js >= 7.6.0\n\n\n## \xe7\x89\xb9\xe6\x80\xa7\n\n* \xe6\x94\xaf\xe6\x8c\x81koa\xe5\x85\xa8\xe9\x83\xa8\xe4\xb8\xad\xe9\x97\xb4\xe4\xbb\xb6\n* \xe6\x94\xaf\xe6\x8c\x81\xe4\xbd\xbf\xe7\x94\xa8 ES6+ \xe5\x85\xa8\xe9\x83\xa8\xe7\x89\xb9\xe6\x80\xa7\xe6\x9d\xa5\xe5\xbc\x80\xe5\x8f\x91\xe9\xa1\xb9\xe7\x9b\xae\n* \xe6\x94\xaf\xe6\x8c\x81\xe6\x96\xad\xe7\x82\xb9\xe8\xb0\x83\xe8\xaf\x95 ES6+ \xe9\xa1\xb9\xe7\x9b\xae\n* \xe6\x94\xaf\xe6\x8c\x81\xe5\xa4\x9a\xe7\xa7\x8d\xe9\xa1\xb9\xe7\x9b\xae\xe7\xbb\x93\xe6\x9e\x84\xe5\x92\x8c\xe5\xa4\x9a\xe7\xa7\x8d\xe9\xa1\xb9\xe7\x9b\xae\xe7\x8e\xaf\xe5\xa2\x83\n* \xe6\x94\xaf\xe6\x8c\x81 Controller \xe4\xb8\xad\xe4\xbd\xbf\xe7\x94\xa8Koa.js\xe7\x9a\x84\xe6\x89\x80\xe6\x9c\x89API\n* \xe6\x94\xaf\xe6\x8c\x81\xe5\xa4\x9a\xe7\xba\xa7 Controller\n* \xe6\x94\xaf\xe6\x8c\x81\xe8\x87\xaa\xe5\x8a\xa8\xe5\x8a\xa0\xe8\xbd\xbd\n* \xe6\x94\xaf\xe6\x8c\x81\xe9\x92\xa9\xe5\xad\x90\xe6\x9c\xba\xe5\x88\xb6\n* \xe6\x94\xaf\xe6\x8c\x81 Socket.io\n* \xe6\x94\xaf\xe6\x8c\x81\xe9\x94\x99\xe8\xaf\xaf\xe5\xa4\x84\xe7\x90\x86\n* \xe6\x94\xaf\xe6\x8c\x81\xe5\x85\xa8\xe5\xb1\x80koahub\xe5\x8f\x98\xe9\x87\x8f\n* \xe6\x94\xaf\xe6\x8c\x81\xe5\xbf\xab\xe6\x8d\xb7\xe6\x96\xb9\xe6\xb3\x95\n* \xe6\x94\xaf\xe6\x8c\x81\xe4\xbf\xae\xe6\x94\xb9\xe4\xbb\xa3\xe7\xa0\x81\xef\xbc\x8c\xe7\xab\x8b\xe5\x8d\xb3\xe7\x94\x9f\xe6\x95\x88\n* \xe6\x94\xaf\xe6\x8c\x81\xe5\x89\x8d\xe7\xbd\xae\xef\xbc\x8c\xe5\x90\x8e\xe7\xbd\xae\xef\xbc\x8c\xe7\xa9\xba\xe6\x93\x8d\xe4\xbd\x9c\n* \xe6\x94\xaf\xe6\x8c\x81\xe7\xa6\x81\xe7\x94\xa8\xe6\x8e\xa7\xe5\x88\xb6\xe5\x99\xa8\xe6\x96\xb9\xe6\xb3\x95\n* \xe6\x94\xaf\xe6\x8c\x81 Restful \xe8\xae\xbe\xe8\xae\xa1\n* \xe6\x94\xaf\xe6\x8c\x81 Common \xe8\x87\xaa\xe5\x8a\xa8\xe5\x8a\xa0\xe8\xbd\xbd\n* \xe6\x94\xaf\xe6\x8c\x81\xe5\x90\xaf\xe5\x8a\xa8\xe8\x87\xaa\xe5\xae\x9a\xe4\xb9\x89\n* ...\n\n## \xe5\xae\x89\xe8\xa3\x85\n\n```sh\nnpm install koahubjs/koahub --save\n```\n\n## \xe5\x88\x9b\xe5\xbb\xba\xe5\x90\xaf\xe5\x8a\xa8\xe6\x96\x87\xe4\xbb\xb6\n\n```javascript\n// app/index.js\xe5\x90\xaf\xe5\x8a\xa8\xe6\x96\x87\xe4\xbb\xb6\nconst Koahub = require(\'koahub\');\n\n// \xe5\x88\x9d\xe5\xa7\x8b\xe5\x8c\x96\xe9\xa1\xb9\xe7\x9b\xae\nconst app = new Koahub();\n\n// \xe5\x90\xaf\xe5\x8a\xa8\xe9\xa1\xb9\xe7\x9b\xae\napp.run();\n```\n\n## \xe6\x96\xb9\xe6\xb3\x95\n\nctx\xe4\xb8\x8a\xe7\x9a\x84\xe5\x87\xbd\xe6\x95\xb0\xe6\x88\x96\xe5\x8f\x82\xe6\x95\xb0\xe5\xb0\x86\xe8\x87\xaa\xe5\x8a\xa8\xe5\x8a\xa0\xe8\xbd\xbd\xe5\x88\xb0controller\xef\xbc\x8c\xe4\xbe\x8b\xe5\xa6\x82\xe6\x94\xaf\xe6\x8c\x81 `this.body = \'Hello World!\'`, ctx\xe4\xb8\xad\xe5\x85\xb7\xe4\xbd\x93\xe7\x9a\x84API\xe8\xaf\xb7\xe5\x8f\x82\xe8\x80\x83Koa.js, controller\xe4\xb8\xad\xe7\x9a\x84\xe6\x89\xa9\xe5\xb1\x95\xe6\x96\xb9\xe6\xb3\x95\xe5\xa6\x82\xe4\xb8\x8b\xe3\x80\x82\n\n```javascript\nthis.ctx;\nthis.next;\nthis.isGet();\nthis.isPost();\nthis.isAjax();\nthis.isPjax();\nthis.isMethod(method);\nthis.hook.add(name, action);\nawait this.hook.run(name, ...args);\nthis.download(file);\nthis.view(data);\nthis.json(data, msg, code);\nthis.success(data, msg);\nthis.error(data, msg);\nawait this.action(path, ...args);\n```\n\n## \xe5\xbf\xab\xe6\x8d\xb7\xe6\x96\xb9\xe6\xb3\x95\n\n```javascript\n// app/common.js \xe5\x87\xbd\xe6\x95\xb0\xe6\x96\x87\xe4\xbb\xb6\nmodule.exports = {\n    add(a, b){\n        return a + b;\n    }\n}\n// \xe6\x8e\xa7\xe5\x88\xb6\xe5\x99\xa8\xe4\xb8\xad\xe5\x8f\xaf\xe4\xbb\xa5\xe7\x9b\xb4\xe6\x8e\xa5\xe9\x80\x9a\xe8\xbf\x87this.add\xe8\xb0\x83\xe7\x94\xa8\n```\n\n## \xe5\xbf\xab\xe6\x8d\xb7\xe4\xb8\xad\xe9\x97\xb4\xe4\xbb\xb6\n\n```javascript\napp.use(async function (ctx, next) {\n\n    ctx.model = function() {\n        // ....\n    }\n    await next();\n});\n\n// \xe6\x8e\xa7\xe5\x88\xb6\xe5\x99\xa8\xe4\xb8\xad\xe5\x8f\xaf\xe4\xbb\xa5\xe7\x9b\xb4\xe6\x8e\xa5\xe9\x80\x9a\xe8\xbf\x87this.model\xe8\xb0\x83\xe7\x94\xa8\n```\n\n\n## \xe5\x91\xbd\xe4\xbb\xa4\xe8\xa1\x8c\xe5\xb7\xa5\xe5\x85\xb7\n[KoaHub CLI](https://github.com/koahubjs/koahub-cli)\n\n## \xe9\x85\x8d\xe7\xbd\xae\n```javascript\n// app/config/default.config.js\nmodule.exports = {\n    port: 3000,\n    default_module: \'admin\'\n}\n\n//\xe6\xa1\x86\xe6\x9e\xb6\xe9\xbb\x98\xe8\xae\xa4\xe9\x85\x8d\xe7\xbd\xae\n//\xe5\x90\xaf\xe5\x8a\xa8\xe7\xab\xaf\xe5\x8f\xa3\nport: 3000,\n\n//\xe9\xbb\x98\xe8\xae\xa4\xe6\xa8\xa1\xe5\x9d\x97\xef\xbc\x8c\xe6\x8e\xa7\xe5\x88\xb6\xe5\x99\xa8\xef\xbc\x8c\xe6\x93\x8d\xe4\xbd\x9c\ndefault_module: \'home\',\ndefault_controller: \'index\',\ndefault_action: \'index\',\n\n//url\xe5\x90\x8e\xe7\xbc\x80\nurl_suffix: \'\',\n\n//\xe8\x87\xaa\xe5\x8a\xa8\xe5\x8a\xa0\xe8\xbd\xbd\xe9\x85\x8d\xe7\xbd\xae\nloader: {\n    "controllers": {\n        root: \'controller\',\n        suffix: \'.controller.js\',\n        prefix: \'/\',\n    },\n    "configs": {\n        root: \'config\',\n        suffix: \'.config.js\'\n    },\n    "middlewares": {\n        root: \'middleware\',\n        suffix: \'.middleware.js\'\n    }\n}\n\n//\xe4\xb8\xad\xe9\x97\xb4\xe4\xbb\xb6\xe9\xbb\x98\xe8\xae\xa4\xe9\x85\x8d\xe7\xbd\xae\n//middleware\xe9\xa1\xba\xe5\xba\x8f\nmiddleware: [\'koa-logger\'],\n\n//http\xe6\x97\xa5\xe5\xbf\x97\n\'koa-logger\': true,\n\n//favicon\xe8\xae\xbe\xe7\xbd\xae\n\'koa-favicon\': \'www/favicon.ico\',\n\n//body\xe9\x85\x8d\xe7\xbd\xae\nbody: {\n    multipart: true\n},\n\n//cors\xe9\x85\x8d\xe7\xbd\xae\n\'koa-cors\': false,\n\n//session\xe9\x85\x8d\xe7\xbd\xae\n\'koa-session2\': false,\n\n//static\xe9\x85\x8d\xe7\xbd\xae\n\'koa-static-cache\': false\n```\n\n## \xe5\x85\xb6\xe4\xbb\x96\n```javascript\n// \xe6\x8e\xa7\xe5\x88\xb6\xe5\x99\xa8\xe5\x88\x9d\xe5\xa7\x8b\xe5\x8c\x96\xef\xbc\x8c\xe5\x89\x8d\xe7\xbd\xae\xef\xbc\x8c\xe5\x90\x8e\xe7\xbd\xae\xef\xbc\x8c\xe7\xa9\xba\xe6\x93\x8d\xe4\xbd\x9c\nasync _initialize()\nasync _before()\nasync _before_index()\nasync index()\nasync _after_index()\nasync _after()\nasync _empty()\n\n// \xe6\x8e\xa7\xe5\x88\xb6\xe5\x99\xa8\xe7\xa7\x81\xe6\x9c\x89\xe6\x96\xb9\xe6\xb3\x95\n// \xe6\x96\xb9\xe6\xb3\x95\xe9\xa6\x96\xe9\xa1\xb5\xe5\xad\x97\xe7\xac\xa6\xe6\x98\xaf`_`\xe4\xb8\xba\xe7\xa7\x81\xe6\x9c\x89\xe6\x96\xb9\xe6\xb3\x95\n\n// \xe6\x94\xaf\xe6\x8c\x81restful\xe8\xb7\xaf\xe7\x94\xb1\xe8\xae\xbe\xe7\xbd\xae\n// app/config/router.config.js\nmodule.exports = [\n    [\'/product\', {\n        get: "/home/product/index"\n    }],\n    [\'/product/:id\', {\n        get: "/home/product/detail",\n        post: "/home/product/add",\n        put: "/home/product/update",\n        delete: "/home/product/delete",\n    }]\n]\n```\n\n\n## \xe5\xbc\x80\xe5\xa7\x8b\xe5\xba\x94\xe7\x94\xa8\n\n### async/await\n```sh\n// \xe4\xb8\x8b\xe8\xbd\xbddemo\ngit clone https://github.com/koahubjs/koahub-demo.git\n// \xe8\xbf\x9b\xe5\x85\xa5\xe9\xa1\xb9\xe7\x9b\xae\ncd koahub-demo\n// \xe5\xae\x89\xe8\xa3\x85\xe4\xbe\x9d\xe8\xb5\x96\nnpm install\n// \xe5\x90\xaf\xe5\x8a\xa8\xe9\xa1\xb9\xe7\x9b\xae\nnpm start\n```\n\n### promise\n```sh\n// \xe4\xb8\x8b\xe8\xbd\xbddemo\ngit clone https://github.com/koahubjs/koahub-demo-promise.git\n// \xe8\xbf\x9b\xe5\x85\xa5\xe9\xa1\xb9\xe7\x9b\xae\ncd koahub-demo-promise\n// \xe5\xae\x89\xe8\xa3\x85\xe4\xbe\x9d\xe8\xb5\x96\nnpm install\n// \xe5\x90\xaf\xe5\x8a\xa8\xe9\xa1\xb9\xe7\x9b\xae\nnpm start\n```\n\n### generator\n```sh\n// \xe4\xb8\x8b\xe8\xbd\xbddemo\ngit clone https://github.com/koahubjs/koahub-demo-generator.git\n// \xe8\xbf\x9b\xe5\x85\xa5\xe9\xa1\xb9\xe7\x9b\xae\ncd koahub-demo-generator\n// \xe5\xae\x89\xe8\xa3\x85\xe4\xbe\x9d\xe8\xb5\x96\nnpm install\n// \xe5\x90\xaf\xe5\x8a\xa8\xe9\xa1\xb9\xe7\x9b\xae\nnpm start\n```\n\n## \xe5\x90\xaf\xe5\x8a\xa8\xe4\xbf\xa1\xe6\x81\xaf\n\n```text\n[2017-05-14 11:48:05] [Koahub] Koahub Version: 2.2.6\n[2017-05-14 11:48:05] [Koahub] Koahub Website: http://js.koahub.com\n[2017-05-14 11:48:05] [Koahub] Nodejs Version: v8.0.0\n[2017-05-14 11:48:05] [Koahub] Nodejs Platform: darwin x64\n[2017-05-14 11:48:05] [Koahub] Server Enviroment: development\n[2017-05-14 11:48:05] [Koahub] Server running at: http://127.0.0.1:3000\n```\n\n\n## \xe4\xbd\xbf\xe7\x94\xa8\xe6\x89\x8b\xe5\x86\x8c\n[KoaHub.js\xe6\x89\x8b\xe5\x86\x8c](https://github.com/koahubjs/koahub/tree/master/docs/README.md)\n\n## \xe5\xae\x98\xe7\xbd\x91\n[KoaHub.js\xe5\xae\x98\xe7\xbd\x91](https://github.com/koahubjs)'