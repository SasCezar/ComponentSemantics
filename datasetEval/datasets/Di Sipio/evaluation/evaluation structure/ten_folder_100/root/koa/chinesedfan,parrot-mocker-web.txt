b'# parrot-mocker-web [![npm version](https://badge.fury.io/js/parrot-mocker-web.svg)](https://badge.fury.io/js/parrot-mocker-web) [![Build Status](https://travis-ci.org/chinesedfan/parrot-mocker-web.svg?branch=master)](https://travis-ci.org/chinesedfan/parrot-mocker-web) [![Coverage Status](https://coveralls.io/repos/github/chinesedfan/parrot-mocker-web/badge.svg?branch=master)](https://coveralls.io/github/chinesedfan/parrot-mocker-web?branch=master) [![License](https://img.shields.io/github/license/chinesedfan/parrot-mocker-web.svg)][license]\n\n[\xe4\xb8\xad\xe6\x96\x87\xe6\x96\x87\xe6\xa1\xa3](https://github.com/chinesedfan/parrot-mocker-web/blob/master/README-zh.md)\n\nThis project provides a simple mock server, which works with the Chrome plugin [parrot-mocker](https://github.com/chinesedfan/parrot-mocker).\n\nSupport:\n- foward requests of pages(xhr/jsonp/fetch) to the real web server, or just mock\n- list all forwarded requests\n- config mock rules for different requests\n\nNot support:\n- cookie sensitive requests, because the plugin forwards requests with cookies of the page, instead of cookies of the request domain\n- relative or local DNS parsed requests, because the mock server can not resolve them\n- ~~HTTPS pages, unless the mock server is deployed with HTTPS~~ (Solved by [leancloud][index-lean] and [now.sh][index-now])\n\n## How to use\n\n### 1.Prepare\n\nInstall Chrome plugin, [parrot-mocker](https://chrome.google.com/webstore/detail/parrotmocker/hdhamekapmnmceohfdbfelofidflfelm), so that your pages have the ablity to intercept requests and forward to this mock server. Other usages without the plugin can refer to [parrot-mocker project](https://github.com/chinesedfan/parrot-mocker).\n\n<img src="pic/1.install.png" width="80%" />\n\n### 2.Visit\n\nFor example, if deployed in [leancloud][index-lean], please open your Chrome browser and visit [index page][index-lean] first. Other instances like [now.sh][index-now] are similar.\n\n<img src="pic/2.1.index.png" width="80%" />\n\nThen visit your test page, i.e. [my demo](https://chinesedfan.github.io/parrot-mocker/demo.html), which will send 3 different requests(xhr/jsonp/fetch) after loaded.\n\n<img src="pic/2.2.demo.png" width="80%" />\n\nIn the plugin, input the mock server address and click the green button. The test page will reload automatically.\n\n<img src="pic/2.3.prepare.png" width="80%" />\n\nNow you will find that requests are forwarded to the mock server, which are also visiable at [index page](https://parrotmocker.leanapp.cn). If visiting other pages in the same domain, their requests will also be forwarded to this mock server.\n\n<img src="pic/2.4.retransmit.png" width="80%" />\n<img src="pic/2.5.list.png" width="80%" />\n\n### 3.Mock\n\nClick any request in the list, and click \'Add\'. Then this request is added to mock.\n\nOpen [config page](https://parrotmocker.leanapp.cn/html/config.html), now you can edit the mock data. Remember to click \'Apply\' to really use the mock data.\n\n<img src="pic/3.1.mock.png" width="80%" />\n\nRefresh your test page to check whether the mock is working correctly.\n\n<img src="pic/3.2.result.png" width="80%" />\n<img src="pic/3.3.list.png" width="80%" />\n\n## Launch locally\n\nBy default, the server is launched on main port 8080, and sub-ports 8442/8443. Sub-ports can be visited by http/https correspondingly. Because my https is self-certified, if your browser gives a warning, please continue to visit.\n\n```sh\nnode ./server/index.js\n```\n\nOr you can specify the port by an environment variable.\n\n```sh\nPORT=8888 HTTP_PORT=9442 HTTPS_PORT=9443 node ./server/index.js\n```\n\nTo use local server, you should visit and set local address as mock server in step 2, i.e. `https://127.0.0.1:8080`, and other steps are similar with above.\n\n## Tips\n\n- In order to handles redirections well, please make sure the server can also visit itself by the host address that you input in the Chrome plugin.\n\n## License\n\n[MIT][license]\n\n## Acknowledgement\n\n* [jsoneditor](https://github.com/josdejong/jsoneditor), json editor\n\n\n[index-lean]: https://parrotmocker.leanapp.cn\n[index-now]: https://parrotmocker.now.sh\n[license]: https://github.com/chinesedfan/parrot-mocker-web/blob/master/LICENSE\n'