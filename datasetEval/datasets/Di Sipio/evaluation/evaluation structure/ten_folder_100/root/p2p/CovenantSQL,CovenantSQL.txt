b'<p align="center">\n    <img src="logo/covenantsql_horizontal.png"\n        width="760">\n</p>\n<p align="center">\n    <a href="https://goreportcard.com/report/github.com/CovenantSQL/CovenantSQL">\n        <img src="https://goreportcard.com/badge/github.com/CovenantSQL/CovenantSQL?style=flat-square"\n            alt="Go Report Card"></a>\n    <a href="https://codecov.io/gh/CovenantSQL/CovenantSQL">\n        <img src="https://codecov.io/gh/CovenantSQL/CovenantSQL/branch/develop/graph/badge.svg"\n            alt="Coverage"></a>\n    <a href="https://travis-ci.org/CovenantSQL/CovenantSQL">\n        <img src="https://travis-ci.org/CovenantSQL/CovenantSQL.png?branch=develop"\n            alt="Build Status"/></a>\n    <a href="https://opensource.org/licenses/Apache-2.0">\n        <img src="https://img.shields.io/badge/License-Apache%202.0-blue.svg"\n            alt="License"></a>\n    <a href="https://godoc.org/github.com/CovenantSQL/CovenantSQL">\n        <img src="https://img.shields.io/badge/godoc-reference-blue.svg"\n            alt="GoDoc"></a>\n    <a href="https://formulae.brew.sh/formula/cql">\n        <img src="https://img.shields.io/homebrew/v/cql.svg?color=blue&label=brew%20install%20cql"\n            alt="homebrew"></a>\n</p>\n\n[\xe4\xb8\xad\xe6\x96\x87\xe7\xae\x80\xe4\xbb\x8b](https://github.com/CovenantSQL/CovenantSQL/blob/develop/README-zh.md)\n\nCovenantSQL(CQL) is a **Byzantine Fault Tolerant** relational database built on SQLite:\n\n- **ServerLess**: Free, High Availabile, Auto Sync Database Service for Serverless App\n- **SQL**: Most SQL-92 support.\n- **Decentralize**: Running on Open Internet without Central Coordination.\n- **Privacy**: Access with Granted Permission and Encryption Pass.\n- **Immutable**: Query History in CQL is Immutable and Trackable.\n- **Permission**: Column Level ACL and SQL Pattern Whitelist.\n\n## What is CQL?\n\n- Open source alternative of Amazon QLDB\n- Low cost DBaaS\n- Just like filecoin + IPFS is the decentralized file system, CQL is the decentralized database\n\n## Quick Start\n\nCQL client supports:\n\n- macOS X 10.9+\n- Linux 2.6.23+ (x86, x86_64, armeabi-v7a, arm64-v8a)\n\n<details><summary>Developer Guide</summary>\n<p>\n\n#### MacOS\n- \xf0\x9f\x8d\xba Homebrew users can just run:\n\n    ```bash\n    brew install cql\n    ```\n\n- non-Homebrew users can run:\n    \n    ```bash\n    sudo bash -c \'curl -L "https://mac.gridb.io/cql" | tar xzv -C /usr/local/bin/ --strip-components=1\'\n    ```\n\n#### Linux\n\n- Just run\xef\xbc\x9a\n\n    ```bash\n    sudo bash -c \'curl -L "https://linux.gridb.io/cql" | tar xzv -C /usr/local/bin/ --strip-components=1\'\n    ```\n\n#### To continue: [TestNet Quickstart](https://developers.covenantsql.io/docs/en/quickstart)\n\n#### SDKs\n\nCovenantSQL Testnet is already released, [have a try](https://developers.covenantsql.io/docs/quickstart).\n\n- [Golang](client/)\n- [Java](https://github.com/CovenantSQL/cql-java-driver)\n- [NodeJS](https://github.com/CovenantSQL/covenantsql-proxy-js)\n- [Python](https://github.com/CovenantSQL/cql-python-driver)\n- [Microsoft Excel (by community)](https://github.com/melancholiaforever/CQL_Excel)\n\n</p>\n</details>\n\n\n## How CQL works\n\n### 3 Layers Arch\n\n![CovenantSQL 3 Layer design](https://cdn.jsdelivr.net/gh/CovenantSQL/docs@b7143254adb804dff0e3bc1f2f6ab11ad9cd44f5/website/static/img/2layers.svg)\n\n- Layer 1: **Global Consensus Layer** (the main chain, the middle ring in the architecture diagram):\n    - There will only be one main chain throughout the network.\n    - Mainly responsible for database Miner and the user\xe2\x80\x99s contract matching, transaction settlement, anti-cheating, shard chain lock hash and other global consensus matters.\n- Layer 2: **SQL Consensus Layer** (shard chain, rings on both sides):\n    - Each database will have its own separate shard chain.\n    - Mainly responsible for: the signature, delivery and consistency of the various Transactions of the database. The data history of the permanent traceability is mainly implemented here, and the hash lock is performed in the main chain.\n- Layer 3: **Datastore Layer** (database engine with SQL-92 support):\n    - Each Database has its own independent distributed engine.\n    - Mainly responsible for: database storage & encryption, query processing & signature, efficient indexing.\n\n\n<details><summary>For more details</summary>\n<p>\n\n### Consensus Algorithm\n\nCQL supports 2 kinds of consensus algorithm:\n\n1. DPoS (Delegated Proof-of-Stake) is applied in `Eventually consistency mode` database and also `Layer 1 (Global Consensus Layer)` in BlockProducer. CQL miners pack all SQL queries and its signatures by the client into blocks thus form a blockchain. We named the algorithm [`Xenomint`](https://github.com/CovenantSQL/CovenantSQL/tree/develop/xenomint). \n2. BFT-Raft (Byzantine Fault-Toleranted Raft)<sup>[bft-raft](#bft-raft)</sup> is applied in `Strong consistency mode` database. We named our implementation [`Kayak`](https://github.com/CovenantSQL/CovenantSQL/tree/develop/kayak).  The CQL miner leader does a `Two-Phase Commit` with `Kayak` to support `Transaction`.<sup>[transaction](#transaction)</sup>\n\nCQL database consistency mode and node count can be selected in database creation with command  `cql create \'{"UseEventualConsistency": true, "Node": 3}\'`\n\n## Comparison\n\n|                              | Ethereum          | Hyperledger Fabric     | Amazon QLDB | CovenantSQL                                                  |\n| ---------------------------- | ----------------- | ---------------------- | ----------- | ------------------------------------------------------------ |\n| **Dev language**             | Solidity, ewasm   | Chaincode (Go, NodeJS) | ?           | Python, Golang, Java, PHP, NodeJS, MatLab                    |\n| **Dev Pattern**              | Smart   Contract  | Chaincode              | SQL         | SQL                                                          |\n| **Open Source**              | Y                 | Y                      | N           | Y                                                            |\n| **Nodes for HA**             | 3                 | 15                     | ?           | 3                                                            |\n| **Column Level ACL**         | N                 | Y                      | ?           | Y                                                            |\n| **Data Format**              | File              | Key-value              | Document    | File<sup>[fuse](#fuse)</sup>, Key-value, Structured          |\n| **Storage Encryption**       | N                 | API                    | Y           | Y                                                            |\n| **Data Desensitization**     | N                 | N                      | N           | Y                                                            |\n| **Multi-tenant**             | DIY               | DIY                    | N           | Y                                                            |\n| **Throughput (1s delay)**    | 15~10 tx/s        | 3500 tx/s              | ?           | 11065 tx/s (Eventually Consistency)<br/>1866 tx/s (Strong Consistency) |\n| **Consistency Delay**        | 2~6 min           | < 1 s                  | ?           | < 10 ms                                                      |\n| **Secure for Open Internet** | Y                 | N                      | Only in AWS | Y                                                            |\n| **Consensus**                | PoW + PoS(Casper) | CFT                    | ?           | DPoS (Eventually Consistency)<br/>BFT-Raft (Strong Consistency) |\n\n#### FootNotes\n\n- <a name="bft-raft">BFT-Raft</a>: A CQL leader offline needs CQL Block Producer to decide whether to wait for leader online for data integrity or promote a follower node for availability. This part is still under construction and any advice is welcome.  \n\n- <a name="transaction">Transaction</a>: Talking about `ACID`, CQL has full "Consistency, Isolation, Durability" and a limited `Atomicity` support. That is even under strong consistency mode, CQL transaction is only supported on the leader node. If you want to do "read `v`, `v++`, write `v` back" parallelly and atomically, then the only way is "read `v` from the leader, `v++`, write `v` back to leader"\n\n- <a name="fuse">FUSE</a>: CQL has a [simple FUSE](https://github.com/CovenantSQL/CovenantSQL/tree/develop/cmd/cql-fuse) support adopted from CockroachDB. The performance is not very ideal and still has some issues. But it can pass fio test like:\n\n  ```bash\n  fio --debug=io --loops=1 --size=8m --filename=../mnt/fiotest.tmp --stonewall --direct=1 --name=Seqread --bs=128k --rw=read --name=Seqwrite --bs=128k --rw=write --name=4krandread --bs=4k --rw=randread --name=4krandwrite --bs=4k --rw=randwrite\n  ```\n\n### Network Stack\n\n[DH-RPC](rpc/) := TLS - Cert + DHT\n\n| Layer              | Implementation |\n|:-------------------|:--------------:|\n| RPC                |     `net/rpc`    |\n| Naming             |      [**C**onsistent **S**ecure **DHT**](https://godoc.org/github.com/CovenantSQL/CovenantSQL/consistent)     |\n| Pooling            |  Session Pool  |\n| Multiplex          |      [smux](https://github.com/xtaci/smux)     |\n| Transport Security |      [**E**nhanced **TLS**](https://github.com/CovenantSQL/research/wiki/ETLS(Enhanced-Transport-Layer-Security))      |\n| Network            |       TCP or KCP for optional later      |\n\n### Test Tools we use\n  - [**G**lobal **N**etwork **T**opology **E**mulator](https://github.com/CovenantSQL/GNTE) is used for network emulating.\n  - [Liner Consistency Test](https://github.com/anishathalye/porcupine)\n\n## Papers\n\nOur team members published:\n\n- [Thunder crystal: a novel crowdsourcing-based content distribution platform](https://dl.acm.org/citation.cfm?id=2736085)\n- [Analyzing streaming performance in crowdsourcing-based video service systems](https://ieeexplore.ieee.org/abstract/document/7114727/)\n- [Performance Analysis of Thunder Crystal: A Crowdsourcing-Based Video Distribution Platform](https://ieeexplore.ieee.org/abstract/document/7762143/)\n\nthat inspired us:\n\n- [Bitcoin: A Peer-to-Peer Electronic Cash System](https://bitcoin.org/bitcoin.pdf)\n- [S/Kademlia](https://github.com/thunderdb/research/wiki/Secure-Kademlia)\n    - [S/Kademlia: A practicable approach towards secure key-based routing](https://ieeexplore.ieee.org/document/4447808/)\n- [vSQL: Verifying arbitrary SQL queries over dynamic outsourced databases](https://ieeexplore.ieee.org/abstract/document/7958614/)\n\n\n</p>\n</details>\n\n## Performance \n\nStrong consistency bench result (2 miners, 8 core aws c5.2xlarge):\n![CovenantSQL bench](logo/bench.png)\n\nAs seen above, the concurrency pressure on the database increased gradually in the first 5 hours, and the write TPS also increased. When the TPS no longer grows, the concurrent pressure is maintained for 100 hours.\n\n## Demos\n\n- [CovenantForum](https://demo.covenantsql.io/forum/)\n- [Weibo Bot @BlockPin](https://weibo.com/BlockPin)\n- [Markdown Editor with CovenantSQL sync](https://github.com/CovenantSQL/stackedit)\n- [Web Admin for CovenantSQL](https://github.com/CovenantSQL/adminer)\n- [How CovenantSQL works(video)](https://youtu.be/2Mz5POxxaQM?t=106)\n\n## Use cases\n\n<details><summary>Traditional App & \xc4\x90App use cases</summary>\n<p>\n\n### Traditional App\n\n#### Privacy data\n\nIf you are a developper of password management tools just like [1Password](https://1password.com/) or [LastPass](https://www.lastpass.com/). You can use CQL as the database to take benefits:\n\n1. Serverless: no need to deploy a server to store your user\'s password for sync which is the hot potato.\n2. Security: CQL handles all the encryption work. Decentralized data storage gives more confidence to your users.\n3. Regulation: CQL naturally comply with [GDPR](https://en.wikipedia.org/wiki/General_Data_Protection_Regulation).\n\n#### IoT storage\n\nCQL miners are deployed globally, IoT node can write to nearest CQL miner directly.\n\n1. Cheaper: Without passing all the traffic through a gateway, you can save a large bandwidth fee. And, CQL is a shared economic database which makes storage cheaper.\n2. Faster: CQL consensus protocol is designed for Internet where network latency is unavoidable.\n\n#### Open data service\n\nFor example, you are the most detailed Bitcoin OHLC data maintainer. You can directly expose an online SQL interface to your customers to meet a wide range of query needs.\n\n1. CQL can limit specific SQL query statements to meet the needs while also balancing data security;\n2. CQL can record SQL query records on the blockchain, which is very convenient for customers to check their bills for long-tail customers and billing, like [this](https://explorer.dbhub.org/dbs/7a51191ae06afa22595b3904dc558d41057a279393b22650a95a3fc610e1e2df/requests/f466f7bf89d4dd1ece7849ef3cbe5c619c2e6e793c65b31966dbe4c7db0bb072)\n3. For customers with high performance requirements, Slave nodes can be deployed at the customer to meet the needs of customers with low latency queries while enabling almost real-time data updates.\n\n#### Secure storage\n\nThanks to the CQL data history is immutable, CQL can be used as a storage for sensitive operational logs to prevent hacking and erasure access logs.\n\n### \xc4\x90App\n\nStoring data on Bitcoin or Ethereum is quite expensive ($4305 / MB on Ethereum 2018-05-15). Programming is very complicated due to the lack of support for structured data storage. CQL gives you a low-cost structured SQL database and also provides more room for \xc4\x90App to exchange data with real-world.\n\n</p>\n</details>\n\n\n## TestNet\n\n- [Quick Start](https://developers.covenantsql.io)\n- [MainChain Explorer](http://scan.covenantsql.io)\n- [SQLChain Explorer](https://explorer.dbhub.org)\n- [Demo & Forum](https://demo.covenantsql.io/forum/)\n\n## Contact\n\n- [Blog](https://medium.com/@covenant_labs)\n- [YouTube](https://www.youtube.com/channel/UCe9P_TMiexSHW2GGV5qBmZw)\n- [Mail](mailto:webmaster@covenantsql.io)\n- [Forum](https://demo.covenantsql.io/forum/)\n- <a href="https://twitter.com/intent/follow?screen_name=CovenantLabs"><img src="https://img.shields.io/twitter/url/https/twitter.com/fold_left.svg?style=social&label=Follow%20%40CovenantLabs" alt="follow on Twitter"></a>\n- [![Join the chat at https://gitter.im/CovenantSQL/CovenantSQL](https://badges.gitter.im/CovenantSQL/CovenantSQL.svg)](https://gitter.im/CovenantSQL/CovenantSQL?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)\n- Add `CovenantSQL` to join WeChat group\n    <p align="left">\n        <img src="logo/wechat.jpeg" height="100">\n    </p>\n'