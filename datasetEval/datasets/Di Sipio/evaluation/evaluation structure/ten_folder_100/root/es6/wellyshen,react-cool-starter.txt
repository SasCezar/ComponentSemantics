b'# React Cool Starter\n\n[![build status](https://img.shields.io/travis/wellyshen/react-cool-starter/master.svg?style=flat-square)](https://travis-ci.org/wellyshen/react-cool-starter)\n[![coverage status](https://img.shields.io/coveralls/github/wellyshen/react-cool-starter?style=flat-square)](https://coveralls.io/github/wellyshen/react-cool-starter?branch=master)\n[![dependencies status](https://img.shields.io/david/wellyshen/react-cool-starter?style=flat-square)](https://david-dm.org/wellyshen/react-cool-starter)\n[![devDependencies status](https://img.shields.io/david/dev/wellyshen/react-cool-starter?style=flat-square)](https://david-dm.org/wellyshen/react-cool-starter?type=dev)\n[![code style: prettier](https://img.shields.io/badge/code_style-prettier-ff69b4.svg?style=flat-square)](https://github.com/prettier/prettier)\n[![MIT licensed](https://img.shields.io/github/license/wellyshen/react-cool-starter?style=flat-square)](https://raw.githubusercontent.com/wellyshen/react-cool-starter/master/LICENSE)\n[![Twitter URL](https://img.shields.io/twitter/url?style=social&url=https%3A%2F%2Fgithub.com%2Fwellyshen%2Freact-cool-starter)](https://twitter.com/intent/tweet?text=With%20@React-Cool-Starter,%20I%20can%20build%20my%20universal%20web%20app%20easily.%20Thanks,%20@Welly%20Shen%20\xf0\x9f\xa4\xa9)\n\n> \xf0\x9f\x8e\x89 My react-native app [LeadFit](https://itunes.apple.com/app/id1321807247) now available on App Store, which is a workout app. Welcome to try, it\'s free!\n\nA simple but feature rich starter boilerplate for creating your own [universal](https://medium.com/@mjackson/universal-javascript-4761051b7ae9) app. It built on the top of [React](https://facebook.github.io/react/), [Redux](https://github.com/reactjs/redux), [React Router](https://reacttraining.com/react-router/) and [Express](https://expressjs.com/). Includes all the hot stuff and modern web development tools such as [Typescript](https://www.typescriptlang.org/), [Webpack](https://webpack.js.org/), [Babel](https://babeljs.io/), [PostCSS](https://github.com/postcss/postcss-loader), [React Hot Loader](https://github.com/gaearon/react-hot-loader), [Jest](https://facebook.github.io/jest/) and [Redux Devtools Extension](https://github.com/zalmoxisus/redux-devtools-extension). See the [**\xe2\x80\x9cFeatures\xe2\x80\x9d**](#features) section for other awesome features you can expect.\n\nI will maintain the starter boilerplate and keep all of the technologies on trend. Welcome to join me if you want. Hope you guys love it \xf0\x9f\xa4\xa9\n\n> \xf0\x9f\x91\xbb I\'m curious what kind of app that you guys building via this starter? Please feel free to [tell me](https://github.com/wellyshen/react-cool-starter/issues/6), let\'s make some sharing between us.\n\n## Real Case Study\n\n- [Rendah Mag](https://www.rendahmag.com/) is a music magazine which exists to bring exposure to an ever-growing community, focusing on the latest Halftime, Beats & Experimental news & releases. Congrats for the amazing product. \xf0\x9f\x8e\xa7 \xf0\x9f\x8e\x89\n- [BECK Friends](https://www.beckfriends.com/) is an international delivery service, which is built based on this starter boilerplate. Congrats for successful migrating to React. \xf0\x9f\x8e\x89\n- [DealDrop](https://www.dealdrop.com/) is the best place to find verified coupon codes, deals, promos and offers for thousands of stores & brands you love. Never pay full price again \xf0\x9f\xa4\x91\n\n## Features\n\nReally cool starter boilerplate with the most popular technologies:\n\n- [Universal](https://medium.com/@mjackson/universal-javascript-4761051b7ae9) rendering with async data fetching.\n- [React](https://facebook.github.io/react/) as the view framework.\n- [Redux](https://github.com/reactjs/redux) as the state management.\n- [React Router](https://reacttraining.com/react-router/) as the router.\n- [Connected React Router](https://github.com/supasate/connected-react-router) to bind Redux with React Router. Refer to [doc](https://github.com/supasate/connected-react-router/blob/master/FAQ.md#frequently-asked-questions) to see how it works.\n- [Express](https://expressjs.com/) server.\n- [Typescript](https://www.typescriptlang.org/) as the static type checker for Javascript.\n- [Webpack](https://webpack.js.org/) for app bundling.\n- [Babel](https://babeljs.io/) for transpiling ES6+ to ES5.\n- [React Hot Loader](https://github.com/gaearon/react-hot-loader) to tweak React components in real time.\n- [nodemon](https://nodemon.io/) to monitor for any changes in your Node.js application and automatically restart the server.\n- [axios](https://github.com/mzabriskie/axios) as the Promise-based HTTP client for the browser and Node.js.\n- [redux-thunk](https://github.com/gaearon/redux-thunk) as the middleware to deal with asynchronous action.\n- [react-helmet](https://github.com/nfl/react-helmet) to manage title, meta, styles and scripts tags on both server and client.\n- [loadable-component](https://github.com/smooth-code/loadable-components) to lazy load component when needed in app. Reduce your bundle size without stress.\n- [Webpack Dev Middleware](https://github.com/webpack/webpack-dev-middleware) serves the files emitted from webpack over the Express server.\n- [Webpack Hot Middleware](https://github.com/glenjamin/webpack-hot-middleware) allows you to add hot reloading into the Express server.\n- [css-modules-require-hook](https://github.com/css-modules/css-modules-require-hook) compiles CSS Modules in runtime for SSR.\n- [asset-require-hook](https://github.com/aribouius/asset-require-hook) allows your assets files required during runtime for SSR.\n- [assets-webpack-plugin](https://github.com/ztoben/assets-webpack-plugin) generates assets with hash so you can use them for SSR.\n- [Webpack Bundle Analyzer](https://github.com/webpack-contrib/webpack-bundle-analyzer) creates a visualize size of webpack output files with an interactive zoomable treemap.\n- [helmet](https://github.com/helmetjs/helmet) helps secure Express apps with various HTTP headers.\n- [morgan](https://github.com/expressjs/morgan) the HTTP request logger for server side debugging.\n- [Redux Devtools Extension](https://github.com/zalmoxisus/redux-devtools-extension) for debugging application\'s state changes.\n- [ESLint](http://eslint.org/) to maintain a consistent Typescript/Javascript code style (with Airbnb configuration).\n- [StyleLint](http://stylelint.io/) to maintain a consistent css/scss code style.\n- [Prettier](https://prettier.io/) to format code and style.\n- CSS and SASS support with [PostCSS](https://github.com/postcss/postcss-loader) for advanced transformations (e.g. autoprefixer, cssnext etc.). [CSS modules](https://github.com/css-Modules/css-Modules) enabled.\n- Image (with [imagemin-webpack-plugin](https://github.com/Klathmon/imagemin-webpack-plugin) for compressing images with imagemin) and Font support.\n- Split vendor\'s libraries from client bundle.\n- No other view engines, just Javascript based HTML rendering component.\n- Shared app config between development and production.\n- 404 error page and redirect handling.\n- Integrate [Jest](https://facebook.github.io/jest/) with [enzyme](https://github.com/airbnb/enzyme) as the solution for writing unit tests with code coverage support.\n- [Yarn](https://yarnpkg.com/lang/en/) as the package manager.\n\n## Who\'s the Starter for?\n\nThis starter is for those who with basic knowledge of React and have the need for building a server-side app. In other words, it\'s not for a newbie. If you\'re new to React or you don\'t need a server-side rendering app, I\'d recommend you give [create-react-app](https://github.com/facebook/create-react-app) a try.\n\n## Requirements\n\n- [node](https://nodejs.org/en/) >= 10.0\n- [npm](https://www.npmjs.com/) >= 6.0\n\n## Looking for Docker?\n\nYou can find Docker support version on this [branch](https://github.com/wellyshen/react-cool-starter/tree/docker).\n\n## Getting Started\n\n**1. You can start by cloning the repository on your local machine by running:**\n\n```bash\ngit clone https://github.com/wellyshen/react-cool-starter.git\ncd react-cool-starter\n```\n\n**2. Install all of the dependencies:**\n\n```bash\nyarn\n```\n\n**3. Start to run it:**\n\n```bash\nyarn build  # Building bundle\nyarn start  # Running production server\n```\n\nNow the app should be running at [http://localhost:8080/](http://localhost:8080/)\n\n> Note: You can change the port that you want from `./package.json`.\n\n## Script Commands\n\nI use [cross-env](https://github.com/kentcdodds/cross-env) to set and use environment variables across platforms. All of the scripts are listed as following:\n\n| `yarn <script>`        | Description                                                                      |\n| ---------------------- | -------------------------------------------------------------------------------- |\n| `dev`                  | Run your app on the development server at `localhost:3000`. HMR will be enabled. |\n| `start`                | Run your app on the production server only at `localhost:8080`.                  |\n| `build`                | Remove the previous bundled files and bundle it to `./public/assets`.            |\n| `analyze`              | Visualize the contents of all your bundles.                                      |\n| `type-check`           | Run type checking for `.tsx?` files.                                             |\n| `type-check:watch`     | Run type checking and monitor changed files.                                     |\n| `lint`                 | Lint all `.tsx?`, `.jsx?` and `.scss` files.                                     |\n| `lint:code`            | Lint all `.tsx?` and `.jsx?` files (With `--fix` to auto fix eslint errors).     |\n| `lint:style`           | Lint all `.scss` files (With `--fix` to auto fix stylelint errors).              |\n| `test`                 | Run testing (with code coverage reports).                                        |\n| `test:watch`           | Run testing and monitor changed files.                                           |\n| `test:update-snapshot` | Update jest snapshot.                                                            |\n| `clean`                | Remove the client/server bundled stuff and the coverage report.                  |\n| `clean:build`          | Remove the `./public/assets` folder to clean the client bundled files.           |\n| `clean:test`           | Remove the `./coverage` folder to clean the code coverage report.                |\n\n## App Structure\n\nHere is the structure of the app, which serves as generally accepted guidelines and patterns for building scalable apps.\n\n```\n.\n\xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 public                          # Express server static path/Webpack bundled output\n\xe2\x94\x82   \xe2\x94\x94\xe2\x94\x80\xe2\x94\x80 favicon.ico                 # Favicon is placed in the same path with the main HTML page\n\xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 src                             # App source code\n\xe2\x94\x82   \xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 config                      # App configuration settings\n\xe2\x94\x82   \xe2\x94\x82   \xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 default.ts              # Default settings\n\xe2\x94\x82   \xe2\x94\x82   \xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 index.ts                # Configuration entry point\n\xe2\x94\x82   \xe2\x94\x82   \xe2\x94\x94\xe2\x94\x80\xe2\x94\x80 prod.ts                 # Production settings (overrides the default settings)\n\xe2\x94\x82   \xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 components                  # Reusable components (including scss/testing files)\n\xe2\x94\x82   \xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 pages                       # Page components (including scss/testing files)\n\xe2\x94\x82   \xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 app                         # App root component (including scss/testing files)\n\xe2\x94\x82   \xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 actions                     # Redux actions (including testing files)\n\xe2\x94\x82   \xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 reducers                    # Redux reducers (including testing files)\n\xe2\x94\x82   \xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 utils                       # App-wide utils (e.g. configure Redux store, HTML template etc.)\n\xe2\x94\x82   \xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 static                      # Static assets (e.g. images, fonts etc.)\n\xe2\x94\x82   \xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 theme                       # App-wide style and vendor CSS framework\n\xe2\x94\x82   \xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 types                       # Typescript type declarations for redux and global\n\xe2\x94\x82   \xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 client.tsx                  # App bootstrap and rendering (webpack entry)\n\xe2\x94\x82   \xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 routes.tsx                  # Routes configuration for both client and server side\n\xe2\x94\x82   \xe2\x94\x94\xe2\x94\x80\xe2\x94\x80 server.tsx                  # Express server (with webpack dev/hot middlewares)\n\xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 tools                           # Project related configurations (testing/build etc.)\n\xe2\x94\x82   \xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 jest                        # Jest CSS modules and assets mocks settings\n\xe2\x94\x82   \xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 webpack                     # Webpack settings\n\xe2\x94\x82   \xe2\x94\x82   \xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 config.babel.js         # Webpack configuration\n\xe2\x94\x82   \xe2\x94\x82   \xe2\x94\x94\xe2\x94\x80\xe2\x94\x80 hooks.js                # Assets require hooks\n\xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 index.ts                        # App entry point\n\xe2\x94\x94\xe2\x94\x80\xe2\x94\x80 postcss.config.js               # PostCSS configuration\n```\n\n## Server-Side Security and Performance\n\nConcerning the security and performance of Express in production, I already setup some middleware for you:\n\n- [helmet](https://github.com/helmetjs/helmet) - Helps secure Express server with various HTTP headers.\n- [hpp](https://github.com/analog-nico/hpp) - Express middleware to protect against HTTP Parameter Pollution attacks.\n- [compression](https://github.com/expressjs/compression) - Gzip compression support for speeding up Express server responses.\n\n> Note: It\'s just a basic protected mechanism for your app, you can see the [security best practices](https://expressjs.com/en/advanced/best-practice-security.html) for more advanced configuration.\n\n## Setup Redux DevTools Extension\n\nThe [Redux Devtools Extension](https://github.com/zalmoxisus/redux-devtools-extension) let us wire up our Redux app to a time-traveling debugger. It\'s enabled in development only. You can follow these installation guides to use it:\n\n**For Chrome**\n\n- from [Chrome Web Store](https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd);\n- or download `extension.zip` from [last releases](https://github.com/zalmoxisus/redux-devtools-extension/releases), unzip, open `chrome://extensions` url and turn on developer mode from top left and then click; on `Load Unpacked` and select the extracted folder for use\n- or build it with `npm i && npm run build:extension` and [load the extension\'s folder](https://developer.chrome.com/extensions/getstarted#unpacked) `./build/extension`;\n- or run it in dev mode with `npm i && npm start` and [load the extension\'s folder](https://developer.chrome.com/extensions/getstarted#unpacked) `./dev`.\n\n**For Firefox**\n\n- from [Mozilla Add-ons](https://addons.mozilla.org/en-US/firefox/addon/reduxdevtools/);\n- or build it with `npm i && npm run build:firefox` and [load the extension\'s folder](https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Temporary_Installation_in_Firefox) `./build/firefox` (just select a file from inside the dir).\n\n**For Electron**\n\n- just specify `REDUX_DEVTOOLS` in [`electron-devtools-installer`](https://github.com/GPMDP/electron-devtools-installer).\n\n**For other browsers and non-browser environment**\n\n- use [`remote-redux-devtools`](https://github.com/zalmoxisus/remote-redux-devtools).\n\n## Overview\n\n### Functional Components and Hooks\n\nReact v16.8 introduced a series of [Hooks](https://reactjs.org/docs/hooks-intro.html), which let you use state and other React features without writing a class. In the starter boilerplate, you can see how I leverage the benefit of [functional components](https://reactjs.org/docs/components-and-props.html#function-and-class-components) + hook APIs to write a demo with clean code.\n\n### Adding Routes\n\nThis starter use [React Router](https://reacttraining.com/react-router/) library to manage our routes. For the purpose of SSR with data pre-fetched, I put the routes in a centralized [Route Config](https://reacttraining.com/react-router/web/example/route-config). You can setup your routes in `./src/routes.tsx`. For example:\n\n```js\nimport RouteComponent from "./pages/RouteComponent";\n\n// ...\n\nexport default [\n  {\n    // Define your route path\n    path: "/top-path",\n    // If the route matches the location.pathname exactly or not (used for index route usually)\n    exact: true,\n    // Add your route component here\n    component: RouteComponent,\n    // Add your sub route component here\n    routes: [\n      {\n        path: "/top-path/sub-path",\n        component: SubRouteComponent\n      }\n    ]\n    // ...\n  }\n  // Setup other route components...\n];\n```\n\n### Data Fetching from Server-side\n\nJust write Redux actions and stores as normal (read the [Redux](https://redux.js.org/) document if you are new). The starter using [axios](https://github.com/mzabriskie/axios) as the data fetcher, it\'s quite simple and easy to use. If the action creator is asynchronous then it will return a Promise (or a Promise.all) in the inner function.\n\nRegister the action(s) in `./src/routes.tsx`, which have to be called from server-sdie:\n\n```js\n// ...\n\nexport default [\n  {\n    path: "/top-path",\n    exact: true,\n    component: RouteComponent,\n    // Actions in the loadData function will be fetched from server-side\n    loadData: () => [\n      myReduxAction()\n      // Add other pre-fetched actions here\n    ]\n  }\n  // ...\n];\n```\n\nThe action(s) will be dispatched through `./src/server.tsx` on server-side:\n\n```js\n// ...\n\napp.get("*", (req, res) => {\n  // ...\n\n  // Here\'s the method for loading data from server-side\n  const loadBranchData = () => {\n    const branch = matchRoutes(routes, req.path);\n\n    const promises = branch.map(({ route, match }) => {\n      if (route.loadData) {\n        return Promise.all(\n          route\n            .loadData({ params: match.params, getState: store.getState })\n            .map(item => store.dispatch(item))\n        );\n      }\n\n      return Promise.resolve(null);\n    });\n\n    return Promise.all(promises);\n  };\n\n  // ...\n});\n\n// ...\n```\n\nIn client-side, don\'t forget to invoke the action(s) in `componentDidMount` or `useEffect` hook. This ensures that if the component is reached on the client, then the same actions will be invoked. It\'s up to the action(s) to figure out if fetches for data need to be made or not:\n\n```js\n// If you use React class component\n\ncomponentDidMount() {\n  // Invoke your redux action(s) for client rendering\n  this.props.myReduxAction();\n}\n\n// If you use functional component\n\nuseEffect(() => {\n  myReduxAction();\n}, [])\n```\n\n### Code Splitting\n\nOne great feature of the web is that you don\xe2\x80\x99t have to make your visitors download the entire app before they can use it. You can think of code splitting as incrementally downloading the app. It divides your code into small pieces called \xe2\x80\x9cchunks\xe2\x80\x9d to reduce the size of bundle loaded by user. Reducing the size of a chunk makes it load and run faster.\n\nTo accomplish this, I integrate [loadable-components](https://github.com/smooth-code/loadable-components) into this starter. The reason I choose the library is because of its design philosophy of SSR. It works seamless with the starter rather than others. Let\xe2\x80\x99s see how we split our app by route:\n\nI use the following folder/file structure:\n\n```\n |- pages\n    |- AsyncRouteComponent\n       |- index.js             // Wrap the route component as async component\n       |- RouteComponent.tsx   // The route component\n```\n\nThe `index.js` will be:\n\n```js\nimport loadable from "@loadable/component";\n\nimport { Error, Loading } from "../../components";\n\n// Import your async route component\nconst AsyncComponent = loadable(() => import("./AsyncComponent"), {\n  // Loading component will be displayed when the component is being loaded\n  fallback: <Loading />\n});\n\nexport default props => (\n  // Wrap an <ErrorBoundary /> to catch the error of <AsyncComponent /> (via "componentDidCatch()" lifecycle)\n  <ErrorBoundary>\n    <AsyncComponent {...props} />\n  </ErrorBoundary>\n);\n```\n\nThen you can [setup](#adding-routes) the route as usual.\n\n> Note: I just show a general case route-based splitting, however you can even split your app by component-based depends on your need. For more advanced configuration you can refer to the [document](https://github.com/smooth-code/loadable-components) of loadable-components.\n\n### Managing Title, Meta, Styles and Scripts\n\nThe `./src/app/index.tsx` (app root component) defines the base title and meta in a `<Helmet {...config.app} />` component. Any sub-component can override/add properties (supports meta, link, script, style tags and html attributes). See the [react-helmet](https://github.com/nfl/react-helmet) document for more info.\n\n### App config\n\nYou can store app settings under `./src/config`. By default the `default.ts` will be loaded. If the `process.env.NODE_ENV` matches to production, the `prod.ts` will be used instead, and it inherits the data info from `default.ts`.\n\nYou can access the correct config with:\n\n```js\nimport config from "./config";\n```\n\n### Styles\n\nThe starter supports CSS, SASS and [CSS modules](https://github.com/css-Modules/css-Modules) is enabled by default. I use [PostCSS](https://github.com/postcss/postcss-loader) plugin to parse CSS and add autoprefixer to your stylesheet. You can access your stylesheet with two ways.\n\nWith CSS modules:\n\n```js\nimport styles from "./styles.scss";\n\n// ...\n\nreturn (\n  <div className={styles.myClass}>\n    {/* The className matches one of CSS classes in your SCSS file */}\n    <Helmet title="My title" />\n    {this.renderContent()}\n  </div>\n);\n```\n\nWithout CSS modules (you need to turn off CSS modules from `./tools/webpack/config.babel.js`):\n\n```js\nimport "./styles.scss";\n\n// ...\n\nreturn (\n  <div className="myClass">\n    {/* Use the CSS class as normal */}\n    <Helmet title="My title" />\n    {this.renderContent()}\n  </div>\n);\n```\n\nBy the way, if you want to use vendor CSS frameworks or global styles, just import it through the `./src/app/index.tsx` file (app root component). For example:\n\n```js\nimport "../../theme/normalize.css"; // Import a vendor stylesheet here\nimport styles from "./styles.scss"; // Import your based stylesheet here\n\n// ...\n\nexport default routes => {\n  // ...\n};\n```\n\n### Image and Font\n\nIt\'s super easy to render the image and font both on client and server, the usage would be like below.\n\nUsing image:\n\n```js\n// Require an image\n<img src={require("./assets/logo.svg")} alt="Logo" role="presentation" />\n```\n\nUsing font-awesome:\n\n```js\n// With CSS modules\nimport styles from "./styles.scss";\n\n// ...\n\nreturn (\n  <div>\n    <div>\n      <i className={styles.iconUser} /> Welly\n    </div>\n  </div>\n);\n\n// Without CSS modules\nimport "./font-awesome.css";\n\n// ...\n\nreturn (\n  <div>\n    <div>\n      <i className="fa fa-icon" /> Welly\n    </div>\n  </div>\n);\n```\n\nFor using CSS modules, you have to set the proper font path in your scss/sass file:\n\n```\n$fa-font-path:"../node_modules/font-awesome/fonts";\n@import "../node_modules/font-awesome/scss/font-awesome";\n\n.icon-user {\n  @extend .fa;\n  @extend .fa-user;\n}\n```\n\n### Boost App Performance\n\nIn this starter, you can see I use [React.PureComponent](https://reactjs.org/docs/react-api.html#reactpurecomponent) and [React.memo](https://reactjs.org/blog/2018/10/23/react-v-16-6.html#reactmemo) to demostrate the basic performance optimizing for React app. The two APIs are used in different ways.\n\n- `React.PureComponent` is used for React class components. It can do shallow prop and state comparison for a performance boost:\n\n```js\nimport React, { PureComponent } from "react";\n\n// ...\n\nclass MyComponent extends PureComponent {\n  // Only rerenders if props change\n  // ...\n}\n```\n\n- `React.memo` is used for functional components. It plays the same role as `React.PureComponent`:\n\n```js\nimport React, { memo } from "react";\n\n// ...\n\nconst MyComponent = memo(props => {\n  // Only rerenders if props change\n  // ...\n});\n```\n\n- In addition, you can also use [useMemo](https://reactjs.org/docs/hooks-reference.html#usememo) to avoid expensive calculations on every render:\n\n```js\nimport React, { useMemo } from "react";\n\n// ...\n\nconst MyComponent = props => {\n  // ...\n\n  return (\n    <div>\n      {/* Only rerenders if "a" change */}\n      {useMemo(\n        () => (\n          <SomeComponent someProp={a} />\n        ),\n        [a]\n      )}\n    </div>\n  );\n};\n```\n\n> For more performance optimizing techniques. Please see the [Optimizing Performance](https://reactjs.org/docs/optimizing-performance.html) topic.\n\n### Typescript\n\n[Typescript](https://www.typescriptlang.org/) is a typed superset of JavaScript. It\'s getting more and more popular in the Front-end world. And being widely used by many libraries. If you are new to Typescript, you can check out its document [here](https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html).\n\nTypescript has been integrated with our application to bring the following benefits:\n\n- Type safety for components, reducers, state and actions.\n- Many IDEs support the hints of Typescript, which give us a superior developer experience.\n- Easy refactoring of typed code.\n- In general, more types less bugs. Read this [article](https://medium.com/javascript-scene/the-typescript-tax-132ff4cb175b) to know more.\n\n### Code and Style Lint\n\n[ESLint](http://eslint.org/) (With Airbnb config), [typescript-eslint](https://github.com/typescript-eslint/typescript-eslint), [StyleLint](http://stylelint.io/), [Prettier](https://prettier.io/) and [lint-staged](https://github.com/okonet/lint-staged) are integrated into this starter to maintain a consistent code style and give you a elegant code formatting. You can configure your lint rules through `./package.json` file.\n\n### Unit Tests\n\nThis starter use [Jest](https://facebook.github.io/jest/) as the testing engine. It runs in a Node environment, so you won\'t have access to the DOM. In addition, Jest support the feature of [snapshot testing](http://facebook.github.io/jest/docs/snapshot-testing.html#content), which is very powerful for testing React component. Give it a try, you\'ll be impressed.\n\nI also use [enzyme](https://github.com/airbnb/enzyme) as the testing utility for React, which makes it easier to assert, manipulate, and traverse your React Components\' output. The unit tests focus on three parts as below:\n\n- Components\n- Actions\n- Reducers\n\nBy the way, Jest built-in code coverage reports, the report files are generated in `./coverage` folder. You can configure `./package.json` to define which files that you want to cover. For example:\n\n```\n{\n  // ...\n  "jest": {\n    "collectCoverageFrom": [\n      "src/pages/**/*.tsx",     // Define the files, which want to be covered\n      "!src/pages/index.ts"     // The files will be ignored by code coverage\n    ],\n    // Other configurations\n  },\n  // ...\n}\n```\n\nYou can also use [istanbul\'s ignore hints](https://github.com/gotwarlost/istanbul/blob/master/ignoring-code-for-coverage.md#ignoring-code-for-coverage-purposes) to specify specific lines of code in a Javascript file to skip code coverage.\n\n### How to Deploy\n\nTo depoly you app to cloud service (e.g. AWS, GCP), you can follow the instructions below.\n\n1. Build then install production dependencies:\n\n```bash\nyarn build                  # Building bundle\nrm -rf node_modules         # After building remove node modules\nyarn install --production   # Then install dependencies only\n```\n\n2. Pack necessary folders/files to your Node.js server:\n\n- \xe2\x9c\x85 node_modules\n- \xe2\x9c\x85 public\n- \xe2\x9c\x85 src\n- \xe2\x9c\x85 tools/webpack\n- \xe2\x9c\x85 index.ts\n- \xe2\x9c\x85 postcss.config.js\n- \xe2\x9c\x85 package.json\n- \xe2\x9c\x85 tsconfig.json\n\n3. Run your app:\n\n```bash\nyarn start\n```\n\n> Ideally, the above steps can be integrated into your CI. I recommend you to pack the `yarn.lock` for yarn installation by CI.\n\n## Troubleshooting\n\n- If app crash due to the error: `Invariant Violation: loadable: SSR requires "@loadable/babel-plugin", please install it` (refer to this [issue](https://github.com/smooth-code/loadable-components/issues/173)). To solve that, you must use `.js` extension for code-splitting files (e.g. `src/Home/index.js`).\n\n- If you encounter the markup mismatches error (it\'s a React universal issue, which usually occurs due to the non-synchronized rendering result between client and server), you can do:\n\n  - Restart the server to solve it.\n  - Or for v16.1.0 up, you can use `suppressHydrationWarning` attribute for intentional client/server text mismatches ([#11126](https://github.com/facebook/react/pull/11126)).\n\n- If you are on windows and encounter the following error: Expected linebreaks to be \'LF\' but found \'CRLF\' linebreak-style. The following rule must be added to `./package.json`.\n\n```\n"linebreak-style": 0\n```\n\nSo it will look like:\n\n```\n// ...\n"rules": {\n  "linebreak-style": 0,\n  "global-require": 0,\n  // Other rules\n```\n'