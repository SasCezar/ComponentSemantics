b'cnpmjs.org\n=======\n\n[![npm version][npm-image]][npm-url]\n[![build status][travis-image]][travis-url]\n[![Test coverage][codecov-image]][codecov-url]\n[![Known Vulnerabilities][snyk-image]][snyk-url]\n[![npm download][download-image]][download-url]\n\n[npm-image]: http://cnpmjs.org/badge/v/cnpmjs.org.svg?style=flat-square\n[npm-url]: http://cnpmjs.org/package/cnpmjs.org\n[travis-image]: https://img.shields.io/travis/cnpm/cnpmjs.org.svg?style=flat-square\n[travis-url]: https://travis-ci.org/cnpm/cnpmjs.org\n[codecov-image]: https://codecov.io/gh/cnpm/cnpmjs.org/branch/master/graph/badge.svg\n[codecov-url]: https://codecov.io/gh/cnpm/cnpmjs.org\n[snyk-image]: https://snyk.io/test/npm/cnpmjs.org/badge.svg?style=flat-square\n[snyk-url]: https://snyk.io/test/npm/cnpmjs.org\n[download-image]: https://img.shields.io/npm/dm/cnpmjs.org.svg?style=flat-square\n[download-url]: https://npmjs.org/package/cnpmjs.org\n\n![logo](https://raw.github.com/cnpm/cnpmjs.org/master/logo.png)\n\n## Description\n\nPrivate npm registry and web for Enterprise, base on [koa](http://koajs.com/),\nMySQL and [Simple Store Service](https://github.com/cnpm/cnpmjs.org/wiki/NFS-Guide).\n\nOur goal is to provide a low cost maintenance, easy to use, and easy to scale solution for private npm.\n\n## What can you do with `cnpmjs.org`?\n\n* Build a private npm for your own enterprise. ([alibaba](http://www.alibaba.com/) is using `cnpmjs.org` now)\n* Build a npm mirror. (we use it to build a mirror in China: [https://npm.taobao.org/](https://npm.taobao.org/))\n\n## Features\n\n* **Support "scoped" packages**: [npm/npm#5239](https://github.com/npm/npm/issues/5239)\n* **Support [CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)**\n* **Simple to deploy**: only need `mysql` and a [simple store system](https://github.com/cnpm/cnpmjs.org/wiki/NFS-Guide).\n* **Low cost and easy maintenance**: `package.json` info can store in MySQL, MariaDB, SQLite or PostgreSQL.\ntarball(tgz file) can store in Amazon S3 or other object storage service.\n* **Automatic synchronization**: automatically sync from any registry specified. support two sync modes:\n  - Sync all modules from upstream\n  - Only sync the modules after first access.\n* **Manual synchronization**: automatic synchronization may has little delay. you can sync manually on web page.\n* **Customized client**: we provide a client [cnpm](https://github.com/cnpm/cnpm)\nto extend `npm` with more features(`sync` command, [gzip](https://github.com/npm/npm-registry-client/pull/40) support).\nAnd it is easy to wrap for your own registry which build with `cnpmjs.org`.\n* **Compatible with npm client**: you can use the official npm client with `cnpmjs.org`.\nyou only need to change the registry in client config.\n* **Support http_proxy**: if you\'re behind a firewall, you can provide a http proxy for cnpmjs.org.\n\n## Docs\n\n* [How to deploy](https://github.com/cnpm/cnpmjs.org/wiki/Deploy)\n* cnpm client: [cnpm](https://github.com/cnpm/cnpm), `npm install -g cnpm`\n* [Sync packages through `http_proxy`](https://github.com/cnpm/cnpmjs.org/wiki/Sync-packages-through-http_proxy)\n* [Migrating from 1.x to 2.x](https://github.com/cnpm/cnpmjs.org/wiki/Migrating-from-1.x-to-2.x)\n* [New features in 2.x](https://github.com/cnpm/cnpmjs.org/wiki/New-features-in-2.x).\n* [wiki](https://github.com/cnpm/cnpmjs.org/wiki)\n\n## Develop on your local machine\n\n### Dependencies\n\n* [node](http://nodejs.org) >= 8.0.0\n* Databases: only required one type\n  * [sqlite3](https://npm.taobao.org/package/sqlite3) >= 3.0.2, we use `sqlite3` by default\n  * [MySQL](http://dev.mysql.com/downloads/) >= 5.6.16, include `mysqld` and `mysql cli`. I test on `mysql@5.6.16`.\n  * MariaDB\n  * PostgreSQL\n\n### Clone code and run test\n\n```bash\n# clone from git\n$ git clone https://github.com/cnpm/cnpmjs.org.git\n\n# install dependencies\n$ make install\n\n# test\n$ make test\n\n# coverage\n$ make test-cov\n\n# update dependencies\n$ make autod\n\n# start server with development mode\n$ make dev\n```\n\n### Dockerized cnpmjs.org Installation Guide\n\nCnpmjs.org shipped with a simple but pragmatic Docker Compose configuration.With the configuration, you can set up a MySQL backend cnpmjs.org instance by executing just one command on Docker installed environment.\n\n#### Preparation\n\n* [Install Docker](https://www.docker.com/community-edition)\n* [Install Docker Compose](https://docs.docker.com/compose/install/) (Docker for Mac, Docker for Windows include Docker Compose, so most Mac and Windows users do not need to install Docker Compose separately)\n* (Optional) Speed up Docker images downloading by setting up [Docker images download accelerator](https://yq.aliyun.com/articles/29941)\n\n\n#### Dockerized cnpmjs.org control command\n\nMake sure your current working directory is the root of this GitHub repository.\n\n##### Run dockerized cnpmjs.org\n\n```bash\n $docker-compose up\n ```\n\nThis command will build a Docker image using the current code of repository. Then set up a dockerized MySQL instance with data initialized. After Docker container running, you can access your cnpmjs.org web portal at http://127.0.0.1:7002 and npm register at http://127.0.0.1:7001.\n\n#### Run cnpmjs.org in the backend\n\n```bash\n$docker-compose up -d\n```\n\n#### Rebuild cnpmjs.org Docker image\n\n```bash\n$docker-compose build\n```\n\n#### Remove current dockerized cnpmjs.org instance\n\nThe current configuration set 2 named Docker Volume for your persistent data. If you haven\'t change the repository directory name, them will be "cnpmjsorg_cnpm-files-volume" & "cnpmjsorg_cnpm-db-volume".\n\nBe Careful, the following commands will remove them.\n\n```bash\n$docker-compose rm\n$docker volume rm cnpmjsorg_cnpm-files-volume\n$docker volume rm cnpmjsorg_cnpm-db-volume\n```\n\nYou can get more information about your data volumes using the below commands:\n\n```bash\n$docker volume ls  // list all of your Docker volume\n$docker volume inspect cnpmjsorg_cnpm-files-volume\n$docker volume inspect cnpmjsorg_cnpm-db-volume\n```\n\n## How to contribute\n\n* Clone the project\n* Checkout a new branch\n* Add new features or fix bugs in the new branch\n* Make a pull request and we will review it ASAP\n\nTips: make sure your code is following the [node-style-guide](https://github.com/felixge/node-style-guide).\n\n## Top contributors\n\n\n[![0](https://sourcerer.io/fame/fengmk2/cnpm/cnpmjs.org/images/0)](https://sourcerer.io/fame/fengmk2/cnpm/cnpmjs.org/links/0)\n[![1](https://sourcerer.io/fame/fengmk2/cnpm/cnpmjs.org/images/1)](https://sourcerer.io/fame/fengmk2/cnpm/cnpmjs.org/links/1)\n[![2](https://sourcerer.io/fame/fengmk2/cnpm/cnpmjs.org/images/2)](https://sourcerer.io/fame/fengmk2/cnpm/cnpmjs.org/links/2)\n[![3](https://sourcerer.io/fame/fengmk2/cnpm/cnpmjs.org/images/3)](https://sourcerer.io/fame/fengmk2/cnpm/cnpmjs.org/links/3)\n[![4](https://sourcerer.io/fame/fengmk2/cnpm/cnpmjs.org/images/4)](https://sourcerer.io/fame/fengmk2/cnpm/cnpmjs.org/links/4)\n[![5](https://sourcerer.io/fame/fengmk2/cnpm/cnpmjs.org/images/5)](https://sourcerer.io/fame/fengmk2/cnpm/cnpmjs.org/links/5)\n[![6](https://sourcerer.io/fame/fengmk2/cnpm/cnpmjs.org/images/6)](https://sourcerer.io/fame/fengmk2/cnpm/cnpmjs.org/links/6)\n[![7](https://sourcerer.io/fame/fengmk2/cnpm/cnpmjs.org/images/7)](https://sourcerer.io/fame/fengmk2/cnpm/cnpmjs.org/links/7)\n\n\n## Sponsors\n\n- [![\xe9\x98\xbf\xe9\x87\x8c\xe4\xba\x91](https://static.aliyun.com/images/www-summerwind/logo.gif)](http://click.aliyun.com/m/4288/) (2016.2 - now)\n\n## License\n\n[MIT](LICENSE.txt)\n'