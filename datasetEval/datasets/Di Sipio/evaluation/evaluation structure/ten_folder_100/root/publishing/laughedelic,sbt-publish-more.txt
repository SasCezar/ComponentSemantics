b'# sbt-publish-more\n\n[![](https://travis-ci.org/laughedelic/sbt-publish-more.svg?branch=master)](https://travis-ci.org/laughedelic/sbt-publish-more)\n[![](https://img.shields.io/codacy/1654e088ec3d43cdae2180d47e769997.svg)](https://www.codacy.com/app/laughedelic/sbt-publish-more)\n[![](https://img.shields.io/github/release/laughedelic/sbt-publish-more/all.svg)](https://github.com/laughedelic/sbt-publish-more/releases/latest)\n[![](https://img.shields.io/badge/license-LGPLv3-blue.svg)](https://www.tldrlegal.com/l/lgpl-3.0)\n[![](https://img.shields.io/badge/contact-gitter_chat-dd1054.svg)](https://gitter.im/laughedelic/sbt-publish-more)\n\nThis SBT plugin allows you to publish artifacts **to more than one repository**.\n\nIt\'s inspired by the [sbt-multi-publish](https://github.com/davidharcombe/sbt-multi-publish) plugin, which is unfortunately completely outdated and uses another, more limited approach.\n\nIt may be useful to be able to publish your project to several repositories at once, for example:\n  * to the community Bintray repository\n  * to your company\'s private server\n  * to some local/proxy repository\n\nBut the `publishTo` setting accepts _only one_ resolver. This is where this plugin comes to the rescue!\n\n\n## Usage\n\nAdd plugin to your `project/plugins.sbt`:\n\n```scala\naddSbtPlugin("laughedelic" % "sbt-publish-more" % "<version>")\n```\n\n(see the latest release version on the badge above)\n\n> **Requirements:** This plugins requires sbt 1.x\n\n> **NOTE:** This plugin is in active development, so things are likely to change. Check [release notes](https://github.com/laughedelic/sbt-publish-more/releases) and usage section in the Readme every time you update to a new version.\n\n#### TL;DR\n\n1. Set `publishResolvers := Seq(...)`\n2. Call `publishAll` task\n\n### Multiple publish resolvers\n\nIf you want to publish to several repositories you just need to set the `publishResolvers` setting. For the example from above it will look like this:\n\n```scala\npublishResolvers := Seq(\n  publishTo.in(bintray).value,\n  Resolver.url("my-company-repo", url("https://company.com/releases/")),\n  Resolver.file("my-local-repo", file("path/to/my/local/maven-repo"))\n)\n```\n\nSee [sbt documentation][resolvers-docs] for more types of resolvers.\n\nSetting `publishResolvers` will also set `publishTo` to the first resolver in the list.\n\nNow you can call `publishAll` task to publish to every resolver in the `publishResolvers` list. Note that if you want it to be the default behavior, you should change the standard `publish` task:\n\n```scala\npublish := publishAll.value\n```\n\n\n### Different publish configurations (_experimental_)\n\nBy default it will publish to each repository with the same default publish configuration (that is stored in the [`publishConfiguration`][default-publish-configuration] setting), as if you would call normal `publish` task several times while manually changing `publishTo` setting.\n\nBut you may want to publish to _different repositories with different configurations_. For example, maven-style vs. ivy-style patterns, or different sets of artifacts. So this plugin adds a setting `publishCustomConfigs`, which stores a mapping of `Resolver`s to their corresponding [`PublishConfiguration`]s.\n\nSay you want to publish to one repository maven-style (default) and to the other ivy-style. First, you should define your publish resolvers (in `build.sbt`):\n\n```scala\nlazy val repo1 = Resolver.file("repo1",  file("example/repo1"))\nlazy val repo2 = Resolver.file("repo2",  file("example/repo2"))(Resolver.ivyStylePatterns)\n\npublishResolvers := Seq(repo1, repo2)\n```\n\nIt\'s better to define values for resolvers, because we will need to refer to them in the next step. The second one needs explicit ivy-style patterns, because the default is maven-style.\n\nThen we add a custom configuration for `repo2`:\n\n```scala\npublishCustomConfigs ++= Map(\n  repo2 -> publishConfiguration.value.withPublishMavenStyle(false)\n)\n```\n\nThis will make it generate the `ivy.xml` artifact. Now when you call `publishAll` you will get your maven-style artifacts in `repo1` and ivy-style artifacts (with `ivy.xml`) in `repo2`.\n\nYou can change any other [`PublishConfiguration`] parameters this way and do it for every particular repository you want to publish to.\n\n\n[resolvers-docs]: http://www.scala-sbt.org/1.x/docs/Resolvers.html\n[default-publish-configuration]: https://github.com/sbt/sbt/blob/1.x/main/src/main/scala/sbt/Defaults.scala#L1911-L1923\n[`PublishConfiguration`]: https://github.com/sbt/librarymanagement/blob/1.x/core/src/main/contraband-scala/sbt/librarymanagement/PublishConfiguration.scala\n'