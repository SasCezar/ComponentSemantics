b'# Mint \xf0\x9f\x8c\xb1\n\n[![Build Status](https://travis-ci.org/elixir-mint/mint.svg?branch=master)](https://travis-ci.org/elixir-mint/mint)\n\n> Functional HTTP client for Elixir with support for HTTP/1 and HTTP/2.\n\n## Installation\n\nTo install Mint, add it to your `mix.exs` file. Unless you\'re using your own SSL certificate store, also add the [CAStore][castore] library to your dependencies.\n\n```elixir\ndefp deps do\n  [\n    {:castore, "~> 0.1.0"},\n    {:mint, "~> 1.0"}\n  ]\nend\n```\n\nThen, run `$ mix deps.get`.\n\n## Usage\n\nMint is different from most Erlang and Elixir HTTP clients because it provides a process-less architecture. Instead, Mint is based on a functional and immutable data structure that represents an HTTP connection. This data structure wraps a TCP or SSL socket. This allows for more fine-tailored architectures where the developer is responsible for wrapping the connection struct, such as having one process handle multiple connections or having different kinds of processes handle connections.\n\nBelow is an example of a basic interaction with Mint. First, we start a connection through `Mint.HTTP.connect/3`:\n\n```elixir\niex> {:ok, conn} = Mint.HTTP.connect(:http, "httpbin.org", 80)\n```\n\nThis transparently chooses between HTTP/1 and HTTP/2. Requests are sent with:\n\n```elixir\niex> {:ok, conn, request_ref} = Mint.HTTP.request(conn, "GET", "/", [], "")\n```\n\nThe connection socket runs in [*active mode*](http://erlang.org/doc/man/inet.html#setopts-2) (with `active: :once`), which means that the user of the library needs to handle [TCP messages](http://erlang.org/doc/man/gen_tcp.html#connect-4) and [SSL messages](http://erlang.org/doc/man/ssl.html#id66002):\n\n```elixir\niex> flush()\n{:tcp, #Port<0.8>,\n "HTTP/1.1 200 OK\\r\\n" <> _}\n```\n\nTo handle such messages, Mint provides a `stream/2` function that turns messages into HTTP responses. Responses are streamed back to the user in parts through response parts `:status`, `:headers`, `:data`, and finally `:done`.\n\n\n```elixir\niex> {:ok, conn} = Mint.HTTP.connect(:http, "httpbin.org", 80)\niex> {:ok, conn, request_ref} = Mint.HTTP.request(conn, "GET", "/", [], "")\niex> receive do\n...>   message ->\n...>     {:ok, conn, responses} = Mint.HTTP.stream(conn, message)\n...>     IO.inspect responses\n...> end\n[\n  {:status, #Reference<...>, 200},\n  {:headers, #Reference<...>, [{"connection", "keep-alive"}, ...},\n  {:data, #Reference<...>, "<!DOCTYPE html>..."},\n  {:done, #Reference<...>}\n]\n```\n\nThe connection API is stateless, this means that you need to make sure to always save the returned `conn`:\n\n```elixir\n# Wrong\n{:ok, _conn, ref} = Mint.HTTP.request(conn, "GET", "/foo", [], "")\n{:ok, conn, ref} = Mint.HTTP.request(conn, "GET", "/bar", [], "")\n\n# Correct\n{:ok, conn, ref} = Mint.HTTP.request(conn, "GET", "/foo", [], "")\n{:ok, conn, ref} = Mint.HTTP.request(conn, "GET", "/bar", [], "")\n```\n\nFor more information, see [the documentation][documentation].\n\n### SSL certificates\n\nWhen using SSL, you can pass in your own CA certificate store or use one provided by Mint. Mint doesn\'t ship with the certificate store itself, but it has an optional dependency on [CAStore][castore], which provides an up-to-date certificate store. If you don\'t want to use your own certificate store, just add `:castore` to your dependencies.\n\n```elixir\ndef deps do\n  [\n    {:castore, "~> 0.1.0"},\n    {:mint, "~> 0.4.0"}\n  ]\nend\n```\n\n## Contributing\n\nIf you wish to contribute check out the [issue list](https://github.com/elixir-mint/mint/issues) and let us know what you want to work on so we can discuss it and reduce duplicate work.\n\nTests are organized with tags. Integration tests that hit real websites over the internet are tagged with `:integration`. Proxy tests are tagged with `:proxy` and require that you run `docker-compose up` from the Mint root directory in order to run (they are excluded by default when you run `$ mix test`). A few examples of running tests:\n\n  * `$ mix test` to run the test suite without caring about Docker and `docker-compose up`.\n\n  * `$ mix test --exclude integration` to only run local tests (for example, you don\'t have an internet connection available).\n\n  * `$ mix test --include proxy` to run all tests, including proxy tests.\n\n## License\n\nCopyright 2018 Eric Meadows-J\xc3\xb6nsson and Andrea Leopardi\n\n  Licensed under the Apache License, Version 2.0 (the "License");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an "AS IS" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n\n[castore]: https://github.com/elixir-mint/castore\n[documentation]: https://hexdocs.pm/mint\n'