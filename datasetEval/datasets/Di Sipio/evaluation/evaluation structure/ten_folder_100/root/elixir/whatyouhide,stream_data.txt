b'# StreamData\n\n[![Build Status](https://travis-ci.org/whatyouhide/stream_data.svg?branch=master)](https://travis-ci.org/whatyouhide/stream_data)\n[![Hex.pm](https://img.shields.io/hexpm/v/stream_data.svg)](https://hex.pm/packages/stream_data)\n\n> StreamData is an Elixir library for **data generation** and **property-based testing**.\n\nRead [the announcement on the Elixir website](https://elixir-lang.org/blog/2017/10/31/stream-data-property-based-testing-and-data-generation-for-elixir/).\n\n## Installation\n\nAdd `stream_data` to your list of dependencies:\n\n```elixir\ndefp deps() do\n  [{:stream_data, "~> 0.1", only: :test}]\nend\n```\n\nand run `mix deps.get`. StreamData is usually added only to the `:test` environment since it\'s used in tests and test data generation. To also import StreamData\'s formatter configuration, add `:stream_data` to your `.formatter.exs`:\n\n```elixir\n[\n  import_deps: [:stream_data]\n]\n```\n\n## Usage\n\n[The documentation is available online.](https://hexdocs.pm/stream_data/)\n\nStreamData is made of two main components: data generation and property-based testing. The `StreamData` module provides tools to work with data generation. The `ExUnitProperties` module takes care of the property-based testing functionality.\n\n### Data generation\n\nAll data generation functionality is provided in the `StreamData` module. `StreamData` provides "generators" and functions to combine those generators and create new ones. Since generators implement the `Enumerable` protocol, it\'s easy to use them as infinite streams of data:\n\n```elixir\nStreamData.integer() |> Stream.map(&abs/1) |> Enum.take(3)\n#=> [1, 0, 2]\n```\n\n`StreamData` provides all the necessary tools to create arbitrarily complex custom generators:\n\n```elixir\nrequire ExUnitProperties\n\ndomains = [\n  "gmail.com",\n  "hotmail.com",\n  "yahoo.com",\n]\n\nemail_generator =\n  ExUnitProperties.gen all name <- StreamData.string(:alphanumeric),\n                           name != "",\n                           domain <- StreamData.member_of(domains) do\n    name <> "@" <> domain\n  end\n\nEnum.take(StreamData.resize(email_generator, 20), 2)\n#=> ["efsT6Px@hotmail.com", "swEowmk7mW0VmkJDF@yahoo.com"]\n```\n\n### Property testing\n\nProperty testing aims at randomizing test data in order to make tests more robust. Instead of writing a bunch of inputs and expected outputs by hand, with property-based testing we write a *property* of our code that should hold for a set of data, and then we generated data in this set to verify that property. To generate this data, we can use the above-mentioned `StreamData` module.\n\n```elixir\nuse ExUnitProperties\n\nproperty "bin1 <> bin2 always starts with bin1" do\n  check all bin1 <- binary(),\n            bin2 <- binary() do\n    assert String.starts_with?(bin1 <> bin2, bin1)\n  end\nend\n```\n\nTo know more about property-based testing, read the `ExUnitProperties` documentation. Another great resource about property-based testing in Erlang (but with most ideas that apply to Elixir as well) is Fred Hebert\'s website [propertesting.com](http://propertesting.com).\n\nThe property-based testing side of this library is heavily inspired by the [original QuickCheck paper](http://www.cs.tufts.edu/~nr/cs257/archive/john-hughes/quick.pdf) (which targeted Haskell) as well as Clojure\'s take on property-based testing, [test.check](https://github.com/clojure/test.check).\n\n## Differences from other property-based testing frameworks\n\nThere are a handful of property-based testing frameworks for the BEAM ecosystem (Erlang, Elixir, and so on). For Elixir, the main alternative to StreamData is [PropCheck](https://github.com/alfert/propcheck). PropCheck is a wrapper around [PropEr](https://github.com/proper-testing/proper), which is a property-based testing framework for Erlang. There are a few fundamental differences between StreamData and PropEr. They are listed below to help you choose between the two.\n\n**PropEr** (via PropCheck):\n\n  * It provides *stateful property-based testing*. If you need to test a system with state by building a model of the system to test against, you\'ll have to go with PropCheck since StreamData doesn\'t support this yet.\n\n  * It can store counter-examples: StreamData doesn\'t support storing counter-examples in a file (you have to reuse the seed that caused the failure in order to reproduce it).\n\n**StreamData**:\n\n  * Provides functionality for generating data as the base for property-based testing. StreamData generators can be used outside of property-based testing as normal Elixir streams that produce random data.\n\n  * It is native to Elixir. It\'s written entirely in Elixir and has an idiomatic Elixir API (for example, all generators are Elixir enumerables).\n\n## License\n\nCopyright 2017 Andrea Leopardi and Jos\xc3\xa9 Valim\n\n  Licensed under the Apache License, Version 2.0 (the "License");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an "AS IS" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n'