b'# MyHTML\n\n[![Build Status](https://travis-ci.org/kostya/myhtml.svg?branch=master)](http://travis-ci.org/kostya/myhtml)\n\nFast HTML5 Parser (Crystal binding for awesome lexborisov\'s [myhtml](https://github.com/lexborisov/myhtml) and [Modest](https://github.com/lexborisov/Modest)). This shard used in production to parse millions of pages per day, very stable and fast.\n\n## Installation\n\n\nAdd this to your application\'s `shard.yml`:\n\n```yaml\ndependencies:\n  myhtml:\n    github: kostya/myhtml\n```\n\nAnd run `shards install`\n\n## Usage example\n\n```crystal\nrequire "myhtml"\n\nhtml = <<-HTML\n  <html>\n    <body>\n      <div id="t1" class="red">\n        <a href="/#">O_o</a>\n      </div>\n      <div id="t2"></div>\n    </body>\n  </html>\nHTML\n\nmyhtml = Myhtml::Parser.new(html)\n\nmyhtml.nodes(:div).each do |node|\n  id = node.attribute_by("id")\n\n  if first_link = node.scope.nodes(:a).first?\n    href = first_link.attribute_by("href")\n    link_text = first_link.inner_text\n\n    puts "div with id #{id} have link [#{link_text}](#{href})"\n  else\n    puts "div with id #{id} have no links"\n  end\nend\n\n# Output:\n#   div with id t1 have link [O_o](/#)\n#   div with id t2 have no links\n```\n\n## Css selectors example\n\n```crystal\nrequire "myhtml"\n\nhtml = <<-HTML\n  <html>\n    <body>\n      <table id="t1">\n        <tr><td>Hello</td></tr>\n      </table>\n      <table id="t2">\n        <tr><td>123</td><td>other</td></tr>\n        <tr><td>foo</td><td>columns</td></tr>\n        <tr><td>bar</td><td>are</td></tr>\n        <tr><td>xyz</td><td>ignored</td></tr>\n      </table>\n    </body>\n  </html>\nHTML\n\nmyhtml = Myhtml::Parser.new(html)\n\np myhtml.css("#t2 tr td:first-child").map(&.inner_text).to_a\n# => ["123", "foo", "bar", "xyz"]\n\np myhtml.css("#t2 tr td:first-child").map(&.to_html).to_a\n# => ["<td>123</td>", "<td>foo</td>", "<td>bar</td>", "<td>xyz</td>"]\n```\n\n## More Examples\n\n[examples](https://github.com/kostya/myhtml/tree/master/examples)\n\n## Development Setup:\n\n```shell\ngit clone https://github.com/kostya/myhtml.git\ncd myhtml\nmake\ncrystal spec\n```\n\n## Benchmark\n\nParse 1000 times google page, and 1000 times css select. [myhtml-program](https://github.com/kostya/myhtml/tree/master/bench/test-myhtml.cr), [crystagiri-program](https://github.com/kostya/myhtml/tree/master/bench/test-libxml.cr), [nokogiri-program](https://github.com/kostya/myhtml/tree/master/bench/test-libxml.rb)\n\n| Lang     | Shard      | Lib             | Parse time, s | Css time, s | Memory, MiB |\n| -------- | ---------- | --------------- | ------------- | ----------- | ----------- |\n| Crystal  | myhtml     | myhtml(+modest) | 3.04          | 0.32        | 12.9        |\n| Crystal  | Crystagiri | libxml2         | 9.63          | 20.3        | 29.3        |\n| Ruby 2.2 | Nokogiri   | libxml2         | 28.14         | 55.69       | 124.5       |\n\n'