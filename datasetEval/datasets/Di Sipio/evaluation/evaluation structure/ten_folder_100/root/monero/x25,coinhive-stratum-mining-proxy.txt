b'# CoinHive Stratum Mining Proxy\n\nA proof of concept of web mining using CoinHive\'s [JavaScript Mining](https://coinhive.com/documentation/miner) library. The proxy acts like coin hive to connect to a mining pool. Should work with any monero pool based on the [Stratum Mining Protocol](https://en.bitcoin.it/wiki/Stratum_mining_protocol). You can even set up your [own pool](https://github.com/sammy007/monero-stratum).\n\nPros: no dev fee, adblock bypass, use any pool you like.\n\n## Installation\n\nRun on Docker ([docker hub repository](https://hub.docker.com/r/0x25/coinhive-stratum-mining-proxy/)):\n\n```sh\n$ git clone https://github.com/x25/coinhive-stratum-mining-proxy.git\n$ cd coinhive-stratum-mining-proxy\n$ docker build -t coinhive-stratum-mining-proxy .\n$ docker run -p 8892:8892 coinhive-stratum-mining-proxy <stratum tcp host> <stratum tcp port>\n```\n\neg:\n\n```sh\n$ docker run -p 8892:8892 coinhive-stratum-mining-proxy xmr-eu1.nanopool.org 14444\n```\nOr install dependencies (```apt-get install ...``` or ```brew install ...```):\n\n- python\n- python-dev\n- pip\n- openssl-dev\n- gcc\n- git\n- musl-dev\n- libffi-dev\n\nand run on Linux/Mac box:\n\n```sh\n$ git clone https://github.com/x25/coinhive-stratum-mining-proxy.git\n$ cd coinhive-stratum-mining-proxy\n$ pip install -v -r requirements.txt\n$ python coinhive-stratum-mining-proxy.py <stratum tcp host> <stratum tcp port>\n```\n\neg:\n\n```sh\n$ python coinhive-stratum-mining-proxy.py xmr-eu1.nanopool.org 14444\n```\n\n## Usage\n\n1. Install and Run `coinhive-stratum-mining-proxy`\n2. Load the Coinhive Miner\n\n```html\n<script src="https://coinhive.com/lib/coinhive.min.js"></script>\n```\n\nThe javascript can be saved/renamed and loaded from your server, see [adblock_bypass.html](https://github.com/x25/coinhive-stratum-mining-proxy/blob/master/static/adblock_bypass.html).\n\n3. Change the ```CoinHive.CONFIG.WEBSOCKET_SHARDS``` config variable:\n\n```html\n<script>\nCoinHive.CONFIG.WEBSOCKET_SHARDS = [["ws://localhost:8892/proxy"]];\n</script>\n```\n\n4. Start Mining\n\n```html\n<script>\nvar miner = new CoinHive.Anonymous(\'YOUR_MONERO_ADDRESS\');\nminer.start();\n</script>\n```\nor\n\n```html\n<script>\nvar miner = new CoinHive.User(\'YOUR_MONERO_ADDRESS\', \'YOUR_WORKER_NAME\');\nminer.start();\n</script>\n```\nthe username will be used as the stratum worker name (use only if your pool supports worker names).\n\n5. Profit!\n\n## SSL/Secure WebSockets\n\nGenerate keypair:\n\n```sh\nopenssl req -x509 -newkey rsa:2048 -keyout key.pem -out cert.pem -days 100 -nodes\n```\n\nRun script with ```--ssl=key.pem:cert.pem``` parameter:\n\n```sh\npython coinhive-stratum-mining-proxy.py <stratum tcp host> <stratum tcp port> --ssl=key.pem:cert.pem\n```\nIf you use the Let\'s Encrypt generated certificates or if you see the error NET::ERR_CERT_AUTHORITY_INVALID in the browser, you should find the intermediate (a.k.a. chain.pem) certificates and run the script with ```--ssl=key.pem:cert.pem:chain.pem``` parameters.\n\n## Statistic\n\nSimple stats are available at ```/stats``` route:\n\n```sh\ncurl http://localhost:8892/stats?password=YOUR_PASS\n{"total_hashes": 0, "uptime": 15.53, "clients": 1}\n```\n\nNo password by default, please run with ``--password=YOUR_PASS`` argument to setup password.\n\n## Demo\n\nSetup and run `coinhive-stratum-mining-proxy` with `xmr-eu1.nanopool.org 14444` parameters and open http://localhost:8892 in your browser for live demo.\n\n## Links\n\n- [JavaScript Miner API](https://coinhive.com/documentation/miner)\n- [Solo mining stratum pool for Monero](https://github.com/sammy007/monero-stratum)\n\n## Disclaimer\n\nThis project is not endorsed by or affiliated with coinhive.com in any way.\n\n## License\n\nMIT\n'