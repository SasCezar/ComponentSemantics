b'# flask-restful-swagger\n\n### We have a new project lead!\nWe have a new project lead, @niall-byrne (Dec 2015), thank you Niall!\n\n\n## What is flask-restful-swagger?\nflask-restful-swagger is a wrapper for [flask-restful](http://flask-restful.readthedocs.org/en/latest/) which enables [swagger](https://developers.helloreverb.com/swagger/) support.\n\nIn essense, you just need to wrap the Api instance and add a few python decorators to get full swagger support.\n\n## How to:\nInstall:\n\n```\npip install flask-restful-swagger\n```\n(This installs flask-restful as well)\n\n\nAnd in your program, where you\'d usually just use flask-restful, add just a little bit of sauce and get a swagger spec out.\n\n\n```python\nfrom flask import Flask\nfrom flask_restful import Api\nfrom flask_restful_swagger import swagger\n\napp = Flask(__name__)\n\n###################################\n# Wrap the Api with swagger.docs. It is a thin wrapper around the Api class that adds some swagger smarts\napi = swagger.docs(Api(app), apiVersion=\'0.1\')\n###################################\n\n\n# You may decorate your operation with @swagger.operation\nclass Todo(Resource):\n    "Describing elephants"\n    @swagger.operation(\n        notes=\'some really good notes\',\n        responseClass=ModelClass.__name__,\n        nickname=\'upload\',\n        parameters=[\n            {\n              "name": "body",\n              "description": "blueprint object that needs to be added. YAML.",\n              "required": True,\n              "allowMultiple": False,\n              "dataType": ModelClass2.__name__,\n              "paramType": "body"\n            }\n          ],\n        responseMessages=[\n            {\n              "code": 201,\n              "message": "Created. The URL of the created blueprint should be in the Location header"\n            },\n            {\n              "code": 405,\n              "message": "Invalid input"\n            }\n          ]\n        )\n    def get(self, todo_id):\n    \n# Operations not decorated with @swagger.operation do not get added to the swagger docs\n\nclass Todo(Resource):\n    def options(self, todo_id):\n        """\n        I\'m not visible in the swagger docs\n        """\n        pass\n\n\n# Then you add_resource as you usually would\n\napi.add_resource(TodoList, \'/todos\')\napi.add_resource(Todo, \'/todos/<string:todo_id>\')\n\n# You define models like this:\n@swagger.model\nclass TodoItem:\n  "A description ..."\n  pass\n\n# Swagger json:\n    "models": {\n        "TodoItemWithArgs": {\n            "description": "A description...",\n            "id": "TodoItem",\n        },\n\n# If you declare an __init__ method with meaningful arguments then those args could be used to deduce the swagger model fields.\n@swagger.model\nclass TodoItemWithArgs:\n  "A description ..."\n  def __init__(self, arg1, arg2, arg3=\'123\'):\n    pass\n\n# Swagger json:\n    "models": {\n        "TodoItemWithArgs": {\n            "description": "A description...",\n            "id": "TodoItem",\n            "properties": {\n                "arg1": {\n                    "type": "string"\n                },\n                "arg2": {\n                    "type": "string"\n                },\n                "arg3": {\n                    "default": "123",\n                    "type": "string"\n                }\n            },\n            "required": [\n                "arg1",\n                "arg2"\n            ]\n        },\n\n\n# Additionally, if the model class has a `resource_fields` class member then flask-restful-swagger is able to deduce the swagger spec by this list of fields.\n\n@swagger.model\nclass TodoItemWithResourceFields:\n  resource_fields = {\n      \'a_string\': fields.String\n  }\n\n# Swagger json:\n    "models": {\n        "TodoItemWithResourceFields": {\n            "id": "TodoItemWithResourceFields",\n            "properties": {\n                "a_string": {\n                    "type": "string"\n                },\n            }\n        }\n\n# And in order to close the loop with flask-restify you\'d also need to tell flask-restify to @marshal_with the same list of fields when defining your methods.\n# Example:\n\n@marshal_with(TodoItemWithResourceFields.resource_fields)\ndef get()\n  return ...\n\n```\n\n# Using @marshal_with\nLet us recap usage of @marshal_with.\nflask-restful has a decorator `@marshal_with`. With the following setup it\'s possible to define the swagger model types with the same logic as `@marshal_with`.\n\nYou have to:\n\n```python\n# Define your model with resource_fields\n@swagger.model\nclass TodoItemWithResourceFields:\n  resource_fields = {\n      \'a_string\': fields.String,\n      \'a_second_string\': fields.String(attribute=\'a_second_string_field_name\')\n  }\n\n# And use @marshal_with(YourClass.resource_fields):\n@marshal_with(TodoItemWithResourceFields.resource_fields)\ndef get()\n  return ...\n```\n\n\n# Running and testing\n\nNow run your flask app\n\n```\npython example.py\n```\n\nAnd visit:\n\n```\ncurl http://localhost:5000/api/spec.json\n```\n\n# Passing more metadata to swagger\nWhen creating the `swagger.docs` object you may pass additional arguments, such as the following:\n\n```\napi_spec_url - where to serve the swagger spec from. Default is /api/spec. This will make the json\navailable at /api/spec as well as /api/spec.json and will also present a nice interactive\nHTML interface at /api/spec.html\n\napiVersion - passed directly to swagger as the apiVersion attribute. Default: 0.0\n\nbasePath - passed directly to swagger as the basePath attribute. Default: \'http://localhost:5000\' (do not include a slash at the end)\n\nresourcePath - same as before. default: \'/\'\n\nproduces - same as before, passed directly to swagger. The default is ["application/json"]\n\nswaggerVersion - passed directly to swagger. Default: 1.2\n\ndescription - description of this API endpoint. Defaults to \'Auto generated API docs by flask-restful-swagger\'\n```\n\n# Accessing the result json spec and an Interactive HTML interface\nAssuming you provided `swagger.docs` with a parameter `api_spec_url=\'/api/spec\'` (or left out in which case the default is \'/api/spec\') you may access the resulting json at /api/spec.json.\nYou may also access /api/spec.html where you\'d find an interactive HTML page that lets you play with the API to some extent.  \n\nHere\'s how this HTML page would look like: \n\n![An example /api/spec.html page](http://cl.ly/image/312Q2u091u24/Screen%20Shot%202013-12-17%20at%2012.26.02%20PM.png)\n\n# Accessing individual endpoints (.help.json)\nflask-restful-swagger adds some useful help pages (well, json documents) to each of your resources. This isn\'t part of the swagger spec, but could be useful anyhow.\nWith each endpoint you register, there\'s also an automatically registered help endpoint which ends with a .help.json extension.\nSo for example when registering the resource `api.add_resource(TodoList, \'/todos\')` you may access the actual api through the url `/todos` and you may also access the help page at `/todos.help.json`. This help page spits out the relevant json content only for this endpoint (as opposed to `/api/spec.json` which spits out the entire swagger document, which could be daunting)\n\nExample:\n\n```\n### python:\n\n> api.add_resource(TodoList, \'/todos\')\n\n### Shell:\n\n$ curl localhost:5000/todos.help.json\n{\n    "description": null,\n    "operations": [\n        {\n            "method": "GET",\n            "nickname": "nickname",\n            "parameters": [],\n            "summary": null\n        },\n        {\n            "method": "POST",\n            "nickname": "create",\n            "notes": "Creates a new TODO item",\n            "parameters": [\n                {\n                    "allowMultiple": false,\n                    "dataType": "TodoItem",\n                    "description": "A TODO item",\n                    "name": "body",\n                    "paramType": "body",\n                    "required": true\n                }\n            ],\n            "responseClass": "TodoItem",\n            "responseMessages": [\n                {\n                    "code": 201,\n                    "message": "Created. The URL of the created blueprint should be in the Location header"\n                },\n                {\n                    "code": 405,\n                    "message": "Invalid input"\n                }\n            ],\n            "summary": null\n        }\n    ],\n    "path": "/todos"\n}\n```\nWhen registering an endpoint with path parameters (e.g. `/todos/<string:id>`) then the .help url is may be found at the swagger path, e.g. `/todos/{id}.help.json` where {id} is just that - a literal string "{id}"\n\nExample:\n\n```\n### Python:\n> api.add_resource(Todo, \'/todos/<string:todo_id>\')\n\n### Shell:\n # You might need to quote and escape to prevent the shell from messing around\n\ncurl \'localhost:5000/todos/\\{todo_id\\}.help.json\'\n{\n    "description": "My TODO API",\n    "operations": [\n        {\n            "method": "DELETE",\n            "nickname": "nickname",\n            "parameters": [\n                {\n                    "dataType": "string",\n                    "name": "todo_id"\n                }\n            ],\n            "summary": null\n        },\n        {\n            "method": "GET",\n            "nickname": "get",\n            "notes": "get a todo item by ID",\n            "parameters": [\n                {\n                    "allowMultiple": false,\n                    "dataType": "string",\n                    "description": "The ID of the TODO item",\n                    "name": "todo_id_x",\n                    "paramType": "path",\n                    "required": true\n                }\n            ],\n            "responseClass": "TodoItemWithResourceFields",\n            "summary": "Get a todo task"\n        },\n        {\n            "method": "PUT",\n            "nickname": "nickname",\n            "parameters": [\n                {\n                    "dataType": "string",\n                    "name": "todo_id"\n                }\n            ],\n            "summary": null\n        }\n    ],\n    "path": "/todos/{todo_id}"\n}\n```\n\n\n# Accessing individual endpoints as HTML (.help.html)\nSimilarly to the `.help.json` URLs we have `.help.html` pages which are static HTML pages to document your APIs.\nHere\'s a screenshot to illustrate:\n![An example .help.html page](http://cl.ly/image/160E3G2F2B3u/Screen%20Shot%202013-12-10%20at%209.49.37%20PM.png)\n\n\n\n\n__This project is part of the [Cloudify Cosmo project](https://github.com/CloudifySource/)__\n'