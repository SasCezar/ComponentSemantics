b'# Yomichan #\n\nYomichan turns your web browser into a tool for building Japanese language literacy by helping you to decipher texts\nwhich would be otherwise too difficult tackle. This extension is similar to\n[Rikaichan](https://addons.mozilla.org/en-US/firefox/addon/rikaichan/) for Firefox and\n[Rikaikun](https://chrome.google.com/webstore/detail/rikaikun/jipdnfibhldikgcjhfnomkfpcebammhp?hl=en) for Chrome, but it\nstands apart in its goal of being a all-encompassing learning tool as opposed to a mere browser-based dictionary.\n\nYomichan provides advanced features not available in other browser-based dictionaries:\n\n*   Interactive popup definition window for displaying search results.\n*   On-demand audio playback for select dictionary definitions.\n*   Kanji stroke order diagrams are just a click away for most characters.\n*   Custom search page for easily executing custom search queries.\n*   Support for multiple dictionary formats including [EPWING](https://ja.wikipedia.org/wiki/EPWING) via the [Yomichan Import](https://foosoft.net/projects/yomichan-import) tool.\n*   Automatic note creation for the [Anki](https://apps.ankiweb.net/) flashcard program via the [AnkiConnect](https://foosoft.net/projects/anki-connect) plugin.\n*   Clean, modern code makes it easy for developers to [contribute](https://github.com/FooSoft/yomichan) new features.\n\n## Table of Contents ##\n\n*   [Installation](https://foosoft.net/projects/yomichan/#installation)\n*   [Dictionaries](https://foosoft.net/projects/yomichan/#dictionaries)\n*   [Basic Usage](https://foosoft.net/projects/yomichan/#basic-usage)\n*   [Custom Dictionaries](https://foosoft.net/projects/yomichan/#custom-dictionaries)\n*   [Anki Integration](https://foosoft.net/projects/yomichan/#anki-integration)\n    *   [Flashcard Configuration](https://foosoft.net/projects/yomichan/#flashcard-configuration)\n    *   [Flashcard Creation](https://foosoft.net/projects/yomichan/#flashcard-creation)\n*   [Keyboard Shortcuts](https://foosoft.net/projects/yomichan/#keyboard-shortcuts)\n*   [Development](https://foosoft.net/projects/yomichan/#development)\n    *   [Templates](https://foosoft.net/projects/yomichan/#templates)\n    *   [Dependencies](https://foosoft.net/projects/yomichan/#dependencies)\n*   [Frequently Asked Questions](https://foosoft.net/projects/yomichan/#frequently-asked-questions)\n*   [Screenshots](https://foosoft.net/projects/yomichan/#screenshots)\n*   [License](https://foosoft.net/projects/yomichan/#license)\n\n## Installation ##\n\nYomichan comes in two flavors: *stable* and *testing*. Over the years, this extension has evolved to contain many\ncomplex features, which have become increasingly difficult for me to test across different browsers, versions, and\nenvironments. All new changes are initially introduced into the *testing* version, and when I am reasonably confident\nthat they are bug free, they will get promoted to the *stable* version. If you are technically savvy and don\'t mind\nsubmitting issues on GitHub, try the *testing* version, otherwise the *stable* version will be your best bet.\n\n*   **Google Chrome**\n    ([stable](https://chrome.google.com/webstore/detail/yomichan/ogmnaimimemjmbakcfefmnahgdfhfami) or [testing](https://chrome.google.com/webstore/detail/yomichan-testing/bcknnfebhefllbjhagijobjklocakpdm))\n\n    [![](https://foosoft.net/projects/yomichan/img/chrome-web-store.png)](https://chrome.google.com/webstore/detail/yomichan/ogmnaimimemjmbakcfefmnahgdfhfami)\n\n*   **Mozilla Firefox**\n    ([stable](https://addons.mozilla.org/en-US/firefox/addon/yomichan/) or [testing](https://foosoft.net/projects/yomichan/dl/yomichan_testing.xpi))\n\n    [![](https://foosoft.net/projects/yomichan/img/firefox-marketplace.png)](https://addons.mozilla.org/en-US/firefox/addon/yomichan/)\n\n## Dictionaries ##\n\nThere are several free Japanese dictionaries available for Yomichan, with two of them having glossaries available in\ndifferent languages. You must download and import the dictionaries you wish to use in order to enable Yomichan\ndefinition lookups. If you have proprietary EPWING dictionaries that you would like to use, please see the [Yomichan\nImport](https://foosoft.net/projects/yomichan-import) page to learn how to convert and import them into Yomichan.\n\nPlease be aware that the non-English dictionaries contain fewer entries than their English counterparts. Even if your\nprimary language is not English, you may consider also importing the English version for better coverage.\n\n*   **[JMdict](https://www.edrdg.org/enamdict/enamdict_doc.html)** (Japanese vocabulary)\n    *   [jmdict\\_dutch.zip](https://foosoft.net/projects/yomichan/dl/dict/jmdict_dutch.zip)\n    *   [jmdict\\_english.zip](https://foosoft.net/projects/yomichan/dl/dict/jmdict_english.zip)\n    *   [jmdict\\_french.zip](https://foosoft.net/projects/yomichan/dl/dict/jmdict_french.zip)\n    *   [jmdict\\_german.zip](https://foosoft.net/projects/yomichan/dl/dict/jmdict_german.zip)\n    *   [jmdict\\_hungarian.zip](https://foosoft.net/projects/yomichan/dl/dict/jmdict_hungarian.zip)\n    *   [jmdict\\_russian.zip](https://foosoft.net/projects/yomichan/dl/dict/jmdict_russian.zip)\n    *   [jmdict\\_slovenian.zip](https://foosoft.net/projects/yomichan/dl/dict/jmdict_slovenian.zip)\n    *   [jmdict\\_spanish.zip](https://foosoft.net/projects/yomichan/dl/dict/jmdict_spanish.zip)\n    *   [jmdict\\_swedish.zip](https://foosoft.net/projects/yomichan/dl/dict/jmdict_swedish.zip)\n*   **[JMnedict](https://www.edrdg.org/enamdict/enamdict_doc.html)** (Japanese names)\n    *   [jmnedict.zip](https://foosoft.net/projects/yomichan/dl/dict/jmnedict.zip)\n*   **[KireiCake](https://kireicake.com/rikaicakes/)** (Japanese slang)\n    *   [kireicake.zip](https://foosoft.net/projects/yomichan/dl/dict/kireicake.zip)\n*   **[KANJIDIC](http://nihongo.monash.edu/kanjidic2/index.html)** (Japanese Kanji)\n    *   [kanjidic\\_english.zip](https://foosoft.net/projects/yomichan/dl/dict/kanjidic_english.zip)\n    *   [kanjidic\\_french.zip](https://foosoft.net/projects/yomichan/dl/dict/kanjidic_french.zip)\n    *   [kanjidic\\_portuguese.zip](https://foosoft.net/projects/yomichan/dl/dict/kanjidic_portuguese.zip)\n    *   [kanjidic\\_spanish.zip](https://foosoft.net/projects/yomichan/dl/dict/kanjidic_spanish.zip)\n*   **[Innocent Corpus](https://forum.koohii.com/post-168613.html#pid168613)** (Term and Kanji frequencies across 5000+ novels)\n    *   [innocent\\_corpus.zip](https://foosoft.net/projects/yomichan/dl/dict/innocent_corpus.zip)\n\n## Basic Usage ##\n\n1.  Click on the ![](https://foosoft.net/projects/yomichan/img/yomichan-icon.png) icon in the browser toolbar to open the Yomichan actions dialog.\n\n    [![](https://foosoft.net/projects/yomichan/img/ui-actions-thumb.png)](https://foosoft.net/projects/yomichan/img/ui-actions.png)\n\n2.  Click on the *spanner/monkey wrench* icon in the middle to open the options page.\n\n3.  Import the dictionaries you wish to use for term and Kanji searches. If you do not have any dictionaries installed\n    (or enabled), Yomichan will warn you that it is not ready for use by displaying an orange exclamation mark over its\n    icon. This exclamation mark will disappear once you have installed and enabled at least one dictionary.\n\n    [![](https://foosoft.net/projects/yomichan/img/ui-import-thumb.png)](https://foosoft.net/projects/yomichan/img/ui-import.png)\n\n4.  Hold down the <kbd>Shift</kbd> key or the middle mouse button as you move your mouse over text to display a popup\n    window containing term definitions. This window will only be shown if definitions were found and it can be dismissed\n    by clicking anywhere outside of it.\n\n    [![](https://foosoft.net/projects/yomichan/img/ui-terms-thumb.png)](https://foosoft.net/projects/yomichan/img/ui-terms.png)\n\n5.  Click on the ![](https://foosoft.net/projects/yomichan/img/btn-play-audio.png) icon to hear the term pronounced by a native speaker. If an audio sample is\n    not available, you will hear a short click instead. You can configure the sources used to retrieve audio samples in\n    the options page.\n\n6.  Click on individual Kanji in the term definition results to view additional information about those characters\n    including stroke order diagrams, readings, meanings, as well as other useful data.\n\n    [![](https://foosoft.net/projects/yomichan/img/ui-kanji-thumb.png)](https://foosoft.net/projects/yomichan/img/ui-kanji.png)\n\n## Custom Dictionaries ##\n\nYomichan supports the use of custom dictionaries including the esoteric but popular\n[EPWING](https://ja.wikipedia.org/wiki/EPWING) format. They were often utilized in portable electronic dictionaries\nsimilar to the ones pictured below. These dictionaries are often sought after by language learners for their correctness\nand excellent coverage of the Japanese language.\n\nUnfortunately, as most of the dictionaries released in this format are proprietary I am unable to bundle them with\nYomichan. You will need to procure these dictionaries yourself and import them with [Yomichan\nImport](https://foosoft.net/projects/yomichan-import). Please see the project page for additional details.\n\n[![Pocket EPWING dictionaries](https://foosoft.net/projects/yomichan/img/epwing-devices-thumb.png)](https://foosoft.net/projects/yomichan/img/epwing-devices.jpg)\n\n## Anki Integration ##\n\nYomichan features automatic flashcard creation for [Anki](https://apps.ankiweb.net/), a free application designed to help you\nretain knowledge. This feature requires the prior installation of an Anki plugin called [AnkiConnect](https://foosoft.net/projects/anki-connect).\nPlease see the respective project page for more information about how to set up this software.\n\n### Flashcard Configuration ###\n\nBefore flashcards can be automatically created, you must configure the templates used to create term and/or Kanji notes.\nIf you are unfamiliar with Anki deck and model management, this would be a good time to reference the [Anki\nManual](https://apps.ankiweb.net/docs/manual.html). In short, you must specify what information should be included in the\nflashcards that Yomichan creates through AnkiConnect.\n\nFlashcard fields can be configured with the following steps:\n\n1.  Open the Yomichan options page and scroll down to the section labeled *Anki Options*.\n2.  Tick the checkbox labeled *Enable Anki integration* (Anki must be running with [AnkiConnect](https://foosoft.net/projects/anki-connect) installed).\n3.  Select the type of template to configure by clicking on either the *Terms* or *Kanji* tabs.\n4.  Select the Anki deck and model to use for new creating new flashcards of this type.\n5.  Fill the model fields with markers corresponding to the information you wish to include (several can be used at\n    once). Advanced users can also configure the actual [Handlebars](https://handlebarsjs.com/) templates used to create\n    the flashcard contents (this is strictly optional).\n\n    #### Markers for Term Cards ####\n\n    Marker | Description\n    -------|------------\n    `{audio}` | Audio sample of a native speaker\'s pronunciation in MP3 format (if available).\n    `{cloze-body}` | Raw, inflected term as it appeared before being reduced to dictionary form by Yomichan.\n    `{cloze-prefix}` | Text for the containing `{sentence}` from the start up to the value of `{cloze-body}`.\n    `{cloze-suffix}` | Text for the containing `{sentence}` from the value of `{cloze-body}` to the end.\n    `{dictionary}` | Name of the dictionary from which the card is being created (unavailable in *grouped* mode).\n    `{expression}` | Term expressed as Kanji (will be displayed in Kana if Kanji is not available).\n    `{furigana}` | Term expressed as Kanji with Furigana displayed above it (e.g. <ruby>\xe6\x97\xa5\xe6\x9c\xac\xe8\xaa\x9e<rt>\xe3\x81\xab\xe3\x81\xbb\xe3\x82\x93\xe3\x81\x94</rt></ruby>).\n    `{furigana-plain}` | Term expressed as Kanji with Furigana displayed next to it in brackets (e.g. \xe6\x97\xa5\xe6\x9c\xac\xe8\xaa\x9e[\xe3\x81\xab\xe3\x81\xbb\xe3\x82\x93\xe3\x81\x94]).\n    `{glossary}` | List of definitions for the term (output format depends on whether running in *grouped* mode).\n    `{reading}` | Kana reading for the term (empty for terms where the expression is the reading).\n    `{screenshot}` | Screenshot of the web page taken at the time the term was added.\n    `{sentence}` | Sentence, quote, or phrase in which the term appears in the source content.\n    `{tags}` | Grammar and usage tags providing information about the term (unavailable in *grouped* mode).\n    `{url}` | Address of the web page in which the term appeared in.\n\n    #### Markers for Kanji Cards ####\n\n    Marker | Description\n    -------|------------\n    `{character}` | Unicode glyph representing the current Kanji.\n    `{cloze-body}` | Raw, inflected parent term as it appeared before being reduced to dictionary form by Yomichan.\n    `{cloze-prefix}` | Text for the containing `{sentence}` from the start up to the value of `{cloze-body}`.\n    `{cloze-suffix}` | Text for the containing `{sentence}` from the value of `{cloze-body}` to the end.\n    `{dictionary}` | Name of the dictionary from which the card is being created.\n    `{glossary}` | List of definitions for the Kanji.\n    `{kunyomi}` | Kunyomi (Japanese reading) for the Kanji expressed as Katakana.\n    `{onyomi}` | Onyomi (Chinese reading) for the Kanji expressed as Hiragana.\n    `{screenshot}` | Screenshot of the web page taken at the time the Kanji was added.\n    `{sentence}` | Sentence, quote, or phrase in which the character appears in the source content.\n    `{url}` | Address of the web page in which the Kanji appeared in.\n\nWhen creating your model for Yomichan, *please make sure that you pick a unique field to be first*; fields that will\ncontain `{expression}` or `{character}` are ideal candidates for this. Anki does not require duplicate flashcards to be\nadded to a deck and uses the first field in the model to check for duplicates. If, for example, you have `{reading}`\nconfigured to be the first field in your model and already have <ruby>\xe6\xa9\x8b<rt>\xe3\x81\xaf\xe3\x81\x97</rt></ruby> in your deck, you will not\nbe able to create a flashcard for <ruby>\xe7\xae\xb8<rt>\xe3\x81\xaf\xe3\x81\x97</rt></ruby>, because they share the same reading.\n\n### Flashcard Creation ###\n\nOnce Yomichan is configured, it becomes trivial to create new flashcards with a single click. You will see the following\nicons next to term definitions.\n\n*   Clicking ![](https://foosoft.net/projects/yomichan/img/btn-add-expression.png) adds the current expression as Kanji (e.g. \xe9\xa3\x9f\xe3\x81\xb9\xe3\x82\x8b).\n*   Clicking ![](https://foosoft.net/projects/yomichan/img/btn-add-reading.png) adds the current expression as Hiragana or Katakana (e.g. \xe3\x81\x9f\xe3\x81\xb9\xe3\x82\x8b).\n\nBelow are some troubleshooting tips you can try if you are unable to create new flashcards:\n\n*   Individual icons will appear grayed out if a flashcard cannot be created for the current definition (e.g. it already exists in the deck).\n*   If all of the buttons appear grayed out then you should double-check your deck and model configuration settings.\n*   If no icons appear at all, please make sure that Anki is running in the background and that [AnkiConnect](https://foosoft.net/projects/anki-connect) has been installed.\n\n## Keyboard Shortcuts ##\n\nThe following shortcuts are globally available:\n\nShortcut | Action\n---------|-------\n<kbd>Alt</kbd> + <kbd>Insert</kbd> | Open search page.\n<kbd>Alt</kbd> + <kbd>Delete</kbd> | Toggle extension on/off.\n\nThe following shortcuts are available on search results:\n\nShortcut | Action\n---------|-------\n<kbd>Esc</kbd> | Cancel current search\n<kbd>Alt</kbd> + <kbd>PgUp</kbd> | Page up through results.\n<kbd>Alt</kbd> + <kbd>PgDn</kbd> | Page down through results.\n<kbd>Alt</kbd> + <kbd>End</kbd> | Go to last result.\n<kbd>Alt</kbd> + <kbd>Home</kbd> | Go to first result.\n<kbd>Alt</kbd> + <kbd>Up</kbd> | Go to previous result.\n<kbd>Alt</kbd> + <kbd>Down</kbd> | Go to next result.\n<kbd>Alt</kbd> + <kbd>b</kbd> | Go to back to source term.\n<kbd>Alt</kbd> + <kbd>e</kbd> | Add current term as expression to Anki.\n<kbd>Alt</kbd> + <kbd>r</kbd> | Add current term as reading to Anki.\n<kbd>Alt</kbd> + <kbd>p</kbd> | Play audio for current term.\n<kbd>Alt</kbd> + <kbd>k</kbd> | Add current Kanji to Anki.\n\n## Development ##\n\nWorking on Yomichan and related tools is very time consuming and I am always on the lookout for code contributions from\nother developers who want to help out. I take pride in the high quality of the codebase and ask you to follow the\nfollowing basic guidelines when creating pull requests:\n\n*   Please discuss large features before writing code.\n*   Follow the [conventions and style](.eslintrc.json) of the existing code.\n*   Write clean, modern ES6 code (`const`/`let`, `await`, arrow functions, etc.)\n*   Large pull requests without a clear scope will not be merged.\n*   Incomplete or non-standalone features will not be merged.\n\n### Templates ###\n\nYomichan uses [Handlebars](https://handlebarsjs.com/) templates for user interface generation. The source templates are\nfound in the `tmpl` directory and the compiled version is stored in the `ext/bg/js/templates.js` file. If you modify the\nsource templates, you will need to also recompile them. If you are developing on Linux or Mac OS X, you can use the\nincluded `build_tmpl.sh` and `build_tmpl_auto.sh` shell scripts to do this for you\n([inotify-tools](https://github.com/rvoicilas/inotify-tools/wiki) required). Otherwise, simply execute `handlebars\ntmpl/*.html -f ext/bg/js/templates.js` from the project\'s base directory to compile all the templates.\n\n### Dependencies ###\n\nYomichan uses several third-party libraries to function. Below are links to homepages, snapshots, and licenses of the exact\nversions packaged.\n\n*   Bootstrap: [homepage](https://getbootstrap.com/) - [snapshot](https://github.com/twbs/bootstrap/releases/download/v3.3.7/bootstrap-3.3.7-dist.zip) - [license](https://github.com/twbs/bootstrap/blob/v3.3.7/LICENSE)\n*   Handlebars: [homepage](https://handlebarsjs.com/) - [snapshot](http://builds.handlebarsjs.com.s3.amazonaws.com/handlebars.min-714a4c4.js) - [license](https://github.com/wycats/handlebars.js/blob/v4.0.6/LICENSE)\n*   jQuery: [homepage](https://blog.jquery.com/) - [snapshot](https://code.jquery.com/jquery-3.2.1.min.js) - [license](https://github.com/jquery/jquery/blob/3.2.1/LICENSE.txt)\n*   JSZip: [homepage](https://stuk.github.io/jszip/) - [snapshot](https://raw.githubusercontent.com/Stuk/jszip/de7f52fbcba485737bef7923a83f0fad92d9f5bc/dist/jszip.min.js) - [license](https://github.com/Stuk/jszip/blob/v3.1.3/LICENSE.markdown)\n*   WanaKana: [homepage](https://wanakana.com/) - [snapshot](https://unpkg.com/wanakana@4.0.2/umd/wanakana.min.js) - [license](https://github.com/WaniKani/WanaKana/blob/4.0.2/LICENSE)\n\n## Frequently Asked Questions ##\n\n**I\'m having problems importing dictionaries in Firefox, what do I do?**\n\nYomichan uses the cross-browser IndexedDB system for storing imported dictionary data into your user profile. Although\neverything "just works" in Chrome, depending on settings, Firefox users can run into problems due browser bugs.\nYomichan catches errors and tries to offer suggestions about how to work around Firefox issues, but in general at least\none of the following solutions should work for you:\n\n*   Make sure you have cookies enabled. It appears that disabling them also disables IndexedDB for some reason. You\n    can still have cookies be disabled on other sites; just make sure to add the Yomichan extension to the whitelist of\n    whatever tool you are using to restrict cookies. You can get the extension "URL" by looking at the address bar when\n    you have the search page open.\n*   Make sure that you have sufficient disk space available on the drive Firefox uses to store your user profile.\n    Firefox limits the amount of space that can be used by IndexedDB to a small fraction of the disk space actually\n    available on your computer.\n*   Make sure that you have history set to "Remember history" enabled in your privacy settings. When this option is\n    set to "Never remember history", IndexedDB access is once again disabled for an inexplicable reason.\n*   As a last resort, try using the [Refresh Firefox](https://support.mozilla.org/en-US/kb/reset-preferences-fix-problems)\n    feature to reset your user profile. It appears that the Firefox profile system can corrupt itself preventing\n    IndexedDB from being accessible to Yomichan.\n\n**Why does the Kanji results page display "No data found" for several fields?**\n\nYou are using data from the KANJIDIC dictionary that was exported for an earlier version of Yomichan. It does not\ncontain the additional information which newer versions of Yofomichan expect. Unfortunately, since major browser\nimplementations of IndexedDB do not provide reliable means for selective bulk data deletion, you will need purge\nyour database and install the latest version of the KANJIDIC to see additional information about characters.\n\n**Can I still create cards without HTML formatting? The option for it is gone!**\n\nDeveloping Yomichan is a constant balance between including useful features and keeping complexity at a minimum.\nWith the new user-editable card template system, it is possible to create text-only cards without having to double\nthe number field of templates in the extension itself. If you would like to stop HTML tags from being added to your\ncards, simply copy the contents of the <a href="dl/fields.txt">text-only field template</a> into the template box on\nthe Anki settings page (make sure you have the *Show advanced options* checkbox ticked), making sure to replace the\nexisting values.\n\n**Will you add support for online dictionaries?**\n\nOnline dictionaries will never be implemented because it is impossible to support them in a robust way. In order to\nperform Japanese deinflection, Yomichan must execute dozens of database queries per every single word. Factoring in\nnetwork latency and the fragility of web scraping, I do not believe that it is possible to realize a good user\nexperience.\n\n**Is it possible to use Yomichan with files saved locally on my computer with Chrome?**\n\nIn order to use Yomichan with local files in Chrome, you must first tick the *Allow access to file URLs* checkbox\nfor Yomichan on the extensions page. Due to the restrictions placed on browser addons in the WebExtensions model, it\nwill likely never be possible to use Yomichan with PDF files.\n\n**Is it possible to delete individual dictionaries without purging the database?**\n\nAlthough it is technically possible to purge specific dictionaries, due to the limitations of the underlying browser\nIndexedDB system, this process is *extremely* slow. For example, it can take up to ten minutes to delete a single\nmoderately-sized term dictionary! Instead of including a borderline unusable feature in Yomichan, I have chosen to\ndisable dictionary deletion entirely.\n\n**Why aren\'t EPWING dictionaries bundled with Yomichan?**\n\nThe vast majority of EPWING dictionaries are proprietary, so unfortunately I am unable to legally include them in\nthis extension for copyright reasons.\n\n**When are you going to add support for $MYLANGUAGE?**\n\nDeveloping Yomichan requires a significant understanding of Japanese sentence structure and grammar. I have no time\nto invest in learning yet another language; therefore other languages will not be supported. I will also not accept\npull request containing this functionality, as I will ultimately be the one maintaining your code.\n\n## Screenshots ##\n\n[![Term definitions](https://foosoft.net/projects/yomichan/img/ss-terms-thumb.png)](https://foosoft.net/projects/yomichan/img/ss-terms.png)\n[![Kanji information](https://foosoft.net/projects/yomichan/img/ss-kanji-thumb.png)](https://foosoft.net/projects/yomichan/img/ss-kanji.png)\n[![Dictionary options](https://foosoft.net/projects/yomichan/img/ss-dictionaries-thumb.png)](https://foosoft.net/projects/yomichan/img/ss-dictionaries.png)\n[![Anki options](https://foosoft.net/projects/yomichan/img/ss-anki-thumb.png)](https://foosoft.net/projects/yomichan/img/ss-anki.png)\n'