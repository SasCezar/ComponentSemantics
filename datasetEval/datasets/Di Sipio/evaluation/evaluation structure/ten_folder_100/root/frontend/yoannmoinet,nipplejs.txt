b'![alt tag](./assets/nipplejs.png)\n> A vanilla virtual joystick for touch capable interfaces\n\n\n[![npm](https://img.shields.io/npm/v/nipplejs.svg)](https://npmjs.org/package/nipplejs)\n[![npm](https://img.shields.io/npm/dm/nipplejs.svg)](https://npmjs.org/package/nipplejs)\n\n# Table Of Contents\n<details>\n\n<!-- toc -->\n\n- [Install](#install)\n- [Demo](#demo)\n- [Usage](#usage)\n- [Options](#options)\n  * [`options.zone` defaults to \'body\'](#optionszone-defaults-to-body)\n  * [`options.color` defaults to \'white\'](#optionscolor-defaults-to-white)\n  * [`options.size` defaults to 100](#optionssize-defaults-to-100)\n  * [`options.threshold` defaults to 0.1](#optionsthreshold-defaults-to-01)\n  * [`options.fadeTime` defaults to 250](#optionsfadetime-defaults-to-250)\n  * [`options.multitouch` defaults to false](#optionsmultitouch-defaults-to-false)\n  * [`options.maxNumberOfNipples` defaults to 1](#optionsmaxnumberofnipples-defaults-to-1)\n  * [`options.dataOnly` defaults to false](#optionsdataonly-defaults-to-false)\n  * [`options.position` defaults to `{top: 0, left: 0}`](#optionsposition-defaults-to-top-0-left-0)\n  * [`options.mode` defaults to \'dynamic\'.](#optionsmode-defaults-to-dynamic)\n    + [`\'dynamic\'`](#dynamic)\n    + [`\'semi\'`](#semi)\n    + [`\'static\'`](#static)\n  * [`options.restJoystick` defaults to true](#optionsrestjoystick-defaults-to-true)\n  * [`options.restOpacity` defaults to 0.5](#optionsrestopacity-defaults-to-05)\n  * [`options.catchDistance` defaults to 200](#optionscatchdistance-defaults-to-200)\n- [API](#api)\n  * [NippleJS instance (manager)](#nipplejs-instance-manager)\n    + [`manager.on(type, handler)`](#managerontype-handler)\n    + [`manager.off([type, handler])`](#managerofftype-handler)\n    + [`manager.get(identifier)`](#managergetidentifier)\n    + [`manager.destroy()`](#managerdestroy)\n    + [`manager.ids`](#managerids)\n    + [`manager.id`](#managerid)\n  * [nipple instance (joystick)](#nipple-instance-joystick)\n  * [`joystick.on`, `joystick.off`](#joystickon-joystickoff)\n  * [`joystick.el`](#joystickel)\n  * [`joystick.show([cb])`](#joystickshowcb)\n  * [`joystick.hide([cb])`](#joystickhidecb)\n  * [`joystick.add()`](#joystickadd)\n  * [`joystick.remove()`](#joystickremove)\n  * [`joystick.destroy()`](#joystickdestroy)\n  * [`joystick.identifier`](#joystickidentifier)\n  * [`joystick.trigger(type [, data])`](#joysticktriggertype--data)\n  * [`joystick.position`](#joystickposition)\n  * [`joystick.frontPosition`](#joystickfrontposition)\n  * [`joystick.ui`](#joystickui)\n- [Events](#events)\n  * [manager only](#manager-only)\n    + [`added`](#added)\n    + [`removed`](#removed)\n  * [manager and joysticks](#manager-and-joysticks)\n    + [`start`](#start)\n    + [`end`](#end)\n    + [`move`](#move)\n    + [`dir`](#dir)\n    + [`plain`](#plain)\n    + [`shown`](#shown)\n    + [`hidden`](#hidden)\n    + [`destroyed`](#destroyed)\n    + [`pressure`](#pressure)\n- [Contributing](#contributing)\n    + [Commits](#commits)\n    + [Style](#style)\n    + [Workflow](#workflow)\n    + [Build](#build)\n\n<!-- tocstop -->\n</details>\n\n## Install\n\n```bash\nnpm install nipplejs --save\n```\n\n----\n\n## Demo\nCheck out the [demo here](http://yoannmoinet.github.io/nipplejs/#demo).\n\n----\n\n## Usage\n\nImport it the way you want into your project :\n\n```javascript\n// CommonJS\nvar manager = require(\'nipplejs\').create(options);\n```\n\n```javascript\n// AMD\ndefine([\'nipplejs\'], function (nipplejs) {\n    var manager = nipplejs.create(options);\n});\n```\n\n```javascript\n// Module\nimport nipplejs from \'nipplejs\';\n```\n\n```html\n<!-- Global -->\n<script src="./nipplejs.js"></script>\n<script>\n    var manager = nipplejs.create(options);\n</script>\n```\n\n**:warning: NB :warning:** Your joystick\'s container **has** to have its CSS `position` property set, either `absolute`, `relative`, `static`, ....\n\n----\n\n## Options\nYou can configure your joystick in different ways :\n\n```javascript\nvar options = {\n    zone: Element,                  // active zone\n    color: String,\n    size: Integer,\n    threshold: Float,               // before triggering a directional event\n    fadeTime: Integer,              // transition time\n    multitouch: Boolean,\n    maxNumberOfNipples: Number,     // when multitouch, what is too many?\n    dataOnly: Boolean,              // no dom element whatsoever\n    position: Object,               // preset position for \'static\' mode\n    mode: String,                   // \'dynamic\', \'static\' or \'semi\'\n    restJoystick: Boolean,\n    restOpacity: Number,            // opacity when not \'dynamic\' and rested\n    lockX: Boolean,                 // only move on the X axis\n    lockY: Boolean,                 // only move on the Y axis\n    catchDistance: Number,          // distance to recycle previous joystick in\n                                    // \'semi\' mode\n    dynamicPage: Boolean,          // Enable if the page has dynamically visible elements\n};\n```\n\nAll options are optional :sunglasses:.\n\n### `options.zone` defaults to \'body\'\nThe dom element in which all your joysticks will be injected.\n\n```html\n<div id="zone_joystick"></div>\n\n<script type="text/javascript" src="./nipplejs.js"></script>\n<script type="text/javascript">\n    var options = {\n        zone: document.getElementById(\'zone_joystick\'),\n    };\n    var manager = nipplejs.create(options);\n</script>\n```\n\nThis zone also serve as the mouse/touch events handler.\n\nIt represents the zone where all your joysticks will be active.\n\n### `options.color` defaults to \'white\'\nThe background color of your joystick\'s elements.\n\nCan be any valid CSS color.\n\n### `options.size` defaults to 100\nThe size in pixel of the outer circle.\n\nThe inner circle is 50% of this size.\n\n### `options.threshold` defaults to 0.1\nThis is the strength needed to trigger a directional event.\n\nBasically, the center is 0 and the outer is 1.\n\nYou need to at least go to 0.1 to trigger a directional event.\n\n### `options.fadeTime` defaults to 250\nThe time it takes for joystick to fade-out and fade-in when activated or de-activated.\n\n### `options.multitouch` defaults to false\nEnable the multitouch capabilities.\n\nIf, for reasons, you need to have multiple nipples in the same zone.\n\nOtherwise, it will only get one, and all new touches won\'t do a thing.\n\nPlease note that multitouch is off when in `static` or `semi` modes.\n\n### `options.maxNumberOfNipples` defaults to 1\nIf you need to, you can also control the maximum number of instances that could be created.\n\nObviously in a multitouch configuration.\n\n### `options.dataOnly` defaults to false\nThe library won\'t draw anything in the DOM and will only trigger events with data.\n\n### `options.position` defaults to `{top: 0, left: 0}`\nAn object that will determine the position of a `static` mode.\n\nYou can pass any of the four `top`, `right`, `bottom` and `left`.\n\nThey will be applied as any css property.\n\nEx :\n- `{top: \'50px\', left: \'50px\'}`\n- `{left: \'10%\', bottom: \'10%\'}`\n\n### `options.mode` defaults to \'dynamic\'.\nThree modes are possible :\n\n#### `\'dynamic\'`\n- a new joystick is created at each new touch.\n- the joystick gets destroyed when released.\n- **can** be multitouch.\n\n#### `\'semi\'`\n- new joystick is created at each new touch farther than `options.catchDistance` of any previously created joystick.\n- the joystick is faded-out when released but not destroyed.\n- when touch is made **inside** the `options.catchDistance` a new direction is triggered immediately.\n- when touch is made **outside** the `options.catchDistance` the previous joystick is destroyed and a new one is created.\n- **cannot** be multitouch.\n\n#### `\'static\'`\n- a joystick is positioned immediately at `options.position`.\n- one joystick per zone.\n- each new touch triggers a new direction.\n- **cannot** be multitouch.\n\n### `options.restJoystick` defaults to true\nReset the joystick\'s position when it enters the rest state.\n\n### `options.restOpacity` defaults to 0.5\nThe opacity to apply when the joystick is in a rest position.\n\n### `options.catchDistance` defaults to 200\nThis is only useful in the `semi` mode, and determine at which distance we recycle the previous joystick.\n\nAt 200 (px), if you press the zone into a rayon of 200px around the previously displayed joystick,\nit will act as a `static` one.\n\n### `options.lockX` defaults to false\nLocks joystick\'s movement to the x (horizontal) axis\n\n### `options.lockY` defaults to false\nLocks joystick\'s movement to the y (vertical) axis\n\n### `options.dynamicPage` defaults to true\nEnable if the page has dynamically visible elements such as for Vue, React, Angular or simply some CSS hiding or showing some DOM.\n\n----\n\n## API\n\n### NippleJS instance (manager)\n\nYour manager has the following signature :\n\n```javascript\n{\n    on: Function,                       // handle internal event\n    off: Function,                      // un-handle internal event\n    get: Function,                      // get a specific joystick\n    destroy: Function,                  // destroy everything\n    ids: Array                          // array of assigned ids\n    id: Number                          // id of the manager\n    options: {\n        zone: Element,                  // reactive zone\n        multitouch: Boolean,\n        maxNumberOfNipples: Number,\n        mode: String,\n        position: Object,\n        catchDistance: Number,\n        size: Number,\n        threshold: Number,\n        color: String,\n        fadeTime: Number,\n        dataOnly: Boolean,\n        restJoystick: Boolean,\n        restOpacity: Number\n    }\n}\n```\n\n#### `manager.on(type, handler)`\n\nIf you wish to listen to internal events like :\n\n```javascript\nmanager.on(\'event#1 event#2\', function (evt, data) {\n    // Do something.\n});\n```\n\nNote that you can listen to multiple events at once by separating\nthem either with a space or a comma (or both, I don\'t care).\n\n#### `manager.off([type, handler])`\n\nTo remove an event handler :\n\n```javascript\nmanager.off(\'event\', handler);\n```\n\nIf you call off without arguments, all handlers will be removed.\n\nIf you don\'t specify the handler but just a type, all handlers for that type will be removed.\n\n#### `manager.get(identifier)`\n\nA helper to get an instance via its identifier.\n\n```javascript\n// Will return the nipple instantiated by the touch identified by 0\nmanager.get(0);\n```\n\n#### `manager.destroy()`\n\nGently remove all nipples from the DOM and unbind all events.\n\n```javascript\nmanager.destroy();\n```\n\n#### `manager.ids`\n\nThe array of nipples\' ids under this manager.\n\n#### `manager.id`\n\nThe incremented id of this manager.\n\n### nipple instance (joystick)\n\nEach joystick has the following signature :\n\n```javascript\n{\n    on: Function,\n    off: Function,\n    el: Element,\n    show: Function,         // fade-in\n    hide: Function,         // fade-out\n    add: Function,          // inject into dom\n    remove: Function,       // remove from dom\n    destroy: Function,\n    identifier: Number,\n    trigger: Function,\n    position: {             // position of the center\n        x: Number,\n        y: Number\n    },\n    frontPosition: {        // position of the front part\n        x: Number,\n        y: Number\n    },\n    ui: {\n        el: Element,\n        front: Element,\n        back: Element\n    },\n    options: {\n        color: String,\n        size: Number,\n        threshold: Number,\n        fadeTime: Number\n    }\n}\n```\n\n### `joystick.on`, `joystick.off`\n\nThe same as the manager.\n\n### `joystick.el`\n\nDom element in which the joystick gets created.\n\n```html\n<div class="nipple">\n    <div class="front"></div>\n    <div class="back"></div>\n</div>\n```\n\n### `joystick.show([cb])`\n\nWill show the joystick at the last known place.\n\nYou can pass a callback that will be executed at the end of the fade-in animation.\n\n### `joystick.hide([cb])`\n\nWill fade-out the joystick.\n\nYou can pass a callback that will be executed at the end of the fade-out animation.\n\n### `joystick.add()`\n\nAdd the joystick\'s element to the dom.\n\n### `joystick.remove()`\n\nRemove the joystick\'s element from the dom.\n\n### `joystick.destroy()`\n\nGently remove this nipple from the DOM and unbind all related events.\n\n### `joystick.identifier`\n\nReturns the unique identifier of the joystick.\n\nTied to its touch\'s identifier.\n\n### `joystick.trigger(type [, data])`\n\nTrigger an internal event from the joystick.\n\nThe same as `on` you can trigger multiple events at the same time.\n\n### `joystick.position`\n\nThe absolute position of the center of the joystick.\n\n### `joystick.frontPosition`\n\nThe absolute position of the back part of the joystick\'s ui.\n\n### `joystick.ui`\n\nThe object that store its ui elements\n\n```html\n{\n    el: <div class="nipple"></div>\n    back: <div class="back"></div>\n    front: <div class="front"></div>\n}\n```\n\n----\n\n## Events\n\nYou can listen events both on the manager and all the joysticks.\n\nBut some of them are specific to its instance.\n\nIf you need to listen to each joystick, for example, you can :\n\n```javascript\nmanager.on(\'added\', function (evt, nipple) {\n    nipple.on(\'start move end dir plain\', function (evt) {\n        // DO EVERYTHING\n    });\n}).on(\'removed\', function (evt, nipple) {\n    nipple.off(\'start move end dir plain\');\n});\n```\n\n### manager only\n\n#### `added`\n\nA joystick just got added.\n\nWill pass the instance alongside the event.\n\n#### `removed`\n\nA joystick just got removed.\n\nFired at the end of the fade-out animation.\n\nWill pass the instance alongside the event.\n\nWon\'t be trigger in a `dataOnly` configuration.\n\n### manager and joysticks\n\nOther events are available on both the manager and joysticks.\n\nWhen listening on the manager,\nyou can also target **a joystick in particular** by prefixing\nthe event with its identifier, **`0:start`** for example.\n\nElse you\'ll get all events from all the joysticks.\n\n#### `start`\n\nA joystick is activated. (the user pressed on the active zone)\n\nWill pass the instance alongside the event.\n\n#### `end`\n\nA joystick is de-activated. (the user released the active zone)\n\nWill pass the instance alongside the event.\n\n#### `move`\n\nA joystick is moved.\n\nComes with data :\n\n```javascript\n{\n    identifier: 0,              // the identifier of the touch/mouse that triggered it\n    position: {                 // absolute position of the center in pixels\n        x: 125,\n        y: 95\n    },\n    force: 0.2,                 // strength in %\n    distance: 25.4,             // distance from center in pixels\n    pressure: 0.1,              // the pressure applied by the touch\n    angle: {\n        radian: 1.5707963268,   // angle in radian\n        degree: 90\n    },\n    vector: {                   // force unit vector\n      x: 0.508,\n      y: 3.110602869834277e-17\n    },\n    raw: {                      // note: angle is the same, beyond the 50 pixel limit\n        distance: 25.4,         // distance which continues beyond the 50 pixel limit\n        position: {             // position of the finger/mouse in pixels, beyond joystick limits\n            x: 125,\n            y: 95\n        }\n    },\n    instance: Nipple            // the nipple instance that triggered the event\n}\n```\n\n#### `dir`\n\nWhen a direction is reached after the threshold.\n\nDirection are split with a 45\xc2\xb0 angle.\n\n```javascript\n//     \\  UP /\n//      \\   /\n// LEFT       RIGHT\n//      /   \\\n//     /DOWN \\\n```\n\nYou can also listen to specific direction like :\n\n- `dir:up`\n- `dir:down`\n- `dir:right`\n- `dir:left`\n\nIn this configuration only one direction is triggered at a time.\n\n#### `plain`\n\nWhen a plain direction is reached after the threshold.\n\nPlain directions are split with a 90\xc2\xb0 angle.\n\n```javascript\n//       UP               |\n//     ------        LEFT | RIGHT\n//      DOWN              |\n```\n\nYou can also listen to specific plain direction like :\n\n- `plain:up`\n- `plain:down`\n- `plain:right`\n- `plain:left`\n\nIn this configuration two directions can be triggered at a time,\nbecause the user could be both `up` and `left` for example.\n\n#### `shown`\n\nIs triggered at the end of the fade-in animation.\n\nWill pass the instance alongside the event.\n\nWon\'t be trigger in a `dataOnly` configuration.\n\n#### `hidden`\n\nIs triggered at the end of the fade-out animation.\n\nWill pass the instance alongside the event.\n\nWon\'t be trigger in a `dataOnly` configuration.\n\n#### `destroyed`\n\nIs triggered at the end of destroy.\n\nWill pass the instance alongside the event.\n\n#### `pressure`\n\n> MBP\'s [**Force Touch**](http://www.apple.com/macbook-pro/features-retina/#interact), iOS\'s [**3D Touch**](http://www.apple.com/iphone-6s/3d-touch/), Microsoft\'s [**pressure**](https://msdn.microsoft.com/en-us/library/hh772360%28v=vs.85%29.aspx) or MDN\'s [**force**](https://developer.mozilla.org/en-US/docs/Web/API/Touch/force)\n\nIs triggered when the pressure on the joystick is changed.\n\nThe value, between 0 and 1, is sent back alongside the event.\n\n----\n\n## Contributing\nYou can follow [this document](./CONTRIBUTING.md) to help you get started.\n'