b'# Crawlab\n\n![](http://114.67.75.98:8082/buildStatus/icon?job=crawlab%2Fmaster)\n![](https://img.shields.io/github/release/crawlab-team/crawlab.svg)\n![](https://img.shields.io/github/last-commit/crawlab-team/crawlab.svg)\n![](https://img.shields.io/github/issues/crawlab-team/crawlab.svg)\n![](https://img.shields.io/github/contributors/crawlab-team/crawlab.svg)\n![](https://img.shields.io/docker/pulls/tikazyq/crawlab)\n![](https://img.shields.io/github/license/crawlab-team/crawlab.svg)\n\n[\xe4\xb8\xad\xe6\x96\x87](https://github.com/crawlab-team/crawlab/blob/master/README-zh.md) | English\n\n[Installation](#installation) | [Run](#run) | [Screenshot](#screenshot) | [Architecture](#architecture) | [Integration](#integration-with-other-frameworks) | [Compare](#comparison-with-other-frameworks) | [Community & Sponsorship](#community--sponsorship)\n\nGolang-based distributed web crawler management platform, supporting various languages including Python, NodeJS, Go, Java, PHP and various web crawler frameworks including Scrapy, Puppeteer, Selenium.\n\n[Demo](http://crawlab.cn/demo) | [Documentation](https://tikazyq.github.io/crawlab-docs)\n\n## Installation\n\nTwo methods:\n1. [Docker](https://tikazyq.github.io/crawlab-docs/Installation/Docker.html) (Recommended)\n2. [Direct Deploy](https://tikazyq.github.io/crawlab-docs/Installation/Direct.html) (Check Internal Kernel)\n3. [Kubernetes](https://mp.weixin.qq.com/s/3Q1BQATUIEE_WXcHPqhYbA)\n\n### Pre-requisite (Docker)\n- Docker 18.03+\n- Redis\n- MongoDB 3.6+\n\n### Pre-requisite (Direct Deploy)\n- Go 1.12+\n- Node 8.12+\n- Redis\n- MongoDB 3.6+\n\n## Run\n\n### Docker\n\nPlease use `docker-compose` to one-click to start up. By doing so, you don\'t even have to configure MongoDB and Redis databases. Create a file named `docker-compose.yml` and input the code below.\n\n\n```yaml\nversion: \'3.3\'\nservices:\n  master: \n    image: tikazyq/crawlab:latest\n    container_name: master\n    environment:\n      CRAWLAB_API_ADDRESS: "http://localhost:8000"\n      CRAWLAB_SERVER_MASTER: "Y"\n      CRAWLAB_MONGO_HOST: "mongo"\n      CRAWLAB_REDIS_ADDRESS: "redis"\n    ports:    \n      - "8080:8080" # frontend\n      - "8000:8000" # backend\n    depends_on:\n      - mongo\n      - redis\n  mongo:\n    image: mongo:latest\n    restart: always\n    ports:\n      - "27017:27017"\n  redis:\n    image: redis:latest\n    restart: always\n    ports:\n      - "6379:6379"\n```\n\nThen execute the command below, and Crawlab Master Node + MongoDB + Redis will start up. Open the browser and enter `http://localhost:8080` to see the UI interface.\n\n```bash\ndocker-compose up\n```\n\nFor Docker Deployment details, please refer to [relevant documentation](https://tikazyq.github.io/crawlab-docs/Installation/Docker.html).\n\n\n## Screenshot\n\n#### Login\n\n![](https://raw.githubusercontent.com/tikazyq/crawlab-docs/master/images/login.png)\n\n#### Home Page\n\n![](https://raw.githubusercontent.com/tikazyq/crawlab-docs/master/images/home.png)\n\n#### Node List\n\n![](https://raw.githubusercontent.com/tikazyq/crawlab-docs/master/images/node-list.png)\n\n#### Node Network\n\n![](https://raw.githubusercontent.com/tikazyq/crawlab-docs/master/images/node-network.png)\n\n#### Spider List\n\n![](https://raw.githubusercontent.com/tikazyq/crawlab-docs/master/images/spider-list.png)\n\n#### Spider Overview\n\n![](https://raw.githubusercontent.com/tikazyq/crawlab-docs/master/images/spider-overview.png)\n\n#### Spider Analytics\n\n![](https://raw.githubusercontent.com/tikazyq/crawlab-docs/master/images/spider-analytics.png)\n\n#### Spider Files\n\n![](https://raw.githubusercontent.com/tikazyq/crawlab-docs/master/images/spider-file.png)\n\n#### Task Results\n\n![](https://raw.githubusercontent.com/tikazyq/crawlab-docs/master/images/task-results.png)\n\n#### Cron Job\n\n![](https://raw.githubusercontent.com/tikazyq/crawlab-docs/master/images/schedule.png)\n\n## Architecture\n\nThe architecture of Crawlab is consisted of the Master Node and multiple Worker Nodes, and Redis and MongoDB databases which are mainly for nodes communication and data storage.\n\n![](https://raw.githubusercontent.com/tikazyq/crawlab-docs/master/images/architecture.png)\n\nThe frontend app makes requests to the Master Node, which assigns tasks and deploys spiders through MongoDB and Redis. When a Worker Node receives a task, it begins to execute the crawling task, and stores the results to MongoDB. The architecture is much more concise compared with versions before `v0.3.0`. It has removed unnecessary Flower module which offers node monitoring services. They are now done by Redis.\n\n### Master Node\n\nThe Master Node is the core of the Crawlab architecture. It is the center control system of Crawlab.\n\nThe Master Node offers below services:\n1. Crawling Task Coordination;\n2. Worker Node Management and Communication;\n3. Spider Deployment;\n4. Frontend and API Services;\n5. Task Execution (one can regard the Master Node as a Worker Node)\n\nThe Master Node communicates with the frontend app, and send crawling tasks to Worker Nodes. In the mean time, the Master Node synchronizes (deploys) spiders to Worker Nodes, via Redis and MongoDB GridFS.\n\n### Worker Node\n\nThe main functionality of the Worker Nodes is to execute crawling tasks and store results and logs, and communicate with the Master Node through Redis `PubSub`. By increasing the number of Worker Nodes, Crawlab can scale horizontally, and different crawling tasks can be assigned to different nodes to execute.\n\n### MongoDB\n\nMongoDB is the operational database of Crawlab. It stores data of nodes, spiders, tasks, schedules, etc. The MongoDB GridFS file system is the medium for the Master Node to store spider files and synchronize to the Worker Nodes.\n\n### Redis\n\nRedis is a very popular Key-Value database. It offers node communication services in Crawlab. For example, nodes will execute `HSET` to set their info into a hash list named `nodes` in Redis, and the Master Node will identify online nodes according to the hash list.\n\n### Frontend\n\nFrontend is a SPA based on \n[Vue-Element-Admin](https://github.com/PanJiaChen/vue-element-admin). It has re-used many Element-UI components to support corresponding display. \n\n## Integration with Other Frameworks\n\nA crawling task is actually executed through a shell command. The Task ID will be passed to the crawling task process in the form of environment variable named `CRAWLAB_TASK_ID`. By doing so, the data can be related to a task. Also, another environment variable `CRAWLAB_COLLECTION` is passed by Crawlab as the name of the collection to store results data.\n\n### Scrapy\n\nBelow is an example to integrate Crawlab with Scrapy in pipelines. \n\n```python\nimport os\nfrom pymongo import MongoClient\n\nMONGO_HOST = \'192.168.99.100\'\nMONGO_PORT = 27017\nMONGO_DB = \'crawlab_test\'\n\n# scrapy example in the pipeline\nclass JuejinPipeline(object):\n    mongo = MongoClient(host=MONGO_HOST, port=MONGO_PORT)\n    db = mongo[MONGO_DB]\n    col_name = os.environ.get(\'CRAWLAB_COLLECTION\')\n    if not col_name:\n        col_name = \'test\'\n    col = db[col_name]\n\n    def process_item(self, item, spider):\n        item[\'task_id\'] = os.environ.get(\'CRAWLAB_TASK_ID\')\n        self.col.save(item)\n        return item\n```\n\n## Comparison with Other Frameworks\n\nThere are existing spider management frameworks. So why use Crawlab? \n\nThe reason is that most of the existing platforms are depending on Scrapyd, which limits the choice only within python and scrapy. Surely scrapy is a great web crawl framework, but it cannot do everything. \n\nCrawlab is easy to use, general enough to adapt spiders in any language and any framework. It has also a beautiful frontend interface for users to manage spiders much more easily. \n\n|Framework | Type | Distributed | Frontend | Scrapyd-Dependent |\n|:---:|:---:|:---:|:---:|:---:|\n| [Crawlab](https://github.com/crawlab-team/crawlab) | Admin Platform | Y | Y | N\n| [ScrapydWeb](https://github.com/my8100/scrapydweb) | Admin Platform | Y | Y | Y\n| [SpiderKeeper](https://github.com/DormyMo/SpiderKeeper) | Admin Platform | Y | Y | Y\n| [Gerapy](https://github.com/Gerapy/Gerapy) | Admin Platform | Y | Y | Y\n| [Scrapyd](https://github.com/scrapy/scrapyd) | Web Service | Y | N | N/A\n\n## Contributors\n<a href="https://github.com/tikazyq">\n  <img src="https://avatars3.githubusercontent.com/u/3393101?s=460&v=4" height="80">\n</a>\n<a href="https://github.com/wo10378931">\n  <img src="https://avatars2.githubusercontent.com/u/8297691?s=460&v=4" height="80">\n</a>\n<a href="https://github.com/yaziming">\n  <img src="https://avatars2.githubusercontent.com/u/54052849?s=460&v=4" height="80">\n</a>\n<a href="https://github.com/hantmac">\n  <img src="https://avatars2.githubusercontent.com/u/7600925?s=460&v=4" height="80">\n</a>\n\n## Community & Sponsorship\n\nIf you feel Crawlab could benefit your daily work or your company, please add the author\'s Wechat account noting "Crawlab" to enter the discussion group. Or you scan the Alipay QR code below to give us a reward to upgrade our teamwork software or buy a coffee.\n\n<p align="center">\n    <img src="https://crawlab.oss-cn-hangzhou.aliyuncs.com/gitbook/qrcode.png" height="360">\n    <img src="https://crawlab.oss-cn-hangzhou.aliyuncs.com/gitbook/payment.jpg" height="360">\n</p>\n'