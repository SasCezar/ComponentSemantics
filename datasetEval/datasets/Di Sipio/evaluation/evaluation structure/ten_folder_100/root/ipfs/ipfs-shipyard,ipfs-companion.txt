b'# IPFS Companion\n\n> Upgrade your browser with [IPFS](https://ipfs.io/) super powers\n\n![demo of v2.8.0](https://user-images.githubusercontent.com/157609/55318231-938ce480-5472-11e9-8624-b0021a34c1a4.gif)\n\n[![](https://img.shields.io/github/release/ipfs/ipfs-companion.svg)](https://github.com/ipfs/ipfs-companion/releases/latest)\n[![](https://img.shields.io/badge/mozilla-reviewed-blue.svg)](https://addons.mozilla.org/en-US/firefox/addon/ipfs-companion/)\n[![i18n status](https://img.shields.io/badge/i18n-translated-blue.svg)](https://github.com/ipfs-shipyard/ipfs-companion/blob/master/docs/localization-notes.md)\n[![build-status](https://flat.badgen.net/travis/ipfs-shipyard/ipfs-companion)](https://travis-ci.com/ipfs-shipyard/ipfs-companion)\n[![codecov](https://codecov.io/gh/ipfs-shipyard/ipfs-companion/branch/master/graph/badge.svg)](https://codecov.io/gh/ipfs-shipyard/ipfs-companion)\n[![#ipfs-in-web-browsers](https://img.shields.io/badge/irc-%23ipfs--in--web--browsers-808080.svg)](https://webchat.freenode.net/?channels=ipfs-in-web-browsers)\n\n| <img src="https://unpkg.com/@browser-logos/firefox@2.0.0/firefox_16x16.png" width="16" height="16"> [Firefox](https://www.mozilla.org/firefox/new/) / [Firefox for Android](https://play.google.com/store/apps/details?id=org.mozilla.firefox) | <img src="https://unpkg.com/@browser-logos/chrome@1.0.4/chrome_16x16.png" width="16" height="16"> [Chrome](https://www.google.com/chrome/) / <img src="https://unpkg.com/@browser-logos/brave@3.0.0/brave_16x16.png" width="16" height="16"> [Brave](https://brave.com/) / <img src="https://unpkg.com/@browser-logos/opera@1.1.1/opera_16x16.png" width="16" height="16"> [Opera](https://www.opera.com/)  / <img src="https://unpkg.com/@browser-logos/edge@1.0.6/edge_16x16.png" width="16" height="16"> [Edge](https://www.microsoftedgeinsider.com/)\n|------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| [![Install From AMO](https://ipfs.io/ipfs/QmWNa64XjA78QvK3zG2593bSMizkDXXcubDHjnRDYUivqt)](https://addons.mozilla.org/firefox/addon/ipfs-companion/) | [![Install from Chrome Store](https://ipfs.io/ipfs/QmXeTTMAxJVSZLqNcVzBdsAZKhWUpP7w7QAZ8f3Bnmk3Mj)](https://chrome.google.com/webstore/detail/ipfs-companion/nibjojkomfdiaoajekhjakgkdhaomnch) |\n\n## Lead Maintainer\n\n[Marcin Rataj](https://github.com/lidel)\n\n## Table of Contents\n\n- [Background](#background)\n- [Features](#features)\n- [Install](#install)\n- [Contribute](#contribute)\n- [Troubleshooting](#troubleshooting)\n- [Privacy Policy](#privacy-policy)\n- [License](#license)\n\n## Background\n\nThis add-on enables everyone to access IPFS resources the way they were meant: from locally running IPFS node :-)\n\nIPFS is a new hypermedia distribution protocol, addressed by content and identities.\nIPFS enables the creation of completely distributed applications.\nIt aims to make the web faster, safer, and more open.\n\nLearn more at [ipfs.io](https://ipfs.io) (it is really cool, we promise!)\n\n## Features\n\n### Automagical Detection of IPFS Resources\n\n#### IPFS Path in URL\n\nRequests for IPFS-like paths (`/ipfs/{cid}` or `/ipns/{peerid_or_host-with-dnslink}`) are detected on any website.  \nIf tested path is a [valid IPFS address](https://github.com/ipfs/is-ipfs) it gets redirected and loaded from a local gateway, e.g:  \n> `https://ipfs.io/ipfs/QmbWqxBEKC3P8tqsKc98xmWNzrzDtRLMiMPL8wBuTGsMnR`  \n> \xe2\x86\x92 `http://127.0.0.1:8080/ipfs/QmbWqxBEKC3P8tqsKc98xmWNzrzDtRLMiMPL8wBuTGsMnR`\n\n#### DNSLink\n\nCompanion will detect presence of [DNSLink](https://docs.ipfs.io/guides/concepts/dnslink/) in DNS records of visited websites and redirect HTTP request to a local gateway.\n\n> `http://docs.ipfs.io`  \n> \xe2\x86\x92 `http://127.0.0.1:8080/ipns/docs.ipfs.io`\n\nThis means if you visit websites with a valid DNSLink (eg. https://docs.ipfs.io, https://ipld.io, http://tr.wikipedia-on-ipfs.org) browser will load them from IPFS.\n\nMore details: [DNSLink Support in IPFS Companion](https://github.com/ipfs-shipyard/ipfs-companion/blob/master/docs/dnslink.md)\n\n#### X-Ipfs-Path\n\nCompanion will upgrade transport to IPFS if the header is found in any HTTP response headers. This is a fallback for edge cases when IPFS path is not present in URL.\n\nMore details: [`x-ipfs-path` Header Support in IPFS Companion](https://github.com/ipfs-shipyard/ipfs-companion/blob/master/docs/x-ipfs-path-header.md)\n\n#### Redirect Opt-Out\n\nIt is possible to opt-out from Gateway redirect by:\n- a) suspending redirect via global toggle (see [_Disable All Redirects_](#disable-all-redirects) below)\n- b) suspending redirect for via per website opt-out (in [_Active Tab_ section of _Browser Action_](#disable-gateway-redirect-per-website) or _Preferences_)\n- c) including `x-ipfs-companion-no-redirect` in the URL (as a [hash](https://ipfs.io/ipfs/QmbWqxBEKC3P8tqsKc98xmWNzrzDtRLMiMPL8wBuTGsMnR#x-ipfs-companion-no-redirect) or [query](https://ipfs.io/ipfs/QmbWqxBEKC3P8tqsKc98xmWNzrzDtRLMiMPL8wBuTGsMnR?x-ipfs-companion-no-redirect) parameter).\n\n### IPFS API as `window.ipfs`\n\nYour IPFS node is exposed as `window.ipfs` on every webpage.\nWebsites can detect if `window.ipfs` exists and opt-in to use it instead of creating their own `js-ipfs` node.\nIt saves system resources and battery (on mobile), avoids the overhead of peer discovery/connection, enables shared repository access and more!\nMake sure to read our [notes on `window.ipfs`](https://github.com/ipfs-shipyard/ipfs-companion/blob/master/docs/window.ipfs.md), where we explain it in-depth and provide examples on how to use it your own dapp.\n\n### Quick Toggles\n\nThe Browser Action pop-up provides handy toggles for often used operations.\n\n#### Disable Gateway Redirect Per Website\n\n> _Active Tab_ actions include option to opt-out current website from Gateway redirect of any IPFS subresources.    \n> Disabling redirect for DNSLink website will restore original URL as well:\n>\n> ![per-site-opt-out](https://user-images.githubusercontent.com/157609/55317805-90452900-5471-11e9-9e0f-293afd261648.gif)\n\n#### Disable All Redirects\n\n> A handy toggle to disable all gateway redirects while keeping all other features enabled:\n>\n> ![redirect](https://user-images.githubusercontent.com/157609/55317804-90452900-5471-11e9-9fc1-42bee5b15a6a.gif)\n\n#### Suspend IPFS Extension\n\n> The "power" icon can be used to temporarily suspend all IPFS integrations\n> (redirects, API status, content scripts, protocol handlers etc).\n> Useful during testing. Extension can be re-enabled with a single click:\n>\n> ![screenshot of suspend toggle](https://user-images.githubusercontent.com/157609/55317803-8fac9280-5471-11e9-96e3-f068cc62148b.gif)\n\n### IPFS Status and Context Actions\n\n- IPFS API and Gateway status\n- Add local (quick upload) or remote files (context menu) to IPFS with option to preserve filename\n- Easy access to [WebUI](https://github.com/ipfs/webui/) and add-on Preferences\n- Toggle redirection to local gateway (automatic by default, manual mode can be enabled in Preferences)\n- Additional actions for pages loaded from IPFS\n    - Pin/Unpin of IPFS resources (via API)\n    - Copy canonical IPFS address\n    - Copy shareable URL to resource at preferred public gateway\n\n### Experiments!\n\n_(some are disabled by default, use Preferences screen to enable)_\n\n- Requests made via [experimental protocols](https://github.com/ipfs/ipfs-companion/issues/164) are re-routed to HTTP gateway (public or custom):\n    - `ipfs://$cid`\n    - `ipns://$cid_or_fqdn`\n    - `dweb:/ipfs/$cid`\n    - `dweb:/ipns/$cid_or_fqdn`\n- Make plaintext IPFS links clickable ([demo](https://ipfs.io/ipfs/bafybeidvtwx54qr44kidymvhfzefzxhgkieigwth6oswk75zhlzjdmunoy/linkify-demo.html))\n- Switch between _External_ HTTP API and _Embedded_ js-ipfs node. Read about differences at [docs/node-types](docs/node-types.md).\n  > [![screenshot of node type switch](https://user-images.githubusercontent.com/157609/42382479-b4d98768-8134-11e8-979c-69b758846bf0.png)](https://github.com/ipfs-shipyard/ipfs-companion/blob/master/docs/node-types.md)\n\n## Install\n\n### Release Channel\n\nWe recommend installing the stable release via your browser\'s add-on store.\n\n| <img src="https://unpkg.com/@browser-logos/firefox@2.0.0/firefox_16x16.png" width="16" height="16"> [Firefox](https://www.mozilla.org/firefox/new/) / [Firefox for Android](https://play.google.com/store/apps/details?id=org.mozilla.firefox) | <img src="https://unpkg.com/@browser-logos/chrome@1.0.4/chrome_16x16.png" width="16" height="16"> [Chrome](https://www.google.com/chrome/) / <img src="https://unpkg.com/@browser-logos/brave@3.0.0/brave_16x16.png" width="16" height="16"> [Brave](https://brave.com/) / <img src="https://unpkg.com/@browser-logos/opera@1.1.1/opera_16x16.png" width="16" height="16"> [Opera](https://www.opera.com/)  / <img src="https://unpkg.com/@browser-logos/edge@1.0.6/edge_16x16.png" width="16" height="16"> [Edge](https://www.microsoftedgeinsider.com/)\n|------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| [![Install From AMO](https://ipfs.io/ipfs/QmWNa64XjA78QvK3zG2593bSMizkDXXcubDHjnRDYUivqt)](https://addons.mozilla.org/firefox/addon/ipfs-companion/) | [![Install from Chrome Store](https://ipfs.io/ipfs/QmXeTTMAxJVSZLqNcVzBdsAZKhWUpP7w7QAZ8f3Bnmk3Mj)](https://chrome.google.com/webstore/detail/ipfs-companion/nibjojkomfdiaoajekhjakgkdhaomnch) |\n\n\n**Note:** `ipfs-companion` is designed to retrieve content from a locally running IPFS daemon.  \nMake sure [IPFS is installed](https://docs.ipfs.io/introduction/usage/) on your computer.\n\n### Beta Channel\n\nDevelopers and enthusiasts can opt-in for Beta-quality channel with hand-picked Dev Builds:\n\n- Beta for Firefox: [Self-hosted Signed Dev Build](https://ipfs.io/ipfs/QmR8W5wg8BuAyBTruHnHovfWRavwvidVh3qtyinXi6NnLa)\n- Beta for Chromium-based browsers: [Dev Build at Chrome Web Store](https://chrome.google.com/webstore/detail/ipfs-companion-dev-build/hjoieblefckbooibpepigmacodalfndh)\n\nIt is also possible to [grab the last successful build from `master`](https://ci.ipfs.team/job/IPFS%20Shipyard/job/ipfs-companion/job/master/lastSuccessfulBuild/),\nbut these builds are not signed nor will automatically update:\n`.zip` bundles are meant only to be manually loaded via `chrome://extensions` (Chromium-based) or `about:debugging` (Firefox) for the purpose of quick smoke-testing.\n\n## Development\n\nTo work on the extension you need to install it from source rather than from the add on store.\n\n1. Clone https://github.com/ipfs-shipyard/ipfs-companion.git\n2. Run all-in-one dev build:\n    ```console\n    $ npm run dev-build\n    ```\n3. Switch `add-on/manifest.json` to the browser of your choice:\n    ```console\n    $ npm run bundle:firefox # for Firefox (build default)\n    OR\n    $ npm run bundle:chromium # for Chromium-based browsers\n    ```\n4. Load it into browser:\n    * Chromium-based\n        1. Enter `chrome://extensions` in the URL bar\n        2. Enable "Developer mode"\n        3. Click "Load unpacked extension..."\n        4. Pick the _directory_ `add-on`\n\n    * Firefox\n        1. Enter `about:debugging` in the URL bar\n        2. Check "Enable add-on debugging"\n        3. Click "Load Temporary Add-on"\n        4. Pick the _file_ `add-on/manifest.json`\n\n**See [`docs/developer-notes.md`](docs/developer-notes.md) for more detailed instructions**\n\n### Reproducible Build in Docker\n\nWant to ensure prebuilt bundle does not include any additional code?  \nDon\'t want to install JS dependencies such as NodeJS and yarn?  \n\nDo an isolated build inside of Docker!\n\nRun the following command for ending up\nwith a built extension inside the `build/` directory:\n\n```sh\nnpm run release-build\n```\n\nIt is an alias for running `ci:build` script inside of immutable Docker image, which guarantees the same output on all platforms.\n\n### Legacy Firefox (< 53) and XUL-Compatible Browsers\n\nLegacy  versions `1.x.x` were based on currently deprecated Add-On SDK (Firefox-only).   \nWhile it is not maintained anymore, one can inspect, build and install it using codebase from [legacy-sdk](https://github.com/ipfs/ipfs-companion/tree/legacy-sdk) branch.    \nFor historical background on the rewrite see [Issue #20: Move to WebExtensions](https://github.com/ipfs/ipfs-companion/issues/20).\n\n## Contribute\n\n[![](https://cdn.rawgit.com/jbenet/contribute-ipfs-gif/master/img/contribute.gif)](CONTRIBUTING.md)\n\nFeel free to join in. All welcome. Open an [issue](https://github.com/ipfs/ipfs-companion/issues)!\n\nIf you want to help in developing this extension, please see [CONTRIBUTING](CONTRIBUTING.md) page :sparkles:\n\nThe browser extension team hangs out at the [#ipfs-in-web-browsers](https://webchat.freenode.net/?channels=ipfs-in-web-browsers) channel on Freenode.\n\nThis repository falls under the IPFS [Code of Conduct](https://github.com/ipfs/community/blob/master/code-of-conduct.md).\n\n### TROUBLESHOOTING\n\nThe best place to ask your questions about IPFS in general, how it works and what you can do with it is at [discuss.ipfs.io](https://discuss.ipfs.io/).  \nWe are also available at the [#ipfs](https://webchat.freenode.net/?channels=ipfs) channel, where most of IPFS community hangs out.\n\nQuestions specific to this browser companion can be asked directly at [`#ipfs-in-web-browsers`](https://webchat.freenode.net/?channels=ipfs-in-web-browsers)\n\n#### Upload via Right-Click Does Not Work in Firefox\n\nSee [this workaround](https://github.com/ipfs/ipfs-companion/issues/227).\n\n#### Workaround for HTTP Redirect to Work with Ghostery\n\n[Ghostery](https://addons.mozilla.org/en-US/firefox/addon/ghostery/) is known to toy with HTTP-to-HTTPS redirect, which in some setups breaks websites utilizing public gateways. More details in [#466](https://github.com/ipfs-shipyard/ipfs-companion/issues/466). Until it is fixed upstream, a workaround is to [whitelist](https://user-images.githubusercontent.com/157609/39089525-5834c104-45c9-11e8-9e17-4459a97e5676.png) affected site.\n\n#### Rule to Work with NoScript with ABE Enabled\n\nBy default [NoScript](https://addons.mozilla.org/en-US/firefox/addon/noscript/) breaks this addon by blocking assets loaded from IPFS Gateway running on localhost.    \nTo make it work, one needs to extend the SYSTEM Rulset and prepend it with IPFS whitelist:\n\n```\n# Enable IPFS redirect to LOCAL\nSite ^http://127.0.0.1:8080/(ipfs|ipns)*\nAnonymize\n\n# Prevent Internet sites from requesting LAN resources.\nSite LOCAL\nAccept from LOCAL\nDeny\n```\n\nFeel free to modify it, but get familiar with [ABE rule syntax](https://noscript.net/abe/abe_rules.pdf) first.\n\n## Privacy Policy\n\nSee [`docs/privacy-policy.md`](docs/privacy-policy.md)\n\n## License\n\n[IPFS logo](https://github.com/ipfs/logo) belongs to [The IPFS Project](https://github.com/ipfs) and is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/legalcode">CC-BY-SA 3.0</a>.\n\n[is-ipfs](https://github.com/xicombd/is-ipfs), [js-multihash](https://github.com/jbenet/js-multihash) and other NPM dependencies are under MIT license, unless stated otherwise.\n\nThe add-on itself is released under [CC0](LICENSE): to the extent possible under law, the author has waived all copyright and related or neighboring rights to this work, effectively placing it in the public domain.\n'