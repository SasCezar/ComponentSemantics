b'# &lt;include-fragment&gt; element\n\nA Client Side Includes tag.\n\n## Installation\n\n```\n$ npm install --save @github/include-fragment-element\n```\n\n## Usage\n\nAll `include-fragment` elements must have a `src` attribute from which to retrieve an HTML element fragment.\n\nThe initial page load should include fallback content to be displayed if the resource could not be fetched immediately.\n\n```js\nimport \'@github/include-fragment-element\'\n```\n\n**Original**\n\n``` html\n<div class="tip">\n  <include-fragment src="/tips">\n    <p>Loading tip\xe2\x80\xa6</p>\n  </include-fragment>\n</div>\n```\n\nOn page load, the `include-fragment` element fetches the URL, the response is parsed into an HTML element, which replaces the `include-fragment` element entirely.\n\n**Result**\n\n``` html\n<div class="tip">\n  <p>You look nice today</p>\n</div>\n```\n\nThe server must respond with an HTML fragment to replace the `include-fragment` element. It should not contain _another_ `include-fragment` element or the server will be polled in an infinite loop.\n\n### Errors\n\nIf the URL fails to load, the `include-fragment` element is left in the page and tagged with an `is-error` CSS class that can be used for styling.\n\n### Events\n\nRequest lifecycle events are dispatched on the `<include-fragment>` element.\n\n- `loadstart` - The server fetch has started.\n- `load` - The request completed successfully.\n- `error` - The request failed.\n- `loadend` - The request has completed.\n\n```js\nconst loader = document.querySelector(\'include-fragment\')\nconst container = loader.parentElement\nloader.addEventListener(\'loadstart\', () => container.classList.add(\'is-loading\'))\nloader.addEventListener(\'loadend\', () => container.classList.remove(\'is-loading\'))\nloader.addEventListener(\'load\', () => container.classList.add(\'is-success\'))\nloader.addEventListener(\'error\', () => container.classList.add(\'is-error\'))\n```\n\n### Options\n\nAttribute      | Options                        | Description\n---            | ---                            | ---\n`src`          | URL string                     | Required URL from which to load the replacement HTML element fragment.\n\n\n### Deferred loading\n\nThe request for replacement markup from the server starts when the `src` attribute becomes available on the `<include-fragment>` element. Most often this will happen at page load when the element is rendered. However, if we omit the `src` attribute until some later time, we can defer loading the content at all.\n\nThe [`<details-menu>`][menu] element uses this technique to defer loading menu content until the menu is first opened.\n\n[menu]: https://github.com/github/details-menu-element\n\n## Patterns\n\nDeferring the display of markup is typically done in the following usage patterns.\n\n- A user action begins a slow running background job on the server, like backing up files stored on the server. While the backup job is running, a progress bar is shown to the user. When it\'s complete, the include-fragment element is replaced with a link to the backup files.\n\n- The first time a user visits a page that contains a time-consuming piece of markup to generate, a loading indicator is displayed. When the markup is finished building on the server, it\'s stored in memcache and sent to the browser to replace the include-fragment loader. Subsequent visits to the page render the cached markup directly, without going through a include-fragment element.\n\n\n## Relation to Server Side Includes\n\nThis declarative approach is very similar to [SSI](http://en.wikipedia.org/wiki/Server_Side_Includes) or [ESI](http://en.wikipedia.org/wiki/Edge_Side_Includes) directives. In fact, an edge implementation could replace the markup before its actually delivered to the client.\n\n``` html\n<include-fragment src="/github/include-fragment/commit-count" timeout="100">\n  <p>Counting commits\xe2\x80\xa6</p>\n</include-fragment>\n```\n\nA proxy may attempt to fetch and replace the fragment if the request finishes before the timeout. Otherwise the tag is delivered to the client. This library only implements the client side aspect.\n\n## Browser support\n\nBrowsers without native [custom element support][support] require a [polyfill][]. Legacy browsers require various other polyfills. See [`examples/index.html`][example] for details.\n\n[example]: https://github.com/github/include-fragment-element/blob/master/examples/index.html#L5-L14\n\n- Chrome\n- Firefox\n- Safari\n- Microsoft Edge\n\n[support]: https://caniuse.com/#feat=custom-elementsv1\n[polyfill]: https://github.com/webcomponents/custom-elements\n\n## Development\n\n```\nnpm install\nnpm test\n```\n\n## License\n\nDistributed under the MIT license. See LICENSE for details.\n'