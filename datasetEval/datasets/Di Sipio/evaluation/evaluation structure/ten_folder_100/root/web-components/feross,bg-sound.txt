b'# bg-sound\n\n[![travis][travis-image]][travis-url] [![npm][npm-image]][npm-url] [![downloads][downloads-image]][downloads-url] [![javascript style guide][standard-image]][standard-url]\n\n[travis-image]: https://img.shields.io/travis/feross/bg-sound/master.svg\n[travis-url]: https://travis-ci.org/feross/bg-sound\n[npm-image]: https://img.shields.io/npm/v/bg-sound.svg\n[npm-url]: https://npmjs.org/package/bg-sound\n[downloads-image]: https://img.shields.io/npm/dm/bg-sound.svg\n[downloads-url]: https://npmjs.org/package/bg-sound\n[standard-image]: https://img.shields.io/badge/code_style-standard-brightgreen.svg\n[standard-url]: https://standardjs.com\n\n### Web Component to emulate the old-school `<bgsound>` HTML element\n\nPlay MIDI files in a browser with a simple Web Component, emulating\n[`<bgsound>`, the Background Sound element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/bgsound).\n\n## Install\n\n```\nnpm install bg-sound\n```\n\nThis package works in the browser with [browserify](https://browserify.org). If you do not use a bundler, you can use the [standalone script](https://bundle.run/bg-sound) directly in a `<script>` tag.\n\n## Usage\n\nAdd a custom HTML element called `<bg-sound>`:\n\n```html\n<script src="bg-sound.min.js"></script>\n<bg-sound src="sound.mid"></bg-sound>\n```\n\nAutomatically make legacy `<bgsound>` and `<embed>` HTML tags work:\n\n```html\n<!-- Must include *BEFORE* all <bgsound> and <embed> tags -->\n<script src="../bg-sound.min.js"></script>\n<script>BgSound.enableCompatMode()</script>\n\n<!-- All of the following HTML tags now work! -->\n<bgsound src="goldensun.mid">\n<embed src="goldensun.mid">\n<embed src="mario-death.mid" loop="2">\n<embed src="sound.wav">\n<embed src="sound.wav" loop=true>\n```\n\n## Talk\n\nI introduced this project in a talk at [JSConf Colombia 2018](https://jsconf.co/).\n\n[![The Lost Art of MIDI talk](img/slide.png)](https://speakerdeck.com/feross/the-lost-art-of-midi-bringing-back-to-the-web)\n\n- [Slides](https://speakerdeck.com/feross/the-lost-art-of-midi-bringing-back-to-the-web)\n- Talk video (coming soon!)\n\n## FAQ\n\n### Why is the tag called `<bg-sound>` (with a dash)?\n\nThe name of a custom HTML element must contain a dash (-). This is what the spec says, presumably because otherwise browsers could not introduce new HTML tags without web compatibility risk.\n\n### Why is the script tag required?\n\nThe script tag is needed to define the behavior of the `<bg-sound>` HTML element. Without it, the browser would just treat the tag like a `<div>`.\n\n### Where do the WebAssembly code and instrument sound files come from?\n\nBy default, these files will load remotely from [BitMidi](https://bitmidi.com). This is nice for simple demos and quick hacks. However, it is recommended to host these files yourself. (I reserve the right to remove the CORS headers which allow this to work at any time if too much bandwidth is used.)\n\n### What are the `timidity` and `freepats` packages?\n\n```bash\nnpm install timidity freepats\n```\n\nThe `<bg-sound>` custom element lazily loads a WebAssembly file and instrument\nsounds at runtime.\n\nThe [`timidity`](https://github.com/feross/timidity) package provides the WebAssembly file (`libtimidity.wasm`). The\n`freepats` package provides the instrument sound files.\n\nIt\'s important to ensure that the `timidity` and `freepats` folders in\n`node_modules` are being served to the public. For example, here is how to mount\nthe necessary files at `/` with the `express` server:\n\n```js\nconst timidityPath = path.dirname(require.resolve(\'timidity\'))\napp.use(express.static(timidityPath))\n\nconst freepatsPath = path.dirname(require.resolve(\'freepats\'))\napp.use(express.static(freepatsPath))\n```\n\nOptionally, provide a `baseUrl` attribute to customize where the player will\nlook for the lazy-loaded WebAssembly file `libtimidity.wasm` and the\n[FreePats General MIDI soundset](https://www.npmjs.com/package/freepats) files.\nThe default `baseUrl` is `https://bitmidi.com/timidity/`.\n\n```js\n<bg-sound src="sound.mid" baseUrl="/custom-path"></bg-sound>\n```\n\n### How do I automatically make legacy `<bgsound>` and `<embed>` tags work?\n\nInclude this code before any `<bgsound>` or `<embed>` HTML tags:\n\n```html\n<!-- Must include *BEFORE* all <bgsound> and <embed> tags -->\n<script src="../bg-sound.min.js"></script>\n<script>BgSound.enableCompatMode()</script>\n\n<!-- All of the following HTML tags now work! -->\n<bgsound src="goldensun.mid">\n<embed src="goldensun.mid">\n<embed src="mario-death.mid" loop="2">\n<embed src="sound.wav">\n<embed src="sound.wav" loop=true>\n```\n\nIf you want to provide your own `baseUrl`, then simply pass that into the `BgSound.enableCompatMode()` function call as follows:\n\n```js\nBgSound.enableCompatMode({ baseUrl: \'/custom-path\' })\n````\n\n## Demo\n\nIf you like this, then check out [BitMidi.com](https://bitmidi.com), the wayback machine for old-school MIDI files! Check out some examples MIDIs here:\n\n- [Adele - Skyfall](https://bitmidi.com/adele-skyfall-mid)\n- [Beatles - Imagine](https://bitmidi.com/beatles-imagine-mid)\n- [Beyonce - Crazy in Love](https://bitmidi.com/beyonce-crazy-in-love-mid)\n- [CANYON.MID](https://bitmidi.com/canyon-mid)\n- [Cowboy Bepop - Space Lion](https://bitmidi.com/cowboy-bepop-space-lion-mid)\n- [Eiffel 65 - Blue](https://bitmidi.com/dj-ali-eiffel-blue-mid)\n- [Kingdom Hearts - Dearly Beloved](https://bitmidi.com/kingdom-hearts-dearly-beloved-mid)\n- [Mario Bros. - Super Mario Bros. Theme](https://bitmidi.com/mario-bros-super-mario-bros-theme-mid)\n- [Passenger - Let Her Go](https://bitmidi.com/passenger-let_her_go-mid)\n- [Portal - Still Alive](https://bitmidi.com/portal-still-alive-mid)\n- [Rick Astley - Never Gonna Give You Up](https://bitmidi.com/r-astley-never-gonna-give-you-up-k-mid)\n- [Simpsons Theme Song](https://bitmidi.com/simpsons-mid)\n- [Sonic the Hedgehog - Green Hill Zone](https://bitmidi.com/sonic-the-hedgehog-green-hill-zone-mid)\n- [TOTO - Africa](https://bitmidi.com/toto-africa-k-mid)\n\n## License\n\nMIT. Copyright (c) [Feross Aboukhadijeh](https://feross.org).\n'