b'\nPa11y\n=====\n\nPa11y is your automated accessibility testing pal. It runs accessibility tests on your pages via the command line or Node.js, so you can automate your testing process.\n\n[![NPM version][shield-npm]][info-npm]\n[![Node.js version support][shield-node]][info-node]\n[![Build status][shield-build]][info-build]\n[![LGPL-3.0 licensed][shield-license]][info-license]\n\nOn the command line:\n\n```sh\npa11y http://example.com/\n```\n\nIn JavaScript:\n\n```js\nconst pa11y = require(\'pa11y\');\n\npa11y(\'http://example.com/\').then((results) => {\n    // Do something with the results\n});\n```\n\nIf you need a GUI, you can try [Koa11y](https://open-indy.github.io/Koa11y/). It\'s a desktop application for Windows, OSX and Linux that uses Pa11y to run accessibility tests.\n\nTable Of Contents\n-----------------\n\n- [Requirements](#requirements)\n- [Command-Line Interface](#command-line-interface)\n- [JavaScript Interface](#javascript-interface)\n- [Configuration](#configuration)\n- [Actions](#actions)\n- [Runners](#runners)\n- [Examples](#examples)\n- [Common Questions and Troubleshooting](#common-questions-and-troubleshooting)\n- [Tutorials and articles](#tutorials-and-articles)\n- [Contributing](#contributing)\n- [Support and Migration](#support-and-migration)\n- [License](#license)\n\n\nRequirements\n------------\n\nPa11y requires [Node.js][node] 8+ to run. If you need support for older versions of Node.js, then please use [Pa11y 4.x][4.x].\n\n### OS X\n\nTo install [Node.js][node] you can use [nvm][nvm]:\n```sh\n$ nvm install node\n```\n\nAlternatively on a Mac, you can install the required dependency with [Homebrew][brew]:\n\n```sh\n$ brew install node\n```\n\nYou can also download pre-built packages from the [Node.js][node] website.\n\n### Linux\n\nDepending on your flavour of Linux, you should be able to use a package manager to install the required dependency. Alternatively download pre-built packages from the [Node.js][node] website.\n\n### Windows\n\nOn Windows 10, download a pre-built package from the [Node.js][node] website. Pa11y will be usable via the bundled Node.js application as well as the Windows command prompt.\n\nWindows 7 and below users approach with caution \xe2\x80\x93 we\'ve been able to get Pa11y running but only after installing Visual Studio and the Windows SDK (as well as Git, and Python). The [Windows installation instructions for node-gyp][windows-install] are a good place to start. If you have had a better experience than this then please do share!\n\n\nCommand-Line Interface\n----------------------\n\nInstall Pa11y globally with [npm][npm]:\n\n```\nnpm install -g pa11y\n```\n\nThis installs the `pa11y` command-line tool:\n\n```\nUsage: pa11y [options] <url>\n\n  Options:\n\n    -V, --version                  output the version number\n    -n, --environment              output details about the environment Pa11y will run in\n    -s, --standard <name>          the accessibility standard to use: Section508, WCAG2A, WCAG2AA (default), WCAG2AAA \xe2\x80\x93 only used by htmlcs runner\n    -r, --reporter <reporter>      the reporter to use: cli (default), csv, json\n    -e, --runner <runner>          the test runners to use: htmlcs (default), axe\n    -l, --level <level>            the level of issue to fail on (exit with code 2): error, warning, notice\n    -T, --threshold <number>       permit this number of errors, warnings, or notices, otherwise fail with exit code 2\n    -i, --ignore <ignore>          types and codes of issues to ignore, a repeatable value or separated by semi-colons\n    --include-notices              Include notices in the report\n    --include-warnings             Include warnings in the report\n    -R, --root-element <selector>  a CSS selector used to limit which part of a page is tested\n    -E, --hide-elements <hide>     a CSS selector to hide elements from testing, selectors can be comma separated\n    -c, --config <path>            a JSON or JavaScript config file\n    -t, --timeout <ms>             the timeout in milliseconds\n    -w, --wait <ms>                the time to wait before running tests in milliseconds\n    -d, --debug                    output debug messages\n    -S, --screen-capture <path>    a path to save a screen capture of the page to\n    -A, --add-rule <rule>          WCAG 2.0 rules to include, a repeatable value or separated by semi-colons \xe2\x80\x93 only used by htmlcs runner\n    -h, --help                     output usage information\n```\n\n### Running Tests\n\nRun an accessibility test against a URL:\n\n```\npa11y http://example.com\n```\n\nRun an accessibility test against a file (absolute paths only, not relative):\n\n```\npa11y ./path/to/your/file.html\n```\n\nRun a test with CSV reporting and save to a file:\n\n```\npa11y --reporter csv http://example.com > report.csv\n```\n\nRun Pa11y with the Section508 ruleset:\n\n```\npa11y --standard Section508 http://example.com\n```\n\nRun Pa11y using [aXe] as a [test runner](#runners):\n\n```\npa11y --runner axe http://example.com\n```\n\nRun Pa11y using [aXe] _and_ [HTML CodeSniffer][htmlcs] as [test runners](#runners):\n\n```\npa11y --runner axe --runner htmlcs http://example.com\n```\n\n### Exit Codes\n\nThe command-line tool uses the following exit codes:\n\n  - `0`: Pa11y ran successfully, and there are no errors\n  - `1`: Pa11y failed run due to a technical fault\n  - `2`: Pa11y ran successfully but there are errors in the page\n\nBy default, only accessibility issues with a type of `error` will exit with a code of `2`. This is configurable with the `--level` flag which can be set to one of the following:\n\n  - `error`: exit with a code of `2` on errors only, exit with a code of `0` on warnings and notices\n  - `warning`: exit with a code of `2` on errors and warnings, exit with a code of `0` on notices\n  - `notice`: exit with a code of `2` on errors, warnings, and notices\n  - `none`: always exit with a code of `0`\n\n### Command-Line Configuration\n\nThe command-line tool can be configured with a JSON file as well as arguments. By default it will look for a `pa11y.json` file in the current directory, but you can change this with the `--config` flag:\n\n```\npa11y --config ./path/to/config.json http://example.com\n```\n\nIf any configuration is set both in a configuration file and also as a command-line option, the value set in the latter will take priority.\n\nFor more information on configuring Pa11y, see the [configuration documentation](#configuration).\n\n### Ignoring\n\nThe ignore flag can be used in several different ways. Separated by semi-colons:\n\n```\npa11y --ignore "issue-code-1;issue-code-2" http://example.com\n```\n\nor by using the flag multiple times:\n\n```\npa11y --ignore issue-code-1 --ignore issue-code-2 http://example.com\n```\n\nPa11y can also ignore notices, warnings, and errors up to a threshold number. This might be useful if you\'re using CI and don\'t want to break your build. The following example will return exit code 0 on a page with 9 errors, and return exit code 2 on a page with 10 or more errors.\n\n```\npa11y --threshold 10 http://example.com\n```\n\n### Reporters\n\nThe command-line tool can report test results in a few different ways using the `--reporter` flag. The built-in reporters are:\n\n  - `cli`: output test results in a human-readable format\n  - `csv`: output test results as comma-separated values\n  - `json`: output test results as a JSON array\n\nThe Pa11y team maintain some additional reporters which can be installed separately via `npm`:\n\n  - [`html`](https://github.com/pa11y/pa11y-reporter-html): output test results in a self-contained HTML format (`npm install pa11y-reporter-html`)\n  - [`tsv`](https://github.com/pa11y/pa11y-reporter-tsv): output test results as tab-separated values (`npm install pa11y-reporter-tsv`)\n\nYou can also write and publish your own reporters. Pa11y looks for reporters in your `node_modules` folder (with a naming pattern), and the current working directory. The first reporter found will be loaded. So with this command:\n\n```sh\npa11y --reporter rainbows http://example.com\n```\n\nThe following locations will be checked:\n\n```\n<cwd>/node_modules/pa11y-reporter-rainbows\n<cwd>/rainbows\n```\n\nA Pa11y reporter _must_ export a property named `supports`. This is a [semver range] (as a string) which indicates which versions of Pa11y the reporter supports:\n\n```js\nexports.supports = \'^5.0.0\';\n```\n\nA reporter should export the following methods, which should all return strings. If your reporter needs to perform asynchronous operations, then it may return a promise which resolves to a string:\n\n```js\nbegin(); // Called when pa11y starts\nerror(message); // Called when a technical error is reported\ndebug(message); // Called when a debug message is reported\ninfo(message); // Called when an information message is reported\nresults(results); // Called with the results of a test run\n```\n\n\nJavaScript Interface\n--------------------\n\nInstall Pa11y with [npm][npm] or add to your `package.json`:\n\n```sh\nnpm install pa11y\n```\n\nRequire Pa11y:\n\n```js\nconst pa11y = require(\'pa11y\');\n```\n\nRun Pa11y against a URL, the `pa11y` function returns a [Promise]:\n\n```js\npa11y(\'http://example.com/\').then((results) => {\n    // Do something with the results\n});\n```\n\nPa11y can also be run with [some options](#configuration):\n\n```js\npa11y(\'http://example.com/\', {\n    // Options go here\n}).then((results) => {\n    // Do something with the results\n});\n```\n\nPa11y resolves with a `results` object, containing details about the page and accessibility issues from HTML CodeSniffer. It looks like this:\n\n```js\n{\n    documentTitle: \'The title of the page that was tested\',\n    pageUrl: \'The URL that Pa11y was run against\',\n    issues: [\n        {\n            code: \'WCAG2AA.Principle1.Guideline1_1.1_1_1.H30.2\',\n            context: \'<a href="http://example.com/"><img src="example.jpg" alt=""/></a>\',\n            message: \'Img element is the only content of the link, but is missing alt text. The alt text should describe the purpose of the link.\',\n            selector: \'html > body > p:nth-child(1) > a\',\n            type: \'error\',\n            typeCode: 1\n        }\n        // more issues appear here\n    ]\n}\n```\n\n### Transforming the Results\n\nIf you wish to transform these results with the command-line reporters, then you can do so in your code by requiring them in. The `csv`, `tsv`, `html`, `json`, and `markdown` reporters all expose a `process` method:\n\n```js\n// Assuming you\'ve already run tests, and the results\n// are available in a `results` variable:\nconst htmlReporter = require(\'pa11y/reporter/html\');\nconst html = await htmlReporter.results(results, url);\n```\n\n### Async/Await\n\nBecause Pa11y is promise based, you can use `async` functions and the `await` keyword:\n\n```js\nasync function runPa11y() {\n    try {\n        const results = await pa11y(\'http://example.com/\');\n        // Do something with the results\n    } catch (error) {\n        // Handle the error\n    }\n}\n\nrunPa11y();\n```\n\n### Callback Interface\n\nIf you would rather use callbacks than promises or `async`/`await`, then Pa11y supports this. This interface should be considered legacy, however, and may not appear in the next major version of Pa11y:\n\n```js\npa11y(\'http://example.com/\', (error, results) => {\n    // Do something with the results or handle the error\n});\n```\n\n### Validating Actions\n\nPa11y exposes a function which allows you to validate [action](#actions) strings before attempting to use them.\n\nThis function accepts an action string and returns a boolean indicating whether it matches one of the actions that Pa11y supports:\n\n```js\npa11y.isValidAction(\'click element #submit\');  // true\npa11y.isValidAction(\'open the pod bay doors\'); // false\n```\n\n\nConfiguration\n-------------\n\nPa11y has lots of options you can use to change the way Headless Chrome runs, or the way your page is loaded. Options can be set either as a parameter on the `pa11y` function or in a [JSON configuration file](#command-line-configuration). Some are also available directly as [command-line options](#command-line-interface).\n\nBelow is a reference of all the options that are available:\n\n### `actions` (array) **BETA**\n\nActions to be run before Pa11y tests the page. There are quite a few different actions available in Pa11y, the [Actions documentation](#actions) outlines each of them.\n\n**Note:** actions are currently in a beta state and the API may change while we gather feedback.\n\n```js\npa11y(\'http://example.com/\', {\n    actions: [\n        \'set field #username to exampleUser\',\n        \'set field #password to password1234\',\n        \'click element #submit\',\n        \'wait for path to be /myaccount\'\n    ]\n});\n```\n\nDefaults to an empty array.\n\n### `browser` (Browser) and `page` (Page)\n\nA [Puppeteer Browser instance][puppeteer-browser] which will be used in the test run. Optionally you may also supply a [Puppeteer Page instance][puppeteer-page], but this cannot be used between test runs as event listeners would be bound multiple times.\n\nIf either of these options are provided then there are several things you need to consider:\n\n  1. Pa11y\'s `chromeLaunchConfig` option will be ignored, you\'ll need to pass this configuration in when you create your Browser instance\n  2. Pa11y will not automatically close the Browser when the tests have finished running, you will need to do this yourself if you need the Node.js process to exit\n  3. It\'s important that you use a version of Puppeteer that meets the range specified in Pa11y\'s `package.json`\n  4. You _cannot_ reuse page instances between multiple test runs, doing so will result in an error. The page option allows you to do things like take screen-shots on a Pa11y failure or execute your own JavaScript before Pa11y\n\n**Note:** This is an advanced option. If you\'re using this, please mention in any issues you open on Pa11y and double-check that the Puppeteer version you\'re using matches Pa11y\'s.\n\n```js\nconst browser = await puppeteer.launch({\n    ignoreHTTPSErrors: true\n});\n\npa11y(\'http://example.com/\', {\n    browser: browser\n});\n\nbrowser.close();\n```\n\nA more complete example can be found in the [puppeteer examples](#puppeteer-example).\n\nDefaults to `null`.\n\n### `chromeLaunchConfig` (object)\n\nLaunch options for the Headless Chrome instance. [See the Puppeteer documentation for more information][puppeteer-launch].\n\n```js\npa11y(\'http://example.com/\', {\n    chromeLaunchConfig: {\n        executablePath: \'/path/to/Chrome\',\n        ignoreHTTPSErrors: false\n    }\n});\n```\n\nDefaults to:\n\n```js\n{\n    ignoreHTTPSErrors: true\n}\n```\n\n### `headers` (object)\n\nA key-value map of request headers to send when testing a web page.\n\n```js\npa11y(\'http://example.com/\', {\n    headers: {\n        Cookie: \'foo=bar\'\n    }\n});\n```\n\nDefaults to an empty object.\n\n### `hideElements` (string)\n\nA CSS selector to hide elements from testing, selectors can be comma separated. Elements matching this selector will be hidden from testing by styling them with `visibility: hidden`.\n\n```js\npa11y(\'http://example.com/\', {\n    hideElements: \'.advert, #modal, div[aria-role=presentation]\'\n});\n```\n\n### `ignore` (array)\n\nAn array of result codes and types that you\'d like to ignore. You can find the codes for each rule in the console output and the types are `error`, `warning`, and `notice`. Note: `warning` and `notice` messages are ignored by default.\n\n```js\npa11y(\'http://example.com/\', {\n    ignore: [\n        \'WCAG2AA.Principle3.Guideline3_1.3_1_1.H57.2\'\n    ]\n});\n```\n\nDefaults to an empty array.\n\n### `ignoreUrl` (boolean)\n\nWhether to use the provided [Puppeteer Page instance][puppeteer-page] as is or use the provided url. Both the [Puppeteer Page instance][puppeteer-page] and the [Puppeteer Browser instance][puppeteer-browser] are required alongside `ignoreUrl`.\n\n```js\nconst browser = await puppeteer.launch();\nconst page = await browser.newPage();\n\npa11y(\'http://example.com/\', {\n    ignoreUrl: true,\n    page: page,\n    browser: browser\n});\n```\n\nDefaults to `false`.\n\n### `includeNotices` (boolean)\n\nWhether to include results with a type of `notice` in the Pa11y report. Issues with a type of `notice` are not directly actionable and so they are excluded by default. You can include them by using this option:\n\n```js\npa11y(\'http://example.com/\', {\n    includeNotices: true\n});\n```\n\nDefaults to `false`.\n\n### `includeWarnings` (boolean)\n\nWhether to include results with a type of `warning` in the Pa11y report. Issues with a type of `warning` are not directly actionable and so they are excluded by default. You can include them by using this option:\n\n```js\npa11y(\'http://example.com/\', {\n    includeWarnings: true\n});\n```\n\nDefaults to `false`.\n\n### `level` (string)\n\nThe level of issue which can fail the test (and cause it to exit with code 2) when running via the CLI. This should be one of `error` (the default), `warning`, or `notice`.\n\n```json\n{\n    "level": "warning"\n}\n```\n\nDefaults to `error`. Note this configuration is only available when using Pa11y on the command line, not via the JavaScript Interface.\n\n### `log` (object)\n\nAn object which implements the methods `debug`, `error`, and `info` which will be used to report errors and test information.\n\n```js\npa11y(\'http://example.com/\', {\n    log: {\n        debug: console.log,\n        error: console.error,\n        info: console.info\n    }\n});\n```\n\nEach of these defaults to an empty function.\n\n### `method` (string)\n\nThe HTTP method to use when running Pa11y.\n\n```js\npa11y(\'http://example.com/\', {\n    method: \'POST\'\n});\n```\n\nDefaults to `GET`.\n\n### `postData` (string)\n\nThe HTTP POST data to send when running Pa11y. This should be combined with a `Content-Type` header. E.g to send form data:\n\n```js\npa11y(\'http://example.com/\', {\n    headers: {\n        \'Content-Type\': \'application/x-www-form-urlencoded\'\n    },\n    method: \'POST\',\n    postData: \'foo=bar&bar=baz\'\n});\n```\n\nOr to send JSON data:\n\n```js\npa11y(\'http://example.com/\', {\n    headers: {\n        \'Content-Type\': \'application/json\'\n    },\n    method: \'POST\',\n    postData: \'{"foo": "bar", "bar": "baz"}\'\n});\n```\n\nDefaults to `null`.\n\n### `reporter` (string)\n\nThe reporter to use while running the test via the CLI. [More about reporters](#reporters).\n\n```json\n{\n    "reporter": "json"\n}\n```\n\nDefaults to `cli`. Note this configuration is only available when using Pa11y on the command line, not via the JavaScript Interface.\n\n### `rootElement` (element)\n\nThe root element for testing a subset of the page opposed to the full document.\n\n```js\npa11y(\'http://example.com/\', {\n    rootElement: \'#main\'\n});\n```\nDefaults to `null`, meaning the full document will be tested. If the specified root element isn\'t found, the full document will be tested.\n\n### `runners` (array)\n\nAn array of runner names which correspond to existing and installed [Pa11y runners](#runners). If a runner is not found then Pa11y will error.\n\n```js\npa11y(\'http://example.com/\', {\n    runners: [\n        \'axe\',\n        \'htmlcs\'\n    ]\n});\n```\n\nDefaults to:\n\n```js\n[\n    \'htmlcs\'\n]\n```\n\n### `rules` (array)\n\nAn array of WCAG 2.0 guidelines that you\'d like to include to the current standard. Note: These won\'t be applied to `Section508` standard. You can find the codes for each guideline in the [HTML Code Sniffer WCAG2AAA ruleset][htmlcs-wcag2aaa-ruleset]. **Note:** only used by htmlcs runner.\n\n```js\npa11y(\'http://example.com/\', {\n    rules: [\n        \'Principle1.Guideline1_3.1_3_1_AAA\'\n    ]\n});\n```\n\n### `screenCapture` (string)\n\nA file path to save a screen capture of the tested page to. The screen will be captured immediately after the Pa11y tests have run so that you can verify that the expected page was tested.\n\n```js\npa11y(\'http://example.com/\', {\n    screenCapture: `${__dirname}/my-screen-capture.png`\n});\n```\n\nDefaults to `null`, meaning the screen will not be captured. Note the directory part of this path must be an existing directory in the file system \xe2\x80\x93 Pa11y will not create this for you.\n\n### `standard` (string)\n\nThe accessibility standard to use when testing pages. This should be one of `Section508`, `WCAG2A`, `WCAG2AA`, or `WCAG2AAA`. **Note:** only used by htmlcs runner.\n\n```js\npa11y(\'http://example.com/\', {\n    standard: \'Section508\'\n});\n```\n\nDefaults to `WCAG2AA`.\n\n### `threshold` (number)\n\nThe number of errors, warnings, or notices to permit before the test is considered to have failed (with exit code 2) when running via the CLI.\n\n```json\n{\n    "threshold": 9\n}\n```\n\nDefaults to `0`. Note this configuration is only available when using Pa11y on the command line, not via the JavaScript Interface.\n\n### `timeout` (number)\n\nThe time in milliseconds that a test should be allowed to run before calling back with a timeout error.\n\nPlease note that this is the timeout for the _entire_ test run (including time to initialise Chrome, load the page, and run the tests).\n\n```js\npa11y(\'http://example.com/\', {\n    timeout: 500\n});\n```\n\nDefaults to `30000`.\n\n### `userAgent` (string)\n\nThe `User-Agent` header to send with Pa11y requests. This is helpful to identify Pa11y in your logs.\n\n```js\npa11y(\'http://example.com/\', {\n    userAgent: \'A11Y TESTS\'\n});\n```\n\nDefaults to `pa11y/<version>`.\n\n### `viewport` (object)\n\nThe viewport configuration. This can have any of the properties supported by the [puppeteer `setViewport` method][puppeteer-viewport].\n\n```js\npa11y(\'http://example.com/\', {\n    viewport: {\n        width: 320,\n        height: 480,\n        deviceScaleFactor: 2,\n        isMobile: true\n    }\n});\n```\n\nDefaults to:\n\n```js\n{\n    width: 1280,\n    height: 1024\n}\n```\n\n### `wait` (number)\n\nThe time in milliseconds to wait before running HTML CodeSniffer on the page.\n\n```js\npa11y(\'http://example.com/\', {\n    wait: 500\n});\n```\n\nDefaults to `0`.\n\n\nActions\n-------\n\nActions are additional interactions that you can make Pa11y perform before the tests are run. They allow you to do things like click on a button, enter a value in a form, wait for a redirect, or wait for the URL fragment to change:\n\n```js\npa11y(\'http://example.com/\', {\n    actions: [\n        \'click element #tab-1\',\n        \'wait for element #tab-1-content to be visible\',\n        \'set field #fullname to John Doe\',\n        \'check field #terms-and-conditions\',\n        \'uncheck field #subscribe-to-marketing\',\n        \'screen capture example.png\',\n        \'wait for fragment to be #page-2\',\n        \'wait for path to not be /login\',\n        \'wait for url to be https://example.com/\',\n        \'wait for #my-image to emit load\',\n        \'navigate to https://another-example.com/\'\n    ]\n});\n```\n\nBelow is a reference of all the available actions and what they do on the page. Some of these take time to complete so you may need to increase the `timeout` option if you have a large set of actions.\n\n### Click Element\n\nThis allows you to click an element by passing in a CSS selector. This action takes the form `click element <selector>`. E.g.\n\n```js\npa11y(\'http://example.com/\', {\n    actions: [\n        \'click element #tab-1\'\n    ]\n});\n```\nYou can use any valid [query selector](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector), including classes and types.\n\n### Set Field Value\n\nThis allows you to set the value of a text-based input or select box by passing in a CSS selector and value. This action takes the form `set field <selector> to <value>`. E.g.\n\n```js\npa11y(\'http://example.com/\', {\n    actions: [\n        \'set field #fullname to John Doe\'\n    ]\n});\n```\n\n### Check/Uncheck Field\n\nThis allows you to check or uncheck checkbox and radio inputs by passing in a CSS selector. This action takes the form `check field <selector>` or `uncheck field <selector>`. E.g.\n\n```js\npa11y(\'http://example.com/\', {\n    actions: [\n        \'check field #terms-and-conditions\',\n        \'uncheck field #subscribe-to-marketing\'\n    ]\n});\n```\n\n### Screen Capture\n\nThis allows you to capture the screen between other actions, useful to verify that the page looks as you expect before the Pa11y test runs. This action takes the form `screen capture <file-path>`. E.g.\n\n```js\npa11y(\'http://example.com/\', {\n    actions: [\n        \'screen capture example.png\'\n    ]\n});\n```\n\n### Wait For Fragment/Path/URL\n\nThis allows you to pause the test until a condition is met, and the page has either a given fragment, path, or URL. This will wait until Pa11y times out so it should be used after another action that would trigger the change in state. You can also wait until the page does **not** have a given fragment, path, or URL using the `to not be` syntax. This action takes one of the forms:\n\n  - `wait for fragment to be <fragment>` (including the preceding `#`)\n  - `wait for fragment to not be <fragment>` (including the preceding `#`)\n  - `wait for path to be <path>` (including the preceding `/`)\n  - `wait for path to not be <path>` (including the preceding `/`)\n  - `wait for url to be <url>`\n  - `wait for url to not be <url>`\n\nE.g.\n\n```js\npa11y(\'http://example.com/\', {\n    actions: [\n        \'click element #login-link\',\n        \'wait for path to be /login\'\n    ]\n});\n```\n\n### Wait For Element State\n\nThis allows you to pause the test until an element on the page (matching a CSS selector) is either added, removed, visible, or hidden. This will wait until Pa11y times out so it should be used after another action that would trigger the change in state. This action takes one of the forms:\n\n  - `wait for element <selector> to be added`\n  - `wait for element <selector> to be removed`\n  - `wait for element <selector> to be visible`\n  - `wait for element <selector> to be hidden`\n\nE.g.\n\n```js\npa11y(\'http://example.com/\', {\n    actions: [\n        \'click element #tab-2\',\n        \'wait for element #tab-1 to be hidden\'\n    ]\n});\n```\n\n### Wait For Element Event\n\nThis allows you to pause the test until an element on the page (matching a CSS selector) emits an event. This will wait until Pa11y times out so it should be used after another action that would trigger the event. This action takes the form `wait for element <selector> to emit <event-type>`. E.g.\n\n```js\npa11y(\'http://example.com/\', {\n    actions: [\n        \'click element #tab-2\',\n        \'wait for element #tab-panel-to to emit content-loaded\'\n    ]\n});\n```\n\n### Navigate To URL\n\nThis action allows you to navigate to a new URL if, for example, the URL is inaccessible using other methods. This action takes the form `navigate to <url>`. E.g.\n\n```js\npa11y(\'http://example.com/\', {\n    actions: [\n        \'navigate to http://another-example.com\'\n    ]\n});\n```\n\n\nRunners\n-------\n\nPa11y supports multiple test runners which return different results. The built-in test runners are:\n\n  - `axe`: run tests using [aXe-core][axe].\n  - `htmlcs` (default): run tests using [HTML CodeSniffer][htmlcs]\n\nYou can also write and publish your own runners. Pa11y looks for runners in your `node_modules` folder (with a naming pattern), and the current working directory. The first runner found will be loaded. So with this command:\n\n```\npa11y --runner my-testing-tool http://example.com\n```\n\nThe following locations will be checked:\n\n```\n<cwd>/node_modules/pa11y-runner-my-testing-tool\n<cwd>/node_modules/my-testing-tool\n<cwd>/my-testing-tool\n```\n\nA Pa11y runner _must_ export a property named `supports`. This is a [semver range] (as a string) which indicates which versions of Pa11y the runner supports:\n\n```js\nexports.supports = \'^5.0.0\';\n```\n\nA Pa11y runner _must_ export a property named `scripts`. This is an array of strings which are paths to scripts which need to load before the tests can be run. This may be empty:\n\n```js\nexports.scripts = [\n    `${__dirname}/vendor/example.js`\n];\n```\n\nA runner _must_ export a `run` method, which returns a promise that resolves with test results (it\'s advisable to use an `async` function). The `run` method is evaluated in a browser context and so has access to a global `window` object.\n\nThe `run` method _must not_ use anything that\'s been imported using `require`, as it\'s run in a browser context. Doing so will error.\n\nThe `run` method is called with two arguments:\n\n  - `options`: Options specified in the test runner\n  - `pa11y`: The Pa11y test runner, which includes some helper methods:\n    - `pa11y.getElementContext(element)`: Get a short HTML context snippet for an element\n    - `pa11y.getElementSelector(element)`: Get a unique selector with which you can select this element in a page\n\nThe `run` method _must_ resolve with an array of Pa11y issues. These follow the format:\n\n```js\n{\n    code: \'123\', // An ID or code which identifies this error\n    element: {}, // The HTML element this issue relates to, or null if no element is found\n    message: \'example\', // A descriptive message outlining the issue\n    type: \'error\', // A type of "error", "warning", or "notice"\n    runnerExtras: {} // Additional data that your runner can provide, but isn\'t used by Pa11y\n}\n```\n\n\nExamples\n--------\n\n### Basic Example\n\nRun Pa11y on a URL and output the results. [See the example](example/basic/index.js).\n\n### Multiple Example\n\nRun Pa11y on multiple URLs at once and output the results. [See the example](example/multiple/index.js).\n\n### Actions Example\n\nStep through some actions before Pa11y runs. This example logs into a fictional site then waits until the account page has loaded before running Pa11y. [See the example](example/actions/index.js).\n\n### Puppeteer Example\n\nPass in pre-created Puppeteer browser and page instances so that you can reuse them between tests. [See the example](example/puppeteer/index.js).\n\n\nCommon Questions and Troubleshooting\n------------------------------------\n\nSee our [Troubleshooting guide](TROUBLESHOOTING.md) to get the answers to common questions about Pa11y, along with some ideas to help you troubleshoot any problems.\n\n\nTutorials and articles\n------------------------------------\n\nHere are some useful articles written by Pa11y users and contributors:\n\n- [Accessibility Testing with Pa11y](https://bitsofco.de/pa11y/)\n- [Using actions in Pa11y](http://hollsk.co.uk/posts/view/using-actions-in-pa11y)\n- [Introduction to Accessibility Testing With Pa11y](http://cruft.io/posts/accessibility-testing-with-pa11y/)\n\n\nContributing\n------------\n\nThere are many ways to contribute to Pa11y, we cover these in the [contributing guide](CONTRIBUTING.md) for this repo.\n\nIf you\'re ready to contribute some code, clone this repo locally and commit your code on a new branch.\n\nPlease write unit tests for your code, and check that everything works by running the following before opening a <abbr title="pull request">PR</abbr>:\n\n```sh\nmake ci\n```\n\nYou can also run verifications and tests individually:\n\n```sh\nmake verify              # Verify all of the code (ESLint)\nmake test                # Run all tests\nmake test-unit           # Run the unit tests\nmake test-unit-coverage  # Run the unit tests with coverage\nmake test-integration    # Run the integration tests\n```\n\nTo debug a test file you need to ensure that [setup.test.js](test/integration/setup.test.js) is ran before the test file. This adds a `before/each` to start and stop the integration test server.\n\nSupport and Migration\n---------------------\n\nPa11y major versions are normally supported for 6 months after their last minor release. This means that patch-level changes will be added and bugs will be fixed. The table below outlines the end-of-support dates for major versions, and the last minor release for that version.\n\nWe also maintain a [migration guide](MIGRATION.md) to help you migrate.\n\n| :grey_question: | Major Version | Last Minor Release | Node.js Versions | Support End Date |\n| :-------------- | :------------ | :----------------- | :--------------- | :--------------- |\n| :heart:         | 5             | N/A                | 8+               | N/A              |\n| :skull:         | 4             | 4.13               | 4\xe2\x80\x938              | 2018-08-15       |\n| :skull:         | 3             | 3.8                | 0.12\xe2\x80\x936           | 2016-12-05       |\n| :skull:         | 2             | 2.4                | 0.10\xe2\x80\x930.12        | 2016-10-16       |\n| :skull:         | 1             | 1.7                | 0.10             | 2016-06-08       |\n\nIf you\'re opening issues related to these, please mention the version that the issue relates to.\n\nLicense\n-------\n\nPa11y is licensed under the [Lesser General Public License (LGPL-3.0)][info-license].<br/>\nCopyright &copy; 2013\xe2\x80\x932019, Team Pa11y and contributors\n\n[1.0-json-reporter]: https://github.com/pa11y/reporter-1.0-json\n[4.x]: https://github.com/pa11y/pa11y/tree/4.x\n[async]: https://github.com/caolan/async\n[axe]: https://www.axe-core.org/\n[brew]: http://mxcl.github.com/homebrew/\n[htmlcs-wcag2aaa-ruleset]: https://github.com/pa11y/pa11y/wiki/HTML-CodeSniffer-Rules\n[node]: http://nodejs.org/\n[npm]: https://www.npmjs.com/\n[nvm]: https://github.com/nvm-sh/nvm\n[promise]: https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise\n[puppeteer-browser]: https://github.com/GoogleChrome/puppeteer/blob/master/docs/api.md#class-browser\n[puppeteer-launch]: https://github.com/GoogleChrome/puppeteer/blob/master/docs/api.md#puppeteerlaunchoptions\n[puppeteer-page]: https://github.com/GoogleChrome/puppeteer/blob/master/docs/api.md#class-page\n[puppeteer-viewport]: https://github.com/GoogleChrome/puppeteer/blob/master/docs/api.md#pagesetviewportviewport\n[semver range]: https://github.com/npm/node-semver#ranges\n[sidekick-proposal]: https://github.com/pa11y/sidekick/blob/master/PROPOSAL.md\n[htmlcs]: http://squizlabs.github.com/HTML_CodeSniffer/\n[windows-install]: https://github.com/TooTallNate/node-gyp#installation\n\n[info-license]: LICENSE\n[info-node]: package.json\n[info-npm]: https://www.npmjs.com/package/pa11y\n[info-build]: https://travis-ci.org/pa11y/pa11y\n[shield-license]: https://img.shields.io/badge/license-LGPL%203.0-blue.svg\n[shield-node]: https://img.shields.io/node/v/pa11y.svg\n[shield-npm]: https://img.shields.io/npm/v/pa11y.svg\n[shield-build]: https://img.shields.io/travis/pa11y/pa11y/master.svg\n'