b'## Node.js+Mongoose\xe7\x9a\x84RestfulApi\xe7\x9a\x84\xe7\x94\xa8\xe6\x88\xb7token\xe6\x9d\x83\xe9\x99\x90\xe9\xaa\x8c\xe8\xaf\x81\n\n### \xe5\x85\xb3\xe4\xba\x8e\xe5\xae\x89\xe5\x85\xa8\xe6\x80\xa7\xe6\x96\xb9\xe9\x9d\xa2\xe7\x9a\x84\xe5\xbb\xba\xe8\xae\xae\n\n\xe5\x8f\xaf\xe4\xbb\xa5\xe5\x8f\x82\xe8\x80\x83\xe8\xbf\x99\xe7\xaf\x87\xe6\x80\xbb\xe7\xbb\x93  [\xe5\xbc\x80\xe5\x8f\x91\xe5\xae\x89\xe5\x85\xa8\xe7\x9a\x84 API \xe6\x89\x80\xe9\x9c\x80\xe8\xa6\x81\xe6\xa0\xb8\xe5\xaf\xb9\xe7\x9a\x84\xe6\xb8\x85\xe5\x8d\x95](https://github.com/shieldfy/API-Security-Checklist/blob/master/README-zh.md)\n\n### \xe5\xae\x89\xe8\xa3\x85\n`git clone https://github.com/Nicksapp/nAuth-restful-api.git`\n\n### \xe8\xbf\x90\xe8\xa1\x8c\n`npm install`\n\n\xe5\x85\xb7\xe4\xbd\x93\xe6\x95\xb0\xe6\x8d\xae\xe5\xba\x93\xe9\x85\x8d\xe7\xbd\xae\xe4\xbf\xa1\xe6\x81\xaf\xe5\x9c\xa8config.js\xe4\xb8\xad\xe8\xae\xbe\xe7\xbd\xae\n\n### \xe6\x95\xb4\xe4\xbd\x93\xe6\x9e\x84\xe6\x9e\xb6\n\xe5\xbc\x80\xe5\x8f\x91\xe5\x89\x8d\xe5\x85\x88\xe8\xbf\x9b\xe8\xa1\x8c\xe6\x88\x91\xe4\xbb\xac\xe8\xae\xbe\xe8\xae\xa1\xe7\x9a\x84\xe6\x9e\x84\xe6\x83\xb3\n\n* \xe8\xb7\xaf\xe7\x94\xb1\xe8\xae\xbe\xe8\xae\xa1\n    * POST /api/signup: \xe7\x94\xa8\xe6\x88\xb7\xe6\xb3\xa8\xe5\x86\x8c\n    * POST /api/user/accesstoken: \xe8\xb4\xa6\xe5\x8f\xb7\xe9\xaa\x8c\xe8\xaf\x81,\xe8\x8e\xb7\xe5\x8f\x96token\n    * GET /api/user/user_info: \xe8\x8e\xb7\xe5\xbe\x97\xe7\x94\xa8\xe6\x88\xb7\xe4\xbf\xa1\xe6\x81\xaf,\xe9\x9c\x80\xe9\xaa\x8c\xe8\xaf\x81\n\n* user \xe6\xa8\xa1\xe5\x9e\x8b\xe8\xae\xbe\xe8\xae\xa1\n    * name : \xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d\n    * password: \xe5\xaf\x86\xe7\xa0\x81\n    * token: \xe9\xaa\x8c\xe8\xaf\x81\xe7\x9b\xb8\xe5\x85\xb3token\n    \n### \xe5\x85\xb3\xe4\xba\x8eRESTful API\n\xe7\xbd\x91\xe4\xb8\x8a\xe5\xb7\xb2\xe7\xbb\x8f\xe6\x9c\x89\xe4\xba\x86\xe5\xbe\x88\xe5\xa4\x9a\xe5\x85\xb3\xe4\xba\x8eRESTful\xe7\x9a\x84\xe4\xbb\x8b\xe7\xbb\x8d\xef\xbc\x8c\xe6\x88\x91\xe8\xbf\x99\xe9\x87\x8c\xe4\xb9\x9f\xe4\xb8\x8d\xe8\xbf\x87\xe5\xa4\x9a\xe9\x87\x8d\xe5\xa4\x8d\xe4\xba\x86\xe3\x80\x82\xe6\x83\xb3\xe8\xaf\xb4\xe7\x9a\x84\xe5\xb0\xb1\xe6\x98\xaf\xe5\xae\x83\xe7\x9a\x84\xe4\xb8\xbb\xe8\xa6\x81\xe4\xbd\x9c\xe7\x94\xa8\xef\xbc\x8c\xe5\xb0\xb1\xe6\x98\xaf\xe5\xaf\xb9\xe4\xba\x8e\xe7\x8e\xb0\xe5\xa6\x82\xe4\xbb\x8a\xe7\x9a\x84\xe7\xbd\x91\xe7\xbb\x9c\xe5\xba\x94\xe7\x94\xa8\xe7\xa8\x8b\xe5\xba\x8f\xef\xbc\x8c\xe5\x88\x86\xe4\xb8\xba\xe5\x89\x8d\xe7\xab\xaf\xe5\x92\x8c\xe5\x90\x8e\xe7\xab\xaf\xe4\xb8\xa4\xe4\xb8\xaa\xe9\x83\xa8\xe5\x88\x86\xef\xbc\x8c\xe7\x84\xb6\xe8\x80\x8c\xe5\xbd\x93\xe5\x89\x8d\xe7\x9a\x84\xe5\x8f\x91\xe5\xb1\x95\xe8\xb6\x8b\xe5\x8a\xbf\xe5\xb0\xb1\xe6\x98\xaf\xe5\xba\x94\xe7\x94\xa8\xe5\xb9\xb3\xe5\x8f\xb0\xe9\x9c\x80\xe6\xb1\x82\xe7\x9a\x84\xe6\x89\xa9\xe5\xa4\xa7(IOS\xe3\x80\x81Android\xe3\x80\x81Webapp\xe7\xad\x89\xe7\xad\x89)\n\n\xe5\x9b\xa0\xe6\xad\xa4\xef\xbc\x8c\xe5\xb0\xb1\xe9\x9c\x80\xe8\xa6\x81\xe4\xb8\x80\xe7\xa7\x8d\xe7\xbb\x9f\xe4\xb8\x80\xe7\x9a\x84\xe6\x9c\xba\xe5\x88\xb6\xef\xbc\x8c\xe6\x96\xb9\xe4\xbe\xbf\xe4\xb8\x8d\xe5\x90\x8c\xe7\x9a\x84\xe5\xba\x94\xe7\x94\xa8\xe5\xb9\xb3\xe5\x8f\xb0\xe7\x9a\x84\xe5\x89\x8d\xe7\xab\xaf\xe8\xae\xbe\xe5\xa4\x87\xe4\xb8\x8e\xe5\x90\x8e\xe7\xab\xaf\xe8\xbf\x9b\xe8\xa1\x8c\xe9\x80\x9a\xe4\xbf\xa1\xef\xbc\x8c\xe4\xb9\x9f\xe5\xb0\xb1\xe6\x98\xaf\xe5\x89\x8d\xe5\x90\x8e\xe7\xab\xaf\xe7\x9a\x84\xe5\x88\x86\xe7\xa6\xbb\xe3\x80\x82\xe8\xbf\x99\xe5\xaf\xbc\xe8\x87\xb4\xe4\xba\x86API\xe6\x9e\xb6\xe6\x9e\x84\xe7\x9a\x84\xe6\xb5\x81\xe8\xa1\x8c\xef\xbc\x8c\xe7\x94\x9a\xe8\x87\xb3\xe5\x87\xba\xe7\x8e\xb0"API First"\xe7\x9a\x84\xe8\xae\xbe\xe8\xae\xa1\xe6\x80\x9d\xe6\x83\xb3\xe3\x80\x82RESTful API\xe5\x88\x99\xe6\x98\xaf\xe7\x9b\xae\xe5\x89\x8d\xe6\xaf\x94\xe8\xbe\x83\xe6\x88\x90\xe7\x86\x9f\xe7\x9a\x84\xe4\xb8\x80\xe5\xa5\x97\xe4\xba\x92\xe8\x81\x94\xe7\xbd\x91\xe5\xba\x94\xe7\x94\xa8\xe7\xa8\x8b\xe5\xba\x8f\xe7\x9a\x84API\xe8\xae\xbe\xe8\xae\xa1\xe7\x90\x86\xe8\xae\xba\xe3\x80\x82\n    \n### \xe6\x8a\x80\xe6\x9c\xaf\xe6\xa0\x88\n\xe4\xbd\xbf\xe7\x94\xa8Node.js\xe4\xb8\x8a\xe7\x9a\x84[Express](http://www.expressjs.com.cn/)\xe6\xa1\x86\xe6\x9e\xb6\xe8\xbf\x9b\xe8\xa1\x8c\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84\xe8\xb7\xaf\xe7\x94\xb1\xe8\xae\xbe\xe8\xae\xa1\xef\xbc\x8c[Mongoose](https://cnodejs.org/topic/504b4924e2b84515770103dd)\xe6\x9d\xa5\xe4\xb8\x8eMongodb\xe6\x95\xb0\xe6\x8d\xae\xe5\xba\x93\xe8\xbf\x9e\xe6\x8e\xa5\xe4\xba\xa4\xe4\xba\x92\xef\xbc\x8c\xe4\xbd\xbf\xe7\x94\xa8Postman\xe5\xaf\xb9\xe6\x88\x91\xe4\xbb\xac\xe8\xae\xbe\xe8\xae\xa1\xe7\x9a\x84Api\xe8\xbf\x9b\xe8\xa1\x8c\xe8\xb0\x83\xe8\xaf\x95\xef\xbc\x8c\xe5\xbf\xab\xe5\x8a\xa8\xe8\xb5\xb7\xe6\x89\x8b\xe6\x9d\xa5\xe5\x90\xa7\xef\xbc\x81\n\n\n### API\xe8\xae\xbe\xe8\xae\xa1\xe4\xb8\xad\xe7\x9a\x84token\xe7\x9a\x84\xe6\x80\x9d\xe8\xb7\xaf\n\xe5\x9c\xa8API\xe8\xae\xbe\xe8\xae\xa1\xe4\xb8\xad,TOKEN\xe7\x94\xa8\xe6\x9d\xa5\xe5\x88\xa4\xe6\x96\xad\xe7\x94\xa8\xe6\x88\xb7\xe6\x98\xaf\xe5\x90\xa6\xe6\x9c\x89\xe6\x9d\x83\xe9\x99\x90\xe8\xae\xbf\xe9\x97\xaeAPI.TOKEN\xe9\xa6\x96\xe5\x85\x88\xe4\xb8\x8d\xe9\x9c\x80\xe8\xa6\x81\xe7\xbc\x96\xe8\xa7\xa3\xe7\xa0\x81\xe5\xa4\x84\xe7\x90\x86. \xe4\xb8\x80\xe8\x88\xacTOKEN\xe9\x83\xbd\xe6\x98\xaf\xe4\xb8\x80\xe4\xba\x9b\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d+\xe6\x97\xb6\xe9\x97\xb4\xe7\xad\x89\xe5\x86\x85\xe5\xae\xb9\xe7\x9a\x84MD5\xe7\x9a\x84\xe4\xb8\x8d\xe5\x8f\xaf\xe9\x80\x86\xe5\x8a\xa0\xe5\xaf\x86.\xe7\x84\xb6\xe5\x90\x8e\xe9\x80\x9a\xe8\xbf\x87\xe4\xb8\x80\xe4\xb8\xaaUSER_TOKEN\xe8\xa1\xa8\xe6\x9d\xa5\xe5\x88\xa4\xe6\x96\xad\xe7\x94\xa8\xe6\x88\xb7\xe8\xaf\xb7\xe6\xb1\x82\xe4\xb8\xad\xe5\x8c\x85\xe5\x90\xab\xe7\x9a\x84TOKEN\xe4\xb8\x8eUSER_TOKEN\xe8\xa1\xa8\xe4\xb8\xad\xe7\x9a\x84TOKEN\xe6\x98\xaf\xe5\x90\xa6\xe4\xb8\x80\xe8\x87\xb4\xe5\x8d\xb3\xe5\x8f\xaf. \n\n\xe5\x85\xb7\xe4\xbd\x93\xe5\xae\x9e\xe8\xb7\xb5\xe8\xbf\x87\xe7\xa8\x8b\xe4\xb8\xbb\xe8\xa6\x81\xe4\xb8\xba:\n\n1. \xe8\xae\xbe\xe5\xae\x9a\xe4\xb8\x80\xe4\xb8\xaa\xe5\xaf\x86\xe9\x92\xa5\xe6\xaf\x94\xe5\xa6\x82key = \xe2\x80\x982323dsfadfewrasa3434\'\xe3\x80\x82\n2. \xe8\xbf\x99\xe4\xb8\xaakey \xe5\x8f\xaa\xe6\x9c\x89\xe5\x8f\x91\xe9\x80\x81\xe6\x96\xb9\xe5\x92\x8c\xe6\x8e\xa5\xe6\x94\xb6\xe6\x96\xb9\xe7\x9f\xa5\xe9\x81\x93\xe3\x80\x82\n3. \xe8\xb0\x83\xe7\x94\xa8\xe6\x97\xb6\xef\xbc\x8c\xe5\x8f\x91\xe9\x80\x81\xe6\x96\xb9\xef\xbc\x8c\xe7\xbb\x84\xe5\x90\x88\xe5\x90\x84\xe4\xb8\xaa\xe5\x8f\x82\xe6\x95\xb0\xe7\x94\xa8\xe5\xaf\x86\xe9\x92\xa5 key\xe6\x8c\x89\xe7\x85\xa7\xe4\xb8\x80\xe5\xae\x9a\xe7\x9a\x84\xe8\xa7\x84\xe5\x88\x99(\xe5\x90\x84\xe7\xa7\x8d\xe6\x8e\x92\xe5\xba\x8f\xef\xbc\x8cMD5\xef\xbc\x8cip\xe7\xad\x89)\xe7\x94\x9f\xe6\x88\x90\xe4\xb8\x80\xe4\xb8\xaaaccess_key\xe3\x80\x82\xe4\xb8\x80\xe8\xb5\xb7post\xe6\x8f\x90\xe4\xba\xa4\xe5\x88\xb0API\xe6\x8e\xa5\xe5\x8f\xa3\xe3\x80\x82\n4. \xe6\x8e\xa5\xe6\x94\xb6\xe6\x96\xb9\xe6\x8b\xbf\xe5\x88\xb0post\xe8\xbf\x87\xe6\x9d\xa5\xe7\x9a\x84\xe5\x8f\x82\xe6\x95\xb0\xe4\xbb\xa5\xe5\x8f\x8a\xe8\xbf\x99\xe4\xb8\xaaaccess_key\xe3\x80\x82\xe4\xb9\x9f\xe5\x92\x8c\xe5\x8f\x91\xe9\x80\x81\xe4\xb8\x80\xe6\xa0\xb7\xef\xbc\x8c\xe7\x94\xa8\xe5\xaf\x86\xe9\x92\xa5key \xe5\xaf\xb9\xe5\x90\x84\xe4\xb8\xaa\xe5\x8f\x82\xe6\x95\xb0\xe8\xbf\x9b\xe8\xa1\x8c\xe4\xb8\x80\xe6\xa0\xb7\xe7\x9a\x84\xe8\xa7\x84\xe5\x88\x99(\xe5\x90\x84\xe7\xa7\x8d\xe6\x8e\x92\xe5\xba\x8f\xef\xbc\x8cMD5\xef\xbc\x8cip\xe7\xad\x89)\xe4\xb9\x9f\xe7\x94\x9f\xe6\x88\x90\xe4\xb8\x80\xe4\xb8\xaaaccess_key2\xe3\x80\x82\n5. \xe5\xaf\xb9\xe6\xaf\x94 access_key \xe5\x92\x8c access_key2 \xe3\x80\x82\xe4\xb8\x80\xe6\xa0\xb7\xe3\x80\x82\xe5\x88\x99\xe5\x85\x81\xe8\xae\xb8\xe6\x93\x8d\xe4\xbd\x9c\xef\xbc\x8c\xe4\xb8\x8d\xe4\xb8\x80\xe6\xa0\xb7\xef\xbc\x8c\xe6\x8a\xa5\xe9\x94\x99\xe8\xbf\x94\xe5\x9b\x9e\xe6\x88\x96\xe8\x80\x85\xe5\x8a\xa0\xe5\x85\xa5\xe9\xbb\x91\xe5\x90\x8d\xe5\x8d\x95\xe3\x80\x82\n\n### token\xe8\xae\xbe\xe8\xae\xa1\xe5\x85\xb7\xe4\xbd\x93\xe5\xae\x9e\xe8\xb7\xb5\n\n> \xe5\xba\x9f\xe8\xaf\x9d\xe4\xb8\x8d\xe5\xa4\x9a\xe8\xaf\xb4\xef\xbc\x8c\xe5\x85\x88\xe8\xbf\x9b\xe5\x85\xa5\xe7\x9c\x8b\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84\xe5\xb9\xb2\xe8\xb4\xa7\xef\xbc\x8c\xe8\xbf\x99\xe6\xac\xa1\xe9\x80\x89\xe7\x94\xa8Node.js+experss\xe9\x85\x8d\xe5\x90\x88Mongoose\xe6\x9d\xa5\xe8\xbf\x9b\xe5\x85\xa5REST\xe7\x9a\x84token\xe5\xae\x9e\xe8\xb7\xb5\n\n\xe9\xa1\xb9\xe7\x9b\xae\xe5\x9c\xb0\xe5\x9d\x80: [GitHub\xe5\x9c\xb0\xe5\x9d\x80](https://github.com/Nicksapp/nAuth-restful-api)\n\n\xe6\x88\x96 `git clone https://github.com/Nicksapp/nAuth-restful-api.git`\n\n\n\n### \xe6\x96\xb0\xe5\xbb\xba\xe9\xa1\xb9\xe7\x9b\xae\n\xe5\x85\x88\xe7\x9c\x8b\xe7\x9c\x8b\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84\xe9\xa1\xb9\xe7\x9b\xae\xe6\x96\x87\xe4\xbb\xb6\xe5\xa4\xb9\n\n``` javascript\n- routes/\n---- index.js\n---- users.js\n- models/\n---- user.js\n- config.js\n- package.json\n- passport.js\n- index.js\n```\n\n`npm init`\xe5\x88\x9b\xe5\xbb\xba\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84`package.json`\n\n\xe6\x8e\xa5\xe7\x9d\x80\xe5\x9c\xa8\xe9\xa1\xb9\xe7\x9b\xae\xe6\xa0\xb9\xe6\x96\x87\xe4\xbb\xb6\xe5\xa4\xb9\xe4\xb8\x8b\xe5\xae\x89\xe8\xa3\x85\xe6\x88\x91\xe4\xbb\xac\xe6\x89\x80\xe9\x9c\x80\xe7\x9a\x84\xe4\xbe\x9d\xe8\xb5\x96\n\n```\nnpm install express body-parser morgan mongoose jsonwebtoken bcrypt passport passport-http-bearer --save \n\n```\n* express: \xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84\xe4\xb8\xbb\xe8\xa6\x81\xe5\xbc\x80\xe5\x8f\x91\xe6\xa1\x86\xe6\x9e\xb6\n* mongoose: \xe7\x94\xa8\xe6\x9d\xa5\xe4\xb8\x8eMongoDB\xe6\x95\xb0\xe6\x8d\xae\xe5\xba\x93\xe8\xbf\x9b\xe8\xa1\x8c\xe4\xba\xa4\xe4\xba\x92\xe7\x9a\x84\xe6\xa1\x86\xe6\x9e\xb6\xef\xbc\x8c\xe8\xaf\xb7\xe6\x8f\x90\xe5\x89\x8d\xe5\xae\x89\xe8\xa3\x85\xe5\xa5\xbdMongoDB\xe5\x9c\xa8PC\xe4\xb8\x8a\n* morgan: \xe4\xbc\x9a\xe5\xb0\x86\xe7\xa8\x8b\xe5\xba\x8f\xe8\xaf\xb7\xe6\xb1\x82\xe8\xbf\x87\xe7\xa8\x8b\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf\xe6\x98\xbe\xe7\xa4\xba\xe5\x9c\xa8Terminal\xe4\xb8\xad\xef\xbc\x8c\xe4\xbb\xa5\xe4\xbe\xbf\xe4\xba\x8e\xe6\x88\x91\xe4\xbb\xac\xe8\xb0\x83\xe8\xaf\x95\xe4\xbb\xa3\xe7\xa0\x81\n* jsonwebtoken: \xe7\x94\xa8\xe6\x9d\xa5\xe7\x94\x9f\xe6\x88\x90\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84token\n* passport: \xe9\x9d\x9e\xe5\xb8\xb8\xe6\xb5\x81\xe8\xa1\x8c\xe7\x9a\x84\xe6\x9d\x83\xe9\x99\x90\xe9\xaa\x8c\xe8\xaf\x81\xe5\xba\x93\n* bcrypt: \xe5\xaf\xb9\xe7\x94\xa8\xe6\x88\xb7\xe5\xaf\x86\xe7\xa0\x81\xe8\xbf\x9b\xe8\xa1\x8chash\xe5\x8a\xa0\xe5\xaf\x86\n\n-- save\xe4\xbc\x9a\xe5\xb0\x86\xe6\x88\x91\xe4\xbb\xac\xe5\xae\x89\xe8\xa3\x85\xe7\x9a\x84\xe5\xba\x93\xe6\x96\x87\xe4\xbb\xb6\xe5\x86\x99\xe5\x85\xa5`package.json`\xe7\x9a\x84\xe4\xbe\x9d\xe8\xb5\x96\xe4\xb8\xad,\xe4\xbb\xa5\xe4\xbe\xbf\xe5\x85\xb6\xe4\xbb\x96\xe4\xba\xba\xe6\x89\x93\xe5\xbc\x80\xe9\xa1\xb9\xe7\x9b\xae\xe6\x98\xaf\xe8\x83\xbd\xe5\xa4\x9f\xe6\xad\xa3\xe7\xa1\xae\xe5\xae\x89\xe8\xa3\x85\xe6\x89\x80\xe9\x9c\x80\xe4\xbe\x9d\xe8\xb5\x96.\n\n### \xe7\x94\xa8\xe6\x88\xb7\xe6\xa8\xa1\xe5\x9e\x8b\n\xe5\xae\x9a\xe4\xb9\x89\xe6\x88\x91\xe4\xbb\xac\xe6\x89\x80\xe9\x9c\x80\xe7\x94\xa8\xe6\x88\xb7\xe6\xa8\xa1\xe5\x9e\x8b\xef\xbc\x8c\xe7\x94\xa8\xe4\xba\x8emoogoose\xef\xbc\x8c\xe6\x96\xb0\xe5\xbb\xba`models/user.js`\n\n``` javascript\nconst mongoose = require(\'mongoose\');\nconst Schema = mongoose.Schema;\nconst bcrypt = require(\'bcrypt\');\n\nconst UserSchema = new Schema({\n  name: {\n    type: String,\n    unique: true, // \xe4\xb8\x8d\xe5\x8f\xaf\xe9\x87\x8d\xe5\xa4\x8d\xe7\xba\xa6\xe6\x9d\x9f\n    require: true // \xe4\xb8\x8d\xe5\x8f\xaf\xe4\xb8\xba\xe7\xa9\xba\xe7\xba\xa6\xe6\x9d\x9f\n  },\n  password: {\n    type: String,\n    require: true\n  },\n  token: {\n    type: String\n  }\n});\n\n// \xe6\xb7\xbb\xe5\x8a\xa0\xe7\x94\xa8\xe6\x88\xb7\xe4\xbf\x9d\xe5\xad\x98\xe6\x97\xb6\xe4\xb8\xad\xe9\x97\xb4\xe4\xbb\xb6\xe5\xaf\xb9password\xe8\xbf\x9b\xe8\xa1\x8cbcrypt\xe5\x8a\xa0\xe5\xaf\x86,\xe8\xbf\x99\xe6\xa0\xb7\xe4\xbf\x9d\xe8\xaf\x81\xe7\x94\xa8\xe6\x88\xb7\xe5\xaf\x86\xe7\xa0\x81\xe5\x8f\xaa\xe6\x9c\x89\xe7\x94\xa8\xe6\x88\xb7\xe6\x9c\xac\xe4\xba\xba\xe7\x9f\xa5\xe9\x81\x93\nUserSchema.pre(\'save\', function (next) {\n    var user = this;\n    if (this.isModified(\'password\') || this.isNew) {\n        bcrypt.genSalt(10, function (err, salt) {\n            if (err) {\n                return next(err);\n            }\n            bcrypt.hash(user.password, salt, function (err, hash) {\n                if (err) {\n                    return next(err);\n                }\n                user.password = hash;\n                next();\n            });\n        });\n    } else {\n        return next();\n    }\n});\n// \xe6\xa0\xa1\xe9\xaa\x8c\xe7\x94\xa8\xe6\x88\xb7\xe8\xbe\x93\xe5\x85\xa5\xe5\xaf\x86\xe7\xa0\x81\xe6\x98\xaf\xe5\x90\xa6\xe6\xad\xa3\xe7\xa1\xae\nUserSchema.methods.comparePassword = function(passw, cb) {\n    bcrypt.compare(passw, this.password, (err, isMatch) => {\n        if (err) {\n            return cb(err);\n        }\n        cb(null, isMatch);\n    });\n};\n\nmodule.exports = mongoose.model(\'User\', UserSchema);\n\n```\n\n### \xe9\x85\x8d\xe7\xbd\xae\xe6\x96\x87\xe4\xbb\xb6\n`./config.js` \xe7\x94\xa8\xe6\x9d\xa5\xe9\x85\x8d\xe7\xbd\xae\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84MongoDB\xe6\x95\xb0\xe6\x8d\xae\xe5\xba\x93\xe8\xbf\x9e\xe6\x8e\xa5\xe5\x92\x8ctoken\xe7\x9a\x84\xe5\xaf\x86\xe9\x92\xa5\xe3\x80\x82\n\n```javascript\nmodule.exports = {\n  \'secret\': \'learnRestApiwithNickjs\', // used when we create and verify JSON Web Tokens\n  \'database\': \'mongodb://localhost:27017/test\' // \xe5\xa1\xab\xe5\x86\x99\xe6\x9c\xac\xe5\x9c\xb0\xe8\x87\xaa\xe5\xb7\xb1 mongodb \xe8\xbf\x9e\xe6\x8e\xa5\xe5\x9c\xb0\xe5\x9d\x80,xxx\xe4\xb8\xba\xe6\x95\xb0\xe6\x8d\xae\xe8\xa1\xa8\xe5\x90\x8d\n};\n\n```\n\n### \xe6\x9c\xac\xe5\x9c\xb0\xe6\x9c\x8d\xe5\x8a\xa1\xe5\x99\xa8\xe9\x85\x8d\xe7\xbd\xae\n`./index.js` \xe6\x9c\x8d\xe5\x8a\xa1\xe5\x99\xa8\xe9\x85\x8d\xe7\xbd\xae\xe6\x96\x87\xe4\xbb\xb6\xef\xbc\x8c\xe4\xb9\x9f\xe6\x98\xaf\xe7\xa8\x8b\xe5\xba\x8f\xe7\x9a\x84\xe5\x85\xa5\xe5\x8f\xa3\xe3\x80\x82\n\n\xe8\xbf\x99\xe9\x87\x8c\xe6\x88\x91\xe4\xbb\xac\xe4\xb8\xbb\xe8\xa6\x81\xe7\x94\xa8\xe6\x9d\xa5\xe5\x8c\x85\xe5\x90\xab\xe6\x88\x91\xe4\xbb\xac\xe7\xa8\x8b\xe5\xba\x8f\xe9\x9c\x80\xe8\xa6\x81\xe5\x8a\xa0\xe8\xbd\xbd\xe7\x9a\x84\xe5\xba\x93\xe6\x96\x87\xe4\xbb\xb6\xef\xbc\x8c\xe8\xb0\x83\xe7\x94\xa8\xe5\x88\x9d\xe5\xa7\x8b\xe5\x8c\x96\xe7\xa8\x8b\xe5\xba\x8f\xe6\x89\x80\xe9\x9c\x80\xe8\xa6\x81\xe7\x9a\x84\xe4\xbe\x9d\xe8\xb5\x96\xe3\x80\x82\n\n```javascript\nconst express = require(\'express\');\nconst app = express();\nconst bodyParser = require(\'body-parser\');// \xe8\xa7\xa3\xe6\x9e\x90body\xe5\xad\x97\xe6\xae\xb5\xe6\xa8\xa1\xe5\x9d\x97\nconst morgan = require(\'morgan\'); // \xe5\x91\xbd\xe4\xbb\xa4\xe8\xa1\x8clog\xe6\x98\xbe\xe7\xa4\xba\nconst mongoose = require(\'mongoose\');\nconst passport = require(\'passport\');// \xe7\x94\xa8\xe6\x88\xb7\xe8\xae\xa4\xe8\xaf\x81\xe6\xa8\xa1\xe5\x9d\x97passport\nconst Strategy = require(\'passport-http-bearer\').Strategy;// token\xe9\xaa\x8c\xe8\xaf\x81\xe6\xa8\xa1\xe5\x9d\x97\nconst routes = require(\'./routes\');\nconst config = require(\'./config\');\n\nlet port = process.env.PORT || 8080;\n\napp.use(passport.initialize());// \xe5\x88\x9d\xe5\xa7\x8b\xe5\x8c\x96passport\xe6\xa8\xa1\xe5\x9d\x97\napp.use(morgan(\'dev\'));// \xe5\x91\xbd\xe4\xbb\xa4\xe8\xa1\x8c\xe4\xb8\xad\xe6\x98\xbe\xe7\xa4\xba\xe7\xa8\x8b\xe5\xba\x8f\xe8\xbf\x90\xe8\xa1\x8c\xe6\x97\xa5\xe5\xbf\x97,\xe4\xbe\xbf\xe4\xba\x8ebug\xe8\xb0\x83\xe8\xaf\x95\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(bodyParser.json()); // \xe8\xb0\x83\xe7\x94\xa8bodyParser\xe6\xa8\xa1\xe5\x9d\x97\xe4\xbb\xa5\xe4\xbe\xbf\xe7\xa8\x8b\xe5\xba\x8f\xe6\xad\xa3\xe7\xa1\xae\xe8\xa7\xa3\xe6\x9e\x90body\xe4\xbc\xa0\xe5\x85\xa5\xe5\x80\xbc\n\nroutes(app); // \xe8\xb7\xaf\xe7\x94\xb1\xe5\xbc\x95\xe5\x85\xa5\n\nmongoose.Promise = global.Promise;\nmongoose.connect(config.database); // \xe8\xbf\x9e\xe6\x8e\xa5\xe6\x95\xb0\xe6\x8d\xae\xe5\xba\x93\n\napp.listen(port, () => {\n  console.log(\'listening on port : \' + port);\n})\n\n```\n\n### \xe8\xb7\xaf\xe7\x94\xb1\xe9\x85\x8d\xe7\xbd\xae\n`./routes` \xe4\xb8\xbb\xe8\xa6\x81\xe5\xad\x98\xe6\x94\xbe\xe8\xb7\xaf\xe7\x94\xb1\xe7\x9b\xb8\xe5\x85\xb3\xe6\x96\x87\xe4\xbb\xb6\n\n`./routes/index.js` \xe8\xb7\xaf\xe7\x94\xb1\xe6\x80\xbb\xe5\x85\xa5\xe5\x8f\xa3\xef\xbc\x8c\xe5\xbc\x95\xe5\x85\xa5\xe6\x89\x80\xe4\xbd\xbf\xe7\x94\xa8\xe8\xb7\xaf\xe7\x94\xb1\n\n```javascript\nmodule.exports = (app) => {\n  app.get(\'/\', (req, res) => {\n    res.json({ message: \'hello index!\'});\n  });\n\n  app.use(\'/api\', require(\'./users\')); // \xe5\x9c\xa8\xe6\x89\x80\xe6\x9c\x89users\xe8\xb7\xaf\xe7\x94\xb1\xe5\x89\x8d\xe5\x8a\xa0/api\n};\n```\n\n`./routes/users.js`\n\n``` javascript\n\nconst express = require(\'express\');\nconst User = require(\'../models/user\');\nconst jwt = require(\'jsonwebtoken\');\nconst config = require(\'../config\');\nconst passport = require(\'passport\');\nconst router = express.Router();\n\nrequire(\'../passport\')(passport);\n\n// \xe6\xb3\xa8\xe5\x86\x8c\xe8\xb4\xa6\xe6\x88\xb7\nrouter.post(\'/signup\', (req, res) => {\n  if (!req.body.name || !req.body.password) {\n    res.json({success: false, message: \'\xe8\xaf\xb7\xe8\xbe\x93\xe5\x85\xa5\xe6\x82\xa8\xe7\x9a\x84\xe8\xb4\xa6\xe5\x8f\xb7\xe5\xaf\x86\xe7\xa0\x81.\'});\n  } else {\n    var newUser = new User({\n      name: req.body.name,\n      password: req.body.password\n    });\n    // \xe4\xbf\x9d\xe5\xad\x98\xe7\x94\xa8\xe6\x88\xb7\xe8\xb4\xa6\xe5\x8f\xb7\n    newUser.save((err) => {\n      if (err) {\n        return res.json({success: false, message: \'\xe6\xb3\xa8\xe5\x86\x8c\xe5\xa4\xb1\xe8\xb4\xa5!\'});\n      }\n      res.json({success: true, message: \'\xe6\x88\x90\xe5\x8a\x9f\xe5\x88\x9b\xe5\xbb\xba\xe6\x96\xb0\xe7\x94\xa8\xe6\x88\xb7!\'});\n    });\n  }\n});\n\n// \xe6\xa3\x80\xe6\x9f\xa5\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d\xe4\xb8\x8e\xe5\xaf\x86\xe7\xa0\x81\xe5\xb9\xb6\xe7\x94\x9f\xe6\x88\x90\xe4\xb8\x80\xe4\xb8\xaaaccesstoken\xe5\xa6\x82\xe6\x9e\x9c\xe9\xaa\x8c\xe8\xaf\x81\xe9\x80\x9a\xe8\xbf\x87\nrouter.post(\'/user/accesstoken\', (req, res) => {\n  User.findOne({\n    name: req.body.name\n  }, (err, user) => {\n    if (err) {\n      throw err;\n    }\n    if (!user) {\n      res.json({success: false, message:\'\xe8\xae\xa4\xe8\xaf\x81\xe5\xa4\xb1\xe8\xb4\xa5,\xe7\x94\xa8\xe6\x88\xb7\xe4\xb8\x8d\xe5\xad\x98\xe5\x9c\xa8!\'});\n    } else if(user) {\n      // \xe6\xa3\x80\xe6\x9f\xa5\xe5\xaf\x86\xe7\xa0\x81\xe6\x98\xaf\xe5\x90\xa6\xe6\xad\xa3\xe7\xa1\xae\n      user.comparePassword(req.body.password, (err, isMatch) => {\n        if (isMatch && !err) {\n          var token = jwt.sign({name: user.name}, config.secret,{\n            expiresIn: 10080 // token \xe8\xbf\x87\xe6\x9c\x9f\xe9\x94\x80\xe6\xaf\x81\xe6\x97\xb6\xe9\x97\xb4\xe8\xae\xbe\xe7\xbd\xae\n          });\n          user.token = token;\n          user.save(function(err){\n            if (err) {\n              res.send(err);\n            }\n          });\n          res.json({\n            success: true,\n            message: \'\xe9\xaa\x8c\xe8\xaf\x81\xe6\x88\x90\xe5\x8a\x9f!\',\n            token: \'Bearer \' + token,\n            name: user.name\n          });\n        } else {\n          res.send({success: false, message: \'\xe8\xae\xa4\xe8\xaf\x81\xe5\xa4\xb1\xe8\xb4\xa5,\xe5\xaf\x86\xe7\xa0\x81\xe9\x94\x99\xe8\xaf\xaf!\'});\n        }\n      });\n    }\n  });\n});\n\n// passport-http-bearer token \xe4\xb8\xad\xe9\x97\xb4\xe4\xbb\xb6\xe9\xaa\x8c\xe8\xaf\x81\n// \xe9\x80\x9a\xe8\xbf\x87 header \xe5\x8f\x91\xe9\x80\x81 Authorization -> Bearer  + token\n// \xe6\x88\x96\xe8\x80\x85\xe9\x80\x9a\xe8\xbf\x87 ?access_token = token\nrouter.get(\'/user/user_info\',\n  passport.authenticate(\'bearer\', { session: false }),\n  function(req, res) {\n    res.json({username: req.user.name});\n});\n\nmodule.exports = router;\n\n```\n\n### passport\xe9\x85\x8d\xe7\xbd\xae\n`./passport.js` \xe9\x85\x8d\xe7\xbd\xae\xe6\x9d\x83\xe9\x99\x90\xe6\xa8\xa1\xe5\x9d\x97\xe6\x89\x80\xe9\x9c\x80\xe5\x8a\x9f\xe8\x83\xbd\n\n``` javascript\nconst passport = require(\'passport\');\nconst Strategy = require(\'passport-http-bearer\').Strategy;\n\nconst User = require(\'./models/user\');\nconst config = require(\'./config\');\n\nmodule.exports = function(passport) {\n    passport.use(new Strategy(\n        function(token, done) {\n            User.findOne({\n                token: token\n            }, function(err, user) {\n                if (err) {\n                    return done(err);\n                }\n                if (!user) {\n                    return done(null, false);\n                }\n                return done(null, user);\n            });\n        }\n    ));\n};\n\n```\n\n\xe4\xb8\xbb\xe8\xa6\x81\xe9\xaa\x8c\xe8\xaf\x81\xe5\x8f\x91\xe9\x80\x81\xe7\x9a\x84token\xe5\x80\xbc\xe4\xb8\x8e\xe7\x94\xa8\xe6\x88\xb7\xe6\x9c\x8d\xe5\x8a\xa1\xe5\x99\xa8\xe7\xab\xaftoken\xe5\x80\xbc\xe6\x98\xaf\xe5\x90\xa6\xe5\x8c\xb9\xe9\x85\x8d\xef\xbc\x8c\xe8\xbf\x9b\xe8\xa1\x8c\xe4\xbf\xa1\xe6\x81\xaf\xe9\xaa\x8c\xe8\xaf\x81\xe3\x80\x82\n\n### \xe5\x85\xb7\xe4\xbd\x93\xe8\xb0\x83\xe8\xaf\x95\n\n\xe7\x8e\xb0\xe5\x9c\xa8\xe5\xb0\xb1\xe5\x8f\xaf\xe4\xbb\xa5\xe8\xbf\x90\xe8\xa1\x8c\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84\xe4\xbb\xa3\xe7\xa0\x81\xe7\x9c\x8b\xe5\x85\xb7\xe4\xbd\x93\xe8\xbf\x90\xe4\xbd\x9c\xe8\xbf\x87\xe7\xa8\x8b\xe4\xba\x86\xef\xbc\x81\xe4\xb8\xba\xe4\xba\x86\xe4\xbe\xbf\xe4\xba\x8e\xe8\xb0\x83\xe8\xaf\x95\xe4\xb8\x8e\xe5\x8f\x82\xe6\x95\xb0\xe7\x9a\x84\xe6\x94\xb6\xe5\x8f\x91\xef\xbc\x8c\xe6\x88\x91\xe4\xbb\xac\xe4\xbd\xbf\xe7\x94\xa8[postman](https://www.getpostman.com/)(\xe5\x8f\xaf\xe5\x9c\xa8Chrome\xe4\xb8\x8a\xe6\x88\x96Mac\xe4\xb8\x8a\xe5\xae\x89\xe8\xa3\x85)\xe6\x9d\xa5\xe6\x93\x8d\xe4\xbd\x9c.\n\n`node index`\xe8\xbf\x90\xe8\xa1\x8c\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84\xe6\x9c\xac\xe5\x9c\xb0\xe6\x9c\x8d\xe5\x8a\xa1\xe5\x99\xa8\xef\xbc\x8c\xe8\xae\xbf\xe9\x97\xae [localhost:8080/]()\n\xe5\xba\x94\xe8\xaf\xa5\xe5\xb0\xb1\xe5\x8f\xaf\xe4\xbb\xa5\xe7\x9c\x8b\xe5\x88\xb0\xe6\x88\x91\xe4\xbb\xac\xe6\x89\x80\xe8\xbf\x94\xe5\x9b\x9e\xe7\x9a\x84\xe5\x88\x9d\xe5\xa7\x8bjson\xe5\x80\xbc\xe4\xba\x86\xef\xbc\x8c\xe7\x84\xb6\xe6\x88\x91\xe4\xbb\xac\xe7\xbb\xa7\xe7\xbb\xad\xe6\xb7\xb1\xe5\x85\xa5\xe6\xb5\x8b\xe8\xaf\x95\xe3\x80\x82\n\n![](https://haitao.nos.netease.com/942f5170-3e46-4214-9841-dbb60344366f_1030_680.jpg)\n\nPOST\xe8\xae\xbf\xe9\x97\xae[localhost:8080/api/signup](),\xe6\x88\x91\xe4\xbb\xac\xe6\x9d\xa5\xe6\xb3\xa8\xe5\x86\x8c\xe4\xb8\x80\xe4\xb8\xaa\xe6\x96\xb0\xe7\x94\xa8\xe6\x88\xb7\xef\xbc\x8c\xe6\xb3\xa8\xe6\x84\x8f\xe8\xa6\x81\xe8\xae\xbe\xe7\xbd\xae`body`\xe7\x9a\x84`Content-Type`\xe4\xb8\xba`x-www-form-urlencoded` \xe4\xbb\xa5\xe4\xbe\xbf\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84`body-parser`\xe8\x83\xbd\xe5\xa4\x9f\xe6\xad\xa3\xe7\xa1\xae\xe8\xa7\xa3\xe6\x9e\x90,\xe5\xa5\xbd\xe7\x9a\x84\xe6\x88\x91\xe4\xbb\xac\xe6\x88\x90\xe5\x8a\x9f\xe6\xa8\xa1\xe6\x8b\x9f\xe5\x88\x9b\xe5\xbb\xba\xe4\xba\x86\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84\xe6\x96\xb0\xe7\x94\xa8\xe6\x88\xb7\xe3\x80\x82\n\n![](https://haitao.nos.netease.com/3d7edd98-070f-495f-a7fd-270e9eab7133_1030_680.jpg)\n\n\xe8\xbf\x9e\xe6\x8e\xa5\xe4\xb8\x80\xe4\xb8\x8b\xe6\x95\xb0\xe6\x8d\xae\xe5\xba\x93\xe7\x9c\x8b\xe4\xb8\x8b\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84\xe7\x94\xa8\xe6\x88\xb7\xe4\xbf\xa1\xe6\x81\xaf\xe6\x98\xaf\xe5\x90\xa6\xe4\xb9\x9f\xe8\xa2\xab\xe6\xad\xa3\xe7\xa1\xae\xe5\xad\x98\xe5\x82\xa8(\xe6\xb3\xa8:\xe6\x88\x91\xe4\xbd\xbf\xe7\x94\xa8\xe7\x9a\x84\xe6\x98\xafMongoChef,\xe5\x8d\x81\xe5\x88\x86\xe5\xbc\xba\xe5\xa4\xa7MongoDB\xe6\x95\xb0\xe6\x8d\xae\xe5\xba\x93\xe7\xae\xa1\xe7\x90\x86\xe8\xbd\xaf\xe4\xbb\xb6),\xe6\x88\x91\xe4\xbb\xac\xe5\x8f\xaf\xe4\xbb\xa5\xe7\x9c\x8b\xe5\x88\xb0,\xe6\x88\x91\xe7\x9a\x84password\xe4\xb9\x9f\xe8\xa2\xab\xe6\xad\xa3\xe7\xa1\xae\xe5\x8a\xa0\xe5\xaf\x86\xe4\xbf\x9d\xe5\xad\x98\xe4\xba\x86\xe3\x80\x82\n\n![](https://haitao.nos.netease.com/32ddbcae-0029-48f9-bf62-0b90ff8d5948_1050_712.jpg)\n\n\xe6\x8e\xa5\xe7\x9d\x80POST\xe8\xae\xbf\xe9\x97\xae[localhost:8080/api/user/accesstoken](),\xe6\x9d\xa5\xe4\xb8\xba\xe6\x88\x91\xe7\x9a\x84\xe7\x94\xa8\xe6\x88\xb7\xe8\x8e\xb7\xe5\xbe\x97\xe4\xb8\x93\xe5\xb1\x9etoken\xef\xbc\x8cPOST\xe8\xbf\x87\xe7\xa8\x8b\xe4\xb8\x8e\xe6\xb3\xa8\xe5\x86\x8c\xe7\x9b\xb8\xe5\x85\xb3,\xe5\x8f\xaf\xe4\xbb\xa5\xe7\x9c\x8b\xe5\x88\xb0\xe4\xb9\x9f\xe6\xad\xa3\xe7\xa1\xae\xe7\x94\x9f\xe6\x88\x90\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84token\xe5\x80\xbc\xe3\x80\x82\n\n![](https://haitao.nos.netease.com/854a96d4-0785-4631-b67a-790d13e73bd7_1030_680.jpg)\n\n\xe5\x86\x8d\xe7\x9c\x8b\xe4\xb8\x8b\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84\xe6\x95\xb0\xe6\x8d\xae\xe5\xba\x93\xe4\xb8\xad\xe7\x9a\x84\xe7\x94\xa8\xe6\x88\xb7\xe4\xbf\xa1\xe6\x81\xaf\xef\xbc\x8ctoken\xe5\x80\xbc\xe4\xb9\x9f\xe8\xa2\xab\xe5\xad\x98\xe5\x85\xa5\xe4\xba\x86\xe8\xbf\x9b\xe6\x9d\xa5\xef\xbc\x8c\xe4\xbe\xbf\xe4\xba\x8e\xe6\x88\x91\xe4\xbb\xac\xe4\xb9\x8b\xe5\x90\x8e\xe8\xbf\x9b\xe8\xa1\x8c\xe6\x9d\x83\xe9\x99\x90\xe9\xaa\x8c\xe8\xaf\x81\xe3\x80\x82\n\n![](https://haitao.nos.netease.com/e8ce921f-d003-494e-aff5-06057a14e8bc_1050_712.jpg)\n\nGET\xe8\xae\xbf\xe9\x97\xae[localhost:8080/api/user/user_info](),\xe5\x90\x8c\xe6\x97\xb6\xe5\xb0\x86\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84token\xe5\x80\xbc\xe5\x9c\xa8`Header`\xe4\xb8\xad\xe4\xbb\xa5 `Authorization: token` \xe4\xbc\xa0\xe5\x85\xa5,\xe6\xad\xa3\xe7\xa1\xae\xe8\x8e\xb7\xe5\xbe\x97\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d\xe5\x88\x99\xe8\xa1\xa8\xe7\xa4\xba\xe6\x88\x91\xe4\xbb\xac\xe8\xae\xbf\xe9\x97\xae\xe8\xaf\xb7\xe6\xb1\x82\xe9\x80\x9a\xe8\xbf\x87\xe4\xba\x86\xe9\xaa\x8c\xe8\xaf\x81\xe3\x80\x82\n\n![](https://haitao.nos.netease.com/e53d21d8-0f60-40d1-b698-ee966657dc56_1030_680.jpg)\n\n\xe5\xa6\x82\xe6\x9e\x9ctoken\xe5\x80\xbc\xe4\xb8\x8d\xe6\xad\xa3\xe7\xa1\xae\xef\xbc\x8c\xe5\x88\x99\xe8\xbf\x94\xe5\x9b\x9eHTTP\xe7\x8a\xb6\xe6\x80\x81\xe7\xa0\x81 401 Unauthorized \xe5\xb9\xb6\xe6\x8b\x92\xe7\xbb\x9d\xe8\xae\xbf\xe9\x97\xae\xe8\xaf\xb7\xe6\xb1\x82\xe3\x80\x82\xe5\x88\xb0\xe8\xbf\x99\xe9\x87\x8c\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84\xe6\x9d\x83\xe9\x99\x90\xe9\xaa\x8c\xe8\xaf\x81\xe5\x8a\x9f\xe8\x83\xbd\xe4\xb9\x9f\xe5\xb0\xb1\xe5\x9f\xba\xe6\x9c\xac\xe5\xae\x9e\xe7\x8e\xb0\xe4\xba\x86\xe3\x80\x82\n![](https://haitao.nos.netease.com/a1b2811d-84af-4d0d-b0e9-5076ba91b261_1030_680.jpg)\n\n### \xe6\x80\xbb\xe7\xbb\x93\n\xe5\xb8\x8c\xe6\x9c\x9b\xe5\x9c\xa8\xe7\x9c\x8b\xe5\xae\x8c\xe8\xbf\x99\xe7\xaf\x87\xe6\x95\x99\xe7\xa8\x8b\xe5\x90\x8e\xe8\x83\xbd\xe5\xa4\x9f\xe5\xaf\xb9\xe4\xbd\xa0\xe5\x9c\xa8RESTful Api\xe5\xbc\x80\xe5\x8f\x91\xe4\xb8\x8a\xe6\x9c\x89\xe6\x89\x80\xe5\x90\xaf\xe5\x8f\x91\xef\xbc\x8c\xe5\xb0\x8f\xe7\x94\x9f\xe6\x89\x8d\xe7\x96\x8f\xe5\xad\xa6\xe6\xb5\x85\xef\xbc\x8c\xe8\xbf\x87\xe7\xa8\x8b\xe4\xb8\xad\xe6\x9c\x89\xe4\xbb\x80\xe4\xb9\x88\xe4\xb8\x8d\xe8\xb6\xb3\xe7\x9a\x84\xe5\x9c\xb0\xe6\x96\xb9\xe4\xb9\x9f\xe6\xac\xa2\xe8\xbf\x8e\xe6\x8c\x87\xe6\xad\xa3\xe3\x80\x82\n'