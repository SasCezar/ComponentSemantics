b'# Mobile, desktop and website Apps with the same code\n\n[![Build Status](https://travis-ci.org/benoitvallon/react-native-nw-react-calculator.svg?branch=master)](https://travis-ci.org/benoitvallon/react-native-nw-react-calculator) [![Dependency Status](https://david-dm.org/benoitvallon/react-native-nw-react-calculator.svg)](https://david-dm.org/benoitvallon/react-native-nw-react-calculator) [![devDependency Status](https://david-dm.org/benoitvallon/react-native-nw-react-calculator/dev-status.svg)](https://david-dm.org/benoitvallon/react-native-nw-react-calculator#info=devDependencies)\n\nThis project shows how the source code can be architectured to run on multiple devices. As of now, it is able to run as:\n\n- iOS & Android Apps (based on [react-native](https://facebook.github.io/react-native))\n- a Desktop App based on [NW](http://nwjs.io) or based on [Electron](http://electron.atom.io)\n- a Website App in any browser (based on [react](https://facebook.github.io/react))\n\nA demo for the Website App is available [here](http://benoitvallon.github.io/react-native-nw-react-calculator).\n\n## Screenshots\n\n### Mobile Apps (iOS & Android)\n\n![Mobile Apps](images/mobile-apps.png "Mobile Apps")\n\n### Desktop Apps (NW & Electron)\n\n![Desktop App](images/desktop-apps.png "Desktop App")\n\n### Website App\n\n![Website App](images/website-app.png "Website App")\n\n## Libraries/tools\n\nThis project uses libraries and tools like:\n- es6 syntax and [babel](https://babeljs.io)\n- [react](https://facebook.github.io/react) for the Website App and Desktop App,\n- [react-native](https://facebook.github.io/react-native) for the iOS & Android Apps\n- [NW](http://nwjs.io) to package the Desktop App\n- [Electron](http://electron.atom.io) to package the Desktop App\n- [flux](https://facebook.github.io/flux) to organize the data flow management\n- [css-loader](https://github.com/webpack/css-loader) to integrate the styles in the builds\n- [grunt](http://gruntjs.com) to create the builds\n- [webpack](https://webpack.github.io) to help during the development phase with hot reloading\n\n## Basic philosophy\n\nAll the code is contained in the `src` directory, especially the 3 main entry files that are used for the builds:\n- `index.ios.js` & `index.android.js` are the ones used to build the iOS & Android Apps\n- `index.js` is the one used to build the Website App and Desktop App as the code is strictly the same.\n\n### Flux architecture actions/stores\n\nAll the [flux](https://facebook.github.io/flux) architecture is share to 100% to all the different builds. This means that all the logic and data management code is done only once and reuse everywhere. This allows us to have an easy tests suite as well and to ensure that our code is working properly on all the devices.\n\n### Components\n\nThe real interest of the project is in how the components have been structured to shared most of their logic and only redefined what is specific to every device.\n\nBasically, every component has a main `Class` which inherits a base `Class` containing all the logic. Then, the main component import a different Render function which has been selected during the build. The file extension `.ios.js`, `.android.js` or `.js` is used by the build tool to import only the right file.\n\nThe `.native.js` files contain code that is shared between both mobile platforms (iOS & Android). Currently, the `.ios.js` and `.android.js` files compose this `.native.js` file since all code is shared right now. However, if a component needed to be different for platform specific reasons, that code would be included in the corresponding platform specific files.\n\nAt the end, every component is defined by 6 files. If we look at the screen component, here is its structure.\n\n```\nScreen.js\n\xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 ScreenBase.js\n\xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 ScreenRender.ios.js (specific to iOS build\n\xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 ScreenRender.android.js (specific to Android build)\n\xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 ScreenRender.native.js (shared mobile app code - iOS & Android)\n\xe2\x94\x94\xe2\x94\x80\xe2\x94\x80 ScreenRender.js (used during Website and Desktop build)\n```\n\nAnd here is the main `Class` file which composes the files.\n\n```js\n\'use strict\';\n\nimport Base from \'./ScreenBase\';\nimport Render from \'./ScreenRender\';\n\nexport default class Screen extends Base {\n  constructor (props) {\n    super(props);\n  }\n\n  render () {\n    return Render.call(this, this.props, this.state);\n  }\n}\n```\n\n## What\'s next\n\nHere are some thoughts about what can come next:\n\n- Make the Website App Isomorphic/Universal\n\n## Thank you Robert for your awesome design\n\nI want to thank Robert O\'Dowd who kindly authorized me the reuse his very beautiful design. The original design made by Robert was part of his project called "Simplifycation" visible [here](https://dribbble.com/shots/1973851-Simplifycation).\n\n# How to build/run the projects\n\n## General requirements before running any specific project\n\n- `npm install` to install all the dependencies, React and React Native among others.\n\n### With some versions of npm (>=v3.3.10 <=v3.6.0)\n\nSome builds from npm included bugs while `npm install`. So if you are using a npm version within the range form 3.3.10 to 3.6.0 included, you must run `npm install` twice. Those versions including npm v3.3.12 are the ones bundled by default with node from version v5.1.0 to v5.5.0.\n\n- `npm install npm`\n- `npm install npm` run it twice, because of the packages won\'t be installed after the first run [#10985](https://github.com/npm/npm/issues/10985)\n\n## The Mobile Apps (iOS & Android)\n\n### Requirements for React Native\n\n#### iOS\n\n- OS X\n- Xcode 6.3 or higher is recommended (Xcode only runs on Mac).\n- Homebrew is the recommended way to install node, watchman, and flow.\n- `brew install node`\n- `brew install watchman`. We recommend installing watchman, otherwise you might hit a node file watching bug.\n- `brew install flow`. If you want to use flow.\n\n#### Android\n\n- Follow the official documentation guide here: http://facebook.github.io/react-native/docs/getting-started.html#android-setup (includes experimental Windows & Linux support)\n\n### Running the Mobile Apps\n\n#### iOS\n\n- Open iosApp.xcodeproj and hit run in Xcode.\n- Hit cmd+R in your iOS simulator to reload the app and see your change!\n\n#### Android\n\n- Open an emulator. (Genymotion or run `android avd`)\n- Run the `react-native run-android` in the root of this project.\n- If trying to run on a device, read the following guide: http://facebook.github.io/react-native/docs/running-on-device-android.html#content\n\nCongratulations! You\'ve just successfully run the project as an iOS or Android App.\n\n## The Website App\n\n### Requirements for React\n\nThere isn\'t any additional requirements since you already installed the deps with `npm install`.\n\n### Quick start\n\n- `npm run build` to build the project (at least the first time)\n- `npm run serve-web` to preview in the browser at http://localhost:8000/index.web.html or http://localhost:8000/webpack-dev-server/index.web.html with webpack-dev-server and hot reload enabled\n\nCongratulations! You\'ve just successfully run the project as a Website App.\n\n## The Desktop App\n\nYou can either run the project with [NW](http://nwjs.io) or [electron](http://electron.atom.io).\n\n### Requirements for NW\n\nTo run the project, you are supposed to run something like:\n\n`/path/to/nw .`\n\nOn OSX, the executable binary is in a hidden directory within the .app file. The easier solution to install it is to download the app on http://nwjs.io/ then copying it to your application folder. You will now be able to run:\n\n`/Applications/nwjs.app/Contents/MacOS/nwjs .`\n\nYou can also setup an alias to call the binary.\n\n`alias nw="/Applications/nwjs.app/Contents/MacOS/nwjs"`\n\n### Quick start with NW\n\n- `npm run build` to build the project (at least the first time)\n- `npm run serve-nw` to launch the desktop app and enable livereload\n\nCongratulations! You\'ve just successfully run the project as a Desktop App.\n\n### Quick start with Electron\n\n- `npm run build` to build the project (at least the first time)\n- `npm run serve-electron` to launch the desktop app and enable livereload\n\nCongratulations! You\'ve just successfully run the project as a Desktop App.\n\n# Run the tests\n\nTo run the tests, simply run:\n\n```\nnpm test\n```\n\n![Tests](images/tests.png "Tests")\n'