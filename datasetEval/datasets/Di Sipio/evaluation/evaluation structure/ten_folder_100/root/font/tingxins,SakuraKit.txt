b'<p align="center">\n<img src="http://image.tingxins.cn/sakura/sakura-kit-logo.png" width=888/>\n</p>\n\n\n<p align="center">\n<a href=""><img src="https://img.shields.io/badge/language-Objectivc--C-blue.svg"></a>\n<a href="http://cocoadocs.org/docsets/SakuraKit"><img src="https://img.shields.io/cocoapods/v/SakuraKit.svg?style=flat"></a>\n<a href="https://github.com/Carthage/Carthage"><img src="https://img.shields.io/badge/Carthage-compatible-4BC51D.svg?style=flat"></a>\n<a href="https://github.com/tingxins/SakuraKit"><img src="https://img.shields.io/cocoapods/p/SakuraKit.svg?style=flat"></a>\n<a href="https://github.com/tingxins/SakuraKit"><img src="https://img.shields.io/badge/support-iOS%208%2B-brightgreen.svg"></a>\n<a href="https://www.apache.org/licenses/LICENSE-2.0.html"><img src="http://img.shields.io/cocoapods/l/SakuraKit.svg?style=flat"></a>\n\n</p>\n\n**SakuraKit**, is a lightweight and powerful library for application to switching themes or skins, inspired by **SwiftTheme** and **DKNightVersion**. Its provides chain and functional programming, that is more readable for your codes. \n\n> [\xe4\xb8\xad\xe6\x96\x87\xe4\xbb\x8b\xe7\xbb\x8d](http://www.jianshu.com/p/258a1477dc4f)\n\nFor **Demo** take a look at the SakuraDemo_OC, an iOS example project in the workspace. You will need to run `pod install` after downloading.\n\n`sakura` mean `theme` as following. Now, sakura for your Apps.\n\n# Installation\n\nThere are three ways to use **SakuraKit** in your project:\n\n* **Using CocoaPods**\n\n* **Manual**\n\n* **Using Carthage**\n\n## CocoaPods\n    \nCocoaPods is a dependency manager for Objective-C, which automates and simplifies the process of using 3rd-party libraries in your projects. \n\n**Podfile**\n\n    platform :ios, \'8.0\'\n    pod \'SakuraKit\'\n\n## Manual\n\nDownload repo\'s zip, and just drag **ALL** files in the **SakuraKit** folder to your projects.\n\n## Carthage\n\n[Carthage](https://github.com/Carthage/Carthage) is a decentralized dependency manager that builds your dependencies and provides you with binary frameworks.\n\nYou can install Carthage with [Homebrew](http://brew.sh/) using the following command:\n\n    $ brew update\n    $ brew install carthage\n        \nTo integrate **SakuraKit** into your Xcode project using Carthage, specify it in your Cartfile:\n\n    github "tingxins/SakuraKit"\n\nRun carthage to build the frameworks and drag the **SakuraKit.framework** framework into your Xcode project.\n\n# Usage\n\n## Test Demo\n\n![x-sakura-kit-demo](http://image.tingxins.cn/sakura/x-sakura-kit-demo.gif)\n\n## Use Case\n\nHere\'s an example, configure skins for `UIButton` as an example following. \n\n```\n\nUIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(100, 100, 100, 100)];\n    \nbutton.sakura\n.backgroundColor(@"Home.buttonBackgroundColor")\n.titleColor(@"Home.buttonTitleColor", UIControlStateNormal);\n\n```\n\nObviously, as the code show. it\'s just configure `backgroundColor` & `titleColor` of skin for a button. If you want to switch theme or skin for your apps. Just call this API use `TXSakuraManager`: \n\n```\n\n// name: name of a theme or skin.\n// type: TXSakuraTypeMainBundle or TXSakuraTypeSandBox\n+ (BOOL)shiftSakuraWithName:(TXSakuraName *)name type:(TXSakuraType)type;\n\n```\n\nFor lines of code above. You may be puzzled by some literals, such as `Home.buttonBackgroundColor` or `Home.buttonTitleColor`. Do not worry about, we will focus on how to set up a profile for sakura step by step later.\n\n## Sakura Profile\n\nNow, let\'s focus on profile. In brief, profile is a simple way to manage theme or skin for your application setting in a project. (Actually, sakura profile is just likes localizing your app.)\n\n**SakuraKit** supports both .json & .plist format of file. For .json file example. you may should do configure like this: \n\n```\n{\n\t"Home":{\n            "buttonBackgroundColor":"#BB503D",\n            "buttonTitleColor":"#4AF2A1"\n        }\n}\n\n```\n\nas show above, we can know that literals of `Home.buttonBackgroundColor` and  `Home.buttonTitleColor` is just a `KeyPath` for dictionary. **SakuraKit** always fetch value from Profile switching theme or skin for your app, such as color/iconName/text/fontSize.e.g. \n\n**Precautions:**\n\n1. Each theme has its own Profile, including MainBundle and Sandbox themes. (MainBundle default theme named **default**, and its profile named **default.json**).\n2. The theme name is the same as the name of profile. For example. If a theme called **fish**, then the corresponding profile should be named **fish.json**. (**Recommended to comply with this agreement**)\n3. Different mainBundle theme(Local theme) need be distinguish for icon name. For different sandbox theme(Remote theme), icon name should be the same.\n\n## Bundle Theme\n\nBundle themes are exists in your app bundle. we also called **Local Theme**. we should always configure a default theme for app. of course, **SakuraKit** can add multi bundle themes for your app following these steps:\n\n### Step 1\n\nFirst, create [`SakuraName`].json profile. be sure that the `SakuraName` is your theme name. For example, if you want to add a new bundle theme which named `typewriter`, then the corresponding profile should be named **typewriter.json**.\n\n### Step 2\n\nNext, configure icons for `typewriter` theme. And name of icons need be distinguish with other local theme. For example. If an icon named `cm2_btm_icn_account` in **default** theme, then the corresponding icon in `typewriter` theme should be named like this `cm2_btm_icn_account_xxx`.\n\n### Step 3\n\nAfter Step 1 & 2. you may should register all local sakura theme in AppDelegate. (**default** theme can be ignored.)\n\n```\n\n- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {\n\n    // Coding ...\n    \n    [TXSakuraManager registerLocalSakuraWithNames:@[@"typewriter"]];\n    \n    // Coding ...\n    \n    return YES;\n}\n\n```\n\n### Step 4\n\nAt this point, we have configured all Bundle themes. we can switching to these themes any time now. For example. If you want switching to a specified bundle theme which named `typewriter`. Just call API like this:\n\n```\n\n[TXSakuraManager shiftSakuraWithName:@"typewriter" type:TXSakuraTypeMainBundle];\n    \n```\n\n## Sandbox Theme\n\nSandbox themes, using compressed package(.zip) with a folder, which contains **Profile** & **Icons**. And we also called **Remote Theme**. The user can downloads via the network from server. Server can uploading multi themes dynamic, and then user can downloads from app.\n\nAbout remote theme data format suggestion, give an example:(FYI)\n\n```\n\n{\n    "name": "I\'m a monkey",\n    "sakuraName": "monkey",\n    "url": "http:\\\\image.tingxins.cn\\sakura\\monkey.zip"\n}\n\n```\n\n`sakuraName` is your theme name. And `url` is a remote url address of sakura theme. (Note: If the sakuraName field passed nil, the name of the corresponding theme will default to the name of downloaded package.)\n\nWhen the remote theme has been downloaded, we can switching the theme like this:\n\n```\n\n[TXSakuraManager shiftSakuraWithName:sakuraName type:TXSakuraTypeSandBox];\n\n```\n\nAbout some exciting for you. [SakuraKit](https://github.com/tingxins/SakuraKit) also provides some API that you can used to download the remote theme. And supports both `Block` & `Delegate` callback. Very awesome, right? And of course, you can also customize your own download operation for remote theme. \n\nLet\'s talk about it now.\n\n## Block Handler\n\nIf you want to download a sakura theme. You can call the download task block API like this. Show the code of Use-Case:\n\n```\n\n[[TXSakuraManager manager] tx_sakuraDownloadWithInfos:sakuraModel downloadProgressHandler:^(int64_t bytesWritten, int64_t totalBytesWritten, int64_t totalBytesExpectedToWrite) {\n    // Sakura theme download progress callback\n} downloadErrorHandler:^(NSError * error) {\n    // Sakura theme download error callback\n} unzipProgressHandler:^(unsigned long long loaded, unsigned long long total) {\n    // Unzip sakura theme compressed package progress callback\n} completedHandler:^(id<TXSakuraDownloadProtocol> infos, NSURL * location) {\n    // completed callback\n} ];\n\n```\n\nIn this example, the object of `sakuraModel` conform to `TXSakuraDownloadProtocol`. You can check out [SakuraDemo_OC](https://github.com/tingxins/SakuraKit) for more details in `DownloadSakuraController`.\n\n## Delegate Handler\n\n### Step 1\n\nIf you want to download a sakura theme. You can call the download task delegate API like this :\n\n```\n\n[[TXSakuraManager manager] tx_sakuraDownloadWithInfos:sakuraModel delegate:self];\n\n```\n\n### Step 2\n\nImplement delegate methods that you need to. \n\n```\n\n// If download task of sakura theme is already exist or already exist in sandbox, this API will callback.\n- (void)sakuraManagerDownload:(TXSakuraManager *)manager\n                 downloadTask:(NSURLSessionDownloadTask *)downloadTask\n                       status:(TXSakuraDownloadTaskStatus)status;\n\n// completed callback\n- (void)sakuraManagerDownload:(TXSakuraManager *)manager\n                 downloadTask:(NSURLSessionDownloadTask *)downloadTask\n                  sakuraInfos:(id<TXSakuraDownloadProtocol>)infos\n    didFinishDownloadingToURL:(NSURL *)location;\n\n// Sakura download progress callback\n- (void)sakuraManagerDownload:(TXSakuraManager *)manager\n                downloadTask:(NSURLSessionDownloadTask *)downloadTask\n                didWriteData:(int64_t)bytesWritten\n           totalBytesWritten:(int64_t)totalBytesWritten\n   totalBytesExpectedToWrite:(int64_t)totalBytesExpectedToWrite;\n\n/** Reserved for future use */\n- (void)sakuraManagerDownload:(TXSakuraManager *)manager\n                downloadTask:(NSURLSessionDownloadTask *)downloadTask\n           didResumeAtOffset:(int64_t)fileOffset\n          expectedTotalBytes:(int64_t)expectedTotalBytes;\n\n//  Sakura theme download error callback\n- (void)sakuraManagerDownload:(TXSakuraManager *)manager\n                 sessionTask:(NSURLSessionTask *)downloadTask\n        didCompleteWithError:(nullable NSError *)error;\n\n// Unzip sakura theme compressed package progress callback\n- (void)sakuraManagerDownload:(TXSakuraManager *)manager\n                 downloadTask:(NSURLSessionDownloadTask *)downloadTask\n                progressEvent:(unsigned long long)loaded\n                        total:(unsigned long long)total;\n\n```\n\nYou can check out [SakuraDemo_OC](https://github.com/tingxins/SakuraKit) for more details in `AppDelegate`.\n\n## Custom Handler\n\nIf you do not want use API to download the remote theme that **SakuraKit** provided, you can customize your own download operation for sakura theme. \n\nShow the code that you want:\n\n```\n\n// `sakuraModel` conform to `TXSakuraDownloadProtocol`. location is theme compressed package path that downloaded\xe3\x80\x82\n[[TXSakuraManager manager] tx_generatePathWithInfos:sakuraModel downloadFileLocalURL:location successHandler:^(NSString *toFilePath, NSString *sakuraPath, TXSakuraName *sakuraName) {\n                  dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{\n\n      BOOL isSuccess = [SSZipArchive unzipFileAtPath:toFilePath toDestination:sakuraPath delegate:self];\n\n      // Note: Be sure that call this API to format theme path if you are customize your own download operation. otherwise, when switching theme you may be failed.\n       [TXSakuraManager formatSakuraPath:sakuraPath cleanCachePath:toFilePath];\n      \n      dispatch_sync(dispatch_get_main_queue(), ^{\n          if (isSuccess) {\n              [TXSakuraManager shiftSakuraWithName:sakuraName type:TXSakuraTypeSandBox];\n          }\n      });\n   });\n} errorHandler:^(NSError * _Nullable error) {\n   NSLog(@"errorDescription:%@",error);\n}];\n\n\n```\n\n# FQA\n\n**Q: Why do each theme has its own profile?**\n\n**A:** Because each theme, beside the name of icons are the same, and different themes background color, font size may not be the same. So each theme should have its own profile, unless you just want to making theme only for icons.\n\n**Q: Why is the sakura name should be consistent with the profile name of corresponding theme?**\n\n**A:** This is only a convention for us. when switching theme, [SakuraKit](https://github.com/tingxins/SakuraKit) will through the theme name to find the theme in the local or in the sandbox path, making both theme and profile name the same, you will reduce some unnecessary workload.\n\n**Q: What is the difference between bundle and sandbox themes?**\n\n**A:** Actually. Bundle theme, we called the local theme. Remote theme also called sandbox theme.\n\n**Q: Do SakuraKit have a version that written in Swift?**\n\n**A:** No. Will Coming soon. If you are really need it now. Here\'s an example for Using Swift with SakuraKitOC. ([SakuraKitOCForSwiftDemo](https://github.com/tingxins/Examples-Usage/tree/master/SakuraKitOCForSwiftDemo))\n\n# Communication\n\nAbsolutely\xef\xbc\x8cyou can contribute to this project all the time if you want to.\n\n- If you **need help or ask general question**, just [**@tingxins**](http://weibo.com/tingxins) in [Weibo](http://weibo.com/tingxins) or [Twitter](https://twitter.com/tingxins), of course, you can access to my [**blog**](https://tingxins.com).\n\n- If you **found a bug**, just open an issue.\n\n- If you **have a feature request**, just open an issue.\n\n- If you **want to contribute**, fork this repository, and then submit a pull request.\n\n# License\n\n`SakuraKit` is available under the MIT license. See the LICENSE file for more info.\n\n## Ad\n\nWelcome to follow my Official Account of WeChat.\n\n![wechat-qrcode](http://image.tingxins.cn/adv/wechat-qrcode.jpg)\n\n'