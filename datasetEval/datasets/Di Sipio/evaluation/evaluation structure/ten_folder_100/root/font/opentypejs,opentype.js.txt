b'\n# opentype.js &middot; [![Build Status](https://img.shields.io/travis/opentypejs/opentype.js.svg?style=flat-square)](https://travis-ci.org/opentypejs/opentype.js) [![npm](https://img.shields.io/npm/v/opentype.js.svg?style=flat-square)](https://www.npmjs.com/package/opentype.js) [![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=flat-square)](http://makeapullrequest.com) [![GitHub license](https://img.shields.io/badge/license-MIT-blue.svg?style=flat-square)](https://github.com/opentypejs/opentype.js/blob/master/LICENSE) [![david-dm](https://david-dm.org/opentypejs/opentype.js.svg)](https://david-dm.org/opentypejs/opentype.js) [![Gitter](https://badges.gitter.im/opentypejs/opentype.js.svg)](https://gitter.im/opentypejs/opentype.js)\n\nopentype.js is a JavaScript parser and writer for TrueType and OpenType fonts.\n\nIt gives you access to the <strong>letterforms</strong> of text from the browser or Node.js.\nSee [https://opentype.js.org/](https://opentype.js.org/) for a live demo.\n\nFeatures\n========\n* Create a b\xc3\xa9zier path out of a piece of text.\n* Support for composite glyphs (accented letters).\n* Support for WOFF, OTF, TTF (both with TrueType `glyf` and PostScript `cff` outlines)\n* Support for kerning (Using GPOS or the kern table).\n* Support for ligatures.\n* Support for TrueType font hinting.\n* Support arabic text rendering (See issue #364 & PR #359 #361)\n* A low memory mode is available as an option (see #329)\n* Runs in the browser and Node.js.\n\nInstallation\n============\n\n### Using [npm](http://npmjs.org/) package manager\n\n    npm install opentype.js\n\n    var opentype = require(\'opentype.js\');\n\nNote: OpenType.js uses ES6-style imports, so if you want to edit it and debug it in Node.js run `npm run build` first and use `npm run watch` to automatically rebuild when files change.\n\n### Directly\n\n[Download the latest ZIP](https://github.com/opentypejs/opentype.js/archive/master.zip) and grab the files in the `dist`\nfolder. These are compiled.\n\n### Using via a CDN\n\nTo use via a CDN, include the following code in your html:\n\n    <script src="https://cdn.jsdelivr.net/npm/opentype.js@latest/dist/opentype.min.js"></script>\n\n### Using Bower (Deprecated [see official post](https://bower.io/blog/2017/how-to-migrate-away-from-bower/))\n\nTo install using [Bower](https://bower.io/), enter the following command in your project directory:\n\n    bower install opentype.js\n\nYou can then include them in your scripts using:\n\n    <script src="/bower_components/opentype.js/dist/opentype.js"></script>\n\n\nAPI\n===\n### Loading a font\n![OpenType.js example Hello World](https://raw.github.com/opentypejs/opentype.js/master/g/hello-world.png)\n\nUse `opentype.load(url, callback)` to load a font from a URL. Since this method goes out the network, it is asynchronous.\nThe callback gets `(err, font)` where `font` is a `Font` object. Check if the `err` is null before using the font.\n```javascript\nopentype.load(\'fonts/Roboto-Black.ttf\', function(err, font) {\n    if (err) {\n        alert(\'Font could not be loaded: \' + err);\n    } else {\n        // Now let\'s display it on a canvas with id "canvas"\n        var ctx = document.getElementById(\'canvas\').getContext(\'2d\');\n\n        // Construct a Path object containing the letter shapes of the given text.\n        // The other parameters are x, y and fontSize.\n        // Note that y is the position of the baseline.\n        var path = font.getPath(\'Hello, World!\', 0, 150, 72);\n\n        // If you just want to draw the text you can also use font.draw(ctx, text, x, y, fontSize).\n        path.draw(ctx);\n    }\n});\n```\n\nYou can also use `es6 async/await` syntax to load your fonts\n\n```javascript\nasync function make(){\n    const font = await opentype.load(\'fonts/Roboto-Black.ttf\');\n    const path = font.getPath(\'Hello, World!\', 0, 150, 72);\n    console.log(path);\n}\n```\n\nIf you already have an `ArrayBuffer`, you can use `opentype.parse(buffer)` to parse the buffer. This method always\nreturns a Font, but check `font.supported` to see if the font is in a supported format. (Fonts can be marked unsupported\nif they have encoding tables we can\'t read).\n\n    var font = opentype.parse(myBuffer);\n\n### Loading a font synchronously (Node.js)\nUse `opentype.loadSync(url)` to load a font from a file and return a `Font` object.\nThrows an error if the font could not be parsed. This only works in Node.js.\n\n    var font = opentype.loadSync(\'fonts/Roboto-Black.ttf\');\n\n### Writing a font\nOnce you have a `Font` object (either by using `opentype.load` or by creating a new one from scratch) you can write it\nback out as a binary file.\n\nIn the browser, you can use `Font.download()` to instruct the browser to download a binary .OTF file. The name is based\non the font name.\n```javascript\n// Create the b\xc3\xa9zier paths for each of the glyphs.\n// Note that the .notdef glyph is required.\nvar notdefGlyph = new opentype.Glyph({\n    name: \'.notdef\',\n    unicode: 0,\n    advanceWidth: 650,\n    path: new opentype.Path()\n});\n\nvar aPath = new opentype.Path();\naPath.moveTo(100, 0);\naPath.lineTo(100, 700);\n// more drawing instructions...\nvar aGlyph = new opentype.Glyph({\n    name: \'A\',\n    unicode: 65,\n    advanceWidth: 650,\n    path: aPath\n});\n\nvar glyphs = [notdefGlyph, aGlyph];\nvar font = new opentype.Font({\n    familyName: \'OpenTypeSans\',\n    styleName: \'Medium\',\n    unitsPerEm: 1000,\n    ascender: 800,\n    descender: -200,\n    glyphs: glyphs});\nfont.download();\n```\n\nIf you want to inspect the font, use `font.toTables()` to generate an object showing the data structures that map\ndirectly to binary values. If you want to get an `ArrayBuffer`, use `font.toArrayBuffer()`.\n\n\n### The Font object\nA Font represents a loaded OpenType font file. It contains a set of glyphs and methods to draw text on a drawing context, or to get a path representing the text.\n\n* `glyphs`: an indexed list of Glyph objects.\n* `unitsPerEm`: X/Y coordinates in fonts are stored as integers. This value determines the size of the grid. Common values are 2048 and 4096.\n* `ascender`: Distance from baseline of highest ascender. In font units, not pixels.\n* `descender`: Distance from baseline of lowest descender. In font units, not pixels.\n\n#### `Font.getPath(text, x, y, fontSize, options)`\nCreate a Path that represents the given text.\n* `x`: Horizontal position of the beginning of the text. (default: 0)\n* `y`: Vertical position of the *baseline* of the text. (default: 0)\n* `fontSize`: Size of the text in pixels (default: 72).\n\nOptions is an optional object containing:\n* `kerning`: if true takes kerning information into account (default: true)\n* `features`: an object with [OpenType feature tags](https://docs.microsoft.com/en-us/typography/opentype/spec/featuretags) as keys, and a boolean value to enable each feature.\nCurrently only ligature features "liga" and "rlig" are supported (default: true).\n* `hinting`: if true uses TrueType font hinting if available (default: false).\n\n_Note: there is also `Font.getPaths` with the same arguments which returns a list of Paths._\n\n#### `Font.draw(ctx, text, x, y, fontSize, options)`\nCreate a Path that represents the given text.\n* `ctx`: A 2D drawing context, like Canvas.\n* `x`: Horizontal position of the beginning of the text. (default: 0)\n* `y`: Vertical position of the *baseline* of the text. (default: 0)\n* `fontSize`: Size of the text in pixels (default: 72).\n\nOptions is an optional object containing:\n* `kerning`: if true takes kerning information into account (default: true)\n* `features`: an object with [OpenType feature tags](https://docs.microsoft.com/en-us/typography/opentype/spec/featuretags) as keys, and a boolean value to enable each feature.\nCurrently only ligature features "liga" and "rlig" are supported (default: true).\n* `hinting`: if true uses TrueType font hinting if available (default: false).\n\n#### `Font.drawPoints(ctx, text, x, y, fontSize, options)`\nDraw the points of all glyphs in the text. On-curve points will be drawn in blue, off-curve points will be drawn in red. The arguments are the same as `Font.draw`.\n\n#### `Font.drawMetrics(ctx, text, x, y, fontSize, options)`\nDraw lines indicating important font measurements for all glyphs in the text.\nBlack lines indicate the origin of the coordinate system (point 0,0).\nBlue lines indicate the glyph bounding box.\nGreen line indicates the advance width of the glyph.\n\n#### `Font.stringToGlyphs(string)`\nConvert the string to a list of glyph objects.\nNote that there is no strict 1-to-1 correspondence between the string and glyph list due to\npossible substitutions such as ligatures. The list of returned glyphs can be larger or smaller than the length of the given string.\n\n#### `Font.charToGlyph(char)`\nConvert the character to a `Glyph` object. Returns null if the glyph could not be found. Note that this function assumes that there is a one-to-one mapping between the given character and a glyph; for complex scripts this might not be the case.\n\n#### `Font.getKerningValue(leftGlyph, rightGlyph)`\nRetrieve the value of the [kerning pair](https://en.wikipedia.org/wiki/Kerning) between the left glyph (or its index) and the right glyph (or its index). If no kerning pair is found, return 0. The kerning value gets added to the advance width when calculating the spacing between glyphs.\n\n#### `Font.getAdvanceWidth(text, fontSize, options)`\nReturns the advance width of a text.\n\nThis is something different than Path.getBoundingBox() as for example a\nsuffixed whitespace increases the advancewidth but not the bounding box\nor an overhanging letter like a calligraphic \'f\' might have a quite larger\nbounding box than its advance width.\n\nThis corresponds to canvas2dContext.measureText(text).width\n* `fontSize`: Size of the text in pixels (default: 72).\n* `options`: See Font.getPath\n\n#### The Glyph object\nA Glyph is an individual mark that often corresponds to a character. Some glyphs, such as ligatures, are a combination of many characters. Glyphs are the basic building blocks of a font.\n\n* `font`: A reference to the `Font` object.\n* `name`: The glyph name (e.g. "Aring", "five")\n* `unicode`: The primary unicode value of this glyph (can be `undefined`).\n* `unicodes`: The list of unicode values for this glyph (most of the time this will be 1, can also be empty).\n* `index`: The index number of the glyph.\n* `advanceWidth`: The width to advance the pen when drawing this glyph.\n* `xMin`, `yMin`, `xMax`, `yMax`: The bounding box of the glyph.\n* `path`: The raw, unscaled path of the glyph.\n\n##### `Glyph.getPath(x, y, fontSize)`\nGet a scaled glyph Path object we can draw on a drawing context.\n* `x`: Horizontal position of the glyph. (default: 0)\n* `y`: Vertical position of the *baseline* of the glyph. (default: 0)\n* `fontSize`: Font size in pixels (default: 72).\n\n##### `Glyph.getBoundingBox()`\nCalculate the minimum bounding box for the unscaled path of the given glyph. Returns an `opentype.BoundingBox` object that contains x1/y1/x2/y2.\nIf the glyph has no points (e.g. a space character), all coordinates will be zero.\n\n##### `Glyph.draw(ctx, x, y, fontSize)`\nDraw the glyph on the given context.\n* `ctx`: The drawing context.\n* `x`: Horizontal position of the glyph. (default: 0)\n* `y`: Vertical position of the *baseline* of the glyph. (default: 0)\n* `fontSize`: Font size, in pixels (default: 72).\n\n##### `Glyph.drawPoints(ctx, x, y, fontSize)`\nDraw the points of the glyph on the given context.\nOn-curve points will be drawn in blue, off-curve points will be drawn in red.\nThe arguments are the same as `Glyph.draw`.\n\n##### `Glyph.drawMetrics(ctx, x, y, fontSize)`\nDraw lines indicating important font measurements for all glyphs in the text.\nBlack lines indicate the origin of the coordinate system (point 0,0).\nBlue lines indicate the glyph bounding box.\nGreen line indicates the advance width of the glyph.\nThe arguments are the same as `Glyph.draw`.\n\n### The Path object\nOnce you have a path through `Font.getPath` or `Glyph.getPath`, you can use it.\n\n* `commands`: The path commands. Each command is a dictionary containing a type and coordinates. See below for examples.\n* `fill`: The fill color of the `Path`. Color is a string representing a [CSS color](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value). (default: \'black\')\n* `stroke`: The stroke color of the `Path`. Color is a string representing a [CSS color](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value). (default: `null`: the path will not be stroked)\n* `strokeWidth`: The line thickness of the `Path`. (default: 1, but since the `stroke` is null no stroke will be drawn)\n\n##### `Path.draw(ctx)`\nDraw the path on the given 2D context. This uses the `fill`, `stroke` and `strokeWidth` properties of the `Path` object.\n* `ctx`: The drawing context.\n\n##### `Path.getBoundingBox()`\nCalculate the minimum bounding box for the given path. Returns an `opentype.BoundingBox` object that contains x1/y1/x2/y2.\nIf the path is empty (e.g. a space character), all coordinates will be zero.\n\n##### `Path.toPathData(decimalPlaces)`\nConvert the Path to a string of path data instructions.\nSee https://www.w3.org/TR/SVG/paths.html#PathData\n* `decimalPlaces`: The amount of decimal places for floating-point values. (default: 2)\n\n##### `Path.toSVG(decimalPlaces)`\nConvert the path to a SVG &lt;path&gt; element, as a string.\n* `decimalPlaces`: The amount of decimal places for floating-point values. (default: 2)\n\n#### Path commands\n* **Move To**: Move to a new position. This creates a new contour. Example: `{type: \'M\', x: 100, y: 200}`\n* **Line To**: Draw a line from the previous position to the given coordinate. Example: `{type: \'L\', x: 100, y: 200}`\n* **Curve To**: Draw a b\xc3\xa9zier curve from the current position to the given coordinate. Example: `{type: \'C\', x1: 0, y1: 50, x2: 100, y2: 200, x: 100, y: 200}`\n* **Quad To**: Draw a quadratic b\xc3\xa9zier curve from the current position to the given coordinate. Example: `{type: \'Q\', x1: 0, y1: 50, x: 100, y: 200}`\n* **Close**: Close the path. If stroked, this will draw a line from the first to the last point of the contour. Example: `{type: \'Z\'}`\n\n\n## Versioning\n\nWe use [SemVer](https://semver.org/) for versioning.\n\n\n## License\n\nMIT\n\n\nThanks\n======\nI would like to acknowledge the work of others without which opentype.js wouldn\'t be possible:\n\n* [pdf.js](https://mozilla.github.io/pdf.js/): for an awesome implementation of font parsing in the browser.\n* [FreeType](https://www.freetype.org/): for the nitty-gritty details and filling in the gaps when the spec was incomplete.\n* [ttf.js](https://ynakajima.github.io/ttf.js/demo/glyflist/): for hints about the TrueType parsing code.\n* [CFF-glyphlet-fonts](https://pomax.github.io/CFF-glyphlet-fonts/): for a great explanation/implementation of CFF font writing.\n* [tiny-inflate](https://github.com/foliojs/tiny-inflate): for WOFF decompression.\n* [Microsoft Typography](https://docs.microsoft.com/en-us/typography/opentype/spec/otff): the go-to reference for all things OpenType.\n* [Adobe Compact Font Format spec](http://download.microsoft.com/download/8/0/1/801a191c-029d-4af3-9642-555f6fe514ee/cff.pdf) and the [Adobe Type 2 Charstring spec](http://download.microsoft.com/download/8/0/1/801a191c-029d-4af3-9642-555f6fe514ee/type2.pdf): explains the data structures and commands for the CFF glyph format.\n* All contributing authors mentioned in the [AUTHORS](https://github.com/opentypejs/opentype.js/blob/master/AUTHORS.md) file.\n'